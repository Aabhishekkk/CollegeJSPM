{
  "version": 3,
  "sources": ["../src/index.ts", "../src/decorators/index.ts", "../src/interfaces/ibooleanvalue.ts", "../src/interfaces/idoublevalue.ts", "../src/interfaces/idialog.ts", "../src/interfaces/ieditdialog.ts", "../src/interfaces/igeteditvalue.ts", "../src/interfaces/ireadonly.ts", "../src/interfaces/iseteditvalue.ts", "../src/interfaces/istringvalue.ts", "../src/interfaces/ivalidaterequired.ts", "../src/types/captureoperationtype.ts", "../src/types/reflectionutils.ts", "../src/types/dialogtyperegistry.ts", "../src/types/commontyperegistry.ts", "../src/types/editortyperegistry.ts", "../src/globals/jquery-module.ts", "../src/patch/jquerypatch.ts", "../src/ui/widgets/widget.ts", "../src/types/enumtyperegistry.ts", "../src/ui/datagrid/islickformatter.ts", "../src/ui/helpers/lazyloadhelper.ts", "../src/ui/widgets/prefixedcontext.ts", "../src/ui/widgets/toolbar.ts", "../src/ui/widgets/templatedwidget.ts", "../src/ui/dialogs/templateddialog.ts", "../src/ui/widgets/flexify.ts", "../src/ui/dialogs/dialogextensions.ts", "../src/globals/jquery.validation-module.ts", "../src/ui/widgets/templatedpanel.ts", "../src/ui/helpers/validationhelper.ts", "../src/ui/editors/cascadedwidgetlink.ts", "../src/ui/helpers/tabsextensions.ts", "../src/ui/widgets/reflectionoptionssetter.ts", "../src/ui/widgets/propertygrid.ts", "../src/ui/editors/editorutils.ts", "../src/ui/widgets/propertypanel.ts", "../src/ui/helpers/subdialoghelper.ts", "../src/ui/dialogs/propertydialog.ts", "../src/ui/editors/stringeditor.ts", "../src/ui/editors/passwordeditor.ts", "../src/ui/editors/textareaeditor.ts", "../src/ui/editors/booleaneditor.ts", "../src/ui/editors/decimaleditor.ts", "../src/ui/editors/integereditor.ts", "../src/ui/editors/dateeditor.ts", "../src/ui/editors/datetimeeditor.ts", "../src/ui/editors/timeeditor.ts", "../src/ui/editors/emaileditor.ts", "../src/ui/editors/emailaddresseditor.ts", "../src/ui/editors/urleditor.ts", "../src/ui/editors/radiobuttoneditor.ts", "../src/globals/select2-module.ts", "../src/ui/editors/select2editor.ts", "../src/ui/editors/selecteditor.ts", "../src/ui/editors/dateyeareditor.ts", "../src/ui/editors/enumeditor.ts", "../src/ui/editors/lookupeditor.ts", "../src/ui/editors/servicelookupeditor.ts", "../src/ui/editors/htmlcontenteditor.ts", "../src/ui/editors/maskededitor.ts", "../src/ui/editors/recaptcha.ts", "../src/ui/helpers/uploadhelper.ts", "../src/ui/editors/uploadeditors.ts", "../src/ui/datagrid/quickfilterbar.ts", "../src/ui/datagrid/quicksearchinput.ts", "../src/ui/filtering/filteroperator.ts", "../src/ui/filtering/filterstore.ts", "../src/ui/filtering/filtering.ts", "../src/ui/filtering/filterwidgetbase.ts", "../src/ui/filtering/filterpanel.ts", "../src/ui/filtering/filterdialog.ts", "../src/ui/filtering/filterdisplaybar.ts", "../src/ui/datagrid/slickpager.ts", "../src/ui/helpers/slickhelpers.ts", "../src/ui/formatters/formatters.ts", "../src/types/formattertyperegistry.ts", "../src/ui/datagrid/datagrid.ts", "../src/ui/datagrid/columnpickerdialog.ts", "../src/ui/datagrid/treegridmixin.ts", "../src/ui/editors/checktreeeditor.ts", "../src/ui/datagrid/entitygrid.ts", "../src/ui/dialogs/entitydialog.ts", "../src/ui/widgets/jsx.ts", "../src/ui/widgets/reporting.ts", "../src/ui/widgets/scriptcontext.ts", "../src/interfaces/iasyncinit.ts", "../src/ui/widgets/wx.ts", "../src/ui/widgets/googlemap.ts", "../src/ui/editors/select2ajaxeditor.ts"],
  "sourcesContent": ["\uFEFF/** \n * \n * This is the main entry point for `@serenity-is/corelib` package.\n * \n * The types from this module are available by importing from \"@serenity-is/corelib\":\n * \n * ```ts\n * import { EntityGrid } from \"serenity-is/corelib\"\n * \n * export class MyGrid extends EntityGrid<MyRow, any> {\n * }\n * ```\n *   \n * > When using classic namespaces instead of the ESM modules, the types and functions in this module are directly available from the global `Serenity` namespace.\n * > e.g. `Serenity.EntityGrid`\n * @packageDocumentation\n * @module corelib\n */\n\nexport * from \"./globals/select2-globals\"\nexport * from \"./globals/jquery-globals\"\nexport * from \"./globals/jquery.validation-globals\"\n\nexport type { ServiceError, ServiceResponse, ServiceRequest, ServiceOptions, SaveRequest, SaveRequestWithAttachment, SaveResponse, SaveWithLocalizationRequest, DeleteRequest, DeleteResponse, UndeleteRequest, UndeleteResponse, ListRequest, ListResponse, RetrieveRequest, RetrieveResponse, RetrieveLocalizationRequest, RetrieveLocalizationResponse, PropertyItem, PropertyItemsData } from \"@serenity-is/corelib/q\";\nexport { ColumnSelection, RetrieveColumnSelection, SummaryType, Criteria } from \"@serenity-is/corelib/q\";\n\nexport * from \"./interfaces\";\nexport * from \"./types\";\nexport * from \"./ui/datagrid/irowdefinition\";\nexport * from \"./ui/datagrid/islickformatter\";\nexport * from \"./decorators\";\nexport * from \"./ui/helpers/lazyloadhelper\";\nexport * from \"./ui/widgets/prefixedcontext\";\nexport * from \"./ui/widgets/widget\";\nexport * from \"./ui/widgets/jquerywidgetfn\";\nexport * from \"./ui/widgets/toolbar\";\nexport * from \"./ui/widgets/templatedwidget\";\nexport * from \"./ui/dialogs/templateddialog\";\nexport * from \"./ui/widgets/templatedpanel\";\nexport * from \"./ui/helpers/validationhelper\";\nexport * from \"./ui/editors/cascadedwidgetlink\";\nexport * from \"./ui/helpers/tabsextensions\";\nexport * from \"./ui/widgets/reflectionoptionssetter\";\nexport * from \"./ui/widgets/propertygrid\";\nexport * from \"./ui/widgets/propertypanel\";\nexport * from \"./ui/helpers/subdialoghelper\";\nexport * from \"./ui/dialogs/dialogextensions\";\nexport * from \"./ui/dialogs/propertydialog\";\nexport * from \"./ui/editors/editorutils\";\nexport * from \"./ui/editors/stringeditor\";\nexport * from \"./ui/editors/passwordeditor\";\nexport * from \"./ui/editors/textareaeditor\";\nexport * from \"./ui/editors/booleaneditor\";\nexport * from \"./ui/editors/decimaleditor\";\nexport * from \"./ui/editors/integereditor\";\nexport * from \"./ui/editors/dateeditor\";\nexport * from \"./ui/editors/datetimeeditor\";\nexport * from \"./ui/editors/timeeditor\";\nexport * from \"./ui/editors/emaileditor\";\nexport * from \"./ui/editors/emailaddresseditor\";\nexport * from \"./ui/editors/urleditor\";\nexport * from \"./ui/editors/radiobuttoneditor\";\nexport * from \"./ui/editors/select2editor\";\nexport * from \"./ui/editors/selecteditor\";\nexport * from \"./ui/editors/dateyeareditor\";\nexport * from \"./ui/editors/enumeditor\";\nexport * from \"./ui/editors/lookupeditor\";\nexport * from \"./ui/editors/servicelookupeditor\";\nexport * from \"./ui/editors/htmlcontenteditor\";\nexport * from \"./ui/editors/maskededitor\";\nexport * from \"./ui/editors/recaptcha\";\nexport * from \"./ui/helpers/uploadhelper\";\nexport * from \"./ui/editors/uploadeditors\";\nexport * from \"./ui/datagrid/quickfilter\";\nexport * from \"./ui/datagrid/quickfilterbar\";\nexport * from \"./ui/datagrid/quicksearchinput\";\nexport * from \"./ui/filtering/filteroperator\";\nexport * from \"./ui/filtering/filterline\";\nexport * from \"./ui/filtering/filterstore\";\nexport * from \"./ui/filtering/filtering\";\nexport * from \"./ui/filtering/filterwidgetbase\";\nexport * from \"./ui/filtering/filterpanel\";\nexport * from \"./ui/filtering/filterdialog\";\nexport * from \"./ui/filtering/filterdisplaybar\";\nexport * from \"./ui/datagrid/slickpager\";\nexport * from \"./ui/datagrid/idatagrid\";\nexport * from \"./ui/helpers/slickhelpers\";\nexport * from \"./ui/formatters/formatters\";\nexport * from \"./types/formattertyperegistry\";\nexport * from \"./ui/datagrid/datagrid\";\nexport * from \"./ui/datagrid/columnpickerdialog\";\nexport * from \"./ui/datagrid/treegridmixin\";\nexport * from \"./ui/editors/checktreeeditor\";\nexport * from \"./ui/datagrid/entitygrid\";\nexport * from \"./ui/dialogs/entitydialog\";\nexport * from \"./ui/widgets/jsx\";\n\n// legacy\nexport * from \"./ui/widgets/reporting\";\nexport * from \"./ui/widgets/scriptcontext\";\nexport * from \"./interfaces/iasyncinit\";\nexport * from \"./ui/widgets/wx\";\nexport * from \"./ui/widgets/flexify\";\nexport * from \"./ui/widgets/googlemap\";\nexport * from \"./ui/editors/select2ajaxeditor\";\n\nexport type Constructor<T> = new (...args: any[]) => T;", "import {\n    addAttribute, addTypeMember, MemberType, ISlickFormatter,\n    registerClass as regClass, registerEditor as regEditor, registerInterface as regIntf, registerEnum as regEnum,\n    startsWith,\n    EditorAttribute\n} from \"@serenity-is/corelib/q\";\n\nfunction Attr(name: string) {\n    return function (target: Function) {\n        return regClass(target, 'Serenity.' + name + 'Attribute');\n    }\n}\n\n@Attr('EnumKey')\nexport class EnumKeyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('DisplayName')\nexport class DisplayNameAttribute {\n    constructor(public displayName: string) {\n    }\n}\n\n@Attr('Category')\nexport class CategoryAttribute {\n    constructor(public category: string) {\n    }\n}\n\n@Attr('ColumnsKey')\nexport class ColumnsKeyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('CssClass')\nexport class CssClassAttribute {\n    constructor(public cssClass: string) {\n    }\n}\n\n@Attr('DefaultValue')\nexport class DefaultValueAttribute {\n    constructor(public value: any) {\n    }\n}\n\n@Attr('DialogType')\nexport class DialogTypeAttribute {\n    constructor(public value: any) {\n    }\n}\n\n@Attr('EditorOption')\nexport class EditorOptionAttribute {\n    constructor(public key: string, public value: any) {\n    }\n}\n\nexport class EditorTypeAttributeBase {\n    constructor(public editorType: string) {\n    }\n\n    public setParams(editorParams: any): void {\n    }\n}\n\nregClass(EditorTypeAttributeBase, 'Serenity.EditorTypeAttributeBase');\n\n@Attr('EditorType')\nexport class EditorTypeAttribute extends EditorTypeAttributeBase {\n    constructor(editorType: string) {\n        super(editorType);\n    }\n}\n\n@Attr('Element')\nexport class ElementAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('EntityType')\nexport class EntityTypeAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('Filterable')\nexport class FilterableAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('Flexify')\nexport class FlexifyAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('FormKey')\nexport class FormKeyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('GeneratedCode')\nexport class GeneratedCodeAttribute {\n    constructor(public origin?: string) {\n    }\n}\n\n@Attr('Hidden')\nexport class HiddenAttribute {\n    constructor() {\n    }\n}\n\n@Attr('Hint')\nexport class HintAttribute {\n    constructor(public hint: string) {\n    }\n}\n\n@Attr('IdProperty')\nexport class IdPropertyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('Insertable')\nexport class InsertableAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('IsActiveProperty')\nexport class IsActivePropertyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('ItemName')\nexport class ItemNameAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('LocalTextPrefix')\nexport class LocalTextPrefixAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('Maximizable')\nexport class MaximizableAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('MaxLength')\nexport class MaxLengthAttribute {\n    constructor(public maxLength: number) {\n    }\n}\n\n@Attr('NameProperty')\nexport class NamePropertyAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('OneWay')\nexport class OneWayAttribute {\n}\n\n@Attr('Option')\nexport class OptionAttribute {\n}\n\n@Attr('OptionsType')\nexport class OptionsTypeAttribute {\n    constructor(public value: Function) {\n    }\n}\n\n@Attr('Panel')\nexport class PanelAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('Placeholder')\nexport class PlaceholderAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('ReadOnly')\nexport class ReadOnlyAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('Required')\nexport class RequiredAttribute {\n    constructor(public isRequired = true) {\n    }\n}\n\n@Attr('Resizable')\nexport class ResizableAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('Responsive')\nexport class ResponsiveAttribute {\n    constructor(public value = true) {\n    }\n}\n\n@Attr('Service')\nexport class ServiceAttribute {\n    constructor(public value: string) {\n    }\n}\n\n@Attr('Updatable')\nexport class UpdatableAttribute {\n    constructor(public value = true) {\n    }\n}\n\nexport namespace Decorators {\n\n    export function registerClass(nameOrIntf?: string | any[], intf2?: any[]) {\n        return function (target: Function) {\n            if (typeof nameOrIntf == \"string\")\n                regClass(target, nameOrIntf, intf2);\n            else\n                regClass(target, null, nameOrIntf);\n        }\n    }\n\n    export function registerInterface(nameOrIntf?: string | any[], intf2?: any[]) {\n        return function (target: Function) {\n\n            if (typeof nameOrIntf == \"string\")\n                regIntf(target, nameOrIntf, intf2);\n            else\n                regIntf(target, null, nameOrIntf);\n        }\n    }\n\n    export function registerEditor(nameOrIntf?: string | any[], intf2?: any[]) {\n        return function (target: Function) {\n            if (typeof nameOrIntf == \"string\")\n                regEditor(target, nameOrIntf, intf2);\n            else\n                regEditor(target, null, nameOrIntf);\n        }\n    }\n\n    export function registerEnum(target: any, enumKey?: string, name?: string) {\n        regEnum(target, name, enumKey);\n        if (enumKey)\n            addAttribute(target, new EnumKeyAttribute(enumKey));\n    }\n\n    export function registerEnumType(target: any, name?: string, enumKey?: string) {\n        registerEnum(target, enumKey ?? name, name);\n    }\n\n    export function registerFormatter(nameOrIntf: string | any[] = [ISlickFormatter],\n        intf2: any[] = [ISlickFormatter]) {\n        return registerClass(nameOrIntf, intf2);\n    }\n\n    export function enumKey(value: string) {\n        return function (target: Function) {\n            addAttribute(target, new EnumKeyAttribute(value));\n        }\n    }\n\n    export function option() {\n        return function (target: Object, propertyKey: string): void {\n\n            var isGetSet = startsWith(propertyKey, 'get_') || startsWith(propertyKey, 'set_');\n            var memberName = isGetSet ? propertyKey.substr(4) : propertyKey;\n\n            addTypeMember(target.constructor, {\n                name: memberName,\n                attr: [new OptionAttribute()],\n                type: isGetSet ? MemberType.property : MemberType.field,\n                getter: isGetSet ? ('get_' + memberName) : null,\n                setter: isGetSet ? ('set_' + memberName) : null\n            });\n        }\n    }\n\n    export function dialogType(value: any) {\n        return function (target: Function) {\n            addAttribute(target, new DialogTypeAttribute(value));\n        }\n    }\n\n    export function editor() {\n        return function (target: Function) {\n            var attr = new EditorAttribute();\n            addAttribute(target, attr);\n        }\n    }\n\n    export function element(value: string) {\n        return function (target: Function) {\n            addAttribute(target, new ElementAttribute(value));\n        }\n    }\n\n    export function filterable(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new FilterableAttribute(value));\n        }\n    }\n\n    export function flexify(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new FlexifyAttribute(value));\n        }\n    }\n\n    export function itemName(value: string) {\n        return function (target: Function) {\n            addAttribute(target, new ItemNameAttribute(value));\n        }\n    }\n\n    export function maximizable(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new MaximizableAttribute(value));\n        }\n    }\n\n    export function optionsType(value: Function) {\n        return function (target: Function) {\n            addAttribute(target, new OptionsTypeAttribute(value));\n        }\n    }\n\n    export function panel(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new PanelAttribute(value));\n        }\n    }\n\n    export function resizable(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new ResizableAttribute(value));\n        }\n    }\n\n    export function responsive(value = true) {\n        return function (target: Function) {\n            addAttribute(target, new ResponsiveAttribute(value));\n        }\n    }\n\n    export function service(value: string) {\n        return function (target: Function) {\n            addAttribute(target, new ServiceAttribute(value));\n        }\n    }\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface(\"Serenity.IBooleanValue\")\nexport class IBooleanValue {\n}\n\nexport interface IBooleanValue {\n    get_value(): boolean;\n    set_value(value: boolean): void;\n}\n", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface(\"Serenity.IDoubleValue\")\nexport class IDoubleValue {\n}\n\nexport interface IDoubleValue {\n    get_value(): any;\n    set_value(value: any): void;\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface('Serenity.IDialog')\nexport class IDialog {\n}\n\nexport interface IDialog {\n    dialogOpen(asPanel?: boolean): void;\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface('Serenity.IEditDialog')\nexport class IEditDialog {\n}\n\nexport interface IEditDialog {\n    load(entityOrId: any, done: () => void, fail?: (p1: any) => void): void;\n}\n", "\uFEFFimport { Decorators } from \"../decorators\";\nimport { PropertyItem } from \"@serenity-is/corelib/q\";\n\n@Decorators.registerInterface(\"Serenity.IGetEditValue\")\nexport class IGetEditValue {\n}\n\nexport interface IGetEditValue {\n    getEditValue(property: PropertyItem, target: any): void;\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\nexport interface IReadOnly {\n    get_readOnly(): boolean;\n    set_readOnly(value: boolean): void;\n}\n\n@Decorators.registerInterface('Serenity.IReadOnly')\nexport class IReadOnly {\n}\n", "\uFEFFimport { Decorators } from \"../decorators\";\nimport { PropertyItem } from \"@serenity-is/corelib/q\";\n\n@Decorators.registerInterface(\"Serenity.ISetEditValue\")\nexport class ISetEditValue {\n}\n\nexport interface ISetEditValue {\n    setEditValue(source: any, property: PropertyItem): void;\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface(\"Serenity.IStringValue\")\nexport class IStringValue {\n}\n\nexport interface IStringValue {\n    get_value(): string;\n    set_value(value: string): void;\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\nexport interface IValidateRequired {\n    get_required(): boolean;\n    set_required(value: boolean): void;\n}\n\n@Decorators.registerInterface('Serenity.IValidateRequired')\nexport class IValidateRequired {\n}", "\uFEFFimport { registerEnum } from \"@serenity-is/corelib/q\";\n\nexport {}\n\nexport enum CaptureOperationType {\n    Before = 0,\n    Delete = 1,\n    Insert = 2,\n    Update = 3\n}\n\nregisterEnum(CaptureOperationType, 'Serenity.CaptureOperationType');", "\uFEFFimport { isEmptyOrNull } from \"@serenity-is/corelib/q\";\n\nexport namespace ReflectionUtils {\n\n    export function getPropertyValue(o: any, property: string): any {\n        var d = o;\n        var getter = d['get_' + property];\n        if (!!!(typeof (getter) === 'undefined')) {\n            return getter.apply(o);\n        }\n        var camelCase = makeCamelCase(property);\n        getter = d['get_' + camelCase];\n        if (!!!(typeof (getter) === 'undefined')) {\n            return getter.apply(o);\n        }\n        return d[camelCase];\n    }\n\n    export function setPropertyValue(o: any, property: string, value: any): void {\n        var d = o;\n        var setter = d['set_' + property];\n        if (!!!(typeof (setter) === 'undefined')) {\n            setter.apply(o, [value]);\n            return;\n        }\n        var camelCase = makeCamelCase(property);\n        setter = d['set_' + camelCase];\n        if (!!!(typeof (setter) === 'undefined')) {\n            setter.apply(o, [value]);\n            return;\n        }\n        d[camelCase] = value;\n    }\n\n    export function makeCamelCase(s: string): string {\n        if (isEmptyOrNull(s)) {\n            return s;\n        }\n\n        if (s === 'ID') {\n            return 'id';\n        }\n\n        var hasNonUppercase = false;\n        var numUppercaseChars = 0;\n        for (var index = 0; index < s.length; index++) {\n            if (s.charCodeAt(index) >= 65 && s.charCodeAt(index) <= 90) {\n                numUppercaseChars++;\n            }\n            else {\n                hasNonUppercase = true;\n                break;\n            }\n        }\n\n        if (!hasNonUppercase && s.length !== 1 || numUppercaseChars === 0) {\n            return s;\n        }\n        else if (numUppercaseChars > 1) {\n            return s.substr(0, numUppercaseChars - 1).toLowerCase() + s.substr(numUppercaseChars - 1);\n        }\n        else if (s.length === 1) {\n            return s.toLowerCase();\n        }\n        else {\n            return s.substr(0, 1).toLowerCase() + s.substr(1);\n        }\n    }\n}", "\uFEFFimport { ArgumentNullException, Exception, htmlEncode, isAssignableFrom, isEmptyOrNull, notifyError } from \"@serenity-is/corelib/q\";\nimport { IDialog } from \"../interfaces\";\nimport { commonTypeRegistry } from \"./commontyperegistry\";\n\nexport namespace DialogTypeRegistry {\n\n    let registry = commonTypeRegistry(\n        type => isAssignableFrom(IDialog, type),\n        null, \"Dialog\");\n\n    export function get(key: string): any {\n\n        if (isEmptyOrNull(key))\n            throw new ArgumentNullException('key');\n\n        var type = registry.tryGet(key);\n\n        if (type)\n            return type;\n\n        var message = `\"${htmlEncode(key)}\" dialog class not found! \nMake sure there is such a dialog type under the project root namespace, \nand its namespace parts start with capital letters like MyProject.MyModule.MyDialog.\n\nIf using ES modules, make sure the dialog type has a decorator like \n@Decorators.registerClass('MyProject.MyModule.MyDialog') with the full name\nand \"side-effect-import\" this dialog class from the current \n\"page.ts/grid.ts/dialog.ts file (import \"./path/to/MyDialog.ts\").\n\nIf you had this error from an editor with the InplaceAdd option, verify that the lookup key\nand dialog type name match case-sensitively, excluding the Dialog suffix.\nSpecify the DialogType property in the LookupEditor attribute if it is not.\n\nAfter applying fixes, build and run \"node ./tsbuild.js\" (or \"tsc\" if using namespaces) \nfrom the project folder.`;\n\n        notifyError(message.replace(/\\r?\\n\\r?\\n/g, '<br/><br/>'), '', { escapeHtml: false, timeOut: 5000 });\n        throw new Exception(message);\n    }\n\n    export function reset() {\n        registry.reset();\n    }\n\n    export function tryGet(key: string) {\n        return registry.tryGet(key);\n    }\n}", "\uFEFFimport { Config, endsWith, getType, getTypeNameProp, getTypes } from \"@serenity-is/corelib/q\";\n\nexport function commonTypeRegistry(isMatch: (type: any) => boolean, attrKey: (type: any) => string, suffix: string) {\n\n    let knownTypes: { [key: string]: any };\n\n    function reset() {\n        knownTypes = null;\n    }\n    \n    function search(key: string) {\n        var type = getType(key);\n        if (type != null && isMatch(type))\n            return type;\n\n        for (var ns of Config.rootNamespaces) {\n            var k = ns + \".\" + key;\n            type = knownTypes[k];\n            if (type)\n                return type;\n\n            type = getType(ns + '.' + key);\n            if (type != null && isMatch(type))\n                return type;\n        }\n    }\n\n    function init() {\n        knownTypes = {};\n        for (var type of getTypes()) {\n            if (!isMatch(type))\n                continue;\n\n            var fullName = getTypeNameProp(type);\n            knownTypes[fullName] = type;\n\n            var akey = attrKey && attrKey(type);\n            if (akey && akey !== fullName)\n                knownTypes[akey] = type;\n        }\n\n        if (suffix) {\n            for (var key of Object.keys(knownTypes)) {\n                if (key.endsWith(suffix)) {\n                    var p = key.substring(0, key.length - suffix.length);\n                    if (p && !knownTypes[p])\n                        knownTypes[p] = knownTypes[key];\n                }\n            }\n        }\n    }\n    \n    function tryGet(key: string): any {\n        if (!key)\n            return null;\n\n        var type;\n        if (knownTypes == null)\n            init();\n\n        var type = knownTypes[key];\n        if (type)\n            return type;\n\n        type = search(key);\n\n        if (type == null && suffix && !endsWith(key, suffix))\n            type = knownTypes[key + suffix] ?? search(key + suffix);\n\n        if (type) {\n            knownTypes[key] = type;\n\n            var akey = attrKey && attrKey(type);\n            if (akey && key != akey)\n                knownTypes[akey] = type;\n\n            if (suffix && key.endsWith(suffix)) {\n                var p = key.substring(0, key.length - suffix.length);\n                if (p && !knownTypes[p])\n                    knownTypes[p] = knownTypes[key];\n            }\n\n            return type;\n        }\n\n        return type;\n    }\n\n    return {\n        reset,\n        tryGet\n    }\n}", "\uFEFFimport { ArgumentNullException, EditorAttribute, Exception, getAttributes, htmlEncode, isAssignableFrom, isEmptyOrNull, notifyError } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../ui/widgets/widget\";\nimport { commonTypeRegistry } from \"./commontyperegistry\";\n\nlet knownTypes: { [key: string] : any };\n\nexport namespace EditorTypeRegistry {\n    \n    let registry = commonTypeRegistry(\n        type => !!getAttributes(type, EditorAttribute).length || isAssignableFrom(Widget, type), \n        null, \"Editor\");\n\n    export function get(key: string): any {\n        if (isEmptyOrNull(key)) \n            throw new ArgumentNullException('key');\n        \n        var type = registry.tryGet(key);\n        if (type)\n            return type;\n\n        var message = `\"${htmlEncode(key)}\" editor class not found! \nMake sure there is such a editor type under the project root namespace,\nand its namespace parts start with capital letters like MyProject.MyModule.MyEditor.\n\nIf using ES modules, make sure the editor type has a decorator like \n@Decorators.registerEditor('MyProject.MyModule.MyFormatter') with the full name \nand \"side-effect-import\" this editor class from the current \n\"page.ts/grid.ts/dialog.ts file (import \"./path/to/MyEditor.ts\").\n\nAfter applying fixes, build and run \"node ./tsbuild.js\" (or \"tsc\" if using namespaces) \nfrom the project folder.`;\n\n        notifyError(message.replace(/\\r?\\n\\r?\\n/g, '<br/><br/>'), '', { escapeHtml: false, timeOut: 5000 });\n        throw new Exception(message);\n    }\n\n    export function reset() {\n        registry.reset();\n    }\n\n    export function tryGet(key: string) {\n        return registry.tryGet(key);\n    }\n}", "\uFEFF/// <reference types=\"jquery\" />\nconst $: JQueryStatic = typeof jQuery === \"function\" ? jQuery : typeof globalThis.$ === \"function\" ? globalThis.$ :\n    typeof window !== \"undefined\" ? (window.jQuery ?? window.$) : undefined;\n\nexport default $;", "\uFEFFexport function jQueryPatch($: any) {\n    \n    function applyJQueryUIFixes(): boolean {\n        if (typeof $ == \"undefined\" || !$.ui || !$.ui.dialog || !$.ui.dialog.prototype)\n            return false;\n            \n        $.ui.dialog.prototype._allowInteraction = function (event: any) {\n            if ($(event.target).closest(\".ui-dialog\").length) {\n                return true;\n            }\n            return !!$(event.target).closest(\".ui-datepicker, .select2-drop, .cke, .cke_dialog, .modal, #support-modal\").length;\n        };\n\n        (function (orig) {\n            $.ui.dialog.prototype._focusTabbable = function () {\n                if ($(document.documentElement).hasClass('mobile-device')) {\n                    this.uiDialog && this.uiDialog.focus();\n                    return;\n                }\n                orig.call(this);\n            }\n        })($.ui.dialog.prototype._focusTabbable);\n\n        (function (orig) {\n            $.ui.dialog.prototype._createTitlebar = function () {\n                orig.call(this);\n                this.uiDialogTitlebar.find('.ui-dialog-titlebar-close').html('<i class=\"fa fa-times\" />');\n            }\n        })($.ui.dialog.prototype._createTitlebar);\n    }\n\n    !applyJQueryUIFixes() && typeof $ !== \"undefined\" && $.fn && $(applyJQueryUIFixes);\n\n    if (typeof $ !== \"undefined\" && $.fn) {\n\n        // for backward compatibility\n        if (!$.toJSON)\n            $.toJSON = JSON.stringify;\n        if (!$.parseJSON)\n            $.parseJSON = JSON.parse;\n\n        ($ as any).cleanData = (function (orig) {\n            return function (elems: any[]) {\n                var events, elem, i, e;\n                var cloned = elems;\n                for (i = 0; (elem = cloned[i]) != null; i++) {\n                    try {\n                        events = ($ as any)._data(elem, \"events\");\n                        if (events && events.remove) {\n                            // html collection might change during remove event, so clone it!\n                            if (cloned === elems)\n                                cloned = Array.prototype.slice.call(elems);\n                            $(elem).triggerHandler(\"remove\");\n                            delete events.remove;\n                        }\n                    } catch (e) { }\n                }\n                orig(elems);\n            };\n        })(($ as any).cleanData);\n    }\n}", "\uFEFFimport $ from \"@optionaldeps/jquery\";\nimport { jQueryPatch } from \"../../patch/jquerypatch\";\nimport { Decorators, ElementAttribute } from \"../../decorators\";\nimport { IDialog } from \"../../interfaces\";\nimport { addValidationRule as addValRule, ArgumentNullException, Config, Exception, format, getAttributes, getInstanceType, getTypeFullName, getTypeShortName, isAssignableFrom, notifyError, replaceAll, startsWith } from \"@serenity-is/corelib/q\";\n\nexport interface WidgetClass<TOptions = object> {\n    new(element: JQuery, options?: TOptions): Widget<TOptions>;\n    element: JQuery;\n}\n\nexport interface WidgetDialogClass<TOptions = object> {\n    new(options?: TOptions): Widget<TOptions> & IDialog;\n    element: JQuery;\n}\n\nexport type AnyWidgetClass<TOptions = object> = WidgetClass<TOptions> | WidgetDialogClass<TOptions>;\n\nexport function reactPatch() {\n    // @ts-ignore check for global\n    let globalObj: any = typeof (global) !== \"undefined\" ? global : (typeof (window) !== \"undefined\" ? window : (typeof (self) !== \"undefined\" ? self : null));\n\n    // @ts-ignore\n    if (typeof React === \"undefined\" && typeof globalObj !== \"undefined\") {\n        if (globalObj['preact'] != null) {\n            globalObj['React'] = globalObj['ReactDOM'] = globalObj['preact'];\n            // @ts-ignore\n            (React as any).Fragment = (React as any).Fragment ?? \"x-fragment\";\n        }\n        else if (globalObj['Nerv'] != null) {\n            globalObj['React'] = globalObj['ReactDOM'] = globalObj['Nerv'];\n            // @ts-ignore\n            (React as any).Fragment = (React as any).Fragment ?? \"x-fragment\";\n        }\n        else {\n            globalObj['React'] = {\n                Component: function () { } as any,\n                Fragment: \"x-fragment\" as any,\n                createElement: function () { return { _reactNotLoaded: true }; } as any\n            } as any\n            globalObj['ReactDOM'] = {\n                render: function () { throw Error(\"To use React, it should be included before Serenity.CoreLib.js\"); }\n            }\n        }\n    }\n}\n\nreactPatch();\n\nexport interface CreateWidgetParams<TWidget extends Widget<TOptions>, TOptions> {\n    type?: new (element: JQuery, options?: TOptions) => TWidget;\n    options?: TOptions;\n    container?: JQuery;\n    element?: (e: JQuery) => void;\n    init?: (w: TWidget) => void;\n}\n\n@Decorators.registerClass('Serenity.Widget')\nexport class Widget<TOptions = any> {\n    private static nextWidgetNumber = 0;\n    public element: JQuery;\n    protected options: TOptions;\n    protected widgetName: string;\n    protected uniqueName: string;\n    declare public readonly idPrefix: string;\n\n    constructor(element: JQuery, options?: TOptions) {\n\n        this.element = element;\n        this.options = options || ({} as TOptions);\n\n        this.widgetName = Widget.getWidgetName(getInstanceType(this));\n        this.uniqueName = this.widgetName + (Widget.nextWidgetNumber++).toString();\n\n        if (element.data(this.widgetName)) {\n            throw new Exception(format(\"The element already has widget '{0}'!\", this.widgetName));\n        }\n\n        element.on('remove.' + this.widgetName, e => {\n            if (e.bubbles || e.cancelable) {\n                return;\n            }\n            this.destroy();\n        }).data(this.widgetName, this);\n\n        this.addCssClass();\n\n        this.idPrefix = this.uniqueName + '_';\n        this.renderContents();\n    }\n\n    public destroy(): void {\n        if (this.element) {\n            this.element.removeClass(this.getCssClass());\n            this.element.off('.' + this.widgetName).off('.' + this.uniqueName).removeData(this.widgetName);\n            this.element = null;\n        }\n    }\n\n    protected addCssClass(): void {\n        this.element.addClass(this.getCssClass());\n    }\n\n    protected getCssClass(): string {\n        var type = getInstanceType(this);\n        var classList: string[] = [];\n        var fullClass = replaceAll(getTypeFullName(type), '.', '-');\n        classList.push(fullClass);\n\n        for (let k of Config.rootNamespaces) {\n            if (startsWith(fullClass, k + '-')) {\n                classList.push(fullClass.substr(k.length + 1));\n                break;\n            }\n        }\n\n        classList.push(getTypeShortName(type));\n        return classList\n            .filter((v, i, a) => a.indexOf(v) === i)\n            .map(s => 's-' + s)\n            .join(\" \");\n    }\n\n    public static getWidgetName(type: Function): string {\n        return replaceAll(getTypeFullName(type), '.', '_');\n    }\n\n    public static elementFor<TWidget>(editorType: { new (...args: any[]): TWidget }): JQuery {\n        var elementAttr = getAttributes(editorType, ElementAttribute, true);\n        var elementHtml = ((elementAttr.length > 0) ? elementAttr[0].value : '<input/>');\n        return $(elementHtml);\n    };\n\n    public addValidationRule(eventClass: string, rule: (p1: JQuery) => string): JQuery {\n        return addValRule(this.element, eventClass, rule);\n    }\n\n    public getGridField(): JQuery {\n        return this.element.closest('.field');\n    } \n\n    public change(handler: (e: JQueryEventObject) => void) {\n        this.element.on('change.' + this.uniqueName, handler);\n    };\n\n    public changeSelect2(handler: (e: JQueryEventObject) => void) {\n        this.element.on('change.' + this.uniqueName, function (e, valueSet) {\n            if (valueSet !== true)\n                handler(e);\n        });\n    };\n\n    public static create<TWidget extends Widget<TOpt>, TOpt>(params: CreateWidgetParams<TWidget, TOpt>) {\n        let widget: TWidget;\n\n        if (isAssignableFrom(IDialog, params.type)) {\n            widget = new (params.type as any)(params.options);\n            if (params.container)\n                widget.element.appendTo(params.container);\n            params.element && params.element(widget.element);\n        }\n        else {\n            var e = Widget.elementFor(params.type);\n            if (params.container)\n                e.appendTo(params.container);\n            params.element && params.element(e);\n            widget = new params.type(e, params.options);\n        }\n\n        widget.init(null);\n        params.init && params.init(widget);\n\n        return widget;\n    }\n\n    public initialize(): void {\n    }\n\n    public init(action?: (widget: any) => void): this {\n        action && action(this);\n        return this;\n    }\n\n    protected renderContents(): void {\n    }\n\n    private static __isWidgetType = true;\n}\n\nif (typeof $ !== \"undefined\" && $.fn) {\n    ($.fn as any).tryGetWidget = function (this: JQuery, type: any) {\n        var element = this;\n        var w;\n        if (isAssignableFrom(Widget, type)) {\n            var widgetName = Widget.getWidgetName(type);\n            w = element.data(widgetName);\n            if (w != null && !isAssignableFrom(type, getInstanceType(w))) {\n                w = null;\n            }\n            if (w != null) {\n                return w;\n            }\n        }\n\n        var data = element.data();\n        if (data == null) {\n            return null;\n        }\n\n        for (var key of Object.keys(data)) {\n            w = data[key];\n            if (w != null && isAssignableFrom(type, getInstanceType(w))) {\n                return w;\n            }\n        }\n\n        return null;\n    };\n\n    $.fn.getWidget = function<TWidget>(this: JQuery, type: { new (...args: any[]): TWidget }) {\n        if (this == null) {\n            throw new ArgumentNullException('element');\n        }\n        if (this.length === 0) {\n            throw new Exception(format(\"Searching for widget of type '{0}' on a non-existent element! ({1})\",\n                getTypeFullName(type), this.selector));\n        }\n\n        var w = (this as any).tryGetWidget(type);\n        if (w == null) {\n            var message = format(\"Element has no widget of type '{0}'! If you have recently changed \" +\n                \"editor type of a property in a form class, or changed data type in row (which also changes \" +\n                \"editor type) your script side Form definition might be out of date. Make sure your project \" +\n                \"builds successfully and transform T4 templates\", getTypeFullName(type));\n            notifyError(message, '', null);\n            throw new Exception(message);\n        }\n        return w;\n    };\n}\n\nexport interface WidgetComponentProps<W extends Widget<any>> {\n    id?: string;\n    name?: string;\n    className?: string;\n    maxLength?: number;\n    placeholder?: string;\n    setOptions?: any;\n    required?: boolean;\n    readOnly?: boolean;\n    oneWay?: boolean;\n    onChange?: (e: JQueryEventObject) => void;\n    onChangeSelect2?: (e: JQueryEventObject) => void;\n    value?: any;\n    defaultValue?: any;\n}\n\nexport declare interface Widget<TOptions> {\n    change(handler: (e: JQueryEventObject) => void): void;\n    changeSelect2(handler: (e: JQueryEventObject) => void): void;\n}\n\nif (typeof $ === \"function\") {\n    jQueryPatch(jQuery);\n}\n", "\uFEFFimport { Exception, getAttributes, htmlEncode, isEnum, notifyError } from \"@serenity-is/corelib/q\";\nimport { EnumKeyAttribute } from \"../decorators\";\nimport { commonTypeRegistry } from \"./commontyperegistry\";\n\nexport namespace EnumTypeRegistry {\n\n    let registry = commonTypeRegistry(\n        isEnum, \n        type => getAttributes(type, EnumKeyAttribute)[0]?.value,\n        null);\n\n    export function get(key: string): Function {\n        var type = registry.tryGet(key);\n        if (type)\n            return type;\n\n        var message = `Can't find \"${htmlEncode(key)}\" enum type! \nIf you have recently defined this enum type in server side code, make sure \nyour project builds successfully and run \"dotnet sergen t\". \n\nAlso verify there is such an enum type under the project root namespace, \nand its namespace parts start with capital letters like MyProject.MyModule.MyEnum.\n\nIf using ES modules, make sure the enum type is registered with \nQ.registerEnum('MyProject.MyModule.MyDialog') with the full name of \nyour enum type and \"side-effect-import\" this enum from the current \n\"page.ts/grid.ts/dialog.ts file (import \"./path/to/MyEnum.ts\").\n\nAfter applying fixes, build and run \"node ./tsbuild.js\" (or \"tsc\" if using namespaces) \nfrom the project folder.`;\n\n    notifyError(message.replace(/\\r?\\n\\r?\\n/g, '<br/><br/>'), '', { escapeHtml: false, timeOut: 5000 });\n    throw new Exception(message);\n    }\n\n    export function reset() {\n        registry.reset();\n    }\n\n    export function tryGet(key: string) {\n        return registry.tryGet(key);\n    }\n}", "\uFEFFexport { ISlickFormatter } from \"@serenity-is/corelib/q\";\nexport type { Formatter } from \"@serenity-is/corelib/slick\";\n", "\uFEFFimport { executeOnceWhenVisible, executeEverytimeWhenVisible } from \"@serenity-is/corelib/q\";\n\nexport namespace LazyLoadHelper {\n    export const executeOnceWhenShown = executeOnceWhenVisible \n    export const executeEverytimeWhenShown = executeEverytimeWhenVisible;\n}", "\uFEFFexport {}\n\nexport class PrefixedContext {\n    constructor(public readonly idPrefix: string) {\n    }\n\n    byId(id: string): JQuery {\n        return $('#' + this.idPrefix + id);\n    }\n\n    w<TWidget>(id: string, type: { new (...args: any[]): TWidget }): TWidget {\n        return $('#' + this.idPrefix + id).getWidget<TWidget>(type);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { htmlEncode, isEmptyOrNull, startsWith } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"./widget\";\n\nexport interface ToolButton {\n    action?: string;\n    title?: string;\n    hint?: string;\n    cssClass?: string;\n    icon?: string;\n    onClick?: any;\n    htmlEncode?: any;\n    hotkey?: string;\n    hotkeyAllowDefault?: boolean;\n    hotkeyContext?: any;\n    separator?: (false | true | 'left' | 'right' | 'both');\n    visible?: boolean | (() => boolean);\n    disabled?: boolean | (() => boolean);\n}\n\nexport interface PopupMenuButtonOptions {\n    menu?: JQuery;\n    onPopup?: () => void;\n    positionMy?: string;\n    positionAt?: string;\n}\n\n@Decorators.registerEditor('Serenity.PopupMenuButton')\nexport class PopupMenuButton extends Widget<PopupMenuButtonOptions> {\n    constructor(div: JQuery, opt: PopupMenuButtonOptions) {\n        super(div, opt);\n\n        div.addClass('s-PopupMenuButton');\n        div.click(e => {\n            e.preventDefault();\n            e.stopPropagation();\n            if (this.options.onPopup != null) {\n                this.options.onPopup();\n            }\n\n            var menu = this.options.menu;\n            (menu.show() as any).position?.({\n                my: this.options.positionMy ?? 'left top',\n                at: this.options.positionAt ?? 'left bottom',\n                of: this.element\n            });\n\n            var uq = this.uniqueName;\n            $(document).one('click.' + uq, function (x) {\n                menu.hide();\n            });\n        });\n\n        (this.options.menu.hide().appendTo(document.body)\n            .addClass('s-PopupMenu') as any).menu?.();\n    }\n\n    destroy() {\n        if (this.options.menu != null) { \n            this.options.menu.remove();\n            this.options.menu = null;\n        }\n\n        super.destroy();\n    }\n}\n\n\nexport interface PopupToolButtonOptions extends PopupMenuButtonOptions {\n}\n\n@Decorators.registerEditor('Serenity.PopupToolButton')\nexport class PopupToolButton extends PopupMenuButton {\n    constructor(div: JQuery, opt: PopupToolButtonOptions) {\n        super(div, opt);\n\n        div.addClass('s-PopupToolButton');\n        $('<b/>').appendTo(div.children('.button-outer').children('span'));\n    }\n}\n\nexport interface ToolbarOptions {\n    buttons?: ToolButton[];\n    hotkeyContext?: any;\n}\n\n@Decorators.registerClass('Serenity.Toolbar')\nexport class Toolbar extends Widget<ToolbarOptions> {\n    constructor(div: JQuery, options: ToolbarOptions) {\n        super(div, options);\n\n        this.element.addClass('s-Toolbar clearfix')\n            .html('<div class=\"tool-buttons\"><div class=\"buttons-outer\">' +\n                '<div class=\"buttons-inner\"></div></div></div>');\n\n        this.createButtons();\n    }\n\n    destroy() {\n        this.element.find('div.tool-button').unbind('click');\n        if (this.mouseTrap) {\n            if (!!this.mouseTrap.destroy) {\n                this.mouseTrap.destroy();\n            }\n            else {\n                this.mouseTrap.reset();\n            }\n            this.mouseTrap = null;\n        }\n\n        super.destroy();\n    }\n\n    protected mouseTrap: any;\n\n    protected createButtons() {\n        var container: JQuery = $('div.buttons-inner', this.element).last();\n        var buttons = this.options.buttons;\n        var currentCount = 0;\n        for (var i = 0; i < buttons.length; i++) {\n            var button = buttons[i];\n            if (button.separator && currentCount > 0) {\n                container = $('<div class=\"buttons-inner\"></div>').appendTo(container.parent());\n                currentCount = 0;\n            }\n            this.createButton(container, button);\n            currentCount++;\n        }\n    }\n\n    protected createButton(container: JQuery, b: ToolButton) {\n        var cssClass = b.cssClass ?? '';\n\n        var btn = $('<div class=\"tool-button\"><div class=\"button-outer\">' +\n            '<span class=\"button-inner\"></span></div></div>')\n            .appendTo(container);\n\n        if (b.action != null)\n            btn.attr('data-action', b.action);\n\n        if (b.separator === 'right' || b.separator === 'both') {\n            $('<div class=\"separator\"></div>').appendTo(container);\n        }\n\n        if (cssClass.length > 0) {\n            btn.addClass(cssClass);\n        }\n\n        if (!isEmptyOrNull(b.hint)) {\n            btn.attr('title', b.hint);\n        }\n\n        btn.click(function (e) {\n            if (btn.hasClass('disabled')) {\n                return;\n            }\n            b.onClick(e);\n        });\n\n        var text = b.title;\n        if (b.htmlEncode !== false) {\n            text = htmlEncode(b.title);\n        }\n\n        if (!isEmptyOrNull(b.icon)) {\n            btn.addClass('icon-tool-button');\n            var klass = b.icon;\n            if (startsWith(klass, 'fa-')) {\n                klass = 'fa ' + klass;\n            }\n            else if (startsWith(klass, 'glyphicon-')) {\n                klass = 'glyphicon ' + klass;\n            }\n            text = \"<i class='\" + htmlEncode(klass) + \"'></i> \" + text;\n        }\n        if (text == null || text.length === 0) {\n            btn.addClass('no-text');\n        }\n        else {\n            btn.find('span').html(text);\n        }\n\n        if (b.visible === false)\n            btn.hide();\n\n        if (b.disabled != null && typeof b.disabled !== \"function\")\n            btn.toggleClass('disabled', !!b.disabled);\n\n        if (typeof b.visible === \"function\" || typeof b.disabled == \"function\") {\n            btn.on('updateInterface', () => {\n                if (typeof b.visible === \"function\")\n                    btn.toggle(!!b.visible());\n\n                if (typeof b.disabled === \"function\")\n                    btn.toggleClass(\"disabled\", !!b.disabled());\n            });\n        }\n\n        if (!!(!isEmptyOrNull(b.hotkey) && window['Mousetrap' as any] != null)) {\n            this.mouseTrap = this.mouseTrap || (window['Mousetrap' as any] as any)(\n                b.hotkeyContext || this.options.hotkeyContext || window.document.documentElement);\n\n            this.mouseTrap.bind(b.hotkey, function (e1: BaseJQueryEventObject, action: any) {\n                if (btn.is(':visible')) {\n                    btn.triggerHandler('click');\n                }\n                return b.hotkeyAllowDefault;\n            });\n        }\n    }\n\n    findButton(className: string): JQuery {\n        if (className != null && startsWith(className, '.')) {\n            className = className.substr(1);\n        }\n        return $('div.tool-button.' + className, this.element);\n    }\n\n    updateInterface() {\n        this.element.find('.tool-button').each(function (i: number, el: Element) {\n            $(el).triggerHandler('updateInterface')\n        });\n    }\n}\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { canLoadScriptData, Config, format, getBaseType, getInstanceType, getTemplate, getTypeFullName, getTypeShortName, replaceAll, startsWith, localText } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"./widget\";\n\n@Decorators.registerClass(\"Serenity.TemplatedWidget\")\nexport class TemplatedWidget<TOptions> extends Widget<TOptions> {\n\n    private static templateNames: { [key: string]: string } = {};\n\n    protected byId(id: string): JQuery {\n        return $('#' + this.idPrefix + id, this.element);\n    }\n\n    private byID<TWidget>(id: string, type: { new(...args: any[]): TWidget }) {\n        return this.byId(id).getWidget(type);\n    }\n\n    private static noGeneric(s: string): string {\n        var dollar = s.indexOf('$');\n        if (dollar >= 0) {\n            return s.substr(0, dollar);\n        }\n        return s;\n    }\n\n    private getDefaultTemplateName(): string {\n        return TemplatedWidget.noGeneric(getTypeShortName(\n            getInstanceType(this)));\n    }\n\n    protected getTemplateName(): string {\n\n        var type = getInstanceType(this);\n        var fullName = getTypeFullName(type);\n\n        var templateNames = TemplatedWidget.templateNames;\n\n        var cachedName = TemplatedWidget.templateNames[fullName];\n        if (cachedName != null) {\n            return cachedName;\n        }\n\n        while (type && type !== Widget) {\n            var name = TemplatedWidget.noGeneric(getTypeFullName(type));\n\n            for (let k of Config.rootNamespaces) {\n                if (startsWith(name, k + '.')) {\n                    name = name.substr(k.length + 1);\n                    break;\n                }\n            }\n\n            if (canLoadScriptData('Template.' + name)) {\n                templateNames[fullName] = name;\n                return name;\n            }\n\n            name = replaceAll(name, '.', '_');\n            if (canLoadScriptData('Template.' + name) ||\n                $('script#Template_' + name).length > 0) {\n                templateNames[fullName] = name;\n                return name;\n            }\n\n            name = TemplatedWidget.noGeneric(getTypeShortName(type));\n            if (canLoadScriptData('Template.' + name) ||\n                $('script#Template_' + name).length > 0) {\n                TemplatedWidget.templateNames[fullName] = name;\n                return name;\n            }\n\n            type = getBaseType(type);\n        }\n\n        templateNames[fullName] = cachedName = this.getDefaultTemplateName();\n        return cachedName;\n    }\n\n    protected getFallbackTemplate(): string {\n        return null;\n    }\n\n    protected getTemplate(): string {\n        var templateName = this.getTemplateName();\n\n        var script = $('script#Template_' + templateName);\n        if (script.length > 0) {\n            return script.html();\n        }\n\n        let template: string;\n        if (!canLoadScriptData('Template.' + templateName) &&\n            this.getDefaultTemplateName() == templateName) {\n            template = this.getFallbackTemplate();\n            if (template != null)\n                return template;\n        }\n\n        template = getTemplate(templateName);\n\n        if (template == null) {\n            throw new Error(format(\n                \"Can't locate template for widget '{0}' with name '{1}'!\",\n                getTypeFullName(getInstanceType(this)), templateName));\n        }\n\n        return template;\n    }\n\n    protected renderContents(): void {\n        var widgetMarkup = this.getTemplate().replace(new RegExp('~_', 'g'), this.idPrefix);\n\n        // for compatibility with older templates based on JsRender\n        var end = 0;\n        while (true) {\n            var idx = widgetMarkup.indexOf('{{text:\"', end);\n            if (idx < 0)\n                break;\n            var end = widgetMarkup.indexOf('\"}}', idx);\n            if (end < 0)\n                break;\n            var key = widgetMarkup.substr(idx + 8, end - idx - 8);\n            var txt = localText(key);\n            widgetMarkup = widgetMarkup.substr(0, idx) + txt + widgetMarkup.substr(end + 3);\n            end = idx + txt.length;\n        }\n\n        this.element.html(widgetMarkup);\n    }\n\n    protected useIdPrefix(): IdPrefixType {\n        return useIdPrefix(this.idPrefix);\n    }\n}\n\ntype IdPrefixType = { [key: string]: string, Form: string, Tabs: string, Toolbar: string, PropertyGrid: string };\n\nexport function useIdPrefix(prefix: string): IdPrefixType {\n    return new Proxy({ _: prefix ?? '' }, idPrefixHandler);\n}\n\nconst idPrefixHandler = {\n    get(target: any, p: string) {\n        if (p.startsWith('#'))\n            return '#' + target._ + p.substring(1);\n\n        return target._ + p;\n    }\n};", "\uFEFFimport { Decorators, FlexifyAttribute, MaximizableAttribute, PanelAttribute, ResizableAttribute, ResponsiveAttribute } from \"../../decorators\";\nimport { IDialog } from \"../../interfaces\";\nimport { bsModalMarkup, closePanel, Config, DialogButton, dialogButtonToBS, dialogButtonToUI, endsWith, getAttributes, getInstanceType, isEmptyOrNull, layoutFillHeight, newBodyDiv, openPanel, parseInteger, positionToastContainer, validateOptions } from \"@serenity-is/corelib/q\";\nimport { TemplatedWidget } from \"../widgets/templatedwidget\";\nimport { Toolbar, ToolButton } from \"../widgets/toolbar\";\nimport { DialogExtensions } from \"./dialogextensions\";\nimport validator from \"@optionaldeps/jquery.validation\";\n\n@Decorators.registerClass('Serenity.TemplatedDialog', [IDialog])\nexport class TemplatedDialog<TOptions> extends TemplatedWidget<TOptions> {\n\n    protected tabs: JQuery;\n    protected toolbar: Toolbar;\n    protected validator: JQueryValidation.Validator;\n\n    constructor(options?: TOptions) {\n        super(newBodyDiv().addClass('s-TemplatedDialog hidden'), options);\n\n        this.element.attr(\"id\", this.uniqueName);\n\n        this.initValidator();\n        this.initTabs();\n        this.initToolbar();\n    }\n\n    private get isMarkedAsPanel() {\n        var panelAttr = getAttributes(getInstanceType(this),\n            PanelAttribute, true) as PanelAttribute[];\n        return panelAttr.length > 0 && panelAttr[panelAttr.length - 1].value !== false;\n    }\n\n    private get isResponsive() {\n        return Config.responsiveDialogs ||\n            getAttributes(getInstanceType(this), ResponsiveAttribute, true).length > 0;\n    }\n\n    private static getCssSize(element: JQuery, name: string): number {\n        var cssSize = element.css(name);\n        if (cssSize == null) {\n            return null;\n        }\n\n        if (!endsWith(cssSize, 'px')) {\n            return null;\n        }\n\n        cssSize = cssSize.substr(0, cssSize.length - 2);\n        let i = parseInteger(cssSize);\n        if (i == null || isNaN(i) || i == 0)\n            return null;\n\n        return i;\n    }\n\n    private static applyCssSizes(opt: any, dialogClass: string) {\n        let size: number;\n        let dialog = $('<div/>').hide().addClass(dialogClass).appendTo(document.body);\n        try {\n            var sizeHelper = $('<div/>').addClass('size').appendTo(dialog);\n            size = TemplatedDialog.getCssSize(sizeHelper, 'minWidth'); \n            if (size != null)\n                opt.minWidth = size;\n\n            size = TemplatedDialog.getCssSize(sizeHelper, 'width');\n            if (size != null)\n                opt.width = size;\n\n            size = TemplatedDialog.getCssSize(sizeHelper, 'height');\n            if (size != null)\n                opt.height = size;\n\n            size = TemplatedDialog.getCssSize(sizeHelper, 'minHeight');\n            if (size != null)\n                opt.minHeight = size;\n        }\n        finally {\n            dialog.remove();\n        }\n    };\n\n    public destroy(): void {\n        (this.tabs as any)?.tabs?.('destroy');\n        this.tabs = null;\n        (this.toolbar as any)?.toolbar?.destroy?.();\n        this.toolbar = null;\n        this.validator && this.byId('Form').remove();\n        this.validator = null;\n        if (this.element != null &&\n            this.element.hasClass('ui-dialog-content')) {\n            (this.element as any)?.dialog?.('destroy');\n            this.element.removeClass('ui-dialog-content');\n        }\n        else if (this.element != null &&\n            this.element.hasClass('modal-body')) {\n            var modal = this.element.closest('.modal').data('bs.modal', null);\n            this.element && this.element.removeClass('modal-body');\n            window.setTimeout(() => modal.remove(), 0);\n        }\n        \n        $(window).unbind('.' + this.uniqueName);\n        super.destroy();\n    }\n\n    protected initDialog(): void {\n        if (this.element.hasClass('ui-dialog-content'))\n            return;\n\n        this.element.removeClass('hidden');\n\n        (this.element as any)?.dialog?.(this.getDialogOptions());\n        this.element.closest('.ui-dialog').on('resize', e => this.arrange());\n\n        let type = getInstanceType(this);\n\n        if (this.isResponsive) {\n            DialogExtensions.dialogResizable(this.element);\n\n            $(window).bind('resize.' + this.uniqueName, e => {\n                if (this.element && this.element.is(':visible')) {\n                    this.handleResponsive();\n                }\n            });\n\n            this.element.closest('.ui-dialog').addClass('flex-layout');\n        }\n        else if (DialogExtensions[\"dialogFlexify\"] &&\n            getAttributes(type, FlexifyAttribute, true).length > 0) {\n            DialogExtensions[\"dialogFlexify\"](this.element);\n            DialogExtensions.dialogResizable(this.element);\n        }\n        \n        if (getAttributes(type, MaximizableAttribute, true).length > 0) {\n            DialogExtensions.dialogMaximizable(this.element);\n        }\n\n        var self = this;\n        this.element.bind('dialogopen.' + this.uniqueName, () => {\n            $(document.body).addClass('modal-dialog-open');\n\n            if (this.isResponsive) {\n                this.handleResponsive();\n            }\n\n            self.onDialogOpen();\n        });\n\n        this.element.bind('dialogclose.' + this.uniqueName, () => {\n            $(document.body).toggleClass('modal-dialog-open', $('.ui-dialog:visible').length > 0);\n            self.onDialogClose();\n        });\n    }\n\n    protected getModalOptions(): ModalOptions {\n        return {\n            backdrop: false,\n            keyboard: false,\n            size: 'lg',\n            modalClass: this.getCssClass()\n        }\n    }\n\n    protected initModal(): void {\n        if (this.element.hasClass('modal-body'))\n            return;\n        \n        var title = this.element.data('dialogtitle') ?? this.getDialogTitle() ?? '';\n        var opt = this.getModalOptions();\n        (opt as any)[\"show\"] = false;\n        var modalClass = \"s-Modal\";\n        \n        if (opt.modalClass)\n            modalClass += ' ' + opt.modalClass;\n\n        var div = bsModalMarkup(title, '', modalClass);\n        var modal = $(div).appendTo(document.body).addClass('flex-layout');\n        modal.one('shown.bs.modal.' + this.uniqueName, () => {\n            this.element.triggerHandler('shown.bs.modal');\n            this.onDialogOpen();\n        });\n\n        modal.one('hidden.bs.modal.' + this.uniqueName, () => {\n            $(document.body).toggleClass('modal-open', $('.modal.show').length + $('.modal.in').length > 0);\n            this.onDialogClose();\n        });\n        if (opt.size)\n            modal.find('.modal-dialog').addClass('modal-' + opt.size);\n\n        var footer = modal.find('.modal-footer');\n        var buttons = this.getDialogButtons();\n        if (buttons != null) {\n            for (var x of buttons) {\n                $(dialogButtonToBS(x)).appendTo(footer).click(x.click);\n            }\n        }\n        else\n            footer.hide();\n\n        (modal as any).modal(opt);\n        modal.find('.modal-body').replaceWith(this.element.removeClass('hidden').addClass('modal-body'));\n        $(window).on('resize.' + this.uniqueName, this.arrange.bind(this));\n    }\n\n    protected initToolbar(): void {\n        var toolbarDiv = this.byId('Toolbar');\n        if (toolbarDiv.length === 0) {\n            return;\n        }\n\n        var hotkeyContext = this.element.closest('.ui-dialog');\n        if (hotkeyContext.length === 0) {\n            hotkeyContext = this.element.closest('.modal');\n            if (hotkeyContext.length == 0)\n                hotkeyContext = this.element;\n        }\n\n        var opt = { buttons: this.getToolbarButtons(), hotkeyContext: hotkeyContext[0] };\n        this.toolbar = new Toolbar(toolbarDiv, opt);\n    }\n\n    protected getToolbarButtons(): ToolButton[] {\n        return [];\n    }\n\n    protected getValidatorOptions(): JQueryValidation.ValidationOptions {\n        return {};\n    }\n\n    protected initValidator(): void {\n        var form = this.byId('Form');\n        if (form.length > 0) {\n            var valOptions = this.getValidatorOptions();\n            this.validator = (validator || form.validate) && form.validate(validateOptions(valOptions));\n        }\n    }\n\n    protected resetValidation() {\n        this.validator && (this.validator as any).resetAll();\n    }\n\n    protected validateForm() {\n        return this.validator == null || !!this.validator.form();\n    }\n\n    public dialogOpen(asPanel?: boolean): void {\n        asPanel = asPanel ?? this.isMarkedAsPanel;\n        if (asPanel) {\n            if (!this.element.hasClass('s-Panel')) {\n                // so that panel title is created if needed\n                this.element.on('panelopen.' + this.uniqueName, () => {\n                    this.onDialogOpen();\n                });\n                this.element.on('panelclose.' + this.uniqueName, () => {\n                    this.onDialogClose();\n                });\n            }\n\n            TemplatedDialog.openPanel(this.element, this.uniqueName);\n            this.setupPanelTitle();\n        }\n        else if (this.useBSModal()) {\n            this.initModal();\n            (this.element.closest('.modal') as any).modal('show');\n        }\n        else {\n            this.initDialog();\n            (this.element as any).dialog?.('open');\n        }\n    }\n\n    private useBSModal() {\n        return !!((!($ as any).ui || !($ as any).ui?.dialog) || TemplatedDialog.bootstrapModal);\n    }\n\n    public static bootstrapModal: boolean;\n\n    public static openPanel(element: JQuery, uniqueName: string) {\n        return openPanel(element, uniqueName);\n    }\n\n    public static closePanel(element: JQuery, e?: JQueryEventObject) {\n        return closePanel(element, e);\n    }\n\n    protected onDialogOpen(): void {\n        if (!$(document.documentElement).hasClass('mobile-device'))\n            $(':input', this.element).not('button').eq(0).focus();\n        this.arrange();\n        this.tabs && (this.tabs as any).tabs?.('option', 'active', 0);\n    }\n\n    public arrange(): void {\n        this.element.find('.require-layout').filter(':visible').each(function (i, e) {\n            $(e).triggerHandler('layout');\n        });\n    }\n\n    protected onDialogClose() {\n        $(document).trigger('click');\n\n        // for tooltips etc.\n        if (($ as any).qtip) {\n            $(document.body).children('.qtip').each(function (index, el) {\n                ($(el) as any).qtip('hide');\n            });\n        }\n\n        window.setTimeout(() => {\n            var element = this.element;\n            this.destroy();\n            element.remove();\n            positionToastContainer(false, null);\n        }, 0);\n    }\n\n    protected addCssClass(): void {\n        if (this.isMarkedAsPanel) {\n            super.addCssClass();\n\n            if (this.isResponsive)\n                this.element.addClass(\"flex-layout\");\n        }\n    }\n\n    protected getDialogButtons(): DialogButton[] {\n        return undefined;\n    }\n\n    protected getDialogOptions(): any {\n        var opt: any = {};\n        var dialogClass = 's-Dialog ' + this.getCssClass();\n        opt.dialogClass = dialogClass;\n        var buttons = this.getDialogButtons();\n        if (buttons != null)\n            opt.buttons = buttons.map(dialogButtonToUI);\n        opt.width = 920;\n        TemplatedDialog.applyCssSizes(opt, dialogClass);\n        opt.autoOpen = false;\n        let type = getInstanceType(this);\n        opt.resizable = getAttributes(type, ResizableAttribute, true).length > 0;\n        opt.modal = true;\n        opt.position = { my: 'center', at: 'center', of: $(window.window) };\n        opt.title = this.element.data('dialogtitle') ?? this.getDialogTitle() ?? '';\n        return opt;\n    }\n\n    protected getDialogTitle() {\n        return \"\";\n    }\n\n    public dialogClose(): void {\n        if (this.element.hasClass('ui-dialog-content'))\n            (this.element as any).dialog?.().dialog?.('close');\n        else if (this.element.hasClass('modal-body'))\n            (this.element.closest('.modal') as any).modal('hide');\n        else if (this.element.hasClass('s-Panel') && !this.element.hasClass('hidden')) {\n            TemplatedDialog.closePanel(this.element);\n        }\n    }\n\n    public get dialogTitle(): string {\n        if (this.element.hasClass('ui-dialog-content'))\n            return (this.element as any).dialog?.('option', 'title');\n        else if (this.element.hasClass('modal-body'))\n            return this.element.closest('.modal').find('.modal-header').children('h5').text();\n\n        return this.element.data('dialogtitle');\n    }\n\n    private setupPanelTitle() {\n        var value = this.dialogTitle ?? this.getDialogTitle();\n        var pt = this.element.children('.panel-titlebar');\n\n        if (isEmptyOrNull(value)) {\n            pt.remove();\n        }\n        else {\n            if (!this.element.children('.panel-titlebar').length) {\n                pt = $(\"<div class='panel-titlebar'><div class='panel-titlebar-text'></div></div>\")\n                    .prependTo(this.element);\n            }\n            pt.children('.panel-titlebar-text').text(value);\n\n            if (this.element.hasClass('s-Panel')) {\n                if (!pt.children('.panel-titlebar-close').length) {\n                    $('<button class=\"panel-titlebar-close\">&nbsp;</button>')\n                        .prependTo(pt)\n                        .click(e => {\n                            TemplatedDialog.closePanel(this.element, e);\n                        });\n                }\n            }\n        }\n    }\n\n    public set dialogTitle(value: string) {\n        var oldTitle = this.dialogTitle;\n        this.element.data('dialogtitle', value);\n\n        if (this.element.hasClass('ui-dialog-content'))\n            (this.element as any).dialog?.('option', 'title', value);\n        else if (this.element.hasClass('modal-body')) {\n            this.element.closest('.modal').find('.modal-header').children('h5').text(value ?? '');\n        }\n        else if (this.element.hasClass('s-Panel')) {\n            if (oldTitle != this.dialogTitle) {\n                this.setupPanelTitle();\n                this.arrange();\n            }\n\n        }\n    }\n\n    public set_dialogTitle(value: string) {\n        this.dialogTitle = value;\n    }\n\n    protected initTabs(): void {\n        var tabsDiv = this.byId('Tabs');\n        if (tabsDiv.length === 0) {\n            return;\n        }\n        this.tabs = (tabsDiv as any).tabs?.({});\n        this.tabs.bind('tabsactivate', () => this.arrange());\n    }\n\n    protected handleResponsive(): void {\n        var dlg = (this.element as any)?.dialog();\n        var uiDialog = this.element.closest('.ui-dialog');\n        if ($(document.documentElement).hasClass('mobile-device')) {\n            var data = this.element.data('responsiveData');\n            if (!data) {\n                data = {};\n                data.draggable = dlg.dialog('option', 'draggable');\n                data.resizable = dlg.dialog('option', 'resizable');\n                data.position = dlg.css('position');\n                var pos = uiDialog.position();\n                data.left = pos.left;\n                data.top = pos.top;\n                data.width = uiDialog.width();\n                data.height = uiDialog.height();\n                data.contentHeight = this.element.height();\n                this.element.data('responsiveData', data);\n                dlg.dialog('option', 'draggable', false);\n                dlg.dialog('option', 'resizable', false);\n            }\n            uiDialog.addClass('mobile-layout');\n            uiDialog.css({ left: '0px', top: '0px', width: $(window).width() + 'px', height: $(window).height() + 'px', position: 'fixed' });\n            $(document.body).scrollTop(0);\n            layoutFillHeight(this.element);\n        }\n        else {\n            var d = this.element.data('responsiveData');\n            if (d) {\n                dlg.dialog('option', 'draggable', d.draggable);\n                dlg.dialog('option', 'resizable', d.resizable);\n                this.element.closest('.ui-dialog').css({ left: '0px', top: '0px', width: d.width + 'px', height: d.height + 'px', position: d.position });\n                this.element.height(d.contentHeight);\n                uiDialog.removeClass('mobile-layout');\n                this.element.removeData('responsiveData');\n            }\n        }\n    }\n}\n\nexport interface ModalOptions {\n    backdrop?: boolean | 'static',\n    keyboard?: boolean,\n    size?: 'lg' | 'sm',\n    modalClass?: string;\n}", "\uFEFFimport { Widget } from \"./widget\";\nimport { LazyLoadHelper } from \"../helpers/lazyloadhelper\";\n\nif (typeof $ !== \"undefined\" && $.fn) {\n    $.fn.flexHeightOnly = function (flexY: number = 1) {\n        return this.flexWidthHeight(0, flexY);\n    }\n\n    $.fn.flexWidthOnly = function (flexX: number = 1) {\n        return this.flexWidthHeight(flexX, 0);\n    }\n\n    $.fn.flexWidthHeight = function (flexX: number = 1, flexY: number = 1) {\n        return this.addClass('flexify').data('flex-x', flexX).data('flex-y', flexY);\n    }\n\n    $.fn.flexX = function (flexX: number): JQuery {\n        return this.data('flex-x', flexX);\n    }\n\n    $.fn.flexY = function (flexY: number): JQuery {\n        return this.data('flex-y', flexY);\n    }\n}\n\nexport class Flexify extends Widget<FlexifyOptions> {\n    private xDifference = 0;\n    private yDifference = 0;\n    constructor(container: JQuery, options: FlexifyOptions) {\n        super(container, options);\n\n        LazyLoadHelper.executeOnceWhenShown(container, () => {\n            this.storeInitialSize();\n        });\n    }\n\n    storeInitialSize() {\n        if (!!this.element.data('flexify-init')) {\n            return;\n        }\n\n        var designWidth = this.options.designWidth;\n        if (designWidth == null)\n            designWidth = this.element.width();\n        this.element.data('flexify-width', designWidth);\n\n        var designHeight = this.options.designHeight;\n        if (designHeight == null)\n            designHeight = this.element.height();\n        this.element.data('flexify-height', designHeight);\n\n        this.element.data('flexify-init', true);\n\n        this.element.on('resize.' + this.uniqueName, () =>\n            this.resizeElements());\n\n        this.element.on('resizestop.' + this.uniqueName, () =>\n            this.resizeElements());\n        \n        var tabs = this.element.find('.ui-tabs');\n        if (tabs.length > 0) {\n            tabs.on('tabsactivate.' + this.uniqueName, () =>\n                this.resizeElements());\n        }\n\n        if (this.options.designWidth != null || this.options.designHeight != null) \n            this.resizeElements();\n    }\n\n    private getXFactor(element: JQuery): number {\n        var xFactor = null;\n        if (this.options.getXFactor != null)\n            xFactor = this.options.getXFactor(element);\n\n        if (xFactor == null)\n            xFactor = element.data('flex-x');\n\n        return xFactor ?? 1;\n    }\n\n    private getYFactor(element: JQuery): number {\n        var yFactor = null;\n\n        if (this.options.getYFactor != null) \n            yFactor = this.options.getYFactor(element);\n\n        if (yFactor == null) \n            yFactor = element.data('flex-y');\n\n        return yFactor ?? 0;\n    }\n\n    private resizeElements(): void {\n        var width = this.element.width();\n        var initialWidth = this.element.data('flexify-width');\n        if (initialWidth == null) {\n            this.element.data('flexify-width', width);\n            initialWidth = width;\n        }\n\n        var height = this.element.height();\n        var initialHeight = this.element.data('flexify-height');\n        if (initialHeight == null) {\n            this.element.data('flexify-height', height);\n            initialHeight = height;\n        }\n\n        this.xDifference = width - initialWidth;\n        this.yDifference = height - initialHeight;\n\n        var containers = this.element;\n        var tabPanels = this.element.find('.ui-tabs-panel');\n\n        if (tabPanels.length > 0) {\n            containers = tabPanels.filter(':visible');\n        }\n\n        containers.find('.flexify')\n            .add(tabPanels.filter('.flexify:visible'))\n            .each((i, e) => {\n                this.resizeElement($(e as any));\n            });\n    }\n\n    private resizeElement(element: JQuery): void {\n        var xFactor = this.getXFactor(element);\n        if(xFactor !== 0) {\n            var initialWidth = element.data('flexify-width');\n            if (initialWidth == null) {\n                var width = element.width();\n                element.data('flexify-width', width);\n                initialWidth = width;\n            }\n\n            element.width(initialWidth + xFactor * this.xDifference | 0);\n        }\n\n        var yFactor = this.getYFactor(element);\n        if (yFactor !== 0) {\n            var initialHeight = element.data('flexify-height');\n            if (initialHeight == null) {\n                var height = element.height();\n                element.data('flexify-height', height);\n                initialHeight = height;\n            }\n            element.height(initialHeight + yFactor * this.yDifference | 0);\n        }\n\n        if (element.hasClass('require-layout')) {\n            element.triggerHandler('layout');\n        }\n    }\n}\n\nexport interface FlexifyOptions {\n    getXFactor?: (p1: JQuery) => any;\n    getYFactor?: (p1: JQuery) => any;\n    designWidth?: any;\n    designHeight?: any;\n}", "\uFEFFimport { Flexify } from \"../widgets/flexify\";\n\nexport namespace DialogExtensions {\n\n    export function dialogResizable(dialog: JQuery, w?: any, h?: any, mw?: any, mh?: any): JQuery {\n        var dlg = (dialog as any)?.dialog?.();\n        dlg.dialog('option', 'resizable', true);\n        if (mw != null) {\n            dlg.dialog('option', 'minWidth', mw);\n        }\n        if (w != null) {\n            dlg.dialog('option', 'width', w);\n        }\n        if (mh != null) {\n            dlg.dialog('option', 'minHeight', mh);\n        }\n        if (h != null) {\n            dlg.dialog('option', 'height', h);\n        }\n        return dialog;\n    }\n\n    export function dialogMaximizable(dialog: JQuery): JQuery {\n        (dialog as any).dialogExtend({\n            closable: true,\n            maximizable: true,\n            dblclick: 'maximize',\n            icons: { maximize: 'ui-icon-maximize-window' }\n        });\n\n        return dialog;\n    }\n\n    export function dialogFlexify(dialog: JQuery): JQuery {\n        new Flexify(dialog.closest('.ui-dialog'), {});\n        return dialog;\n    }\n}", "\uFEFF/// <reference types=\"jquery.validation\" />\nimport $ from \"@optionaldeps/jquery\"\n\nexport default $?.validator;", "\uFEFFimport { validateOptions } from \"@serenity-is/corelib/q\";\nimport { Decorators } from \"../../decorators\";\nimport { TemplatedWidget } from \"./templatedwidget\";\nimport { Toolbar, ToolButton } from \"./toolbar\";\n\n@Decorators.registerClass(\"Serenity.TemplatedPanel\")\nexport class TemplatedPanel<TOptions> extends TemplatedWidget<TOptions> {\n    constructor(container: JQuery, options?: TOptions) {\n        super(container, options);\n\n        this.initValidator();\n        this.initTabs();\n        this.initToolbar();\n    }\n\n    destroy() {\n        if (this.tabs) {\n            (this.tabs as any).tabs?.('destroy');\n            this.tabs = null;\n        }\n\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = null;\n        }\n\n        if (this.validator) {\n            this.byId('Form').remove();\n            this.validator = null;\n        }\n\n        super.destroy();\n    }\n\n    protected tabs: JQuery;\n    protected toolbar: Toolbar;\n    protected validator: JQueryValidation.Validator;\n    protected isPanel: boolean;\n    protected responsive: boolean;\n\n    public arrange(): void {\n        this.element.find('.require-layout').filter(':visible').each(function (i, e) {\n            $(e).triggerHandler('layout');\n        });\n    }\n\n    protected getToolbarButtons(): ToolButton[] {\n        return [];\n    }\n\n    protected getValidatorOptions(): JQueryValidation.ValidationOptions {\n        return {};\n    }\n\n    protected initTabs(): void {\n        var tabsDiv = this.byId('Tabs');\n        if (tabsDiv.length === 0) {\n            return;\n        }\n        this.tabs = (tabsDiv as any).tabs?.({});\n    }\n\n    protected initToolbar(): void {\n        var toolbarDiv = this.byId('Toolbar');\n        if (toolbarDiv.length === 0) {\n            return;\n        }\n        var opt = { buttons: this.getToolbarButtons() };\n        this.toolbar = new Toolbar(toolbarDiv, opt);\n    }\n\n    protected initValidator(): void {\n        var form = this.byId('Form');\n        if (form.length > 0) {\n            var valOptions = this.getValidatorOptions();\n            this.validator = form.validate(validateOptions(valOptions));\n        }\n    }\n\n    protected resetValidation(): void {\n        if (this.validator) {\n            (this.validator as any).resetAll();\n        }\n    }\n\n    protected validateForm(): boolean {\n        return this.validator == null || !!this.validator.form();\n    }\n}", "\uFEFFimport { Exception, validatorAbortHandler } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport namespace ValidationHelper {\n    export function asyncSubmit(form: JQuery, validateBeforeSave: () => boolean, submitHandler: () => void): boolean {\n        var validator = form.validate();\n        var valSettings = validator.settings;\n        if ((valSettings as any).abortHandler) {\n            return false;\n        }\n        if (validateBeforeSave != null && validateBeforeSave() === false) {\n            return false;\n        }\n        (valSettings as any)['abortHandler'] = validatorAbortHandler;\n        valSettings['submitHandler'] = function () {\n            if (submitHandler != null) {\n                submitHandler();\n            }\n            return false;\n        };\n        form.trigger('submit');\n        return true;\n    }\n\n    export function submit(form: JQuery, validateBeforeSave: () => boolean, submitHandler: () => void): boolean {\n        var validator = form.validate();\n        var valSettings = validator.settings;\n        if ((valSettings as any).abortHandler != null) {\n            return false;\n        }\n        if (validateBeforeSave != null && validateBeforeSave() === false) {\n            return false;\n        }\n        if (!validator.form()) {\n            return false;\n        }\n        if (submitHandler != null) {\n            submitHandler();\n        }\n        return true;\n    }\n\n    export function getValidator(element: JQuery): JQueryValidation.Validator {\n        var form = element.closest('form');\n        if (form.length === 0) {\n            return null;\n        }\n        return form.data('validator');\n    }\n}\n\nexport namespace VX {\n    export function addValidationRule(element: JQuery, eventClass: string, rule: (p1: JQuery) => string): JQuery {\n        if (!element.length)\n        return element;\n        if (rule == null)\n            throw new Exception('rule is null!');\n        element.addClass('customValidate').bind('customValidate.' + eventClass, rule as any);\n        return element;        \n    }\n\n    export function removeValidationRule(element: JQuery, eventClass: string): JQuery {\n        element.unbind('customValidate.' + eventClass);\n        return element;\n    }    \n\n    export function validateElement(validator: JQueryValidation.Validator, widget: Widget<any>): boolean {\n        return validator.element(widget.element[0] as any);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { findElementWithRelativeId, isEmptyOrNull, notifyError } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\n@Decorators.registerClass('Serenity.CascadedWidgetLink')\nexport class CascadedWidgetLink<TParent extends Widget<any>> {\n\n    constructor(private parentType: { new(...args: any[]): TParent },\n        private widget: Widget<any>,\n        private parentChange: (p1: TParent) => void) {\n        this.bind();\n        this.widget.element.bind('remove.' + (widget as any).uniqueName + 'cwh', e => {\n            this.unbind();\n            this.widget = null;\n            this.parentChange = null;\n        });\n    }\n\n    private _parentID: string;\n\n    bind() {\n\n        if (isEmptyOrNull(this._parentID)) {\n            return null;\n        }\n\n        var parent = findElementWithRelativeId(this.widget.element, this._parentID)\n            .tryGetWidget(this.parentType);\n\n        if (parent != null) {\n            parent.element.bind('change.' + (this.widget as any).uniqueName, () => {\n                this.parentChange(parent);\n            });\n            return parent;\n        }\n        else {\n            notifyError(\"Can't find cascaded parent element with ID: \" + this._parentID + '!', '', null);\n            return null;\n        }\n    }\n\n    unbind() {\n\n        if (isEmptyOrNull(this._parentID)) {\n            return null;\n        }\n\n        var parent = findElementWithRelativeId(this.widget.element, this._parentID).tryGetWidget(this.parentType);\n\n        if (parent != null) {\n            parent.element.unbind('.' + (this.widget as any).uniqueName);\n        }\n\n        return parent;\n    }\n\n    get_parentID() {\n        return this._parentID;\n    }\n\n    set_parentID(value: string) {\n\n        if (this._parentID !== value) {\n            this.unbind();\n            this._parentID = value;\n            this.bind();\n        }\n    }\n}\n", "\uFEFFexport {}\n\nexport namespace TabsExtensions {\n    export function setDisabled(tabs: JQuery, tabKey: string, isDisabled: boolean) {\n        if (!tabs)\n            return;\n\n        var ibk = indexByKey(tabs);\n        if (!ibk)\n            return;\n\n        var index = ibk[tabKey];\n        if (index == null) {\n            return;\n        }\n\n        if (isDisabled && index === (tabs as any).tabs('option', 'active')) {\n            (tabs as any).tabs?.('option', 'active', 0);\n        }\n\n        (tabs as any).tabs?.(isDisabled ? 'disable' : 'enable', index);\n    }\n\n    export function toggle(tabs: JQuery, tabKey: string, visible: boolean) {\n        if (!tabs)\n            return;\n\n        var ibk = indexByKey(tabs);\n        if (!ibk)\n            return;\n\n        var index = ibk[tabKey];\n        if (index == null) {\n            return;\n        }\n\n        if (!visible && index === (tabs as any).tabs?.('option', 'active')) {\n            (tabs as any).tabs?.('option', 'active', 0);\n        }\n\n        tabs.children('ul').children('li').eq(index).toggle(visible);\n    }\n\n    export function activeTabKey(tabs: JQuery) {\n        var href = tabs.children('ul')\n            .children('li')\n            .eq((tabs as any).tabs?.('option', 'active'))\n            .children('a')\n            .attr('href')\n            .toString();\n\n        var prefix = '_Tab';\n        var lastIndex = href.lastIndexOf(prefix);\n        if (lastIndex >= 0) {\n            href = href.substr(lastIndex + prefix.length);\n        }\n        return href;\n    }\n\n    export function indexByKey(tabs: JQuery): any {\n        var indexByKey = tabs.data('indexByKey');\n        if (!indexByKey) {\n            indexByKey = {};\n            tabs.children('ul').children('li').children('a').each(function (index, el) {\n                var href = el.getAttribute('href').toString();\n                var prefix = '_Tab';\n                var lastIndex = href.lastIndexOf(prefix);\n                if (lastIndex >= 0) {\n                    href = href.substr(lastIndex + prefix.length);\n                }\n                indexByKey[href] = index;\n            });\n            tabs.data('indexByKey', indexByKey);\n        }\n\n        return indexByKey;\n    }\n    \n    export function selectTab(tabs: JQuery, tabKey: string) {\n        var ibk = indexByKey(tabs);\n        if (!ibk)\n            return;\n        var index = ibk[tabKey];\n        if (index == null) {\n            return;\n        }\n        if (index !== (tabs as any).tabs?.('option', 'active')) {\n            (tabs as any).tabs?.('option', 'active', index);\n        }\n    }\n}\n", "\uFEFFimport { DisplayNameAttribute, OptionAttribute } from \"../../decorators\";\nimport { getInstanceType, getMembers, isInstanceOfType, MemberType } from \"@serenity-is/corelib/q\";\nimport { ReflectionUtils } from \"../../types/reflectionutils\";\n\nexport namespace ReflectionOptionsSetter {\n    export function set(target: any, options: any): void {\n        if (options == null) {\n            return;\n        }\n\n        var type = getInstanceType(target);\n\n        if (type === Object) {\n            return;\n        }\n\n        var propByName = type.__propByName;\n        var fieldByName = type.__fieldByName;\n        if (propByName == null) {\n            var props = getMembers(type, MemberType.property);\n            var propList = props.filter(function (x: any) {\n                return !!x.setter && ((x.attr || []).filter(function (a: any) {\n                    return isInstanceOfType(a, OptionAttribute);\n                }).length > 0 || (x.attr || []).filter(function (a: any) {\n                    return isInstanceOfType(a, DisplayNameAttribute);\n                }).length > 0);\n            });\n\n            propByName = {};\n            for (var k of propList) {\n                propByName[ReflectionUtils.makeCamelCase(k.name)] = k;\n            }\n\n            type.__propByName = propByName;\n        }\n\n        if (fieldByName == null) {\n            var fields = getMembers(type, MemberType.field);\n            var fieldList = fields.filter(function (x1: any) {\n                return (x1.attr || []).filter(function (a: any) {\n                    return isInstanceOfType(a, OptionAttribute);\n                }).length > 0 || (x1.attr || []).filter(function (a: any) {\n                    return isInstanceOfType(a, DisplayNameAttribute);\n                }).length > 0;\n            });\n\n            fieldByName = {};\n            for (var $t2 = 0; $t2 < fieldList.length; $t2++) {\n                var k1 = fieldList[$t2];\n                fieldByName[ReflectionUtils.makeCamelCase(k1.name)] = k1;\n            }\n            type.__fieldByName = fieldByName;\n        }\n\n        var keys = Object.keys(options);\n        for (var k2 of keys) {\n            var v = options[k2];\n            var cc = ReflectionUtils.makeCamelCase(k2);\n            var p = propByName[cc] || propByName[k2];\n            if (p != null) {\n                var func = (target[p.setter] as Function);\n                func && func.call(target, v);\n            }\n            else {\n                var f = fieldByName[cc] || fieldByName[k2];\n                f && (target[f.name] = v);\n            }\n        }\n    }\n}", "\uFEFFimport { Decorators, ElementAttribute, OptionsTypeAttribute } from \"../../decorators\";\nimport { any, Authorization, Culture, extend, getAttributes, getTypeShortName, isBS3, isBS5Plus, isEmptyOrNull, PropertyItem, startsWith, localText, trimToEmpty, trimToNull, tryGetText } from \"@serenity-is/corelib/q\";\nimport { EditorTypeRegistry } from \"../../types/editortyperegistry\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { ReflectionOptionsSetter } from \"./reflectionoptionssetter\";\nimport { Widget } from \"./widget\";\n\n@Decorators.registerClass('Serenity.PropertyGrid')\nexport class PropertyGrid extends Widget<PropertyGridOptions> {\n\n    private editors: Widget<any>[];\n    private items: PropertyItem[];\n    declare public readonly idPrefix: string;\n\n    constructor(div: JQuery, opt: PropertyGridOptions) {\n        super(div, opt);\n\n        this.idPrefix = this.options.idPrefix = this.options.idPrefix ?? this.idPrefix;\n\n        if (this.options.mode == null)\n            this.options.mode = 1;\n\n        div.addClass('s-PropertyGrid');\n        this.editors = [];\n        var items = this.options.items || [];\n        this.items = [];\n\n        var useTabs = any(items, function (x) {\n            return !isEmptyOrNull(x.tab);\n        });\n\n        if (useTabs) {\n            var itemsWithoutTab = items.filter(f => isEmptyOrNull(f.tab));\n            if (itemsWithoutTab.length > 0) {\n                this.createItems(this.element, itemsWithoutTab);\n\n                $(\"<div class='pad'></div>\").appendTo(this.element);\n            }\n\n            var itemsWithTab = items.filter(f => !isEmptyOrNull(f.tab));\n\n            var ul = $(\"<ul class='nav nav-tabs property-tabs' role='tablist'></ul>\")\n                .appendTo(this.element);\n\n            var tc = $(\"<div class='tab-content property-panes'></div>\")\n                .appendTo(this.element);\n\n            var tabIndex = 0;\n            var i = 0;\n            while (i < itemsWithTab.length) {\n                var tab = { $: trimToEmpty(itemsWithTab[i].tab) };\n                var tabItems = [];\n\n                var j = i;\n                do {\n                    tabItems.push(itemsWithTab[j]);\n                } while (++j < itemsWithTab.length &&\n                    trimToEmpty(itemsWithTab[j].tab) === tab.$);\n                i = j;\n\n                var li = $(isBS3() ? '<li><a data-toggle=\"tab\" role=\"tab\"></a></li>' :\n                        `<li class=\"nav-item\"><a class=\"nav-link\" data-${isBS5Plus() ? \"bs-\" :  \"\"}toggle=\"tab\" role=\"tab\"></a></li>`)\n                    .appendTo(ul);\n\n                if (tabIndex === 0) {\n                    if (isBS3())\n                        li.addClass('active');\n                    else\n                        li.children('a').addClass('active');\n                }\n\n                var tabID = this.uniqueName + '_Tab' + tabIndex;\n\n                li.children('a').attr('href', '#' + tabID)\n                    .text(this.determineText(tab.$, function (prefix: string) {\n                        return prefix + 'Tabs.' + this.tab.$;\n                    }.bind({\n                        tab: tab\n                    })));\n\n                var pane = $(\"<div class='tab-pane fade' role='tabpanel'>\")\n                    .appendTo(tc);\n\n                if (tabIndex === 0) {\n                    pane.addClass(isBS3() ? 'in active' : 'show active');\n                }\n\n                pane.attr('id', tabID);\n                this.createItems(pane, tabItems);\n                tabIndex++;\n            }\n        }\n        else {\n            this.createItems(this.element, items);\n        }\n\n        this.updateInterface();\n    }\n\n    destroy() {\n        if (this.editors != null) {\n            for (var i = 0; i < this.editors.length; i++) {\n                this.editors[i].destroy();\n            }\n            this.editors = null;\n        }\n        this.element.find('a.category-link').unbind('click',\n            this.categoryLinkClick).remove();\n\n        Widget.prototype.destroy.call(this);\n    }\n\n    private createItems(container: JQuery, items: PropertyItem[]) {\n        var categoryIndexes = {};\n        var categoriesDiv = container;\n\n        var useCategories = this.options.useCategories !== false && any(items, function (x) {\n            return !isEmptyOrNull(x.category);\n        });\n\n        if (useCategories) {\n            var linkContainer = $('<div/>').addClass('category-links');\n            categoryIndexes = this.createCategoryLinks(linkContainer, items);\n            if (Object.keys(categoryIndexes).length > 1) {\n                linkContainer.appendTo(container);\n            }\n            else {\n                linkContainer.find('a.category-link').unbind('click',\n                    this.categoryLinkClick).remove();\n            }\n        }\n\n        categoriesDiv = $('<div/>').addClass('categories').appendTo(container);\n        var fieldContainer;\n        if (useCategories) {\n            fieldContainer = categoriesDiv;\n        }\n        else {\n            fieldContainer = $('<div/>').addClass('category').appendTo(categoriesDiv);\n        }\n        var priorCategory = null;\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var category = item.category;\n            if (category == null) {\n                category = this.options.defaultCategory ?? '';\n            }\n\n            if (useCategories && priorCategory !== category) {\n                var categoryDiv = this.createCategoryDiv(categoriesDiv,\n                    categoryIndexes, category,\n                    ((item.collapsible !== true) ? null :\n                        item.collapsed ?? false));\n\n                if (priorCategory == null) {\n                    categoryDiv.addClass('first-category');\n                }\n                priorCategory = category;\n                fieldContainer = categoryDiv;\n            }\n            var editor = this.createField(fieldContainer, item);\n            this.items.push(item);\n            this.editors.push(editor);\n        }\n    }\n\n    private createCategoryDiv(categoriesDiv: JQuery,\n        categoryIndexes: { [key: string]: number }, category: string, collapsed: boolean) {\n\n        var categoryDiv = $('<div/>').addClass('category')\n            .appendTo(categoriesDiv);\n\n        var title = $('<div/>').addClass('category-title')\n            .append($('<a/>').addClass('category-anchor')\n            .text(this.determineText(category, function (prefix) {\n                return prefix + 'Categories.' + category;\n            }))\n            .attr('name', this.idPrefix + \n                'Category' + categoryIndexes[category].toString()))\n            .appendTo(categoryDiv);\n\n        if (collapsed != null) {\n            categoryDiv.addClass(((collapsed === true) ?\n                'collapsible collapsed' : 'collapsible'));\n\n            var img = $('<i/>').addClass(((collapsed === true) ?\n                'fa fa-plus' : 'fa fa-minus')).appendTo(title);\n\n            title.click(function (e) {\n                categoryDiv.toggleClass('collapsed');\n                img.toggleClass('fa-plus').toggleClass('fa-minus');\n            });\n        }\n\n        return categoryDiv;\n    }\n\n    private categoryLinkClick = (e: JQueryEventObject) => {\n        e.preventDefault();\n\n        var title = $('a[name=' + e.target.getAttribute('href')\n            .toString().substr(1) + ']');\n\n        if (title.closest('.category').hasClass('collapsed'))\n            title.closest('.category').children('.category-title').click();\n\n        var animate = function () {\n            if (($.fn as any).fadeTo) {\n                title.fadeTo(100, 0.5, function () {\n                    title.fadeTo(100, 1, function () {\n                    });\n                });\n            }\n        };\n\n        var intoView = title.closest('.category');\n        if (($.fn as any).scrollintoview) {\n            if (intoView.closest(':scrollable(both)').length === 0)\n                animate();\n            else\n                (intoView as any).scrollintoview({\n                    duration: 'fast',\n                    direction: 'y',\n                    complete: animate\n                });\n        }\n        else if (intoView && intoView[0] && intoView[0].scrollIntoView) {\n            intoView[0].scrollIntoView();\n            animate();\n        }\n    }\n\n    private determineText(text: string, getKey: (s: string) => string) {\n        if (text != null && !startsWith(text, '`')) {\n            var local = tryGetText(text);\n            if (local != null) {\n                return local;\n            }\n        }\n\n        if (text != null && startsWith(text, '`')) {\n            text = text.substring(1);\n        }\n\n        if (!isEmptyOrNull(this.options.localTextPrefix)) {\n            var local1 = tryGetText(getKey(this.options.localTextPrefix));\n            if (local1 != null) {\n                return local1;\n            }\n        }\n\n        return text;\n    }\n\n    private createField(container: JQuery, item: PropertyItem) {\n        var fieldDiv = $('<div/>').addClass('field')\n            .addClass(item.name).data('PropertyItem', item).appendTo(container);\n\n        if (!isEmptyOrNull(item.cssClass)) {\n            fieldDiv.addClass(item.cssClass);\n        }\n\n        if (!isEmptyOrNull(item.formCssClass)) {\n            fieldDiv.addClass(item.formCssClass);\n            if (item.formCssClass.indexOf('line-break-') >= 0) {\n                var splitted = item.formCssClass.split(String.fromCharCode(32));\n                if (splitted.indexOf('line-break-xs') >= 0) {\n                    $(\"<div class='line-break' style='width: 100%' />\")\n                        .insertBefore(fieldDiv);\n                }\n                else if (splitted.indexOf('line-break-sm') >= 0) {\n                    $(\"<div class='line-break hidden-xs' style='width: 100%' />\")\n                        .insertBefore(fieldDiv);\n                }\n                else if (splitted.indexOf('line-break-md') >= 0) {\n                    $(\"<div class='line-break hidden-sm' style='width: 100%' />\")\n                        .insertBefore(fieldDiv);\n                }\n                else if (splitted.indexOf('line-break-lg') >= 0) {\n                    $(\"<div class='line-break hidden-md' style='width: 100%' />\")\n                        .insertBefore(fieldDiv);\n                }\n            }\n        }\n        var editorId = this.idPrefix + item.name;\n        var title = this.determineText(item.title, function (prefix) {\n            return prefix + item.name;\n        });\n\n        var hint = this.determineText(item.hint, function (prefix1) {\n            return prefix1 + item.name + '_Hint';\n        });\n\n        var placeHolder = this.determineText(item.placeholder, function (prefix2) {\n            return prefix2 + item.name + '_Placeholder';\n        });\n\n        if (hint == null) {\n            hint = title ?? '';\n        }\n\n        var label = $('<label/>')\n            .addClass('caption')\n            .attr('for', editorId)\n            .attr('title', hint)\n            .text(title ?? '')\n            .appendTo(fieldDiv);\n\n        if (!isEmptyOrNull(item.labelWidth)) {\n            if (item.labelWidth === '0') {\n                label.hide();\n            }\n            else {\n                label.css('width', item.labelWidth);\n            }\n        }\n\n        if (item.required === true) {\n            $('<sup>*</sup>').attr('title',\n                localText('Controls.PropertyGrid.RequiredHint'))\n                .prependTo(label);\n        }\n\n        var editorType = EditorTypeRegistry\n            .get(item.editorType ?? 'String');\n\n        var element = Widget.elementFor(editorType as any)\n            .addClass('editor')\n            .attr('id', editorId).appendTo(fieldDiv);\n\n        if (element.is(':input')) {\n            element.attr('name', item.name ?? '');\n        }\n\n        if (!isEmptyOrNull(placeHolder)) {\n            element.attr('placeholder', placeHolder);\n        }\n        var editorParams = item.editorParams;\n        var optionsType = null;\n        var optionsAttr = getAttributes(editorType,\n            OptionsTypeAttribute, true);\n\n        if (optionsAttr != null && optionsAttr.length > 0) {\n            optionsType = optionsAttr[0].optionsType;\n        }\n        var editor;\n        if (optionsType != null) {\n            editorParams = extend(new optionsType(), item.editorParams);\n            editor = new (editorType as any)(element, editorParams);\n        }\n        else {\n            editorParams = extend(new Object(), item.editorParams);\n            editor = new (editorType as any)(element, editorParams);\n        }\n\n        editor.initialize();\n\n        if (getTypeShortName(editor) == \"BooleanEditor\" &&\n            (item.editorParams == null || !!!item.editorParams['labelFor'])) {\n            label.removeAttr('for');\n        }\n\n        if (getTypeShortName(editor) == \"RadioButtonEditor\" &&\n            (item.editorParams == null || !!!item.editorParams['labelFor'])) {\n            label.removeAttr('for');\n        }\n\n        if (item.maxLength != null) {\n            PropertyGrid.setMaxLength(editor, item.maxLength);\n        }\n\n        if (item.editorParams != null) {\n            ReflectionOptionsSetter.set(editor, item.editorParams);\n        }\n\n        $('<div/>').addClass('vx').appendTo(fieldDiv);\n        $('<div/>').addClass('clear').appendTo(fieldDiv);\n\n        return editor;\n    }\n\n    private getCategoryOrder(items: PropertyItem[]) {\n        var order = 0;\n        var result = {} as any;\n        var categoryOrder = trimToNull(this.options.categoryOrder);\n        if (categoryOrder != null) {\n            var split = categoryOrder.split(';');\n            for (var s of split) {\n                var x = trimToNull(s);\n                if (x == null) {\n                    continue;\n                }\n                if (result[x] as any != null) {\n                    continue;\n                }\n                result[x] = order++;\n            }\n        }\n\n        for (var x1 of items) {\n            var category = x1.category;\n            if (category == null) {\n                category = this.options.defaultCategory ?? '';\n            }\n            if (result[category] == null) {\n                result[category] = order++;\n            }\n        }\n\n        return result;\n    }\n\n    private createCategoryLinks(container: JQuery, items: PropertyItem[]) {\n        var idx = 0;\n        var itemIndex: Record<string, number> = {};\n        var itemCategory: Record<string, string> = {};\n        for (var x of items) {\n            var name1 = x.name;\n            var cat1 = x.category;\n            if (cat1 == null) {\n                cat1 = this.options.defaultCategory ?? '';\n            }\n            itemCategory[name1] = cat1;\n            itemIndex[x.name] = idx++;\n        }\n\n        var self = this;\n        var categoryOrder = this.getCategoryOrder(items);\n\n        items.sort(function (x1, y) {\n            var c = 0;\n            var xcategory = itemCategory[x1.name];\n            var ycategory = itemCategory[y.name];\n            if (xcategory != ycategory) {\n                var c1 = categoryOrder[xcategory];\n                var c2 = categoryOrder[ycategory];\n                if (c1 != null && c2 != null) {\n                    c = c1 - c2;\n                }\n                else if (c1 != null) {\n                    c = -1;\n                }\n                else if (c2 != null) {\n                    c = 1;\n                }\n            }\n            if (c === 0) {\n                c = Culture.stringCompare(xcategory, ycategory);\n            }\n            if (c === 0) {\n                c = itemIndex[x1.name] < itemIndex[y.name] ? -1 : (itemIndex[x1.name] > itemIndex[y.name] ? 1 : 0)\n            }\n            return c;\n        });\n\n        var categoryIndexes: Record<string, number> = {};\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var category = { $: itemCategory[item.name] };\n            if (categoryIndexes[category.$] == null) {\n                var index = Object.keys(categoryIndexes).length + 1;\n                categoryIndexes[category.$] = index;\n                if (index > 1) {\n                    $('<span/>').addClass('separator').text('|').prependTo(container);\n                }\n                $('<a/>').addClass('category-link').text(\n                    this.determineText(category.$,\n                        function (prefix: string) {\n                            return prefix + 'Categories.' + this.category.$;\n                        }.bind({ category: category })))\n                    .attr('tabindex', '-1')\n                    .attr('href', '#' + this.idPrefix +\n                        'Category' + index.toString())\n                    .click(this.categoryLinkClick)\n                    .prependTo(container);\n            }\n        }\n\n        $('<div/>').addClass('clear').appendTo(container);\n        return categoryIndexes;\n    }\n\n    get_editors(): Widget<any>[] {\n        return this.editors;\n    }\n\n    get_items(): PropertyItem[] {\n        return this.items;\n    }\n\n    get_idPrefix(): string {\n        return this.idPrefix;\n    }\n\n    get_mode(): PropertyGridMode {\n        return this.options.mode;\n    }\n\n    set_mode(value: PropertyGridMode) {\n        if(this.options.mode !== value) {\n            this.options.mode = value;\n            this.updateInterface();\n        }\n    }\n\n    // Obsolete\n    static loadEditorValue(editor: Widget<any>,\n        item: PropertyItem, source: any): void {\n    }\n\n    // Obsolete\n    static saveEditorValue(editor: Widget<any>,\n        item: PropertyItem, target: any): void {\n\n        EditorUtils.saveValue(editor, item, target);\n    }\n\n    // Obsolete\n    private static setReadOnly(widget: Widget<any>, isReadOnly: boolean): void {\n        EditorUtils.setReadOnly(widget, isReadOnly);\n    }\n\n    // Obsolete\n    private static setReadonly(elements: JQuery, isReadOnly: boolean): JQuery {\n        return EditorUtils.setReadonly(elements, isReadOnly);\n    }\n\n    // Obsolete\n    private static setRequired(widget: Widget<any>, isRequired: boolean): void {\n        EditorUtils.setRequired(widget, isRequired);\n    }\n\n    private static setMaxLength(widget: Widget<any>, maxLength: number) {\n        if (widget.element.is(':input')) {\n            if (maxLength > 0) {\n                widget.element.attr('maxlength', maxLength);\n            }\n            else {\n                widget.element.removeAttr('maxlength');\n            }\n        }\n    }\n\n    load(source: any): void {\n        for (var i = 0; i < this.editors.length; i++) {\n            var item = this.items[i];\n            var editor = this.editors[i];\n            if (!!(this.get_mode() === 1 && item.defaultValue != null) &&\n                typeof (source[item.name]) === 'undefined') {\n                source[item.name] = item.defaultValue;\n            }\n\n            EditorUtils.loadValue(editor, item, source);\n        }\n    }\n\n    save(target?: any): any {\n        if (target == null)\n            target = Object.create(null);\n        for (var i = 0; i < this.editors.length; i++) {\n            var item = this.items[i];\n            if (item.oneWay !== true && this.canModifyItem(item)) {\n                var editor = this.editors[i];\n                EditorUtils.saveValue(editor, item, target);\n            }\n        }\n        return target;\n    }\n\n    public get value(): any {\n        return this.save();\n    }\n\n    public set value(val: any) {\n        if (val == null)\n            val = Object.create(null);\n        this.load(val);\n    }\n\n    private canModifyItem(item: PropertyItem) {\n        if (this.get_mode() === PropertyGridMode.insert) {\n            if (item.insertable === false) {\n                return false;\n            }\n\n            if (item.insertPermission == null) {\n                return true;\n            }\n\n            return Authorization.hasPermission(item.insertPermission);\n        }\n        else if (this.get_mode() === PropertyGridMode.update) {\n            if (item.updatable === false) {\n                return false;\n            }\n\n            if (item.updatePermission == null) {\n                return true;\n            }\n\n            return Authorization.hasPermission(item.updatePermission);\n        }\n        return true;\n    }\n\n    updateInterface() {\n        for (var i = 0; i < this.editors.length; i++) {\n            var item = this.items[i];\n            var editor = this.editors[i];\n            var readOnly = item.readOnly === true || !this.canModifyItem(item);\n            EditorUtils.setReadOnly(editor, readOnly);\n            EditorUtils.setRequired(editor, !readOnly &&\n                !!item.required && item.editorType !== 'Boolean');\n            if (item.visible === false || item.readPermission != null ||\n                item.insertPermission != null || item.updatePermission != null ||\n                item.hideOnInsert === true || item.hideOnUpdate === true) {\n                var hidden = (item.readPermission != null &&\n                    !Authorization.hasPermission(item.readPermission)) ||\n                    item.visible === false ||\n                    (this.get_mode() === PropertyGridMode.insert && item.hideOnInsert === true) ||\n                    (this.get_mode() === 2 && item.hideOnUpdate === true);\n\n                editor.getGridField().toggle(!hidden);\n            }\n        }\n    }\n\n    enumerateItems(callback: (p1: PropertyItem, p2: Widget<any>) => void): void {\n        for (var i = 0; i < this.editors.length; i++) {\n            var item = this.items[i];\n            var editor = this.editors[i];\n            callback(item, editor);\n        }\n    }\n}\n\nexport enum PropertyGridMode {\n    insert = 1,\n    update = 2\n}\n\nexport interface PropertyGridOptions {\n    idPrefix?: string;\n    items?: PropertyItem[];\n    useCategories?: boolean;\n    categoryOrder?: string;\n    defaultCategory?: string;\n    localTextPrefix?: string;\n    mode?: PropertyGridMode;\n}", "\uFEFFimport { IBooleanValue, IDoubleValue, IGetEditValue, IReadOnly, ISetEditValue, IStringValue, IValidateRequired } from \"../../interfaces\";\nimport { cast, isInstanceOfType, isTrimmedEmpty, parseDecimal, PropertyItem, safeCast, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport namespace EditorUtils {\n    export function getDisplayText(editor: Widget<any>): string {\n\n        var select2 = editor.element.data('select2');\n\n        if (select2 != null) {\n            var data = editor.element.select2('data');\n            if (data == null)\n                return '';\n\n            return data.text ?? '';\n        }\n\n        var value = getValue(editor);\n        if (value == null) {\n            return '';\n        }\n\n        if (typeof value === \"string\")\n            return value;\n\n        if (value instanceof Boolean)\n            return (!!value ? (tryGetText('Controls.FilterPanel.OperatorNames.true') ?? 'True') :\n                (tryGetText('Controls.FilterPanel.OperatorNames.true') ?? 'False'));\n\n        return value.toString();\n    }\n\n    var dummy: PropertyItem = { name: '_' };\n\n    export function getValue(editor: Widget<any>): any {\n        var target: Record<string, any> = {};\n        saveValue(editor, dummy, target);\n        return target['_'];\n    }\n\n    export function saveValue(editor: Widget<any>, item: PropertyItem, target: any): void {\n\n        var getEditValue = safeCast(editor, IGetEditValue);\n\n        if (getEditValue != null) {\n            getEditValue.getEditValue(item, target);\n            return;\n        }\n\n        var stringValue = safeCast(editor, IStringValue);\n        if (stringValue != null) {\n            target[item.name] = stringValue.get_value();\n            return;\n        }\n\n        var booleanValue = safeCast(editor, IBooleanValue);\n        if (booleanValue != null) {\n            target[item.name] = booleanValue.get_value();\n            return;\n        }\n\n        var doubleValue = safeCast(editor, IDoubleValue);\n        if (doubleValue != null) {\n            var value = doubleValue.get_value();\n            target[item.name] = (isNaN(value) ? null : value);\n            return;\n        }\n\n        if ((editor as any).getEditValue != null) {\n            (editor as any).getEditValue(item, target);\n            return;\n        }\n\n        if (editor.element.is(':input')) {\n            target[item.name] = editor.element.val();\n            return;\n        }\n    }\n\n    export function setValue(editor: Widget<any>, value: any): void {\n        var source = { _: value };\n        loadValue(editor, dummy, source);\n    }\n\n    export function loadValue(editor: Widget<any>, item: PropertyItem, source: any): void {\n\n        var setEditValue = safeCast(editor, ISetEditValue);\n        if (setEditValue != null) {\n            setEditValue.setEditValue(source, item);\n            return;\n        }\n\n        var stringValue = safeCast(editor, IStringValue);\n        if (stringValue != null) {\n            var value = source[item.name];\n            if (value != null) {\n                value = value.toString();\n            }\n            stringValue.set_value(cast(value, String));\n            return;\n        }\n\n        var booleanValue = safeCast(editor, IBooleanValue);\n        if (booleanValue != null) {\n            var value1 = source[item.name];\n            if (typeof (value1) === 'number') {\n                booleanValue.set_value(value1 > 0);\n            }\n            else {\n                booleanValue.set_value(!!value1);\n            }\n            return;\n        }\n\n        var doubleValue = safeCast(editor, IDoubleValue);\n        if (doubleValue != null) {\n            var d = source[item.name];\n            if (!!(d == null || isInstanceOfType(d, String) && isTrimmedEmpty(cast(d, String)))) {\n                doubleValue.set_value(null);\n            }\n            else if (isInstanceOfType(d, String)) {\n                doubleValue.set_value(cast(parseDecimal(cast(d, String)), Number));\n            }\n            else if (isInstanceOfType(d, Boolean)) {\n                doubleValue.set_value((!!d ? 1 : 0));\n            }\n            else {\n                doubleValue.set_value(cast(d, Number));\n            }\n            return;\n        }\n\n        if ((editor as any).setEditValue != null) {\n            (editor as any).setEditValue(source, item);\n            return;\n        }\n\n        if (editor.element.is(':input')) {\n            var v = source[item.name];\n            if (v == null) {\n                editor.element.val('');\n            }\n            else {\n                editor.element.val(v);\n            }\n            return;\n        }\n    }\n\n    export function setReadonly(elements: JQuery, isReadOnly: boolean): JQuery {\n        elements.each(function (index, el) {\n            var elx = $(el);\n            var type = elx.attr('type');\n            if (elx.is('select') || type === 'radio' || type === 'checkbox') {\n                if (isReadOnly) {\n                    elx.addClass('readonly').attr('disabled', 'disabled');\n                }\n                else {\n                    elx.removeClass('readonly').removeAttr('disabled');\n                }\n            }\n            else if (isReadOnly) {\n                elx.addClass('readonly').attr('readonly', 'readonly');\n            }\n            else {\n                elx.removeClass('readonly').removeAttr('readonly');\n            }\n            return true;\n        });\n        return elements;\n    }\n\n    export function setReadOnly(widget: Widget<any>, isReadOnly: boolean): void {\n\n        var readOnly = safeCast(widget, IReadOnly);\n\n        if (readOnly != null) {\n            readOnly.set_readOnly(isReadOnly);\n        }\n        else if (widget.element.is(':input')) {\n            setReadonly(widget.element, isReadOnly);\n        }\n    }\n\n    export function setRequired(widget: Widget<any>, isRequired: boolean): void {\n        var req = safeCast(widget, IValidateRequired);\n        if (req != null) {\n            req.set_required(isRequired);\n        }\n        else if (widget.element.is(':input')) {\n            widget.element.toggleClass('required', !!isRequired);\n        }\n        var gridField = widget.element.closest('.field');\n        var hasSupItem = gridField.find('sup').get().length > 0;\n        if (isRequired && !hasSupItem) {\n            $('<sup>*</sup>').attr('title', localText('Controls.PropertyGrid.RequiredHint'))\n                .prependTo(gridField.find('.caption')[0]);\n        }\n        else if (!isRequired && hasSupItem) {\n            $(gridField.find('sup')[0]).remove();\n        }\n    }\n\n    export function setContainerReadOnly(container: JQuery, readOnly: boolean) {\n\n        if (!readOnly) {\n\n            if (!container.hasClass('readonly-container'))\n                return;\n\n            container.removeClass('readonly-container').find(\".editor.container-readonly\")\n                .removeClass('container-readonly').each((i, e) => {\n                    var w = $(e).tryGetWidget(Widget);\n                    if (w != null)\n                        EditorUtils.setReadOnly(w, false);\n                    else\n                        EditorUtils.setReadonly($(e), false);\n                });\n\n            return;\n        }\n\n        container.addClass('readonly-container').find(\".editor\")\n            .not('.container-readonly')\n            .each((i, e) => {\n                var w = $(e).tryGetWidget(Widget) as any;\n                if (w != null) {\n\n                    if (w['get_readOnly']) {\n                        if (w['get_readOnly']())\n                            return;\n                    }\n                    else if ($(e).is('[readonly]') || $(e).is('[disabled]') || $(e).is('.readonly') || $(e).is('.disabled'))\n                        return;\n\n                    $(e).addClass('container-readonly');\n                    EditorUtils.setReadOnly(w, true);\n\n                }\n                else {\n                    if ($(e).is('[readonly]') || $(e).is('[disabled]') || $(e).is('.readonly') || $(e).is('.disabled'))\n                        return;\n\n                    EditorUtils.setReadonly($(e).addClass('container-readonly'), true);\n                }\n            });\n    }\n}", "\uFEFFimport { Decorators, FormKeyAttribute } from \"../../decorators\";\nimport { endsWith, getAttributes, getForm, getInstanceType, getTypeFullName, PropertyItem } from \"@serenity-is/corelib/q\";\nimport { PropertyGrid, PropertyGridOptions } from \"./propertygrid\";\nimport { TemplatedPanel } from \"./templatedpanel\";\n\n@Decorators.registerClass('Serenity.PropertyPanel')\nexport class PropertyPanel<TItem, TOptions> extends TemplatedPanel<TOptions> {\n\n    private _entity: TItem;\n    private _entityId: any;\n\n    constructor(container: JQuery, options?: TOptions) {\n        super(container, options);\n\n        this.initPropertyGrid();\n        this.loadInitialEntity();\n    }\n\n    destroy() {\n        if (this.propertyGrid) {\n            this.propertyGrid.destroy();\n            this.propertyGrid = null;\n        }\n        if (this.validator) {\n            this.byId('Form').remove();\n            this.validator = null;\n        }\n        super.destroy();\n    }\n\n    protected initPropertyGrid() {\n        var pgDiv = this.byId('PropertyGrid');\n        if (pgDiv.length <= 0) {\n            return;\n        }\n        var pgOptions = this.getPropertyGridOptions();\n        this.propertyGrid = (new PropertyGrid(pgDiv, pgOptions)).init(null);\n        if (this.element.closest('.ui-Panel').hasClass('s-Flexify')) {\n            this.propertyGrid.element.children('.categories').flexHeightOnly(1);\n        }\n    }\n\n    protected loadInitialEntity(): void {\n        if (this.propertyGrid) {\n            this.propertyGrid.load(new Object());\n        }\n    }\n\n    protected getFormKey(): string {\n        var attributes = getAttributes(\n            getInstanceType(this), FormKeyAttribute, true);\n\n        if (attributes.length >= 1) {\n            return attributes[0].value;\n        }\n        var name = getTypeFullName(getInstanceType(this));\n        var px = name.indexOf('.');\n        if (px >= 0) {\n            name = name.substring(px + 1);\n        }\n        if (endsWith(name, 'Panel')) {\n            name = name.substr(0, name.length - 6);\n        }\n        else if (endsWith(name, 'Panel')) {\n            name = name.substr(0, name.length - 5);\n        }\n        return name;\n    }\n\n    protected getPropertyGridOptions(): PropertyGridOptions {\n        return {\n            idPrefix: this.idPrefix,\n            items: this.getPropertyItems(),\n            mode: 1,\n            useCategories: false,\n            localTextPrefix: 'Forms.' + this.getFormKey() + '.'\n        };\n    }\n\n    protected getPropertyItems(): PropertyItem[] {\n        var formKey = this.getFormKey();\n        return getForm(formKey);\n    }\n\n    protected getSaveEntity(): TItem {\n        var entity = new Object();\n        if (this.propertyGrid) {\n            this.propertyGrid.save(entity);\n        }\n        return entity as TItem;\n    }\n\n    protected get_entity(): TItem {\n        return this._entity;\n    }\n\n    protected get_entityId(): any {\n        return this._entityId;\n    }\n    \n    protected set_entity(value: TItem): void {\n        this._entity = value ?? new Object() as any;\n    }\n\n    protected set_entityId(value: any): void {\n        this._entityId = value;\n    }\n\n    protected validateBeforeSave(): boolean {\n        return this.validator.form();\n    }\n\n    protected propertyGrid: PropertyGrid;\n}", "\uFEFFimport { DataChangeInfo } from \"../../types/datachangeinfo\";\nimport { Widget } from \"../widgets/widget\";\n\nexport namespace SubDialogHelper {\n    export function bindToDataChange(dialog: any, owner: Widget<any>,\n        dataChange: (p1: any, p2: DataChangeInfo) => void, useTimeout?: boolean): any {\n        var widgetName = (owner as any).widgetName;\n        dialog.element.bind('ondatachange.' + widgetName, function (e: JQueryEventObject, dci: any) {\n            if (useTimeout) {\n                window.setTimeout(function () {\n                    dataChange(e, dci);\n                }, 0);\n            }\n            else {\n                dataChange(e, dci);\n            }\n        }).bind('remove.' + widgetName, function () {\n            dialog.element.unbind('ondatachange.' + widgetName);\n        });\n        return dialog;\n    }\n\n    export function triggerDataChange(dialog: Widget<any>): any {\n        dialog.element.triggerHandler('ondatachange');\n        return dialog;\n    }\n\n    export function triggerDataChanged(element: JQuery): JQuery {\n        element.triggerHandler('ondatachange');\n        return element;\n    }\n\n    export function bubbleDataChange(dialog: any, owner: Widget<any>, useTimeout?: boolean): any {\n        return bindToDataChange(dialog, owner, function (e, dci) {\n            owner.element.triggerHandler('ondatachange');\n        }, useTimeout);\n    }\n\n    export function cascade(cascadedDialog: any, ofElement: JQuery): any {\n        cascadedDialog.element.one('dialogopen', function (e: JQueryEventObject) {\n            cascadedDialog.element.dialog().dialog('option', 'position', cascadedDialogOffset(ofElement));\n        });\n        return cascadedDialog;\n    }\n\n    export function cascadedDialogOffset(element: JQuery): any {\n        return { my: 'left top', at: 'left+20 top+20', of: element[0] };\n    }\n}", "\uFEFFimport { Decorators, FormKeyAttribute } from \"../../decorators\";\nimport { DialogButton, endsWith, getAttributes, getForm, getFormData, getFormDataAsync, getInstanceType, getTypeFullName, isEmptyOrNull, PropertyItem, PropertyItemsData, ScriptData, localText } from \"@serenity-is/corelib/q\";\nimport { PropertyGrid, PropertyGridOptions } from \"../widgets/propertygrid\";\nimport { TemplatedDialog } from \"./templateddialog\";\n\n@Decorators.registerClass('Serenity.PropertyDialog')\nexport class PropertyDialog<TItem, TOptions> extends TemplatedDialog<TOptions> {\n    protected entity: TItem;\n    protected entityId: any;\n    protected propertyItemsData: PropertyItemsData;\n\n    constructor(opt?: TOptions) {\n        super(opt);\n\n        if (this.useAsync())\n            this.initAsync();\n        else \n            this.initSync();        \n    }\n\n    internalInit() {\n        this.initPropertyGrid();\n        this.loadInitialEntity();\n    }\n\n    protected initSync() {\n        this.propertyItemsData = this.getPropertyItemsData();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected async initAsync() {\n        this.propertyItemsData = await this.getPropertyItemsDataAsync();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected afterInit() {\n    }    \n\n    protected useAsync() {\n        return false;\n    }\n\n    destroy() {\n        if (this.propertyGrid) {\n            this.propertyGrid.destroy();\n            this.propertyGrid = null;\n        }\n\n        if (this.validator) {\n            this.byId('Form').remove();\n            this.validator = null;\n        }\n\n        super.destroy();\n    }\n\n    protected getDialogOptions() {\n        var opt = super.getDialogOptions();\n        opt.width = 400;\n        return opt;\n    }\n\n    protected getDialogButtons() {\n        super.getDialogButtons();\n        return <DialogButton[]>[{\n            text: localText('Dialogs.OkButton'),\n            cssClass: \"btn btn-primary\",\n            click: () => this.okClick()\n        }, {\n            text: localText('Dialogs.CancelButton'),\n            click: () => this.cancelClick()\n        }];\n    }\n\n    protected okClick() {\n        if (!this.validateBeforeSave()) {\n            return;\n        }\n\n        this.okClickValidated();\n    }\n\n    protected okClickValidated() {\n        this.dialogClose();\n    }\n\n    protected cancelClick() {\n        this.dialogClose();\n    }\n\n    protected initPropertyGrid() {\n        var pgDiv = this.byId('PropertyGrid');\n        if (pgDiv.length <= 0) {\n            return;\n        }\n        var pgOptions = this.getPropertyGridOptions();\n        this.propertyGrid = (new PropertyGrid(pgDiv, pgOptions)).init(null);\n        if (this.element.closest('.ui-dialog').hasClass('s-Flexify')) {\n            this.propertyGrid.element.children('.categories').flexHeightOnly(1);\n        }\n    }\n\n    protected getFormKey(): string {\n        var attributes = getAttributes(\n            getInstanceType(this), FormKeyAttribute, true);\n        if (attributes.length >= 1) {\n            return attributes[0].value;\n        }\n        else {\n            var name = getTypeFullName(getInstanceType(this));\n            var px = name.indexOf('.');\n            if (px >= 0) {\n                name = name.substring(px + 1);\n            }\n            if (endsWith(name, 'Dialog')) {\n                name = name.substr(0, name.length - 6);\n            }\n            else if (endsWith(name, 'Panel')) {\n                name = name.substr(0, name.length - 5);\n            }\n            return name;\n        }\n    }\n\n    protected getPropertyGridOptions(): PropertyGridOptions {\n        return {\n            idPrefix: this.idPrefix,\n            items: this.getPropertyItems(),\n            mode: 1,\n            useCategories: false,\n            localTextPrefix: 'Forms.' + this.getFormKey() + '.'\n        };\n    }\n\n    protected getPropertyItems() {\n        return this.propertyItemsData?.items || [];\n    }\n\n    protected getPropertyItemsData(): PropertyItemsData {\n        var formKey = this.getFormKey();\n\n        if (this.getFormKey === PropertyDialog.prototype.getFormKey &&\n            this.getPropertyItems !== PropertyDialog.prototype.getPropertyItems &&\n            !ScriptData.canLoad('Form.' + formKey)) {\n            return {\n                items: this.getPropertyItems(),\n                additionalItems: []\n            }\n        }\n\n        if (!isEmptyOrNull(formKey)) {\n            return getFormData(formKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }\n\n    protected async getPropertyItemsDataAsync(): Promise<PropertyItemsData> {\n        var formKey = this.getFormKey();\n        if (!isEmptyOrNull(formKey)) {\n            return await getFormDataAsync(formKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }\n\n    protected getSaveEntity(): TItem {\n        var entity = new Object();\n        if (this.propertyGrid) {\n            this.propertyGrid.save(entity);\n        }\n        return entity as TItem;\n    }\n\n    protected loadInitialEntity(): void {\n        this.propertyGrid && this.propertyGrid.load(new Object());\n    }\n\n    protected get_entity() {\n        return this.entity;\n    }\n\n    protected set_entity(value: TItem) {\n        this.entity = (value ?? new Object()) as any;\n    }\n\n    protected get_entityId() {\n        return this.entityId;\n    }\n\n    protected set_entityId(value: any): void {\n        this.entityId = value;\n    }\n\n    protected validateBeforeSave(): boolean {\n        return this.validator.form();\n    }\n\n    protected updateTitle() {\n    }\n\n    protected propertyGrid: PropertyGrid;\n\n    protected getFallbackTemplate() {\n        return `<div>\n    <div class=\"s-Form\">\n        <form id=\"~_Form\" action=\"\">\n            <div class=\"fieldset\">\n                <div id=\"~_PropertyGrid\"></div>\n                <div class=\"clear\"></div>\n            </div>\n        </form> \n    </div>\n</div>`;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { Widget } from \"../widgets/widget\";\n\n@Decorators.registerEditor('Serenity.StringEditor', [IStringValue])\n@Decorators.element(\"<input type=\\\"text\\\"/>\")\nexport class StringEditor extends Widget<any> {\n\n    constructor(input: JQuery) {\n        super(input);\n    }\n\n    public get value(): string {\n        return this.element.val();\n    }\n\n    protected get_value(): string {\n        return this.value;\n    }\n\n    public set value(value: string) {\n        this.element.val(value);\n    }\n\n    protected set_value(value: string): void {\n        this.value = value;\n    }\n}\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { StringEditor } from \"./stringeditor\";\n\n@Decorators.registerEditor('Serenity.PasswordEditor')\nexport class PasswordEditor extends StringEditor {\n    constructor(input: JQuery) {\n        super(input);\n\n        input.attr('type', 'password');\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface TextAreaEditorOptions {\n    cols?: number;\n    rows?: number;\n}\n\n@Decorators.registerEditor('Serenity.TextAreaEditor', [IStringValue])\n@Decorators.element(\"<textarea />\")\nexport class TextAreaEditor extends Widget<TextAreaEditorOptions> {\n\n    constructor(input: JQuery, opt?: TextAreaEditorOptions) {\n        super(input, opt);\n\n        if (this.options.cols !== 0) {\n            input.attr('cols', (this.options.cols ?? 80));\n        }\n        if (this.options.rows !== 0) {\n            input.attr('rows', (this.options.rows ?? 6));\n        }\n    }\n\n    public get value(): string {\n        return this.element.val();\n    }\n\n    protected get_value(): string {\n        return this.value;\n    }\n\n    public set value(value: string) {\n        this.element.val(value);\n    }\n\n    protected set_value(value: string): void {\n        this.value = value;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IBooleanValue } from \"../../interfaces\";\nimport { Widget } from \"../widgets/widget\";\n\n@Decorators.registerEditor('Serenity.BooleanEditor', [IBooleanValue])\n@Decorators.element('<input type=\"checkbox\"/>')\nexport class BooleanEditor extends Widget<any> {\n\n    public get value(): boolean {\n        return this.element.is(\":checked\");\n    }\n\n    protected get_value(): boolean {\n        return this.value;\n    }\n\n    public set value(value: boolean) {\n        this.element.prop(\"checked\", !!value);\n    }\n\n    protected set_value(value: boolean): void {\n        this.value = value;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IDoubleValue } from \"../../interfaces\";\nimport { Culture, extend, formatNumber, parseDecimal } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface DecimalEditorOptions {\n    minValue?: string;\n    maxValue?: string;\n    decimals?: any;\n    padDecimals?: any;\n    allowNegatives?: boolean;\n}\n\n@Decorators.registerEditor('Serenity.DecimalEditor', [IDoubleValue])\n@Decorators.element('<input type=\"text\"/>')\nexport class DecimalEditor extends Widget<DecimalEditorOptions> implements IDoubleValue {\n\n    constructor(input: JQuery, opt?: DecimalEditorOptions) {\n        super(input, opt);\n\n        input.addClass('decimalQ');\n        var numericOptions = extend(DecimalEditor.defaultAutoNumericOptions(), {\n            vMin: (this.options.minValue ?? (this.options.allowNegatives ? (this.options.maxValue != null ? (\"-\" + this.options.maxValue) : '-999999999999.99') : '0.00')),\n            vMax: (this.options.maxValue ?? '999999999999.99')\n        });\n\n        if (this.options.decimals != null) {\n            numericOptions.mDec = this.options.decimals;\n        }\n\n        if (this.options.padDecimals != null) {\n            numericOptions.aPad = this.options.padDecimals;\n        }\n\n        if (($.fn as any).autoNumeric)\n            (input as any).autoNumeric(numericOptions);\n    }\n\n    get_value(): number {\n        if (($.fn as any).autoNumeric) {\n            var val = (this.element as any).autoNumeric('get');\n\n            if (!!(val == null || val === ''))\n                return null;\n\n            return parseFloat(val);\n        }\n\n        var val = this.element.val();\n        return parseDecimal(val);\n    }\n\n    get value(): number {\n        return this.get_value();\n    }\n\n    set_value(value: number) {\n        if (value == null || (value as any) === '') {\n            this.element.val('');\n        }\n        else if (($.fn as any).autoNumeric) {\n            (this.element as any).autoNumeric('set', value);\n        }\n        else\n            this.element.val(formatNumber(value));\n    }\n\n    set value(v: number) {\n        this.set_value(v);\n    }\n\n    get_isValid(): boolean {\n        return !isNaN(this.get_value());\n    }\n\n    static defaultAutoNumericOptions(): any {\n        return {\n            aDec: Culture.decimalSeparator,\n            altDec: ((Culture.decimalSeparator === '.') ? ',' : '.'),\n            aSep: ((Culture.decimalSeparator === '.') ? ',' : '.'),\n            aPad: true\n        };\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IDoubleValue } from \"../../interfaces\";\nimport { extend, formatNumber, isTrimmedEmpty, parseInteger, trimToNull } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\nimport { DecimalEditor } from \"./decimaleditor\";\n\nexport interface IntegerEditorOptions {\n    minValue?: number;\n    maxValue?: number;\n    allowNegatives?: boolean;\n}\n\n@Decorators.registerEditor('Serenity.IntegerEditor', [IDoubleValue])\n@Decorators.element('<input type=\"text\"/>')\nexport class IntegerEditor extends Widget<IntegerEditorOptions> implements IDoubleValue {\n\n    constructor(input: JQuery, opt?: IntegerEditorOptions) {\n        super(input, opt);\n\n        input.addClass('integerQ');\n        var numericOptions = extend(DecimalEditor.defaultAutoNumericOptions(),\n            {\n                vMin: (this.options.minValue ?? this.options.allowNegatives ? (this.options.maxValue != null ? (\"-\" + this.options.maxValue) : '-2147483647') : '0'),\n                vMax: (this.options.maxValue ?? 2147483647),\n                aSep: null\n            });\n\n        if (($.fn as any).autoNumeric)\n            (input as any).autoNumeric(numericOptions);\n    }\n\n    get_value(): number {\n        if (($.fn as any).autoNumeric) {\n            var val = (this.element as any).autoNumeric('get') as string;\n            if (!!isTrimmedEmpty(val))\n                return null;\n            else \n                return parseInt(val, 10);\n        } \n        else {\n            var val = trimToNull(this.element.val());\n            if (val == null)\n                return null;\n            return parseInteger(val)\n        }\n\n    }\n\n    get value(): number {\n        return this.get_value();\n    }\n\n    set_value(value: number) {\n        if (value == null || (value as any) === '')\n            this.element.val('');\n        else if (($.fn as any).autoNumeric)\n            (this.element as any).autoNumeric('set', value);\n        else\n            this.element.val(formatNumber(value));\n    }\n\n    set value(v: number) {\n        this.set_value(v);\n    }\n\n    get_isValid(): boolean {\n        return !isNaN(this.get_value());\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IReadOnly, IStringValue } from \"../../interfaces\";\nimport { addValidationRule, Culture, format, formatDate, Invariant, isEmptyOrNull, parseDate, parseISODateTime, replaceAll, localText, today } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport let datePickerIconSvg = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 17 17\"><g></g><path d=\"M14 2v-1h-3v1h-5v-1h-3v1h-3v15h17v-15h-3zM12 2h1v2h-1v-2zM4 2h1v2h-1v-2zM16 16h-15v-8.921h15v8.921zM1 6.079v-3.079h2v2h3v-2h5v2h3v-2h2v3.079h-15z\" fill=\"currentColor\"></path></svg>';\n\n@Decorators.registerEditor('Serenity.DateEditor', [IStringValue, IReadOnly])\n@Decorators.element('<input type=\"text\"/>')\nexport class DateEditor extends Widget<any> implements IStringValue, IReadOnly {\n\n    private minValue: string;\n    private maxValue: string;\n\n    constructor(input: JQuery) {\n        super(input);\n\n        // @ts-ignore\n        if (typeof flatpickr !== \"undefined\" && (DateEditor.useFlatpickr || !$.fn.datepicker)) {\n            // @ts-ignore\n            flatpickr(input[0], DateEditor.flatPickrOptions(input));\n        }\n        else if (($.fn as any)?.datepicker) {\n            (input as any).datepicker({\n                showOn: 'button',\n                beforeShow: (inp: any, inst: any) => {\n                    if (input.hasClass('readonly') as any)\n                        return false as any;\n                    DateEditor.uiPickerZIndexWorkaround(this.element);\n                    return true;\n                },\n                yearRange: (this.yearRange ?? '-100:+50')\n            });\n\n        }\n        else {\n            input.attr('type', 'date');\n        }\n\n        input.on('keyup.' + this.uniqueName, e => {\n            if (e.which === 32 && !this.get_readOnly()) {\n                if (this.get_valueAsDate() != today()) {\n                    this.set_valueAsDate(today());\n                    this.element.trigger('change');\n                }\n            }\n            else {\n                DateEditor.dateInputKeyup(e);\n            }\n        });\n\n        input.on('change.' + this.uniqueName, DateEditor.dateInputChange);\n\n        addValidationRule(input, this.uniqueName, e1 => {\n            var value = this.get_value();\n            if (isEmptyOrNull(value)) {\n                return null;\n            }\n\n            if (!isEmptyOrNull(this.get_minValue()) && Invariant.stringCompare(formatDate(value, 'yyyy-MM-dd'), formatDate(this.get_minValue(), 'yyyy-MM-dd')) < 0) {\n                return format(localText('Validation.MinDate'), formatDate(this.get_minValue(), null));\n            }\n\n            if (!isEmptyOrNull(this.get_maxValue()) && Invariant.stringCompare(formatDate(value, 'yyyy-MM-dd'), formatDate(this.get_maxValue(), 'yyyy-MM-dd')) > 0) {\n                return format(localText('Validation.MaxDate'), formatDate(this.get_maxValue(), null));\n            }\n\n            return null;\n        });\n\n        this.set_sqlMinMax(true)\n    }\n\n    public static useFlatpickr: boolean;\n\n    public static flatPickrOptions(input: JQuery) {\n        return {\n            clickOpens: true,\n            allowInput: true,\n            dateFormat: Culture.dateOrder.split('').join(Culture.dateSeparator).replace('y', 'Y'),\n            onChange: function() {\n                input.triggerHandler('change');\n            }\n        }\n    }\n\n    get_value(): string {\n        var value = this.element.val().trim();\n        if (value != null && value.length === 0) {\n            return null;\n        }\n\n        return formatDate(value, 'yyyy-MM-dd');\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string) {\n        if (value == null) {\n            this.element.val('');\n        }\n        else if (value.toLowerCase() === 'today' || value.toLowerCase() === 'now') {\n            this.element.val(formatDate(today(), null));\n        }\n        else {\n            this.element.val(formatDate(value, null));\n        }\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    private get_valueAsDate(): Date {\n        if (isEmptyOrNull(this.get_value())) {\n            return null;\n        }\n\n        return parseISODateTime(this.get_value());\n    }\n\n    get valueAsDate(): Date {\n        return this.get_valueAsDate();\n    }\n\n    private set_valueAsDate(value: Date): void {\n        if (value == null) {\n            this.set_value(null);\n        }\n\n        this.set_value(formatDate(value, 'yyyy-MM-dd'));\n    }\n\n    set valueAsDate(v: Date) {\n        this.set_valueAsDate(v);\n    }\n\n    get_readOnly(): boolean {\n        return this.element.hasClass('readonly');\n    }\n\n    set_readOnly(value: boolean): void {\n\n        if (value !== this.get_readOnly()) {\n            if (value) {\n                this.element.addClass('readonly').attr('readonly', 'readonly');\n                this.element.nextAll('.ui-datepicker-trigger').css('opacity', '0.1');\n            }\n            else {\n                this.element.removeClass('readonly').removeAttr('readonly');\n                this.element.nextAll('.ui-datepicker-trigger').css('opacity', '1');\n            }\n        }\n    }\n\n    @Decorators.option()\n    public yearRange: string;\n\n    @Decorators.option()\n    get_minValue(): string {\n        return this.minValue;\n    }\n\n    set_minValue(value: string) {\n        this.minValue = value;\n    }\n\n    @Decorators.option()\n    get_maxValue(): string {\n        return this.maxValue;\n    }\n\n    set_maxValue(value: string): void {\n        this.maxValue = value;\n    }\n\n    get_minDate(): Date {\n        return parseISODateTime(this.get_minValue());\n    }\n\n    set_minDate(value: Date): void {\n        this.set_minValue(formatDate(value, 'yyyy-MM-dd'));\n    }\n\n    @Decorators.option()\n    get_maxDate(): Date {\n        return parseISODateTime(this.get_maxValue());\n    }\n\n    set_maxDate(value: Date) {\n        this.set_maxValue(formatDate(value, 'yyyy-MM-dd'));\n    }\n\n    @Decorators.option()\n    get_sqlMinMax(): boolean {\n        return this.get_minValue() === '1753-01-01' && this.get_maxValue() === '9999-12-31';\n    }\n\n    set_sqlMinMax(value: boolean) {\n        if (value) {\n            this.set_minValue('1753-01-01');\n            this.set_maxValue('9999-12-31');\n        }\n        else {\n            this.set_minValue(null);\n            this.set_maxValue(null);\n        }\n    }\n\n    static dateInputChange = function (e: JQueryEventObject) {\n        if (Culture.dateOrder !== 'dmy') {\n            return;\n        }\n        var input = $(e.target);\n        if (!input.is(':input') || input.attr(\"type\") == \"date\") {\n            return;\n        }\n        var val = input.val() ?? '';\n        var x = {};\n        if (val.length >= 6 && /^[0-9]*$/g.test(val)) {\n            input.val(val.substr(0, 2) + Culture.dateSeparator + val.substr(2, 2) + Culture.dateSeparator + val.substr(4));\n        }\n        val = input.val() ?? '';\n        if (val.length >= 5) {\n            var d = parseDate(val);\n            if (d && !isNaN(d.valueOf())) {\n                input.val(formatDate(d, null));\n            }\n        }\n    };\n\n    static flatPickrTrigger(input: JQuery): JQuery {\n        return $('<i class=\"ui-datepicker-trigger\" href=\"javascript:;\">' + datePickerIconSvg + '</i>')\n            .insertAfter(input)\n            .click(() => {\n                if (!input.hasClass('readonly'))\n                    (input[0] as any)._flatpickr.open();\n            });\n    }\n\n    static dateInputKeyup(e: JQueryEventObject) {\n\n        if (Culture.dateOrder !== 'dmy') {\n            return;\n        }\n\n        var input = $(e.target);\n        if (!input.is(':input') || input.attr(\"type\") == \"date\") {\n            // for browser date editors, format might not match culture setting\n            return;\n        }\n\n        if (input.is('[readonly]') || input.is(':disabled')) {\n            return;\n        }\n\n        var val: string = input.val() ?? '';\n        if (!!(val.length === 0 || (input[0] as any).selectionEnd !== val.length)) {\n            return;\n        }\n\n        if (val.indexOf(Culture.dateSeparator + Culture.dateSeparator) !== -1) {\n            input.val(replaceAll(val, Culture.dateSeparator + Culture.dateSeparator,\n                Culture.dateSeparator));\n            return;\n        }\n\n        function isNumeric(c: number): boolean {\n            return c >= 48 && c <= 57;\n        }\n\n        if (e.which === 47 || e.which === 111) {\n\n            if (val.length >= 2 && val.charAt(val.length - 1) === Culture.dateSeparator &&\n                val.charAt(val.length - 2) === Culture.dateSeparator) {\n                input.val(val.substr(0, val.length - 1));\n                return;\n            }\n\n            if (val.charAt(val.length - 1) !== Culture.dateSeparator) {\n                return;\n            }\n\n            switch (val.length) {\n                case 2: {\n                    if (isNumeric(val.charCodeAt(0))) {\n                        val = '0' + val;\n                        break;\n                    }\n                    else {\n                        return;\n                    }\n                }\n\n                case 4: {\n                    if (isNumeric(val.charCodeAt(0)) &&\n                        isNumeric(val.charCodeAt(2)) &&\n                        val.charAt(1) == Culture.dateSeparator) {\n                        val = '0' + val.charAt(0) + Culture.dateSeparator + '0' +\n                            val.charAt(2) + Culture.dateSeparator;\n                        break;\n                    }\n                    else {\n                        return;\n                    }\n                }\n\n                case 5: {\n                    if (isNumeric(val.charCodeAt(0)) &&\n                        isNumeric(val.charCodeAt(2)) &&\n                        isNumeric(val.charCodeAt(3)) &&\n                        val.charAt(1) === Culture.dateSeparator) {\n                        val = '0' + val;\n                        break;\n                    }\n                    else if (isNumeric(val.charCodeAt(0)) &&\n                        isNumeric(val.charCodeAt(1)) &&\n                        isNumeric(val.charCodeAt(3)) &&\n                        val.charAt(2) === Culture.dateSeparator) {\n                        val = val.charAt(0) + val.charAt(1) +\n                            Culture.dateSeparator + '0' + val.charAt(3) + Culture.dateSeparator;\n                        break;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                default: {\n                    return;\n                }\n            }\n            input.val(val);\n        }\n\n        if (val.length < 6 && (e.which >= 48 && e.which <= 57 || e.which >= 96 && e.which <= 105) &&\n            isNumeric(val.charCodeAt(val.length - 1))) {\n            switch (val.length) {\n                case 1: {\n                    if (val.charCodeAt(0) <= 51) {\n                        return;\n                    }\n                    val = '0' + val;\n                    break;\n                }\n\n                case 2: {\n                    if (!isNumeric(val.charCodeAt(0))) {\n                        return;\n                    }\n                    break;\n                }\n\n                case 3: {\n                    if (!isNumeric(val.charCodeAt(0)) ||\n                        val.charAt(1) !== Culture.dateSeparator ||\n                        val.charCodeAt(2) <= 49) {\n                        return;\n                    }\n\n                    val = '0' + val.charAt(0) + Culture.dateSeparator + '0' + val.charAt(2);\n                    break;\n                }\n\n                case 4: {\n                    if (val.charAt(1) == Culture.dateSeparator) {\n                        if (!isNumeric(val.charCodeAt(0)) ||\n                            !isNumeric(val.charCodeAt(2))) {\n                            return;\n                        }\n\n                        val = '0' + val;\n                        break;\n                    }\n                    else if (val.charAt(2) == Culture.dateSeparator) {\n                        if (!isNumeric(val.charCodeAt(0)) ||\n                            !isNumeric(val.charCodeAt(1)) ||\n                            val.charCodeAt(3) <= 49) {\n                            return;\n                        }\n\n                        val = val.charAt(0) + val.charAt(1) + Culture.dateSeparator +\n                            '0' + val.charAt(3);\n                        break;\n                    }\n                    else {\n                        return;\n                    }\n                }\n                case 5: {\n                    if (val.charAt(2) !== Culture.dateSeparator ||\n                        !isNumeric(val.charCodeAt(0)) ||\n                        !isNumeric(val.charCodeAt(1)) ||\n                        !isNumeric(val.charCodeAt(3))) {\n                        return;\n                    }\n\n                    break;\n                }\n\n                default: {\n                    return;\n                }\n            }\n\n            input.val(val + Culture.dateSeparator);\n        }\n    };\n\n    public static uiPickerZIndexWorkaround(input: JQuery) {\n        if (!input?.closest('.ui-dialog').length) \n            return; \n        var dialogIndex = parseInt(input.closest('.ui-dialog').css('z-index'), 10);\n        if (dialogIndex == null || isNaN(dialogIndex))\n            return;\n        setTimeout(() => {\n            var widget = (input as any).datepicker('widget');\n            if (!widget?.length)\n                return\n            var zIndex = parseInt(widget.css('z-index'));\n            if (!isNaN(zIndex) && zIndex <= dialogIndex)\n                widget.css('z-index', dialogIndex + 1);\n        }, 0);\n    }    \n}\n\nfunction jQueryDatepickerInitialization(): boolean {\n    if (!($ as any).datepicker?.regional?.en)\n        return false;\n    let order = Culture.dateOrder;\n    let s = Culture.dateSeparator;\n    let culture = ($('html').attr('lang') || 'en').toLowerCase();\n    if (!($ as any).datepicker.regional[culture]) {\n        culture = culture.split('-')[0];\n        if (!($ as any).datepicker.regional[culture]) {\n            culture = 'en';\n        }\n    }\n    ($ as any).datepicker.setDefaults(($ as any).datepicker.regional['en']);\n    ($ as any).datepicker.setDefaults(($ as any).datepicker.regional[culture]);\n    ($ as any).datepicker.setDefaults({\n        dateFormat: (order == 'mdy' ? 'mm' + s + 'dd' + s + 'yy' :\n            (order == 'ymd' ? 'yy' + s + 'mm' + s + 'dd' :\n                'dd' + s + 'mm' + s + 'yy')),\n        buttonImage: 'data:image/svg+xml,' + encodeURIComponent(datePickerIconSvg),\n        buttonImageOnly: true,\n        showOn: 'both',\n        showButtonPanel: true,\n        changeMonth: true,\n        changeYear: true\n    });\n\n    if (($ as any).ui && ($ as any).ui.version <= '1.12.1') {\n        ($ as any).datepicker.setDefaults({\n            buttonImage: null,\n            buttonImageOnly: false,\n            buttonText: '<i class=\"fa fa-calendar\"></i>'\n        });\n    }\n\n    return true;\n};\n\ntypeof $ !== \"undefined\" && $.fn && !jQueryDatepickerInitialization() && $(jQueryDatepickerInitialization);\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IReadOnly, IStringValue } from \"../../interfaces\";\nimport { addOption, addValidationRule, Culture, format, formatDate, formatISODateTimeUTC, Invariant, isEmptyOrNull, parseDate, parseISODateTime, round, localText, today, trunc, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\nimport { DateEditor } from \"./dateeditor\";\nimport { EditorUtils } from \"./editorutils\";\n\n@Decorators.registerEditor('Serenity.DateTimeEditor', [IStringValue, IReadOnly])\n@Decorators.element('<input type=\"text\"/>')\nexport class DateTimeEditor extends Widget<DateTimeEditorOptions> implements IStringValue, IReadOnly {\n\n    private minValue: string;\n    private maxValue: string;\n    private time: JQuery;\n    private lastSetValue: string;\n    private lastSetValueGet: string;\n\n    constructor(input: JQuery, opt?: DateTimeEditorOptions) {\n        super(input, opt);\n        \n        input.addClass('s-DateTimeEditor');\n\n        if (this.options.inputOnly) {\n            input.addClass('dateTimeQ');\n            // just a basic input, usually read only display\n        }\n        // @ts-ignore\n        else if (typeof flatpickr !== \"undefined\" && (DateEditor.useFlatpickr || !$.fn.datepicker || this.options.seconds)) {\n            input.addClass('dateTimeQ');\n            // @ts-ignore\n            flatpickr(input[0], this.getFlatpickrOptions());\n        }\n        else if (($.fn as any)?.datepicker) {\n            input.addClass('dateQ');\n\n            (input as any).datepicker({\n                showOn: 'button',\n                beforeShow: function () {\n                    if (input.hasClass('readonly') as any)\n                        return false as any;\n                    DateEditor.uiPickerZIndexWorkaround(this.element);\n                    return true;                    \n                } as any,\n                yearRange: (this.options.yearRange ?? '-100:+50')\n            });\n\n            input.bind('change.' + this.uniqueName, (e) => {\n                this.lastSetValue = null;\n                DateEditor.dateInputChange(e);\n            });\n\n            this.time = $('<select/>').addClass('editor s-DateTimeEditor time');\n            var after = input.next('.ui-datepicker-trigger');\n            if (after.length > 0) {\n                this.time.insertAfter(after);\n            }\n            else {\n                after = input.prev('.ui-datepicker-trigger');\n                if (after.length > 0) {\n                    this.time.insertBefore(after);\n                }\n                else {\n                    this.time.insertAfter(input);\n                }\n            }\n\n            this.time.on('change', function (e3) {\n                this.lastSetValue = null;\n                input.triggerHandler('change');\n            });\n\n            var timeOpt = DateTimeEditor.getTimeOptions(\n                (this.options.startHour ?? 0), 0,\n                (this.options.endHour ?? 23), 59,\n                (this.options.intervalMinutes ?? 5));\n\n            for (var t of timeOpt) {\n                addOption(this.time, t, t);\n            }\n\n            addValidationRule(input, this.uniqueName, e1 => {\n                var value = this.get_value();\n                if (isEmptyOrNull(value)) {\n                    return null;\n                }\n\n                if (!isEmptyOrNull(this.get_minValue()) && Invariant.stringCompare(value, this.get_minValue()) < 0) {\n                    return format(localText('Validation.MinDate'), formatDate(this.get_minValue(), null));\n                }\n    \n                if (!isEmptyOrNull(this.get_maxValue()) && Invariant.stringCompare(value, this.get_maxValue()) > 0) {\n                    return format(localText('Validation.MaxDate'), formatDate(this.get_maxValue(), null));\n                }\n\n                return null;\n            });   \n        }\n        else \n            input.attr('type', 'datetime').addClass('dateTimeQ');\n\n        input.bind('keyup.' + this.uniqueName, e => {\n            if (this.get_readOnly())\n                return;\n            \n            if (this.time) {\n                if (e.which === 32) {\n                    if (this.get_valueAsDate() !== new Date()) {\n                        this.set_valueAsDate(new Date());\n                        this.element.trigger('change');\n                    }\n                }\n                else {\n                    var before = this.element.val();\n                    DateEditor.dateInputKeyup(e);\n                    if (before != this.element.val())\n                        this.lastSetValue = null;\n                }\n            }\n        });\n\n        this.set_sqlMinMax(true);\n\n        if (!this.options.inputOnly) {\n            $(\"<i class='inplace-button inplace-now'><b></b></div>\")\n                .attr('title', this.getInplaceNowText())\n                .insertAfter(this.time).click(e2 => {\n                    if (this.element.hasClass('readonly')) {\n                        return;\n                    }\n                    this.lastSetValue = null;\n                    this.set_valueAsDate(new Date());\n                    input.triggerHandler('change');\n                });\n        }\n    }\n\n    getFlatpickrOptions(): any {\n        return {\n            clickOpens: true,\n            allowInput: true,\n            enableTime: true,\n            time_24hr: true,\n            enableSeconds: !!this.options.seconds,\n            minuteIncrement: this.options.intervalMinutes ?? 5,\n            dateFormat: Culture.dateOrder.split('').join(Culture.dateSeparator).replace('y', 'Y') + \" H:i\" + (this.options.seconds ? \":S\" : \"\"),\n            onChange: () => {\n                this.lastSetValue = null;\n                this.element && this.element.triggerHandler('change');\n            }\n        }\n    }\n\n    get_value(): string {           \n        var value = this.element.val().trim();\n        if (value != null && value.length === 0) {\n            return null;\n        }\n\n        var result: string;\n        if (this.time) {\n            var datePart = formatDate(value, 'yyyy-MM-dd');\n            var timePart = this.time.val();\n                result = datePart + 'T' + timePart + ':00.000';\n        }\n        else\n            result = formatDate(parseDate(this.element.val()), \"yyyy-MM-ddTHH:mm:ss.fff\");\n\n        if (this.options.useUtc)\n            result = formatISODateTimeUTC(parseISODateTime(result));\n\n        if (this.lastSetValue != null &&\n            this.lastSetValueGet == result)\n            return this.lastSetValue;\n\n        return result;\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string) {\n        if (isEmptyOrNull(value)) {\n            this.element.val('');\n            this.time && this.time.val('00:00');\n        }\n        else if (value.toLowerCase() === 'today') {\n            if (this.time) {\n                this.element.val(formatDate(today(), null));\n                this.time.val('00:00');\n            }\n            else {\n                this.element.val(this.getDisplayFormat())\n            }\n        }\n        else {\n            var val = ((value.toLowerCase() === 'now') ? new Date() : parseISODateTime(value));\n            if (this.time) {\n                val = DateTimeEditor.roundToMinutes(val, (this.options.intervalMinutes ?? 5));\n                this.element.val(formatDate(val, null));\n                this.time.val(formatDate(val, 'HH:mm'));\n            }\n            else\n                this.element.val(formatDate(val, this.getDisplayFormat()));\n        }\n\n        this.lastSetValue = null;\n        if (!isEmptyOrNull(value) && value.toLowerCase() != 'today' && value.toLowerCase() != 'now') {\n            this.lastSetValueGet = this.get_value();\n            this.lastSetValue = value;\n        }\n    }\n\n    private getInplaceNowText(): string {\n        return tryGetText('Controls.DateTimeEditor.SetToNow') ?? 'set to now';\n    }\n\n    private getDisplayFormat(): string {\n        return (this.options.seconds ? Culture.dateTimeFormat : Culture.dateTimeFormat.replace(':ss', ''));\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    private get_valueAsDate(): Date {\n        if (isEmptyOrNull(this.get_value())) {\n            return null;\n        }\n\n        return parseISODateTime(this.get_value());\n    }\n\n    get valueAsDate() {\n        return this.get_valueAsDate();\n    }\n\n    private set_valueAsDate(value: Date) {\n        if (value == null) {\n            this.set_value(null);\n        }\n\n        this.set_value(formatDate(value, 'yyyy-MM-ddTHH:mm' + (this.options.seconds ? ':ss' : '')));\n    }\n\n    set valueAsDate(value: Date) {\n        this.set_valueAsDate(value);\n    }\n\n    @Decorators.option()\n    get_minValue(): string {\n        return this.minValue;\n    }\n\n    set_minValue(value: string) {\n        this.minValue = value;\n    }\n\n    @Decorators.option()\n    get_maxValue(): string {\n        return this.maxValue;\n    }\n\n    set_maxValue(value: string): void {\n        this.maxValue = value;\n    }\n\n    get_minDate(): Date {\n        return parseISODateTime(this.get_minValue());\n    }\n\n    set_minDate(value: Date): void {\n        this.set_minValue(formatDate(value, 'yyyy-MM-ddTHH:mm:ss'));\n    }\n\n    @Decorators.option()\n    get_maxDate(): Date {\n        return parseISODateTime(this.get_maxValue());\n    }\n\n    set_maxDate(value: Date) {\n        this.set_maxValue(formatDate(value, 'yyyy-MM-ddTHH:mm:ss'));\n    }\n\n    @Decorators.option()\n    get_sqlMinMax(): boolean {\n        return this.get_minValue() === '1753-01-01' && this.get_maxValue() === '9999-12-31';\n    }\n\n    set_sqlMinMax(value: boolean) {\n        if (value) {\n            this.set_minValue('1753-01-01');\n            this.set_maxValue('9999-12-31');\n        }\n        else {\n            this.set_minValue(null);\n            this.set_maxValue(null);\n        }\n    }\n\n    get_readOnly(): boolean {\n        return this.element.hasClass('readonly');\n    }\n\n    set_readOnly(value: boolean): void {\n\n        if (value !== this.get_readOnly()) {\n            if (value) {\n                this.element.addClass('readonly').attr('readonly', 'readonly');\n                this.element.nextAll('.ui-datepicker-trigger').css('opacity', '0.1');\n                this.element.nextAll('.inplace-now').css('opacity', '0.1');\n            }\n            else {\n                this.element.removeClass('readonly').removeAttr('readonly');\n                this.element.nextAll('.ui-datepicker-trigger').css('opacity', '1');\n                this.element.nextAll('.inplace-now').css('opacity', '1');\n            }\n\n            this.time && EditorUtils.setReadonly(this.time, value);\n        }\n    }\n\n    static roundToMinutes(date: Date, minutesStep: number) {\n        date = new Date(date.getTime());\n        var m = trunc(round(date.getMinutes() / minutesStep) * minutesStep);\n        date.setMinutes(m);\n        date.setSeconds(0);\n        date.setMilliseconds(0);\n        return date;\n    }\n\n    static getTimeOptions = function (fromHour: number, fromMin: number,\n        toHour: number, toMin: number, stepMins: number) {\n        var list = [];\n        if (toHour >= 23) {\n            toHour = 23;\n        }\n        if (toMin >= 60) {\n            toMin = 59;\n        }\n        var hour = fromHour;\n        var min = fromMin;\n        while (true) {\n            if (hour > toHour || hour === toHour && min > toMin) {\n                break;\n            }\n            var t = ((hour >= 10) ? '' : '0') + hour + ':' + ((min >= 10) ? '' : '0') + min;\n            list.push(t);\n            min += stepMins;\n            if (min >= 60) {\n                min -= 60;\n                hour++;\n            }\n        }\n        return list;\n    };\n}\n\nexport interface DateTimeEditorOptions {\n    startHour?: any;\n    endHour?: any;\n    intervalMinutes?: any;\n    yearRange?: string;\n    useUtc?: boolean;\n    seconds?: boolean;\n    inputOnly?: boolean;\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IDoubleValue, IReadOnly } from \"../../interfaces\";\nimport { addOption, toId } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\nimport { EditorUtils } from \"./editorutils\";\n\nexport interface TimeEditorOptions {\n    noEmptyOption?: boolean;\n    startHour?: any;\n    endHour?: any;\n    intervalMinutes?: any;\n}\n\n@Decorators.registerEditor('Serenity.TimeEditor', [IDoubleValue, IReadOnly])\n@Decorators.element(\"<select />\")\nexport class TimeEditor extends Widget<TimeEditorOptions> {\n\n    private minutes: JQuery;\n\n    constructor(input: JQuery, opt?: TimeEditorOptions) {\n        super(input, opt);\n\n        input.addClass('editor s-TimeEditor hour');\n\n        if (!this.options.noEmptyOption) {\n            addOption(input, '', '--');\n        }\n\n        for (var h = (this.options.startHour || 0); h <= (this.options.endHour || 23); h++) {\n            addOption(input, h.toString(), ((h < 10) ? ('0' + h) : h.toString()));\n        }\n\n        this.minutes = $('<select/>').addClass('editor s-TimeEditor minute').insertAfter(input);\n        this.minutes.change(() => this.element.trigger(\"change\"));\n\n        for (var m = 0; m <= 59; m += (this.options.intervalMinutes || 5)) {\n            addOption(this.minutes, m.toString(), ((m < 10) ? ('0' + m) : m.toString()));\n        }\n    }\n\n    public get value(): number {\n        var hour = toId(this.element.val());\n        var minute = toId(this.minutes.val());\n        if (hour == null || minute == null) {\n            return null;\n        }\n        return hour * 60 + minute;\n    }\n\n    protected get_value(): number {\n        return this.value;\n    }\n\n    public set value(value: number) {\n        if (!value) {\n            if (this.options.noEmptyOption) {\n                this.element.val(this.options.startHour);\n                this.minutes.val('0');\n            }\n            else {\n                this.element.val('');\n                this.minutes.val('0');\n            }\n        }\n        else {\n            this.element.val(Math.floor(value / 60).toString());\n            this.minutes.val(value % 60);\n        }\n    }\n\n    protected set_value(value: number): void {\n        this.value = value;\n    }\n\n    get_readOnly(): boolean {\n        return this.element.hasClass('readonly');\n    }\n\n    set_readOnly(value: boolean): void {\n\n        if (value !== this.get_readOnly()) {\n            if (value) {\n                this.element.addClass('readonly').attr('readonly', 'readonly');\n            }\n            else {\n                this.element.removeClass('readonly').removeAttr('readonly');\n            }\n            EditorUtils.setReadonly(this.minutes, value);\n        }\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IReadOnly, IStringValue } from \"../../interfaces\";\nimport { isEmptyOrNull, trimToNull, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface EmailEditorOptions {\n    domain?: string;\n    readOnlyDomain?: boolean;\n}\n\n@Decorators.registerEditor('Serenity.EmailEditor', [IStringValue, IReadOnly])\n@Decorators.element('<input type=\"text\"/>')\nexport class EmailEditor extends Widget<EmailEditorOptions> {\n\n    constructor(input: JQuery, opt: EmailEditorOptions) {\n        super(input, opt);\n\n        EmailEditor.registerValidationMethods();\n\n        input.addClass('emailuser');\n\n        var spanAt = $('<span/>').text('@').addClass('emailat').insertAfter(input);\n\n        var domain = $('<input type=\"text\"/>').addClass('emaildomain').insertAfter(spanAt);\n        domain.bind('blur.' + this.uniqueName, function () {\n            var validator = domain.closest('form').data('validator');\n            if (validator != null) {\n                validator.element(input[0]);\n            }\n        });\n\n        if (!isEmptyOrNull(this.options.domain)) {\n            domain.val(this.options.domain);\n        }\n\n        if (this.options.readOnlyDomain) {\n            domain.attr('readonly', 'readonly').addClass('disabled').attr('tabindex', '-1');\n        }\n\n        input.bind('keypress.' + this.uniqueName, e => {\n            if (e.which === 64) {\n                e.preventDefault();\n                if (!this.options.readOnlyDomain) {\n                    domain.focus();\n                    domain.select();\n                }\n            }\n        });\n\n        domain.bind('keypress.' + this.uniqueName, function (e1) {\n            if (e1.which === 64) {\n                e1.preventDefault();\n            }\n        });\n\n        if (!this.options.readOnlyDomain) {\n            input.change(e2 => this.set_value(input.val()));\n        }\n    }\n\n    static registerValidationMethods(): void {\n        if (!$.validator || !$.validator.methods || $.validator.methods['emailuser'] != null)\n            return;\n\n        $.validator.addMethod('emailuser', function (value, element) {\n\n            var domain = $(element).nextAll('.emaildomain');\n            if (domain.length > 0 && domain.attr('readonly') == null) {\n\n                if (this.optional(element) && this.optional(domain[0])) {\n                    return true;\n                }\n\n                return $.validator.methods.email.call(this, value + '@' + domain.val(), element);\n            }\n            else {\n                return $.validator.methods.email.call(this, value + '@dummy.com', element);\n            }\n        }, tryGetText(\"Validation.Email\") ?? $.validator.messages.email);\n    }\n\n    get_value(): string {\n        var domain = this.element.nextAll('.emaildomain');\n        var value = this.element.val();\n        var domainValue = domain.val();\n        if (isEmptyOrNull(value)) {\n            if (this.options.readOnlyDomain || isEmptyOrNull(domainValue)) {\n                return '';\n            }\n            return '@' + domainValue;\n        }\n        return value + '@' + domainValue;\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string): void {\n        var domain = this.element.nextAll('.emaildomain');\n        value = trimToNull(value);\n        if (value == null) {\n            if (!this.options.readOnlyDomain)\n                domain.val('');\n            this.element.val('');\n        }\n        else {\n            var parts = value.split('@');\n            if (parts.length > 1) {\n                if (!this.options.readOnlyDomain) {\n                    domain.val(parts[1]);\n                    this.element.val(parts[0]);\n                }\n                else if (!isEmptyOrNull(this.options.domain)) {\n                    if (parts[1] !== this.options.domain)\n                        this.element.val(value);\n                    else \n                        this.element.val(parts[0]);\n                }\n                else \n                    this.element.val(parts[0]);\n            }\n            else\n                this.element.val(parts[0]);\n        }\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    get_readOnly(): boolean {\n        var domain = this.element.nextAll('.emaildomain');\n        return !(this.element.attr('readonly') == null &&\n            (!this.options.readOnlyDomain || domain.attr('readonly') == null));\n    }\n\n    set_readOnly(value: boolean): void {\n        var domain = this.element.nextAll('.emaildomain');\n        if (value) {\n            this.element.attr('readonly', 'readonly').addClass('readonly');\n            if (!this.options.readOnlyDomain) {\n                domain.attr('readonly', 'readonly').addClass('readonly');\n            }\n        }\n        else {\n            this.element.removeAttr('readonly').removeClass('readonly');\n            if (!this.options.readOnlyDomain) {\n                domain.removeAttr('readonly').removeClass('readonly');\n            }\n        }\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { StringEditor } from \"./stringeditor\";\n\n@Decorators.registerEditor('Serenity.EmailAddressEditor')\nexport class EmailAddressEditor extends StringEditor {\n    constructor(input: JQuery) {\n        super(input);\n\n        input.attr('type', 'email')\n            .addClass('email');\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { trimToNull } from \"@serenity-is/corelib/q\";\nimport { StringEditor } from \"./stringeditor\";\n\n@Decorators.registerEditor('Serenity.URLEditor', [IStringValue])\nexport class URLEditor extends StringEditor {\n\n    constructor(input: JQuery) {\n        super(input);\n\n        input.addClass(\"url\").attr(\"title\", \"URL should be entered in format: 'http://www.site.com/page'.\");\n\n        input.on(\"blur.\" + this.uniqueName, e => {\n            var validator = input.closest(\"form\").data(\"validator\") as JQueryValidation.Validator;\n            if (validator == null)\n                return;\n\n            if (!input.hasClass(\"error\"))\n                return;\n\n            var value = trimToNull(input.val());\n            if (!value)\n                return;\n\n            value = \"http://\" + value;\n\n            if ($.validator.methods['url'].call(validator, value, input[0]) == true) {\n                input.val(value);\n                validator.element(input);\n            }\n        });\n    }\n}", "\uFEFFimport { Decorators, EnumKeyAttribute } from \"../../decorators\";\nimport { IReadOnly, IStringValue } from \"../../interfaces\";\nimport { Enum, getAttributes, getLookup, isEmptyOrNull, tryGetText } from \"@serenity-is/corelib/q\";\nimport { EnumTypeRegistry } from \"../../types/enumtyperegistry\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface RadioButtonEditorOptions {\n    enumKey?: string;\n    enumType?: any;\n    lookupKey?: string;\n}\n\n@Decorators.registerEditor('Serenity.RadioButtonEditor', [IStringValue, IReadOnly])\n@Decorators.element('<div/>')\nexport class RadioButtonEditor extends Widget<RadioButtonEditorOptions>\n    implements IReadOnly {\n\n    constructor(input: JQuery, opt: RadioButtonEditorOptions) {\n        super(input, opt);\n\n        if (isEmptyOrNull(this.options.enumKey) &&\n            this.options.enumType == null &&\n            isEmptyOrNull(this.options.lookupKey)) {\n            return;\n        }\n\n        if (!isEmptyOrNull(this.options.lookupKey)) {\n            var lookup = getLookup(this.options.lookupKey);\n            for (var item of lookup.items) {\n                var textValue = (item as any)[lookup.textField];\n                var text = (textValue == null ? '' : textValue.toString());\n                var idValue = (item as any)[lookup.idField];\n                var id = (idValue == null ? '' : idValue.toString());\n                this.addRadio(id, text);\n            }\n        }\n        else {\n            var enumType = this.options.enumType || EnumTypeRegistry.get(this.options.enumKey);\n            var enumKey = this.options.enumKey;\n            if (enumKey == null && enumType != null) {\n                var enumKeyAttr = getAttributes(enumType, EnumKeyAttribute, false);\n                if (enumKeyAttr.length > 0) {\n                    enumKey = enumKeyAttr[0].value;\n                }\n            }\n\n            var values = Enum.getValues(enumType);\n            for (var x of values) {\n                var name = Enum.toString(enumType, x);\n                this.addRadio(x.toString(), tryGetText(\n                    'Enums.' + enumKey + '.' + name) ?? name);\n            }\n        }\n    }\n\n    protected addRadio(value: string, text: string) {\n        var label = $('<label/>').text(text);\n        $('<input type=\"radio\"/>').attr('name', this.uniqueName)\n            .attr('id', this.uniqueName + '_' + value)\n            .attr('value', value).prependTo(label);\n        label.appendTo(this.element);\n    }\n\n    get_value(): string {\n        return this.element.find('input:checked').first().val();\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string): void {\n        if (value !== this.get_value()) {\n            var inputs = this.element.find('input');\n            var checks = inputs.filter(':checked');\n            if (checks.length > 0) {\n                (checks[0] as HTMLInputElement).checked = false;\n            }\n            if (!isEmptyOrNull(value)) {\n                checks = inputs.filter('[value=' + value + ']');\n                if (checks.length > 0) {\n                    (checks[0] as HTMLInputElement).checked = true;\n                }\n            }\n        }\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    get_readOnly(): boolean {\n        return this.element.attr('disabled') != null;\n    }\n\n    set_readOnly(value: boolean): void {\n        if (this.get_readOnly() !== value) {\n            if (value) {\n                this.element.attr('disabled', 'disabled')\n                    .find('input').attr('disabled', 'disabled');\n            }\n            else {\n                this.element.removeAttr('disabled')\n                    .find('input').removeAttr('disabled');\n            }\n        }\n    }\n\n}", "\uFEFFimport \"@optionaldeps/jquery\";\n\nconst _Select2 = typeof Select2 !== \"undefined\" ? Select2 : undefined;\n\nexport default _Select2;", "\uFEFFimport Select2 from \"@optionaldeps/select2\";\nimport { Authorization, PropertyItem, any, isEmptyOrNull, isTrimmedEmpty, localText, startsWith, trimToEmpty, trimToNull } from \"@serenity-is/corelib/q\";\nimport { Decorators } from \"../../decorators\";\nimport { IEditDialog, IGetEditValue, IReadOnly, ISetEditValue, IStringValue } from \"../../interfaces\";\nimport { DialogTypeRegistry } from \"../../types/dialogtyperegistry\";\nimport { ReflectionUtils } from \"../../types/reflectionutils\";\nimport { SubDialogHelper } from \"../helpers/subdialoghelper\";\nimport { Widget } from \"../widgets/widget\";\nimport { CascadedWidgetLink } from \"./cascadedwidgetlink\";\nimport { EditorUtils } from \"./editorutils\";\n\nexport interface Select2CommonOptions {\n    allowClear?: boolean;\n    delimited?: boolean;\n    minimumResultsForSearch?: any;\n    multiple?: boolean;\n}\n\nexport interface Select2FilterOptions {\n    cascadeFrom?: string;\n    cascadeField?: string;\n    cascadeValue?: any;\n    filterField?: string;\n    filterValue?: any;\n}\n\nexport interface Select2InplaceAddOptions {\n    inplaceAdd?: boolean;\n    inplaceAddPermission?: string;\n    dialogType?: string;\n    autoComplete?: boolean;\n}\n\nexport interface Select2EditorOptions extends Select2FilterOptions, Select2InplaceAddOptions, Select2CommonOptions {\n}\n\nexport interface Select2SearchPromise {\n    abort?(): void;\n    catch?(callback: () => void): void;\n    fail?(callback: () => void): void;\n}\n\nexport interface Select2SearchQuery {\n    searchTerm?: string;\n    idList?: string[];\n    skip?: number;\n    take?: number;\n    checkMore?: boolean;\n}\n\nexport interface Select2SearchResult<TItem> {\n    items: TItem[];\n    more: boolean;\n}\n\n@Decorators.registerClass('Serenity.Select2Editor',\n    [ISetEditValue, IGetEditValue, IStringValue, IReadOnly])\n@Decorators.element(\"<input type=\\\"hidden\\\"/>\")\nexport class Select2Editor<TOptions, TItem> extends Widget<TOptions> implements\n    ISetEditValue, IGetEditValue, IStringValue, IReadOnly {\n\n    private _items: Select2Item[];\n    private _itemById: { [key: string]: Select2Item };\n    protected lastCreateTerm: string;\n\n    constructor(hidden: JQuery, opt?: any) {\n        super(hidden, opt);\n\n        this._items = [];\n        this._itemById = {};\n        var emptyItemText = this.emptyItemText();\n        if (emptyItemText != null) {\n            hidden.attr('placeholder', emptyItemText);\n        }\n        var select2Options = this.getSelect2Options();\n        hidden.select2(select2Options);\n        hidden.attr('type', 'text');\n\n        // for jquery validate to work\n        hidden.on('change.' + this.uniqueName, (e: any, valueSet) => {\n            if (valueSet !== true && hidden.closest('form').data('validator'))\n                    hidden.valid();\n        });\n\n        this.setCascadeFrom((this.options as Select2EditorOptions).cascadeFrom);\n\n        if (this.useInplaceAdd())\n            this.addInplaceCreate(localText('Controls.SelectEditor.InplaceAdd'), null);\n    }\n\n    destroy() {\n        this.initSelectionPromise?.abort?.();\n        this.abortPendingQuery();\n        this.element?.select2?.('destroy');\n        super.destroy();\n    }\n\n    protected hasAsyncSource(): boolean {\n        return false;\n    }\n\n    protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\n        results({\n            items: [],\n            more: false\n        });\n        return null;\n    }\n\n    protected getTypeDelay() {\n        return ((this.options as any)['typeDelay'] ?? 200);\n    }\n\n    protected emptyItemText() {\n        return this.element.attr('placeholder') ??\n            localText('Controls.SelectEditor.EmptyItemText');\n    }\n\n    protected getPageSize(): number {\n        return (this.options as any)['pageSize'] ?? 100;\n    }\n\n    protected getIdField() {\n        return (this.options as any)['idField'];\n    }\n\n    protected itemId(item: TItem): string {\n        var value = (item as any)[this.getIdField()];\n        if (value == null)\n            return '';\n        return value.toString();\n    }\n\n    protected getTextField() {\n        return (this.options as any)['textField'] ?? this.getIdField();\n    }\n\n    protected itemText(item: TItem): string {\n        var value = (item as any)[this.getTextField()];\n        if (value == null)\n            return '';\n        return value.toString();\n    }\n\n    protected itemDisabled(item: TItem): boolean {\n        return false;\n    }\n\n    protected mapItem(item: TItem): Select2Item {\n        return {\n            id: this.itemId(item),\n            text: this.itemText(item),\n            disabled: this.itemDisabled(item),\n            source: item\n        };\n    }\n\n    protected mapItems(items: TItem[]): Select2Item[] {\n        return items.map(this.mapItem.bind(this));\n    }\n\n    protected allowClear() {\n        return (this.options as Select2EditorOptions).allowClear != null ?\n            !!(this.options as Select2EditorOptions).allowClear : this.emptyItemText() != null;\n    }\n\n    protected isMultiple() {\n        return !!(this.options as Select2EditorOptions).multiple;\n    }\n\n    private initSelectionPromise: Select2SearchPromise;\n    private queryPromise: Select2SearchPromise;\n    private typeTimeout: number;\n\n    protected abortPendingQuery() {\n        this.queryPromise?.abort?.();\n        this.queryPromise = null;\n        if (this.typeTimeout) {\n            clearTimeout(this.typeTimeout);\n            this.typeTimeout = null;\n        }\n    }\n\n    protected getSelect2Options(): Select2Options {\n        var emptyItemText = this.emptyItemText();\n        var opt: Select2Options = {\n            multiple: this.isMultiple(),\n            placeHolder: (!isEmptyOrNull(emptyItemText) ? emptyItemText : null),\n            allowClear: this.allowClear(),\n            createSearchChoicePosition: 'bottom'\n        }\n\n        if (this.hasAsyncSource()) {\n            opt.query = query => {\n                var pageSize = this.getPageSize();\n                var searchQuery: Select2SearchQuery = {\n                    searchTerm: trimToNull(query.term),\n                    skip: (query.page - 1) * pageSize,\n                    take: pageSize,\n                    checkMore: true\n                }\n\n                this.abortPendingQuery();\n\n                var select2 = $(this.element).data('select2');\n                select2?.search?.removeClass?.('select2-active').parent().removeClass('select2-active');\n\n                this.typeTimeout = setTimeout(() => {\n                    this.abortPendingQuery();\n                    select2?.search?.addClass?.('select2-active').parent().addClass('select2-active');\n                    this.queryPromise = this.asyncSearch(searchQuery, result => {\n                        select2?.search?.removeClass?.('select2-active').parent().removeClass('select2-active');\n                        this.queryPromise = null;\n                        query.callback({\n                            results: this.mapItems(result.items),\n                            more: result.more\n                        });\n                    });\n                    (this.queryPromise?.catch || this.queryPromise?.fail)?.call(this.queryPromise, () => {\n                        this.queryPromise = null;\n                        select2?.search?.removeClass?.('select2-active').parent().removeClass('select2-active');\n                    });\n                }, !query.term ? 0 : this.getTypeDelay());\n            }\n\n            opt.initSelection = (element, callback) => {\n                var val = element.val();\n                if (val == null || val == '') {\n                    callback(null);\n                    return;\n                }\n\n                var isMultiple = this.isMultiple();\n                var idList = isMultiple ? val.split(',') : [val]; \n                var searchQuery = {\n                    idList: idList\n                }\n\n                this.initSelectionPromise?.abort?.();\n                this.initSelectionPromise = this.asyncSearch(searchQuery, result => {\n                    this.initSelectionPromise = null;\n                    if (isMultiple) {\n                        var items = (result.items || []).map(x => this.mapItem(x));\n                        this._itemById = this._itemById || {};\n                        for (var item of items)\n                            this._itemById[item.id] = item;\n                        if (this.isAutoComplete &&\n                            items.length != idList.length) {\n                            for (var v of idList) {\n                                if (!any(items, z => z.id == v)) {\n                                    items.push({\n                                        id: v,\n                                        text: v\n                                    });\n                                }\n                            }\n                        }\n                        callback(items);\n                    }\n                    else if (!result.items || !result.items.length) {\n                        if (this.isAutoComplete) {\n                            callback({\n                                id: val,\n                                text: val\n                            });\n                        }\n                        else\n                            callback(null);\n                    }\n                    else {\n                        var item = this.mapItem(result.items[0]);\n                        this._itemById = this._itemById || {};\n                        this._itemById[item.id] = item;\n                        callback(item);\n                    }\n                });\n                (this.initSelectionPromise.catch || this.initSelectionPromise.fail)?.call(this.initSelectionPromise, () => {\n                    this.initSelectionPromise = null;\n                });\n            }\n        }\n        else {\n            opt.data = this._items;\n            opt.query = (query) => {\n                var items = Select2Editor.filterByText(this._items, x => x.text, query.term);\n                var pageSize = this.getPageSize();\n                query.callback({\n                    results: items.slice((query.page - 1) * pageSize, query.page * pageSize),\n                    more: items.length >= query.page * pageSize\n                });\n            }\n            opt.initSelection = (element, callback) => {\n                var val = element.val();\n                var isAutoComplete = this.isAutoComplete();\n                if (this.isMultiple()) {\n                    var list = [];\n                    for (var z of val.split(',')) {\n                        var item2 = this._itemById[z];\n                        if (item2 == null && isAutoComplete) {\n                            item2 = { id: z, text: z };\n                            this.addItem(item2);\n                        }\n                        if (item2 != null) {\n                            list.push(item2);\n                        }\n                    }\n                    callback(list);\n                    return;\n                }\n                var it = this._itemById[val];\n                if (it == null && isAutoComplete) {\n                    it = { id: val, text: val };\n                    this.addItem(it);\n                }\n                callback(it);\n            }\n        }\n\n        if ((this.options as Select2EditorOptions).minimumResultsForSearch != null)\n            opt.minimumResultsForSearch = (this.options as Select2EditorOptions).minimumResultsForSearch;\n\n        if (this.isAutoComplete() || this.useInplaceAdd())\n            opt.createSearchChoice = this.getCreateSearchChoice(null);\n\n        return opt;\n    }\n\n    get_delimited() {\n        return !!(this.options as Select2EditorOptions).delimited;\n    }\n\n    public get items(): Select2Item[] {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't read items property of an async select editor!\");\n\n        return this._items || [];\n    }\n\n    public set items(value: Select2Item[]) {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't set items of an async select editor!\");\n\n        this._items = value || [];\n        this._itemById = {};\n        for (var item of this._items)\n            this._itemById[item.id] = item;\n    }\n\n    protected get itemById(): { [key: string]: Select2Item } {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't read items property of an async select editor!\");\n\n        return this._itemById;\n    }\n\n    protected set itemById(value: { [key: string]: Select2Item }) {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't set itemById of an async select editor!\");\n\n        this._itemById = value || {};\n    }\n\n    public clearItems() {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't clear items of an async select editor!\");\n\n        this._items.length = 0;\n        this._itemById = {};\n    }\n\n    public addItem(item: Select2Item) {\n        if (this.hasAsyncSource())\n            throw new Error(\"Can't add item to an async select editor!\");\n\n        this._items.push(item);\n        this._itemById[item.id] = item;\n    }\n\n    public addOption(key: string, text: string, source?: any, disabled?: boolean) {\n        this.addItem({\n            id: key,\n            text: text,\n            source: source,\n            disabled: disabled\n        });\n    }\n\n    protected addInplaceCreate(addTitle: string, editTitle: string) {\n        var self = this;\n        addTitle = (addTitle ?? localText('Controls.SelectEditor.InplaceAdd'));\n        editTitle = (editTitle ?? localText('Controls.SelectEditor.InplaceEdit'));\n        var inplaceButton = $('<a><b/></a>')\n            .addClass('inplace-button inplace-create')\n            .attr('title', addTitle)\n            .insertAfter(this.element).click(function (e) {\n                self.inplaceCreateClick(e);\n            });\n\n        this.get_select2Container().add(this.element).addClass('has-inplace-button');\n\n        this.element.change(() => {\n            var isNew = this.isMultiple() || isEmptyOrNull(this.get_value());\n            inplaceButton.attr('title', (isNew ? addTitle : editTitle)).toggleClass('edit', !isNew);\n        });\n\n        this.element.change((e: any, valueSet: boolean) => {\n            if (valueSet === true)\n                return;\n            if (this.isMultiple()) {\n                var values = this.get_values();\n                if (values.length > 0 && values[values.length - 1] == (-2147483648).toString()) {\n                    this.set_values(values.slice(0, values.length - 1));\n                    this.inplaceCreateClick(e);\n                }\n            }\n            else if (this.get_value() == (-2147483648).toString()) {\n                this.set_value(null);\n                this.inplaceCreateClick(e);\n            }\n        });\n\n        if (this.isMultiple()) {\n            this.get_select2Container().on('dblclick.' + this.uniqueName, '.select2-search-choice', (e3: JQueryEventObject) => {\n                var q = $(e3.target);\n                if (!q.hasClass('select2-search-choice')) {\n                    q = q.closest('.select2-search-choice');\n                }\n                var index = q.index();\n                var values1 = this.get_values();\n                if (index < 0 || index >= this.get_values().length) {\n                    return;\n                }\n                (e3 as any)['editItem'] = values1[index];\n                this.inplaceCreateClick(e3);\n            });\n        }\n    }\n\n    protected useInplaceAdd(): boolean {\n        return !this.isAutoComplete() &&\n            (this.options as Select2EditorOptions).inplaceAdd &&\n            ((this.options as Select2EditorOptions).inplaceAddPermission == null ||\n                Authorization.hasPermission((this.options as Select2EditorOptions).inplaceAddPermission));\n    }\n\n    protected isAutoComplete(): boolean {\n        return !!(this.options as Select2EditorOptions).autoComplete;\n    }\n\n    public getCreateSearchChoice(getName: (z: any) => string) {\n        return (s: string) => {\n\n            this.lastCreateTerm = s;\n            s = (Select2.util.stripDiacritics(s) ?? '').toLowerCase();\n\n            if (isTrimmedEmpty(s)) {\n                return null;\n            }\n\n            var isAsyncSource = false;\n\n            if (any(this._items || [], (x: Select2Item) => {\n                    var text = getName ? getName(x.source) : x.text;\n                    return Select2.util.stripDiacritics((text ?? '')).toLowerCase() == s;\n            }))\n                return null;\n\n            if (!any(this._items || [], x1 => {\n                return (Select2.util.stripDiacritics(x1.text) ?? '').toLowerCase().indexOf(s) !== -1;\n            })) {\n                if (this.isAutoComplete()) {\n                    return {\n                        id: this.lastCreateTerm,\n                        text: this.lastCreateTerm\n                    };\n                }\n\n                return {\n                    id: (-2147483648).toString(),\n                    text: localText('Controls.SelectEditor.NoResultsClickToDefine')\n                };\n            }\n\n            if (this.isAutoComplete()) {\n                return {\n                    id: this.lastCreateTerm,\n                    text: this.lastCreateTerm\n                };\n            }\n\n            return {\n                id: (-2147483648).toString(),\n                text: localText('Controls.SelectEditor.ClickToDefine')\n            };\n        }\n    }\n\n    setEditValue(source: any, property: PropertyItem) {\n        var val = source[property.name];\n        if(Array.isArray(val)) {\n            this.set_values(val);\n        }\n        else {\n            this.set_value((val == null ? null : val.toString()));\n        }\n    }\n\n    getEditValue(property: PropertyItem, target: any) {\n        if (!this.isMultiple() || this.get_delimited()) {\n            target[property.name] = this.get_value();\n        }\n        else {\n            target[property.name] = this.get_values();\n        }\n    }\n\n    protected get_select2Container(): JQuery {\n        return this.element.prevAll('.select2-container');\n    }\n\n    protected get_items() {\n        return this.items;\n    }\n\n    protected get_itemByKey() {\n        return this.itemById;\n    }\n\n    public static filterByText<TItem>(items: TItem[], getText: (item: TItem) => string, term: string): TItem[] {\n        if (term == null || term.length == 0)\n            return items;\n\n        term = Select2.util.stripDiacritics(term).toUpperCase();\n\n        var contains: TItem[] = [];\n        function filter(item: TItem): boolean {\n            var text = getText(item);\n            if (text == null || !text.length)\n                return false;\n            text = Select2.util.stripDiacritics(text).toUpperCase();\n            if (startsWith(text, term))\n                return true;\n            if (text.indexOf(term) >= 0)\n                contains.push(item);\n            return false;\n        }\n\n        return items.filter(filter).concat(contains);\n    }\n\n    get_value() {\n        var val;\n        if (this.element.data('select2')) {\n            val = this.element.select2('val');\n            if (val != null && Array.isArray(val)) {\n                return val.join(',');\n            }\n        }\n        else\n            val = this.element.val();\n\n        return val;\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string) {\n\n        if (value != this.get_value()) {\n            var val: any = value;\n            if (!isEmptyOrNull(value) && this.isMultiple()) {\n                val = value.split(String.fromCharCode(44)).map(function (x) {\n                    return trimToNull(x);\n                }).filter(function (x1) {\n                    return x1 != null;\n                });\n            }\n\n            var el = this.element;\n            el.select2('val', val);\n            el.data('select2-change-triggered', true);\n            try {\n                el.triggerHandler('change', [true]); // valueSet: true\n            } finally {\n                el.data('select2-change-triggered', false);\n            }\n\n            this.updateInplaceReadOnly();\n        }\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    get selectedItem(): TItem {\n        let selectedValue = this.get_value();\n        if (selectedValue && this._itemById) {\n            let item = this._itemById[selectedValue];\n            if (item)\n                return item.source;\n        }\n        return null;\n    }\n\n    get selectedItems(): TItem[] {\n        let selectedValues = this.values;\n        var result = [];\n        for (var value of selectedValues) {\n            if (value && this._itemById) {\n                let item = this._itemById[value];\n                if (item && item.source)\n                    result.push(item.source);\n                else\n                    result.push(null);\n            }\n        }\n        return result;\n    }\n\n    protected get_values(): string[] {\n\n        var val = this.element.select2('val');\n        if (val == null) {\n            return [];\n        }\n\n        if (Array.isArray(val)) {\n            return val;\n        }\n\n        var str = val;\n        if (isEmptyOrNull(str)) {\n            return [];\n        }\n\n        return [str];\n    }\n\n    get values(): string[] {\n        return this.get_values();\n    }\n\n    protected set_values(value: string[]) {\n\n        if (value == null || value.length === 0) {\n            this.set_value(null);\n            return;\n        }\n\n        this.set_value(value.join(','));\n    }\n\n    set values(value: string[]) {\n        this.set_values(value);\n    }\n\n    protected get_text(): string {\n        return (this.element.select2('data') ?? {}).text;\n    }\n\n    get text(): string {\n        return this.get_text();\n    }\n\n    get_readOnly(): boolean {\n        return !isEmptyOrNull(this.element.attr('readonly'));\n    }\n\n    get readOnly(): boolean {\n        return this.get_readOnly();\n    }\n\n    private updateInplaceReadOnly(): void {\n        var readOnly = this.get_readOnly() &&\n            (this.isMultiple() || !this.value);\n\n        this.element.nextAll('.inplace-create')\n            .attr('disabled', (readOnly ? 'disabled' : ''))\n            .css('opacity', (readOnly ? '0.1' : ''))\n            .css('cursor', (readOnly ? 'default' : ''));\n    }\n\n    set_readOnly(value: boolean) {\n        if (value !== this.get_readOnly()) {\n            this.element.attr(\"readonly\", value ? \"readonly\" : null);\n            this.updateInplaceReadOnly();\n        }\n    }\n\n    set readOnly(value: boolean) {\n        this.set_readOnly(value);\n    }\n\n    protected getCascadeFromValue(parent: Widget<any>) {\n        return EditorUtils.getValue(parent);\n    }\n\n    protected cascadeLink: CascadedWidgetLink<Widget<any>>;\n\n    protected setCascadeFrom(value: string) {\n\n        if (isEmptyOrNull(value)) {\n            if (this.cascadeLink != null) {\n                this.cascadeLink.set_parentID(null);\n                this.cascadeLink = null;\n            }\n            (this.options as Select2EditorOptions).cascadeFrom = null;\n            return;\n        }\n\n        this.cascadeLink = new CascadedWidgetLink<Widget<any>>(Widget, this, p => {\n            this.set_cascadeValue(this.getCascadeFromValue(p));\n        });\n\n        this.cascadeLink.set_parentID(value);\n        (this.options as Select2EditorOptions).cascadeFrom = value;\n    }\n\n    protected get_cascadeFrom(): string {\n        return (this.options as Select2EditorOptions).cascadeFrom;\n    }\n\n    get cascadeFrom(): string {\n        return this.get_cascadeFrom();\n    }\n\n    protected set_cascadeFrom(value: string) {\n        if (value !== (this.options as Select2EditorOptions).cascadeFrom) {\n            this.setCascadeFrom(value);\n            this.updateItems();\n        }\n    }\n\n    set cascadeFrom(value: string) {\n        this.set_cascadeFrom(value);\n    }\n\n    protected get_cascadeField() {\n        return ((this.options as Select2EditorOptions).cascadeField ?? (this.options as Select2EditorOptions).cascadeFrom);\n    }\n\n    get cascadeField(): string {\n        return this.get_cascadeField();\n    }\n\n    protected set_cascadeField(value: string) {\n        (this.options as Select2EditorOptions).cascadeField = value;\n    }\n\n    set cascadeField(value: string) {\n        this.set_cascadeField(value);\n    }\n\n    protected get_cascadeValue(): any {\n        return (this.options as Select2EditorOptions).cascadeValue;\n    }\n\n    get cascadeValue(): any {\n        return this.get_cascadeValue();\n    }\n\n    protected set_cascadeValue(value: any) {\n        if ((this.options as Select2EditorOptions).cascadeValue !== value) {\n            (this.options as Select2EditorOptions).cascadeValue = value;\n            this.set_value(null);\n            this.updateItems();\n        }\n    }\n\n    set cascadeValue(value: any) {\n        this.set_cascadeValue(value);\n    }\n\n    protected get_filterField() {\n        return (this.options as Select2EditorOptions).filterField;\n    }\n\n    get filterField(): string {\n        return this.get_filterField();\n    }\n\n    protected set_filterField(value: string) {\n        (this.options as Select2EditorOptions).filterField = value;\n    }\n\n    set filterField(value: string) {\n        this.set_filterField(value);\n    }\n\n    protected get_filterValue(): any {\n        return (this.options as Select2EditorOptions).filterValue;\n    }\n\n    get filterValue(): any {\n        return this.get_filterValue();\n    }\n\n    protected set_filterValue(value: any) {\n        if ((this.options as Select2EditorOptions).filterValue !== value) {\n            (this.options as Select2EditorOptions).filterValue = value;\n            this.set_value(null);\n            this.updateItems();\n        }\n    }\n\n    set filterValue(value: any) {\n        this.set_filterValue(value);\n    }\n\n    protected cascadeItems(items: TItem[]) {\n\n        var val = this.get_cascadeValue();\n\n        if (val == null || val === '') {\n\n            if (!isEmptyOrNull(this.get_cascadeField())) {\n                return [];\n            }\n\n            return items;\n        }\n\n        var key = val.toString();\n        var fld = this.get_cascadeField();\n\n        return items.filter(x => {\n            var itemKey = (x as any)[fld] ?? ReflectionUtils.getPropertyValue(x, fld);\n            return !!(itemKey != null && itemKey.toString() === key);\n        });\n    }\n\n    protected filterItems(items: TItem[]) {\n        var val = this.get_filterValue();\n\n        if (val == null || val === '') {\n            return items;\n        }\n\n        var key = val.toString();\n        var fld = this.get_filterField();\n\n        return items.filter(x => {\n            var itemKey = (x as any)[fld] ?? ReflectionUtils.getPropertyValue(x, fld);\n            return !!(itemKey != null && itemKey.toString() === key);\n        });\n    }\n\n    protected updateItems() {\n    }\n\n    protected getDialogTypeKey() {\n        if ((this.options as Select2EditorOptions).dialogType != null) {\n            return (this.options as Select2EditorOptions).dialogType;\n        }\n\n        return null;\n    }\n\n    protected createEditDialog(callback: (dlg: IEditDialog) => void) {\n        var dialogTypeKey = this.getDialogTypeKey();\n        var dialogType = DialogTypeRegistry.get(dialogTypeKey);\n        Widget.create({\n            type: dialogType,\n            init: x => callback(x as any)\n        });\n    }\n\n    public onInitNewEntity: (entity: TItem) => void;\n\n    protected initNewEntity(entity: TItem) {\n        if (!isEmptyOrNull(this.get_cascadeField())) {\n            (entity as any)[this.get_cascadeField()] = this.get_cascadeValue();\n        }\n\n        if (!isEmptyOrNull(this.get_filterField())) {\n            (entity as any)[this.get_filterField()] = this.get_filterValue();\n        }\n\n        if (this.onInitNewEntity != null) {\n            this.onInitNewEntity(entity);\n        }\n    }\n\n    protected setEditDialogReadOnly(dialog: any): void {\n        // an ugly workaround\n        dialog.element && dialog.element\n            .find('.tool-button.delete-button')\n            .addClass('disabled')\n            .unbind('click');\n    }\n\n    protected editDialogDataChange() {\n    }\n\n    protected setTermOnNewEntity(entity: TItem, term: string) {\n    }\n\n    protected inplaceCreateClick(e: JQueryEventObject) {\n\n        if (this.get_readOnly() &&\n            ((this.isMultiple() && !(e as any)['editItem']) || !this.value))\n            return;\n\n        this.createEditDialog(dialog => {\n\n            if (this.get_readOnly())\n                this.setEditDialogReadOnly(dialog);\n\n            SubDialogHelper.bindToDataChange(dialog, this, (x, dci) => {\n                this.editDialogDataChange();\n                this.updateItems();\n                this.lastCreateTerm = null;\n\n                if ((dci.type === 'create' || dci.type === 'update') &&\n                    dci.entityId != null) {\n                    var id = dci.entityId.toString();\n\n                    if (this.isMultiple()) {\n                        var values = this.get_values().slice();\n                        if (values.indexOf(id) < 0) {\n                            values.push(id);\n                        }\n                        this.set_values(null);\n                        this.set_values(values.slice());\n                    }\n                    else {\n                        this.set_value(null);\n                        this.set_value(id);\n                    }\n                }\n                else if (this.isMultiple() && dci.type === 'delete' &&\n                    dci.entityId != null) {\n                    var id1 = dci.entityId.toString();\n                    var values1 = this.get_values().slice();\n\n                    var idx1 = values1.indexOf(id1);\n                    if (idx1 >= 0)\n                        values1.splice(idx1, 1);\n\n                    this.set_values(values1.slice());\n                }\n                else if (!this.isMultiple()) {\n                    this.set_value(null);\n                }\n            }, true);\n\n            var editItem = (e as any)['editItem'];\n            if (editItem != null) {\n                dialog.load(editItem, () => {\n                    (dialog as any).dialogOpen(this.openDialogAsPanel);\n                }, null);\n            }\n            else if (this.isMultiple() || isEmptyOrNull(this.get_value())) {\n                var entity: TItem = {} as any;\n                this.setTermOnNewEntity(entity, trimToEmpty(this.lastCreateTerm));\n                this.initNewEntity(entity);\n                dialog.load(entity, () => {\n                    (dialog as any).dialogOpen(this.openDialogAsPanel);\n                }, null);\n            }\n            else {\n                dialog.load(this.get_value(), () => {\n                    (dialog as any).dialogOpen(this.openDialogAsPanel);\n                }, null);\n            }\n        });\n    }\n\n    public openDialogAsPanel: boolean;\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { isEmptyOrNull } from \"@serenity-is/corelib/q\";\nimport { Select2CommonOptions, Select2Editor } from \"./select2editor\";\n\n@Decorators.registerClass('Serenity.SelectEditor')\nexport class SelectEditor extends Select2Editor<SelectEditorOptions, Select2Item> {\n    constructor(hidden: JQuery, opt?: SelectEditorOptions) {\n        super(hidden, opt);\n        this.updateItems();\n    }\n\n    getItems() {\n        return this.options.items || [];\n    }\n\n    protected emptyItemText() {\n        if (!isEmptyOrNull(this.options.emptyOptionText)) {\n            return this.options.emptyOptionText;\n        }\n        return super.emptyItemText();\n    }\n\n    updateItems() {\n        var items = this.getItems();\n        this.clearItems();\n\n        if (items.length > 0) {\n            var isStrings = typeof (items[0]) === 'string';\n            for (var item of items) {\n                var key = isStrings ? item : item[0];\n                var text = isStrings ? item : (item[1] ?? item[0]);\n                this.addOption(key, text, item, false);\n            }\n        }\n    }\n}\n\nexport interface SelectEditorOptions extends Select2CommonOptions {\n    items?: any[];\n    emptyOptionText?: string;\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { startsWith } from \"@serenity-is/corelib/q\";\nimport { SelectEditor, SelectEditorOptions } from \"./selecteditor\";\n\n@Decorators.registerEditor('Serenity.DateYearEditor')\nexport class DateYearEditor extends SelectEditor {\n\n    constructor(hidden: JQuery, opt: DateYearEditorOptions) {\n        super(hidden, opt);\n\n        this.updateItems();\n    }\n\n    getItems() {\n        var opt = this.options as DateYearEditorOptions;\n\n        if (opt.items != null && opt.items.length >= 1) {\n            return opt.items;\n        }\n\n        var years = [];\n        var minYear = (new Date()).getFullYear();\n        var maxYear = (new Date()).getFullYear();\n\n        opt.minYear = (opt.minYear ?? '-10').toString();\n        if (startsWith(opt.minYear, '-')) {\n            minYear -= parseInt(opt.minYear.substr(1), 10);\n        }\n        else if (startsWith(opt.minYear, '+')) {\n            minYear += parseInt(opt.minYear.substr(1), 10);\n        }\n        else {\n            minYear = parseInt(opt.minYear, 10);\n        }\n\n        opt.maxYear = (opt.maxYear ?? '+10').toString();\n        if (startsWith(opt.maxYear, '-')) {\n            maxYear -= parseInt(opt.maxYear.substr(1), 10);\n        }\n        else if (startsWith(opt.maxYear, '+')) {\n            maxYear += parseInt(opt.maxYear.substr(1), 10);\n        }\n        else {\n            maxYear = parseInt(opt.maxYear, 10);\n        }\n\n        if (opt.descending) {\n            for (var i = maxYear; i >= minYear; i--) {\n                years.push(i.toString());\n            }\n        }\n        else {\n            for (var i1 = minYear; i1 <= maxYear; i1++) {\n                years.push(i1.toString());\n            }\n        }\n\n        return years;\n    }\n}\n\nexport interface DateYearEditorOptions extends SelectEditorOptions {\n    minYear?: string;\n    maxYear?: string;\n    descending?: boolean;\n}", "\uFEFFimport { Decorators, EnumKeyAttribute } from \"../../decorators\";\nimport { Enum, getAttributes, tryGetText } from \"@serenity-is/corelib/q\";\nimport { EnumTypeRegistry } from \"../../types/enumtyperegistry\";\nimport { Select2CommonOptions, Select2Editor } from \"./select2editor\";\n\nexport interface EnumEditorOptions extends Select2CommonOptions {\n    enumKey?: string;\n    enumType?: any;\n}\n\n@Decorators.registerEditor('Serenity.EnumEditor')\nexport class EnumEditor extends Select2Editor<EnumEditorOptions, Select2Item> {\n    constructor(hidden: JQuery, opt: EnumEditorOptions) {\n        super(hidden, opt);\n        this.updateItems();\n    }\n\n    protected updateItems(): void {\n        this.clearItems();\n\n        var enumType = this.options.enumType || EnumTypeRegistry.get(this.options.enumKey);\n        var enumKey = this.options.enumKey;\n\n        if (enumKey == null && enumType != null) {\n            var enumKeyAttr = getAttributes(enumType, EnumKeyAttribute, false);\n            if (enumKeyAttr.length > 0) {\n                enumKey = enumKeyAttr[0].value;\n            }\n        }\n\n        var values = Enum.getValues(enumType);\n        for (var x of values) {\n            var name = Enum.toString(enumType, x);\n            this.addOption(parseInt(x, 10).toString(),\n                (tryGetText('Enums.' + enumKey + '.' + name) ?? name), null, false);\n        }\n    }\n\n    protected allowClear() {\n        return (this.options.allowClear ?? true);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { endsWith, getInstanceType, getLookup, getLookupAsync, getTypeFullName, Lookup, reloadLookup, ScriptData } from \"@serenity-is/corelib/q\";\nimport { Select2Editor, Select2EditorOptions, Select2SearchPromise, Select2SearchQuery, Select2SearchResult } from \"./select2editor\";\n\nexport interface LookupEditorOptions extends Select2EditorOptions {\n    lookupKey?: string;\n    async?: boolean;\n}\n\n@Decorators.registerEditor(\"Serenity.LookupEditorBase\")\nexport abstract class LookupEditorBase<TOptions extends LookupEditorOptions, TItem> extends Select2Editor<TOptions, TItem> {\n\n    constructor(input: JQuery, opt?: TOptions) {\n        super(input, opt);\n\n        if (!this.hasAsyncSource()) {\n            this.updateItems();\n            var self = this;\n            ScriptData.bindToChange('Lookup.' + this.getLookupKey(), this.uniqueName, function () {\n                if (!self.hasAsyncSource())\n                    self.updateItems();\n            });\n        }\n    }\n\n    hasAsyncSource(): boolean {\n        return !!this.options.async;\n    }\n\n    destroy(): void {\n        if (!this.hasAsyncSource())\n            ScriptData.unbindFromChange(this.uniqueName);\n\n        super.destroy();\n    }\n\n    protected getLookupKey(): string {\n        if (this.options.lookupKey != null) {\n            return this.options.lookupKey;\n        }\n\n        var key = getTypeFullName(getInstanceType(this));\n\n        var idx = key.indexOf('.');\n        if (idx >= 0) {\n            key = key.substring(idx + 1);\n        }\n\n        if (endsWith(key, 'Editor')) {\n            key = key.substr(0, key.length - 6);\n        }\n\n        return key;\n    }\n\n    protected lookup: Lookup<TItem>;\n\n    protected getLookupAsync(): PromiseLike<Lookup<TItem>> {\n        return getLookupAsync<TItem>(this.getLookupKey());\n    }\n\n    protected getLookup(): Lookup<TItem> {\n        return getLookup<TItem>(this.getLookupKey());\n    }\n\n    protected getItems(lookup: Lookup<TItem>) {\n        return this.filterItems(this.cascadeItems(lookup.items));\n    }\n\n    protected getIdField() {\n        return this.lookup != null ? this.lookup.idField : super.getIdField();\n    }\n\n    protected getItemText(item: TItem, lookup: Lookup<TItem>) {\n        if (lookup == null)\n            return super.itemText(item);\n\n        var textValue = lookup.textFormatter ? lookup.textFormatter(item) : (item as any)[lookup.textField];\n        return textValue == null ? '' : textValue.toString();\n    }\n\n    protected mapItem(item: TItem): Select2Item {\n        return {\n            id: this.itemId(item),\n            text: this.getItemText(item, this.lookup),\n            disabled: this.getItemDisabled(item, this.lookup),\n            source: item\n        };\n    }\n\n    protected getItemDisabled(item: TItem, lookup: Lookup<TItem>) {\n        return super.itemDisabled(item);\n    }\n\n    public updateItems() {\n        if (this.hasAsyncSource())\n            return;\n\n        this.clearItems();\n        this.lookup = this.getLookup();\n        var items = this.getItems(this.lookup);\n        for (var item of items)\n            this.addItem(this.mapItem(item));\n    }\n\n    protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\n        return this.getLookupAsync().then(lookup => {\n            this.lookup = lookup;\n\n            var items = this.getItems(this.lookup);\n\n            if (query.idList != null) {\n                items = items.filter(x => query.idList.indexOf(this.itemId(x)) >= 0);\n            }\n\n            function getText(item: TItem) {\n                return this.getItemText(item, this.lookup);\n            }\n\n            items = Select2Editor.filterByText(items, getText.bind(this), query.searchTerm);\n\n            results({\n                items: items.slice(query.skip, query.take),\n                more: items.length >= query.take\n            });\n        }) as any;\n    }\n\n    protected getDialogTypeKey() {\n        var dialogTypeKey = super.getDialogTypeKey();\n        if (dialogTypeKey)\n            return dialogTypeKey;\n\n        return this.getLookupKey();\n    }\n\n    protected setCreateTermOnNewEntity(entity: TItem, term: string) {\n        (entity as any)[this.getLookup().textField] = term;\n    }\n\n    protected editDialogDataChange() {\n        reloadLookup(this.getLookupKey());\n    }\n}\n\n@Decorators.registerEditor(\"Serenity.LookupEditor\")\nexport class LookupEditor extends LookupEditorBase<LookupEditorOptions, any> {\n    constructor(hidden: JQuery, opt?: LookupEditorOptions) {\n        super(hidden, opt);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { ColumnSelection, Criteria, isEmptyOrNull, ListRequest, ListResponse, resolveUrl, serviceCall, ServiceOptions, startsWith } from \"@serenity-is/corelib/q\";\nimport { Select2Editor, Select2EditorOptions, Select2SearchPromise, Select2SearchQuery, Select2SearchResult } from \"./select2editor\";\n\nexport interface ServiceLookupEditorOptions extends Select2EditorOptions {\n    service?: string;\n    idField: string;\n    textField: string;\n    pageSize?: number;\n    minimumResultsForSearch?: any;\n    sort: string[];\n    columnSelection?: ColumnSelection;\n    includeColumns?: string[];\n    excludeColumns?: string[];\n    includeDeleted?: boolean;\n    containsField?: string;\n    equalityFilter?: any;\n    criteria?: any[];\n}\n\n@Decorators.registerEditor(\"Serenity.ServiceLookupEditorBase\")\nexport abstract class ServiceLookupEditorBase<TOptions extends ServiceLookupEditorOptions, TItem> extends Select2Editor<TOptions, TItem> {\n\n    constructor(input: JQuery, opt?: TOptions) {\n        super(input, opt);\n    }\n\n    protected getDialogTypeKey() {\n        var dialogTypeKey = super.getDialogTypeKey();\n        if (dialogTypeKey)\n            return dialogTypeKey;\n\n        var service = this.getService();\n        if (startsWith(service, \"~/Services/\"))\n            service = service.substr(\"~/Services/\".length);\n\n        if (service.split('/').length == 3)\n            service = service.substr(0, service.lastIndexOf('/'));\n\n        return service.replace(\"/\", \".\");\n    }\n\n    protected getService(): string {\n        return this.options.service;\n    }\n\n    protected getServiceUrl() {\n        var url = this.getService();\n        if (url == null)\n            throw new Error(\"ServiceLookupEditor requires 'service' option to be configured!\");\n\n        if (!startsWith(url, \"~\") && !startsWith(url, \"/\") && url.indexOf('://') < 0)\n            url = \"~/Services/\" + url;\n\n        if (startsWith(url, \"~\"))\n            url = resolveUrl(url);\n\n        return url;\n    }\n\n    protected getIncludeColumns() {\n        var include = this.options.includeColumns || [];\n        var idField = this.getIdField();\n\n        if (idField && include.indexOf(idField) < 0)\n            include.push(idField);\n\n        var textField = this.getTextField();\n        if (textField && include.indexOf(textField) < 0)\n            include.push(textField);\n\n        return include;\n    }\n\n    protected getSort() {\n        return this.options.sort || (this.getTextField() ? [this.getTextField()] : null);\n    }\n\n    protected getCascadeCriteria(): any[] {\n\n        var val = this.get_cascadeValue();\n\n        if (val == null || val === '') {\n\n            if (!isEmptyOrNull(this.get_cascadeField())) {\n                return ['0', '=', '1'];\n            }\n\n            return null;\n        }\n\n        var fld = this.get_cascadeField();\n\n        return Criteria(fld).eq(val);\n    }\n\n    protected getFilterCriteria(): any[] {\n        var val = this.get_filterValue();\n\n        if (val == null || val === '') {\n            return null;\n        }\n\n        var fld = this.get_filterField();\n        return [[fld], '=', val];\n    }\n\n    protected getIdListCriteria(idList: any[]): any[] {\n        if (idList == null)\n            return null;\n\n        if (idList.length == 0)\n            return ['0', '=', '1'];\n\n        var idField = this.getIdField();\n        if (idField == null)\n            throw new Error(\"ServiceLookupEditor requires 'idField' option to be configured!\");\n\n        return Criteria(idField).in(idList);\n    }\n\n    protected getCriteria(query: Select2SearchQuery): any[] {\n        return Criteria.and(\n            Criteria.and(this.getIdListCriteria(query.idList), this.options.criteria),\n            Criteria.and(this.getCascadeCriteria(), this.getFilterCriteria()));\n    }\n\n    protected getListRequest(query: Select2SearchQuery): ListRequest {\n\n        var request: ListRequest = {};\n\n        if (query.searchTerm)\n            request.ContainsText = query.searchTerm;\n\n        request.Sort = this.getSort();\n        request.ColumnSelection = this.options.columnSelection || ColumnSelection.KeyOnly;\n        request.IncludeColumns = this.getIncludeColumns();\n        request.ExcludeColumns = this.options.excludeColumns;\n        request.ContainsField = this.options.containsField;\n        request.EqualityFilter = this.options.equalityFilter;\n        request.Criteria = this.getCriteria(query);\n        request.Skip = query.skip || 0;\n        request.Take = query.take ? (query.checkMore ? query.take + 1 : query.take) : 0;\n        request.IncludeDeleted = this.options.includeDeleted;\n        request.ExcludeTotalCount = true;\n\n        return request;\n    }\n\n    protected getServiceCallOptions(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): ServiceOptions<ListResponse<TItem>> {\n        return {\n            blockUI: false,\n            url: this.getServiceUrl(),\n            request: this.getListRequest(query),\n            onSuccess: response => {\n                var items = response.Entities || [];\n\n                if (items && query.take && query.checkMore && response.Entities.length > items.length)\n                    items = items.slice(0, query.take);\n\n                results({\n                    items: items.slice(0, query.take),\n                    more: query.checkMore && query.take && items.length > query.take\n                });\n            }\n        };\n    }\n\n    protected hasAsyncSource() {\n        return true;\n    }\n\n    protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\n        var opt = this.getServiceCallOptions(query, results);\n        return serviceCall(opt);\n    }\n}\n\n@Decorators.registerEditor('Serenity.ServiceLookupEditor')\nexport class ServiceLookupEditor extends ServiceLookupEditorBase<ServiceLookupEditorOptions, any> {\n    constructor(hidden: JQuery, opt?: ServiceLookupEditorOptions) {\n        super(hidden, opt);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IReadOnly, IStringValue } from \"../../interfaces\";\nimport { endsWith, isEmptyOrNull, isTrimmedEmpty, resolveUrl, localText, trimToNull } from \"@serenity-is/corelib/q\";\nimport { LazyLoadHelper } from \"../helpers/lazyloadhelper\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface HtmlContentEditorOptions {\n    cols?: any;\n    rows?: any;\n}\n\nexport interface CKEditorConfig {\n}    \n\n@Decorators.registerEditor('Serenity.HtmlContentEditor', [IStringValue, IReadOnly])\n@Decorators.element('<textarea/>')\nexport class HtmlContentEditor extends Widget<HtmlContentEditorOptions>\n    implements IStringValue, IReadOnly {\n\n    private _instanceReady: boolean;\n\n    constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\n        super(textArea, opt)\n\n        this._instanceReady = false;\n        HtmlContentEditor.includeCKEditor();\n\n        var id = textArea.attr('id');\n        if (isTrimmedEmpty(id)) {\n            textArea.attr('id', this.uniqueName);\n            id = this.uniqueName;\n        }\n\n        if (this.options.cols != null)\n            textArea.attr('cols', this.options.cols);\n\n        if (this.options.rows != null)\n            textArea.attr('rows', this.options.rows);\n\n        this.addValidationRule(this.uniqueName, e => {\n            if (e.hasClass('required')) {\n                var value = trimToNull(this.get_value());\n                if (value == null)\n                    return localText('Validation.Required');\n            }\n\n            return null;\n        });\n\n        LazyLoadHelper.executeOnceWhenShown(this.element, () => {\n            var config = this.getConfig();\n            (window as any)['CKEDITOR'] && (window as any)['CKEDITOR'].replace(id, config);\n        });\n    }\n\n    protected instanceReady(x: any): void {\n        this._instanceReady = true;\n        $(x.editor.container.$).addClass(this.element.attr('class'));\n        this.element.addClass('select2-offscreen').css('display', 'block');\n\n        // for validation to work\n        x.editor.setData(this.element.val());\n        x.editor.setReadOnly(this.get_readOnly());\n    }\n\n    protected getLanguage(): string {\n        if (!(window as any)['CKEDITOR'])\n            return 'en';\n\n        var CKEDITOR = (window as any)['CKEDITOR'];\n\n        var lang = (trimToNull($('html').attr('lang')) ?? 'en');\n        if (!!CKEDITOR.lang.languages[lang]) {\n            return lang;\n        }\n        if (lang.indexOf(String.fromCharCode(45)) >= 0) {\n            lang = lang.split(String.fromCharCode(45))[0];\n        }\n        if (!!CKEDITOR.lang.languages[lang]) {\n            return lang;\n        }\n        return 'en';\n    }\n\n    protected getConfig(): CKEditorConfig {\n        return {\n            customConfig: '',\n            language: this.getLanguage(),\n            bodyClass: 's-HtmlContentBody',\n            on: {\n                instanceReady: (x: any) => this.instanceReady(x),\n                change: (x1: any) => {\n                    x1.editor.updateElement();\n                    this.element.triggerHandler('change');\n                }\n            },\n            toolbarGroups: [\n                {\n                    name: 'clipboard',\n                    groups: ['clipboard', 'undo']\n                }, {\n                    name: 'editing',\n                    groups: ['find', 'selection', 'spellchecker']\n                }, {\n                    name: 'insert',\n                    groups: ['links', 'insert', 'blocks', 'bidi', 'list', 'indent']\n                }, {\n                    name: 'forms',\n                    groups: ['forms', 'mode', 'document', 'doctools', 'others', 'about', 'tools']\n                }, {\n                    name: 'colors'\n                }, {\n                    name: 'basicstyles',\n                    groups: ['basicstyles', 'cleanup']\n                }, {\n                    name: 'align'\n                }, {\n                    name: 'styles'\n                }],\n            removeButtons: 'SpecialChar,Anchor,Subscript,Styles',\n            format_tags: 'p;h1;h2;h3;pre',\n            removeDialogTabs: 'image:advanced;link:advanced',\n            removePlugins: 'uploadimage,image2',\n            contentsCss: resolveUrl('~/Content/site/site.htmlcontent.css'),\n            entities: false,\n            entities_latin: false,\n            entities_greek: false,\n            autoUpdateElement: true,\n            height: (this.options.rows == null || this.options.rows === 0) ? null :\n                ((this.options.rows * 20) + 'px')\n        };\n    }\n\n    protected getEditorInstance() {\n        var id = this.element.attr('id');\n        return (window as any)['CKEDITOR'].instances[id];\n    }\n\n    destroy(): void {\n        var instance = this.getEditorInstance();\n        instance && instance.destroy(true);\n        super.destroy();\n    }\n\n    get_value(): string {\n        var instance = this.getEditorInstance();\n        if (this._instanceReady && instance) {\n            return instance.getData();\n        }\n        else {\n            return this.element.val();\n        }\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string): void {\n        var instance = this.getEditorInstance();\n        this.element.val(value);\n        if (this._instanceReady && instance)\n            instance.setData(value);\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n\n    get_readOnly(): boolean {\n        return !isEmptyOrNull(this.element.attr('disabled'));\n    }\n\n    set_readOnly(value: boolean) {\n\n        if (this.get_readOnly() !== value) {\n            if (value) {\n                this.element.attr('disabled', 'disabled');\n            }\n            else {\n                this.element.removeAttr('disabled');\n            }\n\n            var instance = this.getEditorInstance();\n            if (this._instanceReady && instance)\n                instance.setReadOnly(value);\n        }\n    }\n\n    static CKEditorVer = \"4.7.1\";\n    static CKEditorBasePath: string;\n\n    static getCKEditorBasePath(): string {\n        var path = HtmlContentEditor.CKEditorBasePath;\n        if (path == null) {\n            // @ts-ignore\n            if (typeof CKEDITOR_BASEPATH !== \"undefined\" && CKEDITOR_BASEPATH)\n                // @ts-ignore\n                path = CKEDITOR_BASEPATH;\n            else\n                return \"~/Serenity.Assets/Scripts/ckeditor/\";\n        }\n        if (endsWith(path, '/'))\n            return path;\n        return path + '/';\n    }\n\n    static includeCKEditor(): void {\n        if ((window as any)['CKEDITOR']) {\n            return;\n        }\n\n        var script = $('#CKEditorScript');\n        if (script.length > 0) {\n            return;\n        }\n\n        $('<script/>').attr('type', 'text/javascript')\n            .attr('id', 'CKEditorScript')\n            .attr('src', resolveUrl(HtmlContentEditor.getCKEditorBasePath() + 'ckeditor.js?v=' +\n                HtmlContentEditor.CKEditorVer))\n            .appendTo(window.document.head);\n    };\n}\n\n@Decorators.registerEditor('Serenity.HtmlNoteContentEditor')\nexport class HtmlNoteContentEditor extends HtmlContentEditor {\n    constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\n        super(textArea, opt);\n    }\n\n    protected getConfig(): CKEditorConfig {\n        var config = super.getConfig();\n        (config as any).removeButtons += ',Cut,Copy,Paste,BulletedList,NumberedList,' +\n            'Indent,Outdent,SpecialChar,Subscript,Superscript,Styles,PasteText,' +\n            'PasteFromWord,Strike,Link,Unlink,CreatePlaceholder,Image,Table,' +\n            'HorizontalRule,Source,Maximize,Format,Font,FontSize,Anchor,Blockquote,' +\n            'CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,' +\n            'JustifyRight,JustifyBlock,Superscript,RemoveFormat';\n\n        (config as any).removePlugins = 'elementspath,uploadimage,image2';\n        return config;\n    }\n}\n\n@Decorators.registerEditor('Serenity.HtmlReportContentEditor')\nexport class HtmlReportContentEditor extends HtmlContentEditor {\n    constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\n        super(textArea, opt);\n    }\n\n    protected getConfig(): CKEditorConfig {\n        var config = super.getConfig();\n        (config as any).removeButtons += ',Cut,Copy,Paste,BulletedList,NumberedList,' +\n            'Indent,Outdent,SpecialChar,Subscript,Superscript,Styles,' +\n            'PasteText,PasteFromWord,Strike,Link,Unlink,CreatePlaceholder,' +\n            'Image,Table,HorizontalRule,Source,Maximize,Format,Font,FontSize,' +\n            'Anchor,Blockquote,CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,' +\n            'JustifyRight,JustifyBlock,Superscript,RemoveFormat';\n\n        (config as any).removePlugins = 'elementspath,uploadimage,image2';\n        return config;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { Widget } from \"../widgets/widget\";\n\n// http://digitalbush.com/projects/masked-input-plugin/\n@Decorators.registerEditor('Serenity.MaskedEditor', [IStringValue])\n@Decorators.element(\"<input type=\\\"text\\\"/>\")\nexport class MaskedEditor extends Widget<MaskedEditorOptions> {\n\n    constructor(input: JQuery, opt?: MaskedEditorOptions) {\n        super(input, opt);\n\n        (input as any).mask(this.options.mask || '', {\n            placeholder: (this.options.placeholder ?? '_')\n        });\n    }\n\n    public get value(): string {\n        this.element.triggerHandler(\"blur.mask\");\n        return this.element.val();\n    }\n\n    protected get_value(): string {\n        return this.value;\n    }\n\n    public set value(value: string) {\n        this.element.val(value);\n    }\n\n    protected set_value(value: string): void {\n        this.value = value;\n    }\n}\n\nexport interface MaskedEditorOptions {\n    mask?: string;\n    placeholder?: string;\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { addValidationRule, isEmptyOrNull, localText } from \"@serenity-is/corelib/q\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface RecaptchaOptions {\n    siteKey?: string;\n    language?: string;\n}\n\n@Decorators.registerEditor('Serenity.Recaptcha', [IStringValue])\n@Decorators.element(\"<div/>\")\nexport class Recaptcha extends Widget<RecaptchaOptions> implements IStringValue {\n    constructor(div: JQuery, opt: RecaptchaOptions) {\n        super(div, opt);\n\n        this.element.addClass('g-recaptcha').attr('data-sitekey', this.options.siteKey);\n        if (!!((window as any)['grecaptcha'] == null && $('script#RecaptchaInclude').length === 0)) {\n            var src = 'https://www.google.com/recaptcha/api.js';\n            var lng = this.options.language;\n            if (lng == null) {\n                lng = $('html').attr('lang') ?? '';\n            }\n            src += '?hl=' + lng;\n            $('<script/>').attr('id', 'RecaptchaInclude').attr('src', src).appendTo(document.body);\n        }\n\n        var valInput = $('<input />').insertBefore(this.element)\n            .attr('id', this.uniqueName + '_validate').val('x');\n\n        var gro: Record<string, string> = {};\n        gro['visibility'] = 'hidden';\n        gro['width'] = '0px';\n        gro['height'] = '0px';\n        gro['padding'] = '0px';\n\n        var input = valInput.css(gro);\n        var self = this;\n\n        addValidationRule(input, this.uniqueName, e => {\n            if (isEmptyOrNull(this.get_value())) {\n                return localText('Validation.Required');\n            }\n            return null;\n        });\n    }\n\n    get_value(): string {\n        return this.element.find('.g-recaptcha-response').val();\n    }\n\n    set_value(value: string): void {\n        // ignore\n    }\n}", "import { alertDialog, htmlEncode, blockUI, blockUndo, endsWith, format, iframeDialog, isEmptyOrNull, notifyError, replaceAll, resolveUrl, round, startsWith, localText } from \"@serenity-is/corelib/q\";\n\nexport namespace UploadHelper {\n\n    export function addUploadInput(options: UploadInputOptions): JQuery {\n        options.container.addClass('fileinput-button');\n\n        var uploadUrl = options.uploadUrl || '~/File/TemporaryUpload';\n        if (options.uploadIntent) {\n            if (uploadUrl.indexOf('?') < 0)\n                uploadUrl += \"?\"\n            else\n                uploadUrl += \"&\";\n            uploadUrl += \"uploadIntent=\";\n            uploadUrl += encodeURIComponent(options.uploadIntent);\n        }\n\n        var uploadInput = $('<input/>').attr('type', 'file')\n            .attr('name', options.inputName + '[]')\n            .attr('data-url', resolveUrl(uploadUrl))\n            .appendTo(options.container);\n\n        if (options.allowMultiple) {\n            uploadInput.attr('multiple', 'multiple');\n        }\n\n        (uploadInput as any).fileupload({\n            dataType: 'json',\n            dropZone: options.zone,\n            pasteZone: options.zone,\n            done: function (e: JQueryEventObject, data: any) {\n                var response = data.result;\n                if (response.Error) {\n                    notifyError(response.Error.Message);\n                    return;\n                } \n\n                if (options.fileDone != null) {\n                    options.fileDone(response, data.files[0].name, data);\n                }\n            },\n            fail: function(e: JQueryEventObject, opt: any) {\n                var xhr = opt?._response?.jqXHR;\n                if (!xhr) {\n                    notifyError('An error occurred during file upload.');\n                    return;\n                }\n\n                if ((xhr.getResponseHeader('content-type') || '')\n                    .toLowerCase().indexOf('application/json') >= 0) {\n                    var json = $.parseJSON(xhr.responseText);\n                    if (json && json.Error && json.Error.Message) {\n                        notifyError(json.Error.Message);\n                        return;\n                    }\n                }\n\n                var html = xhr.responseText;\n                if (html) {\n                    iframeDialog({ html: html });\n                    return;\n                }\n\n                if (!xhr.status) {\n                    if (xhr.statusText != \"abort\")\n                        notifyError(\"An unknown connection error occurred! Check browser console for details.\");\n                    return;\n                }\n\n                if (xhr.status == 500) {\n                    notifyError(\"HTTP 500: Connection refused! Check browser console for details.\");\n                    return;\n                }\n\n                notifyError(\"HTTP \" + xhr.status + ' error! Check browser console for details.');\n            },\n            start: function () {\n                blockUI(null);\n                if (options.progress != null) {\n                    options.progress.show();\n                }\n            },\n            stop: function () {\n                blockUndo();\n                if (options.progress != null) {\n                    options.progress.hide();\n                }\n            },\n            progress: function (e1: JQueryEventObject, data1: any) {\n                if (options.progress != null) {\n                    var percent = data1.loaded / data1.total * 100;\n                    options.progress.children().css('width', percent.toString() + '%');\n                }\n            }\n        });\n        return uploadInput;\n    }\n\n    export function checkImageConstraints(file: UploadResponse,\n        opt: FileUploadConstraints): boolean {\n\n        if (!file.IsImage && !opt.allowNonImage) {\n            alertDialog(localText('Controls.ImageUpload.NotAnImageFile'));\n            return false;\n        }\n        if (opt.minSize > 0 && file.Size < opt.minSize) {\n            alertDialog(format(localText('Controls.ImageUpload.UploadFileTooSmall'),\n                fileSizeDisplay(opt.minSize)));\n            return false;\n        }\n        if (opt.maxSize > 0 && file.Size > opt.maxSize) {\n            alertDialog(format(localText('Controls.ImageUpload.UploadFileTooBig'),\n                fileSizeDisplay(opt.maxSize)));\n            return false;\n        }\n        if (!file.IsImage) {\n            return true;\n        }\n        if (opt.minWidth > 0 && file.Width < opt.minWidth) {\n            alertDialog(format(localText('Controls.ImageUpload.MinWidth'), opt.minWidth));\n            return false;\n        }\n        if (opt.maxWidth > 0 && file.Width > opt.maxWidth) {\n            alertDialog(format(localText('Controls.ImageUpload.MaxWidth'), opt.maxWidth));\n            return false;\n        }\n        if (opt.minHeight > 0 && file.Height < opt.minHeight) {\n            alertDialog(format(localText('Controls.ImageUpload.MinHeight'), opt.minHeight));\n            return false;\n        }\n        if (opt.maxHeight > 0 && file.Height > opt.maxHeight) {\n            alertDialog(format(localText('Controls.ImageUpload.MaxHeight'), opt.maxHeight));\n            return false;\n        }\n        return true;\n    }\n\n    export function fileNameSizeDisplay(name: string, bytes: number): string {\n        return name + ' (' + fileSizeDisplay(bytes) + ')';\n    }\n\n    export function fileSizeDisplay(bytes: number): string {\n        var byteSize = round(bytes * 100 / 1024) * 0.01;\n        var suffix = 'KB';\n        if (byteSize >= 1024) {\n            byteSize = round(byteSize * 100 / 1024) * 0.01;\n            suffix = 'MB';\n        }\n        var sizeParts = byteSize.toString().split(String.fromCharCode(46));\n        var value;\n        if (sizeParts.length > 1) {\n            value = sizeParts[0] + '.' + sizeParts[1].substr(0, 2);\n        }\n        else {\n            value = sizeParts[0];\n        }\n        return value + ' ' + suffix;\n    }\n\n    export function hasImageExtension(filename: string): boolean {\n        if (isEmptyOrNull(filename)) {\n            return false;\n        }\n        filename = filename.toLowerCase();\n        return endsWith(filename, '.jpg') || endsWith(filename, '.jpeg') ||\n            endsWith(filename, '.gif') || endsWith(filename, '.png');\n    }\n\n    export function thumbFileName(filename: string): string {\n        filename = filename ?? '';\n        var idx = filename.lastIndexOf('.');\n        if (idx >= 0) {\n            filename = filename.substr(0, idx);\n        }\n        return filename + '_t.jpg';\n    }\n\n    export function dbFileUrl(filename: string): string {\n        filename = replaceAll(filename ?? '', '\\\\', '/');\n        return resolveUrl('~/upload/') + filename;\n    }\n\n    export function colorBox(link: JQuery, options: any): void {\n        (link as any).colorbox({\n            current: htmlEncode(localText('Controls.ImageUpload.ColorboxCurrent')),\n            previous: htmlEncode(localText('Controls.ImageUpload.ColorboxPrior')),\n            next: htmlEncode(localText('Controls.ImageUpload.ColorboxNext')),\n            close: htmlEncode(localText('Controls.ImageUpload.ColorboxClose'))\n        });\n    }\n\n    export function populateFileSymbols(container: JQuery, items: UploadedFile[],\n        displayOriginalName?: boolean, urlPrefix?: string): void {\n\n        items = items || [];\n        container.html('');\n        for (var index = 0; index < items.length; index++) {\n            var item = items[index];\n            var li = $('<li/>').addClass('file-item').data('index', index);\n            var isImage = hasImageExtension(item.Filename);\n            if (isImage) {\n                li.addClass('file-image');\n            }\n            else {\n                li.addClass('file-binary');\n            }\n            var editLink = '#' + index;\n            var thumb = $('<a/>').addClass('thumb').appendTo(li);\n            var originalName = item.OriginalName ?? '';\n            var fileName = item.Filename;\n            if (urlPrefix != null && fileName != null &&\n                !startsWith(fileName, 'temporary/')) {\n                fileName = urlPrefix + fileName;\n            }\n\n            thumb.attr('href', dbFileUrl(fileName));\n            thumb.attr('target', '_blank');\n            if (!isEmptyOrNull(originalName)) {\n                thumb.attr('title', originalName);\n            }\n\n            if (isImage) {\n                thumb.css('backgroundImage', \"url('\" + dbFileUrl(\n                    thumbFileName(item.Filename)) + \"')\");\n                colorBox(thumb, new Object());\n            }\n\n            if (displayOriginalName) {\n                $('<div/>').addClass('filename').text(originalName)\n                    .attr('title', originalName).appendTo(li);\n            }\n\n            li.appendTo(container);\n        }\n    }\n}\n\nexport interface UploadedFile {\n    Filename?: string;\n    OriginalName?: string;\n}\n\nexport interface UploadInputOptions {\n    container?: JQuery;\n    zone?: JQuery;\n    progress?: JQuery;\n    inputName?: string;\n    allowMultiple?: boolean;\n    uploadIntent?: string;\n    uploadUrl?: string;\n    fileDone?: (p1: UploadResponse, p2: string, p3: any) => void;\n}\n\nexport interface UploadResponse {\n    TemporaryFile: string;\n    Size: number;\n    IsImage: boolean;\n    Width: number;\n    Height: number;\n}\n\nexport interface FileUploadConstraints {\n    minWidth?: number;\n    maxWidth?: number;\n    minHeight?: number;\n    maxHeight?: number;\n    minSize?: number;\n    maxSize?: number;\n    allowNonImage?: boolean;\n    originalNameProperty?: string;\n}\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IGetEditValue, IReadOnly, ISetEditValue, IValidateRequired } from \"../../interfaces\";\nimport { endsWith, extend, isEmptyOrNull, isInstanceOfType, isTrimmedEmpty, PropertyItem, replaceAll, startsWith, localText, trimToNull } from \"@serenity-is/corelib/q\";\nimport { FileUploadConstraints, UploadedFile, UploadHelper, UploadInputOptions } from \"../helpers/uploadhelper\";\nimport { Toolbar, ToolButton } from \"../widgets/toolbar\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface FileUploadEditorOptions extends FileUploadConstraints {\n    displayFileName?: boolean;\n    uploadIntent?: string;\n    uploadUrl?: string;\n    urlPrefix?: string;\n}\n\nexport interface ImageUploadEditorOptions extends FileUploadEditorOptions {\n}\n\n@Decorators.registerEditor('Serenity.FileUploadEditor', [IReadOnly, IGetEditValue, ISetEditValue, IValidateRequired])\n@Decorators.element('<div/>')\nexport class FileUploadEditor extends Widget<FileUploadEditorOptions>\n    implements IReadOnly, IGetEditValue, ISetEditValue, IValidateRequired {\n\n    constructor(div: JQuery, opt: FileUploadEditorOptions) {\n        super(div, opt);\n\n        if (!opt || opt.allowNonImage == null)\n            this.options.allowNonImage = true;\n\n        div.addClass('s-FileUploadEditor');\n        \n        if (isEmptyOrNull(this.options.originalNameProperty))\n            div.addClass('hide-original-name');\n\n        this.toolbar = new Toolbar($('<div/>').appendTo(this.element), {\n            buttons: this.getToolButtons()\n        });\n\n        this.progress = $('<div><div></div></div>')\n            .addClass('upload-progress')\n            .prependTo(this.toolbar.element);\n\n        var uio = this.getUploadInputOptions();\n        this.uploadInput = UploadHelper.addUploadInput(uio);\n\n        this.fileSymbols = $('<ul/>').appendTo(this.element);\n\n        if (!this.element.attr('id'))\n            this.element.attr('id', this.uniqueName);\n\n        this.hiddenInput = $('<input type=\"text\" class=\"s-offscreen\" name=\"' + this.uniqueName +\n            '_Validator\" data-vx-highlight=\"' + this.element.attr('id') + '\"/>')\n            .appendTo(this.element);\n\n        this.updateInterface();\n    }\n\n    protected getUploadInputOptions(): UploadInputOptions {\n        return {\n            container: this.toolbar.findButton('add-file-button'),\n            zone: this.element,\n            inputName: this.uniqueName,\n            progress: this.progress,\n            uploadIntent: this.options.uploadIntent,\n            uploadUrl: this.options.uploadUrl,\n            fileDone: (response, name, data) => {\n                if (!UploadHelper.checkImageConstraints(response, this.options)) {\n                    return;\n                }\n\n                var newEntity: UploadedFile = {\n                    OriginalName: name,\n                    Filename: response.TemporaryFile\n                };\n\n                this.entity = newEntity;\n                this.populate();\n                this.updateInterface();\n\n                var validator = this.hiddenInput.closest('form').data('validator');\n                if (validator != null) {\n                    validator.element(this.hiddenInput);\n                }\n            }\n        }\n    }\n\n    protected addFileButtonText(): string {\n        return localText('Controls.ImageUpload.AddFileButton');\n    }\n\n    protected getToolButtons(): ToolButton[] {\n        return [\n            {\n                title: this.addFileButtonText(),\n                action: 'add-file',\n                cssClass: 'add-file-button',\n                onClick: function () {\n                }\n            },\n            {\n                title: '',\n                hint: localText('Controls.ImageUpload.DeleteButtonHint'),\n                action: 'delete',\n                cssClass: 'delete-button',\n                onClick: () => {\n                    this.entity = null;\n                    this.populate();\n                    this.updateInterface();\n\n                    var validator = this.hiddenInput.closest('form').data('validator');\n                    if (validator != null) {\n                        validator.element(this.hiddenInput);\n                    }\n                }\n            }\n        ];\n    }\n\n    protected populate(): void {\n        var displayOriginalName = this.options.displayFileName ||\n            !isTrimmedEmpty(this.options.originalNameProperty);\n\n        if (this.entity == null) {\n            UploadHelper.populateFileSymbols(this.fileSymbols,\n                null, displayOriginalName, this.options.urlPrefix);\n        }\n        else {\n            UploadHelper.populateFileSymbols(\n                this.fileSymbols, [this.entity], displayOriginalName,\n                this.options.urlPrefix);\n        }\n\n        this.hiddenInput.val(trimToNull((this.get_value() || {}).Filename));\n    }\n\n    protected updateInterface(): void {\n        var addButton = this.toolbar.findButton('add-file-button');\n        var delButton = this.toolbar.findButton('delete-button');\n        addButton.toggleClass('disabled', this.get_readOnly());\n        delButton.toggleClass('disabled', this.get_readOnly() ||\n            this.entity == null);\n    }\n\n    get_readOnly(): boolean {\n        return this.uploadInput.attr('disabled') != null;\n    }\n\n    set_readOnly(value: boolean): void {\n        if (this.get_readOnly() !== value) {\n            if (value) {\n                this.uploadInput.attr('disabled', 'disabled');\n                try {\n                    (this.uploadInput as any).fileupload('disable');\n                }\n                catch {\n                }\n            }\n            else {\n                this.uploadInput.removeAttr('disabled');\n                try {\n                    (this.uploadInput as any).fileupload('enable');\n                } catch {\n                }\n            }\n            this.updateInterface();\n        }\n    }\n\n    get_required(): boolean {\n        return this.hiddenInput.hasClass('required');\n    }\n\n    set_required(value: boolean): void {\n        this.hiddenInput.toggleClass('required', !!value);\n    }\n\n    get_value(): UploadedFile {\n        if (this.entity == null) {\n            return null;\n        }\n        var copy = extend({}, this.entity);\n        return copy;\n    }\n\n    get value(): UploadedFile {\n        return this.get_value();\n    }\n\n    set_value(value: UploadedFile): void {\n        var stringValue = value as string;\n        if (typeof stringValue === \"string\") {\n            var stringValue = trimToNull(stringValue);\n            if (value != null) {\n                var idx = stringValue.indexOf('/');\n                if (idx < 0)\n                    idx = stringValue.indexOf('\\\\');\n                value = <UploadedFile>{\n                    Filename: value,\n                    OriginalName: stringValue.substring(idx + 1)\n                }\n            }\n        }\n        else if (value != null && isTrimmedEmpty(value.Filename))\n            value = null;\n\n        if (value != null) {\n            if (value.Filename == null) {\n                this.entity = null;\n            }\n            else {\n                this.entity = extend({}, value);\n            }\n        }\n        else {\n            this.entity = null;\n        }\n        this.populate();\n\n        var validator = this.hiddenInput.closest('form').data('validator');\n        if (validator != null) {\n            validator.element(this.hiddenInput);\n        }\n\n        this.updateInterface();\n    }\n\n    set value(v: UploadedFile) {\n        this.set_value(v);\n    }\n\n    getEditValue(property: PropertyItem, target: any) {\n        target[property.name] = this.entity == null ? null :\n            trimToNull(this.entity.Filename);\n    }\n\n    setEditValue(source: any, property: PropertyItem) {\n        var value: UploadedFile = {};\n        value.Filename = source[property.name];\n        if (isEmptyOrNull(this.options.originalNameProperty)) {\n\n            if (this.options.displayFileName) {\n                var s = (value.Filename ?? '');\n                var idx = replaceAll(s, '\\\\', '/').lastIndexOf('/');\n                if (idx >= 0) {\n                    value.OriginalName = s.substr(idx + 1);\n                }\n                else {\n                    value.OriginalName = s;\n                }\n            }\n        }\n        else {\n            value.OriginalName = source[this.options.originalNameProperty];\n        }\n\n        this.set_value(value);\n    }\n\n    protected entity: UploadedFile;\n    protected toolbar: Toolbar;\n    protected progress: JQuery;\n    protected fileSymbols: JQuery;\n    protected uploadInput: JQuery;\n    protected hiddenInput: JQuery;\n}\n\n@Decorators.registerEditor('Serenity.ImageUploadEditor')\nexport class ImageUploadEditor extends FileUploadEditor {\n    constructor(div: JQuery, opt: ImageUploadEditorOptions) {\n        super(div, opt);\n\n        if (opt && opt.allowNonImage == null)\n            this.options.allowNonImage = false;\n\n        div.addClass('s-ImageUploadEditor');\n    }\n}\n\n@Decorators.registerEditor('Serenity.MultipleFileUploadEditor', [IReadOnly, IGetEditValue, ISetEditValue, IValidateRequired])\n@Decorators.element('<div/>')\nexport class MultipleFileUploadEditor extends Widget<FileUploadEditorOptions>\n    implements IReadOnly, IGetEditValue, ISetEditValue, IValidateRequired {\n\n    private entities: UploadedFile[];\n    private toolbar: Toolbar;\n    private fileSymbols: JQuery;\n    private uploadInput: JQuery;\n    protected progress: JQuery;\n    protected hiddenInput: JQuery;\n\n    constructor(div: JQuery, opt: ImageUploadEditorOptions) {\n        super(div, opt);\n\n        this.entities = [];\n        div.addClass('s-MultipleFileUploadEditor');\n        var self = this;\n        this.toolbar = new Toolbar($('<div/>').appendTo(this.element), {\n            buttons: this.getToolButtons()\n        });\n\n        this.progress = $('<div><div></div></div>')\n            .addClass('upload-progress')\n            .prependTo(this.toolbar.element);\n\n        this.uploadInput = UploadHelper.addUploadInput(this.getUploadInputOptions());\n\n        this.fileSymbols = $('<ul/>').appendTo(this.element);\n        if (!this.element.attr('id')) {\n            this.element.attr('id', this.uniqueName);\n        }\n\n        this.hiddenInput = $('<input type=\"text\" class=\"s-offscreen\" name=\"' + this.uniqueName +\n            '_Validator\" data-vx-highlight=\"' + this.element.attr('id') + '\" multiple=\"multiple\"></input>').appendTo(this.element);\n\n        this.updateInterface();\n    }\n\n    protected getUploadInputOptions(): UploadInputOptions {\n        var addFileButton = this.toolbar.findButton('add-file-button');\n\n        return {\n            container: addFileButton,\n            zone: this.element,\n            inputName: this.uniqueName,\n            progress: this.progress,\n            uploadIntent: this.options.uploadIntent,\n            uploadUrl: this.options.uploadUrl,\n            allowMultiple: true,\n            fileDone: (response, name) => {\n                if (!UploadHelper.checkImageConstraints(response, this.options)) {\n                    return;\n                }\n                var newEntity = { OriginalName: name, Filename: response.TemporaryFile };\n                this.entities.push(newEntity);\n                this.populate();\n\n                var validator = this.hiddenInput.closest('form').data('validator');\n                if (validator != null) {\n                    validator.element(this.hiddenInput);\n                }\n\n                this.updateInterface();\n            }\n        }\n    }\n\n    protected addFileButtonText(): string {\n        return localText('Controls.ImageUpload.AddFileButton');\n    }\n\n    protected getToolButtons(): ToolButton[] {\n        return [{\n            title: this.addFileButtonText(),\n            action: 'add-file',\n            cssClass: 'add-file-button',\n            onClick: function () {\n            }\n        }];\n    }\n\n    protected populate(): void {\n        UploadHelper.populateFileSymbols(this.fileSymbols, this.entities,\n            true, this.options.urlPrefix);\n\n        this.fileSymbols.children().each((i, e) => {\n            var x = i;\n            $(\"<a class='delete'></a>\").appendTo($(e).children('.filename'))\n                .click(ev => {\n                    ev.preventDefault();\n                    this.entities.splice(x, 1);\n                    this.populate();\n\n                    var validator = this.hiddenInput.closest('form').data('validator');\n                    if (validator != null) {\n                        validator.element(this.hiddenInput);\n                    }\n                });\n        });\n\n        this.hiddenInput.val(trimToNull((this.get_value()[0] || {}).Filename));\n    }\n\n    protected updateInterface(): void {\n        var addButton = this.toolbar.findButton('add-file-button');\n        addButton.toggleClass('disabled', this.get_readOnly());\n        this.fileSymbols.find('a.delete').toggle(!this.get_readOnly());\n    }\n\n    get_readOnly(): boolean {\n        return this.uploadInput.attr('disabled') != null;\n    }\n\n    set_readOnly(value: boolean): void {\n        if (this.get_readOnly() !== value) {\n            if (value) {\n                this.uploadInput.attr('disabled', 'disabled');\n                try {\n                    (this.uploadInput as any).fileupload('disable');\n                }\n                catch {\n                }\n            }\n            else {\n                this.uploadInput.removeAttr('disabled');\n                try {\n                    (this.uploadInput as any).fileupload('enable');\n                } catch {\n                }\n            }\n            this.updateInterface();\n        }\n    }\n\n    get_required(): boolean {\n        return this.hiddenInput.hasClass('required');\n    }\n\n    set_required(value: boolean): void {\n        this.hiddenInput && this.hiddenInput.toggleClass('required', !!value);\n    }\n\n    get_value(): UploadedFile[] {\n        return this.entities.map(function (x) {\n            return extend({}, x);\n        });\n    }\n\n    get value(): UploadedFile[] {\n        return this.get_value();\n    }\n\n    set_value(value: UploadedFile[]) {\n        this.entities = (value || []).map(function (x) {\n            return extend({}, x);\n        });\n        this.populate();\n        this.updateInterface();\n    }\n\n    set value(v: UploadedFile[]) {\n        this.set_value(v);\n    }\n\n    getEditValue(property: PropertyItem, target: any) {\n        if (this.jsonEncodeValue) {\n            target[property.name] = JSON.stringify(this.get_value());\n        }\n        else {\n            target[property.name] = this.get_value();\n        }\n    }\n\n    setEditValue(source: any, property: PropertyItem) {\n        var val = source[property.name];\n        if (isInstanceOfType(val, String)) {\n            var json = trimToNull(val) ?? '[]';\n            if (startsWith(json, '[') && endsWith(json, ']')) {\n                this.set_value($.parseJSON(json));\n            }\n            else {\n                this.set_value([{\n                    Filename: json,\n                    OriginalName: 'UnknownFile'\n                }]);\n            }\n        }\n        else {\n            this.set_value(val as any);\n        }\n    }\n\n    @Decorators.option()\n    public jsonEncodeValue: boolean;\n}\n\n@Decorators.registerEditor('Serenity.MultipleImageUploadEditor')\nexport class MultipleImageUploadEditor extends MultipleFileUploadEditor {\n    constructor(div: JQuery, opt: ImageUploadEditorOptions) {\n        super(div, opt);\n\n        div.addClass('s-MultipleImageUploadEditor');\n    }\n}", "\uFEFFimport { ArgumentNullException, Criteria, ListRequest, delegateCombine, delegateRemove, formatDate, isEmptyOrNull, isTrimmedEmpty, localText, notifyWarning, parseDate, toId, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Decorators } from \"../../decorators\";\nimport { DateEditor } from \"../editors/dateeditor\";\nimport { DateTimeEditor, DateTimeEditorOptions } from \"../editors/datetimeeditor\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { SelectEditor, SelectEditorOptions } from \"../editors/selecteditor\";\nimport { Widget } from \"../widgets/widget\";\nimport { QuickFilter } from \"./quickfilter\";\n\nexport interface QuickFilterBarOptions {\n    filters: QuickFilter<Widget<any>, any>[];\n    getTitle?: (filter: QuickFilter<Widget<any>, any>) => string;\n    idPrefix?: string;\n}\n\n@Decorators.registerClass('Serenity.QuickFilterBar')\n@Decorators.element(\"<div/>\")\nexport class QuickFilterBar extends Widget<QuickFilterBarOptions> {\n\n    constructor(container: JQuery, options?: QuickFilterBarOptions) {\n        super(container, options);\n\n        container.addClass('quick-filters-bar').addClass('clear');\n\n        var filters = this.options.filters;\n        for (var f = 0; f < filters.length; f++) {\n            var filter = filters[f];\n            this.add(filter);\n        }\n\n        this.options.idPrefix = (this.options.idPrefix ?? this.uniqueName + '_');\n    }\n\n    public addSeparator(): void {\n        this.element.append($('<hr/>'));\n    }\n\n    public add<TWidget extends Widget<any>, TOptions>(opt: QuickFilter<TWidget, TOptions>): TWidget {\n\n        if (opt == null) {\n            throw new ArgumentNullException('opt');\n        }\n\n        if (opt.separator) {\n            this.addSeparator();\n        }\n\n        var item = $(\"<div class='quick-filter-item'><span class='quick-filter-label'></span></div>\")\n            .appendTo(this.element)\n            .data('qffield', opt.field).children();\n\n        var title = tryGetText(opt.title) ?? opt.title;\n        if (title == null) {\n            title = this.options.getTitle ? this.options.getTitle(opt) : null;\n            if (title == null) {\n                title = opt.field;\n            }\n        }\n\n        var quickFilter = item.text(title).parent();\n\n        if (opt.displayText != null) {\n            quickFilter.data('qfdisplaytext', opt.displayText);\n        }\n\n        if (opt.saveState != null) {\n            quickFilter.data('qfsavestate', opt.saveState);\n        }\n\n        if (opt.loadState != null) {\n            quickFilter.data('qfloadstate', opt.loadState);\n        }\n\n        if (!isEmptyOrNull(opt.cssClass)) {\n            quickFilter.addClass(opt.cssClass);\n        }\n\n        var widget = Widget.create({\n            type: opt.type,\n            element: e => {\n                if (!isEmptyOrNull(opt.field)) {\n                    e.attr('id', this.options.idPrefix + opt.field);\n                }\n                e.attr('placeholder', ' ');\n                e.appendTo(quickFilter);\n                if (opt.element != null) {\n                    opt.element(e);\n                }\n            },\n            options: opt.options,\n            init: opt.init\n        });\n\n        var submitHandler = (request: ListRequest) => {\n\n            if (quickFilter.hasClass('ignore')) {\n                return;\n            }\n\n            request.EqualityFilter = request.EqualityFilter || {};\n            var value = EditorUtils.getValue(widget);\n            var active = value != null && !isEmptyOrNull(value.toString());\n            if (opt.handler != null) {\n                var args = {\n                    field: opt.field,\n                    request: request,\n                    equalityFilter: request.EqualityFilter,\n                    value: value,\n                    active: active,\n                    widget: widget,\n                    handled: true\n                };\n                opt.handler(args);\n                quickFilter.toggleClass('quick-filter-active', args.active);\n                if (!args.handled) {\n                    request.EqualityFilter[opt.field] = value;\n                }\n            }\n            else {\n                request.EqualityFilter[opt.field] = value;\n                quickFilter.toggleClass('quick-filter-active', active);\n            }\n        };\n\n        widget.changeSelect2(e1 => {\n            // use timeout give cascaded dropdowns a chance to update / clear themselves\n            window.setTimeout(() => this.onChange && this.onChange(e1), 0);\n        });\n\n        this.add_submitHandlers(submitHandler);\n        widget.element.bind('remove.' + this.uniqueName, x => {\n            this.remove_submitHandlers(submitHandler);\n        });\n\n        return widget;\n    }\n\n    public addDateRange(field: string, title?: string): DateEditor {\n        return this.add(QuickFilterBar.dateRange(field, title)) as DateEditor;\n    }\n\n    public static dateRange(field: string, title?: string): QuickFilter<DateEditor, DateTimeEditorOptions> {\n        var end: DateEditor = null;\n        return <QuickFilter<DateEditor, DateTimeEditorOptions>>{\n            field: field,\n            type: DateEditor,\n            title: title,\n            element: function (e1) {\n                end = Widget.create({\n                    type: DateEditor,\n                    element: function (e2) {\n                        e2.insertAfter(e1);\n                    },\n                    options: null,\n                    init: null\n                });\n\n                end.element.change(function (x) {\n                    e1.triggerHandler('change');\n                });\n\n                $('<span/>').addClass('range-separator').text('-').insertAfter(e1);\n            },\n            handler: function (args) {\n                var date1 = parseDate(args.widget.value);\n                if (date1) {\n                    if (isNaN(date1.valueOf())) {\n                        notifyWarning(localText('Validation.DateInvalid'), '', null);\n                        args.widget.element.val('');\n                        date1 = null;\n                    }\n                    else {\n                        args.request.Criteria = Criteria.and(args.request.Criteria, \n                            Criteria(args.field).ge(args.widget.value));   \n                    }\n                }\n\n                var date2 = parseDate(end.value);\n                if (date2) {\n                    if (isNaN(date2?.valueOf())) {\n                        notifyWarning(localText('Validation.DateInvalid'), '', null);\n                        end.element.val('');\n                        date2 = null;\n                    }\n                    else {\n                        var next = new Date(end.valueAsDate.valueOf());\n                        next.setDate(next.getDate() + 1);\n                        args.request.Criteria = Criteria.and(args.request.Criteria,\n                            Criteria(args.field).lt(formatDate(next, 'yyyy-MM-dd')));\n                    }\n                }\n\n                args.active = !!(date1 || date2);\n            },\n            displayText: function (w, l) {\n                var v1 = EditorUtils.getDisplayText(w);\n                var v2 = EditorUtils.getDisplayText(end);\n                if (isEmptyOrNull(v1) && isEmptyOrNull(v2)) {\n                    return null;\n                }\n                var text1 = l + ' >= ' + v1;\n                var text2 = l + ' <= ' + v2;\n                if (!isEmptyOrNull(v1) && !isEmptyOrNull(v2)) {\n                    return text1 + ' ' + (tryGetText('Controls.FilterPanel.And') ?? 'and') + ' ' + text2;\n                }\n                else if (!isEmptyOrNull(v1)) {\n                    return text1;\n                }\n                else {\n                    return text2;\n                }\n            },\n            saveState: function (w1) {\n                return [EditorUtils.getValue(w1), EditorUtils.getValue(end)];\n            },\n            loadState: function (w2, state) {\n                if (state == null || !Array.isArray(state) || state.length !== 2) {\n                    state = [null, null];\n                }\n\n                EditorUtils.setValue(w2, state[0]);\n                EditorUtils.setValue(end, state[1]);\n            }\n        };\n    }\n\n    public addDateTimeRange(field: string, title?: string) {\n        return this.add(QuickFilterBar.dateTimeRange(field, title)) as DateTimeEditor;\n    }\n\n    public static dateTimeRange(field: string, title?: string, useUtc?: boolean): QuickFilter<DateTimeEditor, DateTimeEditorOptions> {\n        var end: DateTimeEditor = null;\n\n        return <QuickFilter<DateTimeEditor, DateTimeEditorOptions>>{\n            field: field,\n            type: DateTimeEditor,\n            title: title,\n            element: function (e1) {\n                end = Widget.create({\n                    type: DateTimeEditor,\n                    element: function (e2) {\n                        e2.insertAfter(e1);\n                    },\n                    options: useUtc == null ? null : { useUtc },\n                    init: null\n                });\n\n                end.element.change(function (x) {\n                    e1.triggerHandler('change');\n                });\n\n                $('<span/>').addClass('range-separator').text('-').insertAfter(e1);\n            },\n            init: function (i) {\n                i.element.parent().find('.time').change(function (x1) {\n                    i.element.triggerHandler('change');\n                });\n            },\n            handler: function (args) {\n                var date1 = parseDate(args.widget.value);\n                if (date1) {\n                    if (isNaN(date1?.valueOf())) {\n                        notifyWarning(localText('Validation.DateInvalid'), '', null);\n                        args.widget.element.val('');\n                        date1 = null;\n                    } \n                    else {\n                        args.request.Criteria = Criteria.and(args.request.Criteria,\n                            Criteria(args.field).ge(args.widget.value));\n                    }\n                }\n\n                var date2 = parseDate(end.value);\n                if (date2) {\n                    if (isNaN(date2?.valueOf())) {\n                        notifyWarning(localText('Validation.DateInvalid'), '', null);\n                        end.element.val('');\n                        date2 = null;\n                    }\n                    else {\n                        args.request.Criteria = Criteria.and(args.request.Criteria,\n                            Criteria(args.field).le(end.value));\n                    }\n                }\n                \n                args.active = !!(date1 || date2);\n            },\n            displayText: function (w, l) {\n                var v1 = EditorUtils.getDisplayText(w);\n                var v2 = EditorUtils.getDisplayText(end);\n                if (isEmptyOrNull(v1) && isEmptyOrNull(v2)) {\n                    return null;\n                }\n                var text1 = l + ' >= ' + v1;\n                var text2 = l + ' <= ' + v2;\n                if (!isEmptyOrNull(v1) && !isEmptyOrNull(v2)) {\n                    return text1 + ' ' + (tryGetText('Controls.FilterPanel.And') ?? 'and') + ' ' + text2;\n                }\n                else if (!isEmptyOrNull(v1)) {\n                    return text1;\n                }\n                else {\n                    return text2;\n                }\n            },\n            saveState: function (w1) {\n                return [EditorUtils.getValue(w1), EditorUtils.getValue(end)];\n            },\n            loadState: function (w2, state) {\n                if (state == null || !Array.isArray(state) || state.length !== 2) {\n                    state = [null, null];\n                }\n                EditorUtils.setValue(w2, state[0]);\n                EditorUtils.setValue(end, state[1]);\n            },\n            options: useUtc == null ? null : { useUtc }\n        };\n    }\n\n    public addBoolean(field: string, title?: string, yes?: string, no?: string): SelectEditor {\n        return this.add(QuickFilterBar.boolean(field, title, yes, no));\n    }\n\n    public static boolean(field: string, title?: string, yes?: string, no?: string): QuickFilter<SelectEditor, SelectEditorOptions> {\n        var opt: SelectEditorOptions = {};\n        var items = [];\n\n        var trueText = yes;\n        if (trueText == null) {\n            trueText = localText('Controls.FilterPanel.OperatorNames.true');\n        }\n        items.push(['1', trueText]);\n\n        var falseText = no;\n        if (falseText == null) {\n            falseText = localText('Controls.FilterPanel.OperatorNames.false');\n        }\n\n        items.push(['0', falseText]);\n\n        opt.items = items;\n\n        return {\n            field: field,\n            type: SelectEditor,\n            title: title,\n            options: opt,\n            handler: function (args) {\n                args.equalityFilter[args.field] = args.value == null || isEmptyOrNull(args.value.toString()) ?\n                    null : !!toId(args.value);\n            }\n        };\n    }\n\n    public onChange: (e: JQueryEventObject) => void;\n\n    private submitHandlers: any;\n\n    destroy() {\n        this.submitHandlers = null;\n        super.destroy();\n    }\n\n    public onSubmit(request: ListRequest) {\n        this.submitHandlers && this.submitHandlers(request);\n    }\n\n    protected add_submitHandlers(action: (request: ListRequest) => void): void {\n        this.submitHandlers = delegateCombine(this.submitHandlers, action);\n    }\n\n    protected remove_submitHandlers(action: (request: ListRequest) => void): void {\n        this.submitHandlers = delegateRemove(this.submitHandlers, action);\n    }\n\n    protected clear_submitHandlers() {\n    }\n\n    public find<TWidget>(type: { new(...args: any[]): TWidget }, field: string): TWidget {\n        return $('#' + this.options.idPrefix + field).getWidget(type);\n    }\n\n    public tryFind<TWidget>(type: { new(...args: any[]): TWidget }, field: string): TWidget {\n        var el = $('#' + this.options.idPrefix + field);\n        if (!el.length)\n            return null;\n\n        return el.tryGetWidget(type);\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { isEmptyOrNull, isValue, localText, trim } from \"@serenity-is/corelib/q\";\nimport { PopupMenuButton } from \"../widgets/toolbar\";\nimport { Widget } from \"../widgets/widget\";\n\nexport interface QuickSearchField {\n    name: string;\n    title: string;\n}\n\nexport interface QuickSearchInputOptions {\n    typeDelay?: number;\n    loadingParentClass?: string;\n    filteredParentClass?: string;\n    onSearch?: (p1: string, p2: string, p3: (p1: boolean) => void) => void;\n    fields?: QuickSearchField[];\n}\n\n@Decorators.registerClass('Serenity.QuickSearchInput')\nexport class QuickSearchInput extends Widget<QuickSearchInputOptions> {\n    private lastValue: string;\n    private field: QuickSearchField;\n    private fieldChanged: boolean;\n    private timer: number;\n\n    constructor(input: JQuery, opt: QuickSearchInputOptions) {\n        super(input, opt);\n\n        input.attr('title', localText('Controls.QuickSearch.Hint'))\n            .attr('placeholder', localText('Controls.QuickSearch.Placeholder'));\n        this.lastValue = trim(input.val() ?? '');\n\n        var self = this;\n        this.element.bind('keyup.' + this.uniqueName, function () {\n            self.checkIfValueChanged();\n        });\n\n        this.element.bind('change.' + this.uniqueName, function () {\n            self.checkIfValueChanged();\n        });\n\n        $('<span><i></i></span>').addClass('quick-search-icon')\n            .insertBefore(input);\n\n        if (isValue(this.options.fields) && this.options.fields.length > 0) {\n            var a = $('<a/>').addClass('quick-search-field').attr('title',\n                localText('Controls.QuickSearch.FieldSelection')).insertBefore(input);\n\n            var menu = $('<ul></ul>').css('width', '120px');\n\n            for (var item of this.options.fields) {\n                var field = { $: item };\n                $('<li><a/></li>').appendTo(menu).children().attr('href', '#')\n                    .text(item.title ?? '').click(function (e: any) {\n                        e.preventDefault();\n                        this.$this.fieldChanged = self.field !== this.field.$;\n                        self.field = this.field.$;\n                        this.$this.updateInputPlaceHolder();\n                        this.$this.checkIfValueChanged();\n                    }.bind({\n                        field: field,\n                        $this: this\n                    }));\n            }\n\n            new PopupMenuButton(a, {\n                positionMy: 'right top',\n                positionAt: 'right bottom',\n                menu: menu\n            });\n\n            this.field = this.options.fields[0];\n            this.updateInputPlaceHolder();\n        }\n\n        this.element.bind('execute-search.' + this.uniqueName, e1 => {\n            if (!!this.timer) {\n                window.clearTimeout(this.timer);\n            }\n            this.searchNow(trim(this.element.val() ?? ''));\n        });\n    }\n\n    protected checkIfValueChanged(): void {\n        if (this.element.hasClass('ignore-change')) {\n            return;\n        }\n\n        var value = this.get_value();\n        if (value == this.lastValue && (!this.fieldChanged || isEmptyOrNull(value))) {\n            this.fieldChanged = false;\n            return;\n        }\n\n        this.fieldChanged = false;\n\n        if (!!this.timer) {\n            window.clearTimeout(this.timer);\n        }\n\n        var self = this;\n        this.timer = window.setTimeout(function () {\n            self.searchNow(value);\n        }, this.options.typeDelay ?? 500);\n\n        this.lastValue = value;\n    }\n\n    get_value() {\n        return trim(this.element.val() ?? '');\n    }\n\n    get_field(): QuickSearchField {\n        return this.field;\n    }\n\n    set_field(value: QuickSearchField): void {\n        if (this.field !== value) {\n            this.fieldChanged = true;\n            this.field = value;\n            this.updateInputPlaceHolder();\n            this.checkIfValueChanged();\n        }\n    }\n\n    protected updateInputPlaceHolder() {\n        var qsf = this.element.prevAll('.quick-search-field');\n        if (this.field) {\n            qsf.text(this.field.title);\n        }\n        else {\n            qsf.text('');\n        }\n    }\n\n    public restoreState(value: string, field: QuickSearchField) {\n        this.fieldChanged = false;\n        this.field = field;\n        var value = trim(value ?? '');\n        this.element.val(value);\n        this.lastValue = value;\n        if (!!this.timer) {\n            window.clearTimeout(this.timer);\n            this.timer = null;\n        }\n        this.updateInputPlaceHolder();\n    }\n\n    protected searchNow(value: string) {\n        this.element.parent().toggleClass(\n            (this.options.filteredParentClass ?? 's-QuickSearchFiltered'), !!(value.length > 0));\n\n        this.element.parent().addClass(this.options.loadingParentClass ?? 's-QuickSearchLoading')\n                .addClass(this.options.loadingParentClass ?? 's-QuickSearchLoading');\n\n        var done = (results: any) => {\n            this.element.removeClass(this.options.loadingParentClass ?? 's-QuickSearchLoading')\n            .parent().removeClass(this.options.loadingParentClass ?? 's-QuickSearchLoading');\n\n            if (!results) {\n                var el = this.element.closest('.s-QuickSearchBar')\n                    .find('.quick-search-icon i')[0] as HTMLElement;\n                if (el) {\n                    el.classList.add('s-shake-effect');\n                    setTimeout(() => el.classList.remove('s-shake-effect'), 2000);\n                }\n            }\n        };\n\n        if (this.options.onSearch != null) {\n            this.options.onSearch(((this.field != null &&\n                !isEmptyOrNull(this.field.name)) ? this.field.name : null), value, done);\n        }\n        else {\n            done(true);\n        }\n    }\n}", "\uFEFFexport {}\n\nexport interface FilterOperator {\n    key?: string;\n    title?: string;\n    format?: string;\n}\n\nexport namespace FilterOperators {\n\n    export const isTrue = 'true';\n    export const isFalse = 'false';\n    export const contains = 'contains';\n    export const startsWith = 'startswith';\n    export const EQ = 'eq';\n    export const NE = 'ne';\n    export const GT = 'gt';\n    export const GE = 'ge';\n    export const LT = 'lt';\n    export const LE = 'le';\n    export const BW = 'bw';\n    export const IN = 'in';\n    export const isNull = 'isnull';\n    export const isNotNull = 'isnotnull';\n\n    export const toCriteriaOperator: { [key: string]: string } = {\n        eq: '=',\n        ne: '!=',\n        gt: '>',\n        ge: '>=',\n        lt: '<',\n        le: '<='\n    };\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { ArgumentNullException, Criteria, Culture, delegateCombine, delegateRemove, PropertyItem, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { FilterLine } from \"./filterline\";\n\n@Decorators.registerClass('Serenity.FilterStore')\nexport class FilterStore {\n\n    constructor(fields: PropertyItem[]) {\n\n        this.items = [];\n\n        if (fields == null) {\n            throw new ArgumentNullException('source');\n        }\n\n        this.fields = fields.slice();\n\n        this.get_fields().sort(function (x, y) {\n            var titleX = tryGetText(x.title);\n            if (titleX == null) {\n                titleX = x.title;\n                if (titleX == null)\n                    titleX = x.name;\n            }\n\n            var titleY = tryGetText(y.title);\n            if (titleY == null) {\n                titleY = y.title;\n                if (titleY == null)\n                    titleY = y.name;\n            }\n\n            return Culture.stringCompare(titleX, titleY);\n        });\n\n        this.fieldByName = {};\n\n        for (var field of fields) {\n            this.get_fieldByName()[field.name] = field;\n        }\n    }\n\n    static getCriteriaFor(items: FilterLine[]): any[] {\n\n        if (items == null)\n            return [''];\n\n        var inParens = false;\n        var currentBlock = [''];\n        var isBlockOr = false;\n        var criteria = [''];\n\n        for (var i = 0; i < items.length; i++) {\n            var line = items[i];\n\n            if (line.leftParen || inParens && line.rightParen) {\n\n                if (!Criteria.isEmpty(currentBlock)) {\n\n                    if (inParens)\n                        currentBlock = Criteria.paren(currentBlock);\n\n                    if (isBlockOr)\n                        criteria = Criteria.or(criteria, currentBlock);\n                    else\n                        criteria = Criteria.and(criteria, currentBlock);\n\n                    currentBlock = [''];\n                }\n\n                inParens = false;\n            }\n\n            if (line.leftParen) {\n                isBlockOr = line.isOr;\n                inParens = true;\n            }\n\n            if (line.isOr)\n                currentBlock = Criteria.or(currentBlock, line.criteria);\n            else\n                currentBlock = Criteria.and(currentBlock, line.criteria);\n        }\n\n        if (!Criteria.isEmpty(currentBlock)) {\n            if (isBlockOr)\n                criteria = Criteria.or(criteria, Criteria.paren(currentBlock));\n            else\n                criteria = Criteria.and(criteria, Criteria.paren(currentBlock));\n        }\n\n        return criteria;\n    }\n\n    static getDisplayTextFor(items: FilterLine[]): string {\n\n        if (items == null)\n            return '';\n\n        var inParens = false;\n        var displayText = '';\n\n        for (var i = 0; i < items.length; i++) {\n            var line = items[i];\n\n            if (inParens && (line.rightParen || line.leftParen)) {\n                displayText += ')';\n                inParens = false;\n            }\n\n            if (displayText.length > 0) {\n                displayText += ' ' + localText('Controls.FilterPanel.' +\n                    (line.isOr ? 'Or' : 'And')) + ' ';\n            }\n\n            if (line.leftParen) {\n                displayText += '(';\n                inParens = true;\n            }\n\n            displayText += line.displayText;\n        }\n\n        if (inParens) {\n            displayText += ')';\n        }\n\n        return displayText;\n    }\n\n    private changed: any;\n    private displayText: string;\n    private fields: PropertyItem[];\n    private fieldByName: { [key: string]: PropertyItem }\n    private items: FilterLine[];\n\n    get_fields(): PropertyItem[] {\n        return this.fields;\n    }\n\n    get_fieldByName(): { [key: string]: PropertyItem } {\n        return this.fieldByName;\n    }\n\n    get_items(): FilterLine[] {\n        return this.items;\n    }\n\n    raiseChanged(): void {\n        this.displayText = null;\n        this.changed && this.changed(this, {});\n    }\n\n    add_changed(value: (e: JQueryEventObject, a: any) => void): void {\n        this.changed = delegateCombine(this.changed, value);\n    }\n\n    remove_changed(value: (e: JQueryEventObject, a: any) => void): void {\n        this.changed = delegateRemove(this.changed, value);\n    }\n\n    get_activeCriteria(): any[] {\n        return FilterStore.getCriteriaFor(this.items);\n    }\n\n    get_displayText(): string {\n        if (this.displayText == null)\n            this.displayText = FilterStore.getDisplayTextFor(this.items);\n        \n        return this.displayText;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { ArgumentNullException, Config, Criteria, deepClone, endsWith, Exception, extend, format, formatDate, getInstanceType, getTypeFullName, getTypeShortName, getTypes, isAssignableFrom, isEmptyOrNull, parseISODateTime, PropertyItem, startsWith, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { EditorTypeRegistry } from \"../../types/editortyperegistry\";\nimport { QuickFilter } from \"../datagrid/quickfilter\";\nimport { DateEditor } from \"../editors/dateeditor\";\nimport { DateTimeEditor } from \"../editors/datetimeeditor\";\nimport { DecimalEditor } from \"../editors/decimaleditor\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { EnumEditor } from \"../editors/enumeditor\";\nimport { IntegerEditor } from \"../editors/integereditor\";\nimport { LookupEditor } from \"../editors/lookupeditor\";\nimport { ServiceLookupEditor } from \"../editors/servicelookupeditor\";\nimport { StringEditor } from \"../editors/stringeditor\";\nimport { Widget } from \"../widgets/widget\";\nimport { FilterOperator, FilterOperators } from \"./filteroperator\";\n\nexport interface IFiltering {\n    createEditor(): void;\n    getCriteria(): CriteriaWithText;\n    getOperators(): FilterOperator[];\n    loadState(state: any): void;\n    saveState(): any;\n    get_field(): PropertyItem;\n    set_field(value: PropertyItem): void;\n    get_container(): JQuery;\n    set_container(value: JQuery): void;\n    get_operator(): FilterOperator;\n    set_operator(value: FilterOperator): void;\n}\n\n@Decorators.registerInterface('Serenity.IFiltering')\nexport class IFiltering {\n}\n\nexport interface CriteriaWithText {\n    criteria?: any[];\n    displayText?: string;\n}\n\nexport interface IQuickFiltering {\n    initQuickFilter(filter: QuickFilter<Widget<any>, any>): void;\n}\n\n@Decorators.registerInterface('Serenity.IQuickFiltering')\nexport class IQuickFiltering {\n}\n\n@Decorators.registerClass('Serenity.BaseFiltering', [IFiltering, IQuickFiltering])\nexport abstract class BaseFiltering implements IFiltering, IQuickFiltering {\n\n    private field: PropertyItem;\n\n    public get_field() {\n        return this.field;\n    }\n\n    set_field(value: PropertyItem) {\n        this.field = value;\n    }\n\n    private container: JQuery;\n\n    get_container(): JQuery {\n        return this.container;\n    }\n\n    set_container(value: JQuery) {\n        this.container = value;\n    }\n\n    private operator: FilterOperator;\n\n    get_operator() {\n        return this.operator;\n    }\n\n    set_operator(value: FilterOperator) {\n        this.operator = value;\n    }\n\n    abstract getOperators(): FilterOperator[];\n\n    protected appendNullableOperators(list: FilterOperator[]) {\n        if (!this.isNullable()) {\n            return list;\n        }\n        list.push({ key: FilterOperators.isNotNull });\n        list.push({ key: FilterOperators.isNull });\n        return list;\n    }\n\n    protected appendComparisonOperators(list: FilterOperator[]) {\n        list.push({ key: FilterOperators.EQ });\n        list.push({ key: FilterOperators.NE });\n        list.push({ key: FilterOperators.LT });\n        list.push({ key: FilterOperators.LE });\n        list.push({ key: FilterOperators.GT });\n        list.push({ key: FilterOperators.GE });\n        return list;\n    }\n\n    protected isNullable() {\n        return this.get_field().required !== true;\n    }\n\n    public createEditor() {\n        switch (this.get_operator().key) {\n            case 'true':\n            case 'false':\n            case 'isnull':\n            case 'isnotnull': {\n                return;\n            }\n            case 'contains':\n            case 'startswith':\n            case 'eq':\n            case 'ne':\n            case 'lt':\n            case 'le':\n            case 'gt':\n            case 'ge': {\n                this.get_container().html('<input type=\"text\"/>');\n                return;\n            }\n        }\n\n        throw new Exception(format(\"Filtering '{0}' has no editor for '{1}' operator\",\n            getTypeFullName(getInstanceType(this)), this.get_operator().key));\n    }\n\n    protected operatorFormat(op: FilterOperator) {\n        return op.format ?? tryGetText('Controls.FilterPanel.OperatorFormats.' + op.key) ?? op.key;\n    }\n\n    protected getTitle(field: PropertyItem) {\n        return tryGetText(field.title) ??(field.title ?? field.name);\n    }\n\n    protected displayText(op: FilterOperator, values?: any[]) {\n        if (!values || values.length === 0) {\n            return format(this.operatorFormat(op), this.getTitle(this.field));\n        }\n        else if (values.length === 1) {\n            return format(this.operatorFormat(op), this.getTitle(this.field), values[0]);\n        }\n        else {\n            return format(this.operatorFormat(op), this.getTitle(this.field), values[0], values[1]);\n        }\n    }\n\n    protected getCriteriaField() {\n        return this.field.name;\n    }\n\n    public getCriteria(): CriteriaWithText {\n        var result: CriteriaWithText = {};\n        var text: string;\n        var field = Criteria(this.getCriteriaField());\n        var op = this.get_operator().key;\n        switch (op) {\n            case 'true': {\n                result.displayText = this.displayText(this.get_operator(), []);\n                result.criteria = field.eq(true);\n                return result;\n            }\n\n            case 'false': {\n                result.displayText = this.displayText(this.get_operator(), []);\n                result.criteria = field.eq(false);\n                return result;\n            }\n\n            case 'isnull': {\n                result.displayText = this.displayText(this.get_operator(), []);\n                result.criteria = field.isNull();\n                return result;\n            }\n\n            case 'isnotnull': {\n                result.displayText = this.displayText(this.get_operator(), []);\n                result.criteria = field.isNotNull();\n                return result;\n            }\n\n            case 'contains': {\n                text = this.getEditorText();\n                result.displayText = this.displayText(this.get_operator(), [text]);\n                result.criteria = field.contains(text);\n                return result;\n            }\n\n            case 'startswith': {\n                text = this.getEditorText();\n                result.displayText = this.displayText(this.get_operator(), [text]);\n                result.criteria = field.startsWith(text);\n                return result;\n            }\n\n            case 'eq':\n            case 'ne':\n            case 'lt':\n            case 'le':\n            case 'gt':\n            case 'ge': {\n                text = this.getEditorText();\n                result.displayText = this.displayText(this.get_operator(), [text]);\n                result.criteria = field[op](this.getEditorValue());\n                return result;\n            }\n        }\n\n        throw new Exception(format(\"Filtering '{0}' has no handler for '{1}' operator\",\n            getTypeFullName(getInstanceType(this)), this.get_operator().key));\n    }\n\n    loadState(state: any) {\n        var input = this.get_container().find(':input').first();\n        input.val(state);\n    }\n\n    saveState() {\n        switch (this.get_operator().key) {\n            case 'contains':\n            case 'startswith':\n            case 'eq':\n            case 'ne':\n            case 'lt':\n            case 'le':\n            case 'gt':\n            case 'ge': {\n                var input = this.get_container().find(':input').first();\n                return input.val();\n            }\n        }\n        return null;\n    }\n\n    protected argumentNull() {\n        return new ArgumentNullException('value', localText('Controls.FilterPanel.ValueRequired'));\n    }\n\n    validateEditorValue(value: string) {\n        if (value.length === 0) {\n            throw this.argumentNull();\n        }\n        return value;\n    }\n\n    getEditorValue() {\n        var input = this.get_container().find(':input').not('.select2-focusser').first();\n        if (input.length !== 1) {\n            throw new Exception(format(\"Couldn't find input in filter container for {0}\",\n                (this.field.title ?? this.field.name)));\n        }\n\n        var value;\n        if (input.data('select2') != null) {\n            value = input.select2('val');\n        }\n        else {\n            value = input.val();\n        }\n\n        value = (value ?? '').trim();\n\n        return this.validateEditorValue(value);\n    }\n\n    getEditorText() {\n        var input = this.get_container().find(':input').not('.select2-focusser').not('.select2-input').first();\n        if (input.length === 0) {\n            return this.get_container().text().trim();\n        }\n        var value;\n        if (input.data('select2') != null) {\n            value = (input.select2('data') ?? {}).text;\n        }\n        else {\n            value = input.val();\n        }\n        return value;\n    }\n\n    initQuickFilter(filter: QuickFilter<Widget<any>, any>) {\n        filter.field = this.getCriteriaField();\n        filter.type = StringEditor;\n        filter.title = this.getTitle(this.field);\n        filter.options = deepClone(this.get_field().quickFilterParams);\n    }\n}\n\nfunction Filtering(name: string) {\n    return Decorators.registerClass('Serenity.' + name + 'Filtering')\n}\n\n@Filtering('BaseEditor')\nexport abstract class BaseEditorFiltering<TEditor extends Widget<any>> extends BaseFiltering {\n    constructor(public editorType: any) {\n        super();\n    }\n\n    protected useEditor() {\n        switch (this.get_operator().key) {\n            case 'eq':\n            case 'ne':\n            case 'lt':\n            case 'le':\n            case 'gt':\n            case 'ge':\n                return true;\n        }\n        return false;\n    }\n\n    protected editor: TEditor;\n\n    createEditor() {\n        if (this.useEditor()) {\n            this.editor = Widget.create({\n                type: this.editorType,\n                container: this.get_container(),\n                options: this.getEditorOptions(),\n                init: null\n            }) as any;\n            return;\n        }\n        this.editor = null;\n        super.createEditor();\n    }\n\n    protected useIdField() {\n        return false;\n    }\n\n    getCriteriaField() {\n        if (this.useEditor() &&\n            this.useIdField() &&\n            !isEmptyOrNull(this.get_field().filteringIdField)) {\n            return this.get_field().filteringIdField;\n        }\n\n        return super.getCriteriaField();\n    }\n\n    getEditorOptions() {\n        var opt = deepClone(this.get_field().editorParams || {});\n        delete opt['cascadeFrom'];\n        // currently can't support cascadeFrom in filtering\n        return extend(opt, this.get_field().filteringParams);\n    }\n\n    loadState(state: any) {\n        if (this.useEditor()) {\n            if (state == null) {\n                return;\n            }\n\n            EditorUtils.setValue(this.editor, state);\n            return;\n        }\n\n        super.loadState(state);\n    }\n\n    saveState() {\n        if (this.useEditor()) {\n            return EditorUtils.getValue(this.editor);\n        }\n\n        return super.saveState();\n    }\n\n    getEditorValue() {\n        if (this.useEditor()) {\n            var value = EditorUtils.getValue(this.editor);\n\n            if (value == null || (typeof value == \"string\" && value.trim().length === 0))\n                throw this.argumentNull();\n\n            return value;\n        }\n\n        return super.getEditorValue();\n    }\n\n    initQuickFilter(filter: QuickFilter<Widget<any>, any>) {\n        super.initQuickFilter(filter);\n\n        filter.type = this.editorType;\n        filter.options = extend(extend({}, deepClone(this.getEditorOptions())), deepClone(this.get_field().quickFilterParams));\n    }\n}\n\n@Filtering('Date')\nexport class DateFiltering extends BaseEditorFiltering<DateEditor> {\n\n    constructor() {\n        super(DateEditor)\n    }\n\n    getOperators(): FilterOperator[] {\n        return this.appendNullableOperators(this.appendComparisonOperators([]));\n    }\n}\n\n@Filtering('Boolean')\nexport class BooleanFiltering extends BaseFiltering {\n    getOperators() {\n        return this.appendNullableOperators([\n            { key: FilterOperators.isTrue },\n            { key: FilterOperators.isFalse }\n        ]);\n    }\n}\n\n@Filtering('DateTime')\nexport class DateTimeFiltering extends BaseEditorFiltering<DateEditor> {\n\n    constructor() {\n        super(DateTimeEditor)\n    }\n\n    getOperators(): FilterOperator[] {\n        return this.appendNullableOperators(\n            this.appendComparisonOperators([]));\n    }\n\n    getCriteria() {\n        var result: CriteriaWithText = {};\n\n        switch (this.get_operator().key) {\n            case 'eq':\n            case 'ne':\n            case 'lt':\n            case 'le':\n            case 'gt':\n            case 'ge': {\n                {\n                    var text = this.getEditorText();\n                    result.displayText = this.displayText(this.get_operator(), [text]);\n                    var date = parseISODateTime(this.getEditorValue());\n                    date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n                    var next = new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1);\n                    var criteria = Criteria(this.getCriteriaField());\n                    var dateValue = formatDate(date, 'yyyy-MM-dd');\n                    var nextValue = formatDate(next, 'yyyy-MM-dd');\n                    switch (this.get_operator().key) {\n                        case 'eq': {\n                            result.criteria = Criteria.and(criteria.ge(dateValue), criteria.lt(nextValue));\n                            return result;\n                        }\n                        case 'ne': {\n                            result.criteria = Criteria.paren(Criteria.or(criteria.lt(dateValue), criteria.gt(nextValue)));\n                            return result;\n                        }\n                        case 'lt': {\n                            result.criteria = criteria.lt(dateValue);\n                            return result;\n                        }\n                        case 'le': {\n                            result.criteria = criteria.lt(nextValue);\n                        }\n                        case 'gt': {\n                            result.criteria = criteria.ge(nextValue);\n                            return result;\n                        }\n                        case 'ge': {\n                            result.criteria = criteria.ge(dateValue);\n                            return result;\n                        }\n                    }\n                }\n                break;\n            }\n        }\n\n        return super.getCriteria();\n    }\n}\n\n@Filtering('Decimal')\nexport class DecimalFiltering extends BaseEditorFiltering<DecimalEditor> {\n    constructor() {\n        super(DecimalEditor);\n    }\n\n    getOperators(): FilterOperator[] {\n        return this.appendNullableOperators(\n            this.appendComparisonOperators([]));\n    }\n}\n\n@Filtering('Editor')\nexport class EditorFiltering extends BaseEditorFiltering<Widget<any>> {\n\n    constructor() {\n        super(Widget)\n    }\n\n    @Decorators.option()\n    editorType: string;\n\n    @Decorators.option()\n    useRelative: boolean;\n\n    @Decorators.option()\n    useLike: boolean;\n\n    getOperators(): FilterOperator[] {\n        var list = [];\n\n        list.push({ key: FilterOperators.EQ });\n        list.push({ key: FilterOperators.NE });\n\n        if (this.useRelative) {\n            list.push({ key: FilterOperators.LT });\n            list.push({ key: FilterOperators.LE });\n            list.push({ key: FilterOperators.GT });\n            list.push({ key: FilterOperators.GE });\n        }\n\n        if (this.useLike) {\n            list.push({ key: FilterOperators.contains });\n            list.push({ key: FilterOperators.startsWith });\n        }\n\n        this.appendNullableOperators(list);\n\n        return list;\n    }\n\n    protected useEditor() {\n        var op = this.get_operator().key;\n\n        return op === FilterOperators.EQ ||\n            op === FilterOperators.NE ||\n            (this.useRelative && (\n                op === FilterOperators.LT ||\n                op === FilterOperators.LE ||\n                op === FilterOperators.GT ||\n                op === FilterOperators.GE));\n    }\n\n    getEditorOptions() {\n        var opt = super.getEditorOptions();\n        if (this.useEditor() && this.editorType === (this.get_field().editorType ?? 'String')) {\n            opt = extend(opt, this.get_field().editorParams);\n        }\n\n        return opt;\n    }\n\n    createEditor() {\n        if (this.useEditor()) {\n            var editorType = EditorTypeRegistry.get(this.editorType);\n\n            this.editor = Widget.create({\n                type: editorType ,\n                element: e => e.appendTo(this.get_container()),\n                options: this.getEditorOptions()\n            });\n\n            return;\n        }\n\n        super.createEditor();\n    }\n\n    protected useIdField(): boolean {\n        return this.useEditor();\n    }\n\n    initQuickFilter(filter: QuickFilter<Widget<any>, any>) {\n        super.initQuickFilter(filter);\n\n        filter.type = EditorTypeRegistry.get(this.editorType);\n    }\n}\n\n@Filtering('Enum')\nexport class EnumFiltering extends BaseEditorFiltering<EnumEditor> {\n    constructor() {\n        super(EnumEditor);\n    }\n\n    getOperators() {\n        var op = [{ key: FilterOperators.EQ }, { key: FilterOperators.NE }];\n        return this.appendNullableOperators(op);\n    }\n}\n\n@Filtering('Integer')\nexport class IntegerFiltering extends BaseEditorFiltering<IntegerEditor> {\n    constructor() {\n        super(IntegerEditor);\n    }\n\n    getOperators(): FilterOperator[] {\n        return this.appendNullableOperators(this.appendComparisonOperators([]));\n    }\n}\n\n@Filtering('Lookup')\nexport class LookupFiltering extends BaseEditorFiltering<LookupEditor> {\n\n    constructor() {\n        super(LookupEditor);\n    }\n\n    getOperators(): FilterOperator[] {\n        var ops = [{ key: FilterOperators.EQ }, { key: FilterOperators.NE }, { key: FilterOperators.contains }, { key: FilterOperators.startsWith }]\n        return this.appendNullableOperators(ops);\n    }\n\n    protected useEditor(): boolean {\n        var op = this.get_operator().key;\n        return op == FilterOperators.EQ || op == FilterOperators.NE;\n    }\n\n    protected useIdField(): boolean {\n        return this.useEditor();\n    }\n\n    getEditorText(): string {\n        if (this.useEditor()) {\n            return this.editor.text;\n        }\n\n        return super.getEditorText();\n    }\n}\n\n@Filtering('ServiceLookup')\nexport class ServiceLookupFiltering extends BaseEditorFiltering<ServiceLookupEditor> {\n\n    constructor() {\n        super(ServiceLookupEditor);\n    }\n\n    getOperators(): FilterOperator[] {\n        var ops = [{ key: FilterOperators.EQ }, { key: FilterOperators.NE }, { key: FilterOperators.contains }, { key: FilterOperators.startsWith }]\n        return this.appendNullableOperators(ops);\n    }\n\n    protected useEditor(): boolean {\n        var op = this.get_operator().key;\n        return op == FilterOperators.EQ || op == FilterOperators.NE;\n    }\n\n    protected useIdField(): boolean {\n        return this.useEditor();\n    }\n\n    getEditorText(): string {\n        if (this.useEditor()) {\n            return this.editor.text;\n        }\n\n        return super.getEditorText();\n    }\n}\n\n@Filtering('String')\nexport class StringFiltering extends BaseFiltering {\n\n    getOperators(): FilterOperator[] {\n        var ops = [\n            { key: FilterOperators.contains }, \n            { key: FilterOperators.startsWith }, \n            { key: FilterOperators.EQ },\n            { key: FilterOperators.NE }\n        ];\n        return this.appendNullableOperators(ops);\n    }\n\n    validateEditorValue(value: string) {\n        if (value.length === 0) {\n            return value;\n        }\n\n        return super.validateEditorValue(value);\n    }\n}\n\nexport namespace FilteringTypeRegistry {\n\n    let knownTypes: { [key: string]: Function };\n\n    function initialize(): void {\n\n        if (knownTypes != null)\n            return;\n        \n        knownTypes = {};\n\n        for (var type of getTypes()) {\n            if (!isAssignableFrom(IFiltering, type))\n                continue;\n                \n            var fullName = getTypeFullName(type).toLowerCase();\n\n            knownTypes[fullName] = type;\n\n            for (var k of Config.rootNamespaces) {\n                if (startsWith(fullName, k.toLowerCase() + '.')) {\n                    var kx = fullName.substr(k.length + 1).toLowerCase();\n\n                    if (knownTypes[kx] == null) {\n                        knownTypes[kx] = type;\n                    }\n                }\n            }\n        }\n\n        setTypeKeysWithoutFilterHandlerSuffix();\n    }\n\n    function setTypeKeysWithoutFilterHandlerSuffix() {\n        var suffix = 'filtering';\n        \n        for (var k of Object.keys(knownTypes)) {\n            if (!endsWith(k, suffix))\n                continue;\n            \n            var p = k.substr(0, k.length - suffix.length);\n            if (isEmptyOrNull(p))\n                continue;\n\n            if (knownTypes[p] != null)\n                continue;\n            \n            knownTypes[p] = knownTypes[k];\n        }\n    }\n\n    function reset(): void {\n        knownTypes = null;\n    }\n\n    export function get(key: string): Function {\n\n        if (isEmptyOrNull(key))\n            throw new ArgumentNullException('key');\n\n        initialize();\n        var formatterType = knownTypes[key.toLowerCase()];\n        if (formatterType == null)\n            throw new Exception(format(\n                \"Can't find {0} filter handler type!\", key));\n\n        return formatterType;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { TemplatedWidget } from \"../widgets/templatedwidget\";\nimport { FilterStore } from \"./filterstore\";\n\n@Decorators.registerClass('Serenity.FilterWidgetBase')\nexport class FilterWidgetBase<TOptions> extends TemplatedWidget<TOptions> {\n    private store: FilterStore;\n\n    private onFilterStoreChanged: () => void;\n\n    constructor(div: JQuery, opt?: TOptions) {\n        super(div, opt);\n\n        this.store = new FilterStore([]);\n        this.onFilterStoreChanged = () => this.filterStoreChanged();\n        this.store.add_changed(this.onFilterStoreChanged);\n    }\n\n    destroy() {\n\n        if (this.store) {\n            this.store.remove_changed(this.onFilterStoreChanged);\n            this.onFilterStoreChanged = null;\n            this.store = null;\n        }\n\n        super.destroy();\n    }\n\n    protected filterStoreChanged() {\n    }\n\n    get_store(): FilterStore {\n        return this.store;\n    }\n\n    set_store(value: FilterStore): void {\n        if (this.store !== value) {\n            if (this.store != null) \n                this.store.remove_changed(this.onFilterStoreChanged);\n\n            this.store = value || new FilterStore([]);\n            this.store.add_changed(this.onFilterStoreChanged);\n            this.filterStoreChanged();\n        }\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { cast, isEmptyOrNull, PropertyItem, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Select2Editor } from \"../editors/select2editor\";\nimport { ReflectionOptionsSetter } from \"../widgets/reflectionoptionssetter\";\nimport { FilteringTypeRegistry, IFiltering } from \"./filtering\";\nimport { FilterLine } from \"./filterline\";\nimport { FilterOperator } from \"./filteroperator\";\nimport { FilterWidgetBase } from \"./filterwidgetbase\";\n\n@Decorators.registerClass('Serenity.FilterFieldSelect')\nclass FilterFieldSelect extends Select2Editor<any, PropertyItem> {\n    constructor(hidden: JQuery, fields: PropertyItem[]) {\n        super(hidden);\n\n        for (var field of fields) {\n            this.addOption(field.name, (tryGetText(field.title) ??\n                field.title ?? field.name), field);\n        }\n    }\n\n    emptyItemText() {\n        if (isEmptyOrNull(this.value)) {\n            return localText('Controls.FilterPanel.SelectField');\n        }\n\n        return null;\n    }\n\n    getSelect2Options() {\n        var opt = super.getSelect2Options();\n        opt.allowClear = false;\n        return opt;\n    }\n}\n\n@Decorators.registerClass('Serenity.FilterOperatorSelect')\nclass FilterOperatorSelect extends Select2Editor<any, FilterOperator> {\n    constructor(hidden: JQuery, source: FilterOperator[]) {\n        super(hidden);\n\n        for (var op of source) {\n            var title = (op.title ?? (\n                tryGetText(\"Controls.FilterPanel.OperatorNames.\" + op.key) ?? op.key));\n            this.addOption(op.key, title, op);\n        }\n\n        if (source.length && source[0])\n            this.value = source[0].key;\n    }\n\n    emptyItemText(): string {\n        return null;\n    }\n\n    getSelect2Options() {\n        var opt = super.getSelect2Options();\n        opt.allowClear = false;\n        return opt;\n    }\n}\n\n@Decorators.registerClass(\"Serenity.FilterPanel\")\nexport class FilterPanel extends FilterWidgetBase<any> {\n\n    private rowsDiv: JQuery;\n\n    constructor(div: JQuery) {\n        super(div);\n\n        this.element.addClass('s-FilterPanel');\n        this.rowsDiv = this.byId('Rows');\n        this.initButtons();\n        this.updateButtons();\n    }\n\n    private showInitialLine: boolean;\n\n    get_showInitialLine() {\n        return this.showInitialLine;\n    }\n\n    set_showInitialLine(value: boolean) {\n        if (this.showInitialLine !== value) {\n            this.showInitialLine = value;\n            if (this.showInitialLine && this.rowsDiv.children().length === 0) {\n                this.addEmptyRow(false);\n            }\n        }\n    }\n\n    protected filterStoreChanged() {\n        super.filterStoreChanged();\n        this.updateRowsFromStore();\n    }\n\n    updateRowsFromStore() {\n        this.rowsDiv.empty();\n\n        var items = this.get_store().get_items();\n        for (var item of items) {\n            this.addEmptyRow(false);\n\n            var row = this.rowsDiv.children().last();\n\n            var divl = row.children('div.l');\n            divl.children('.leftparen').toggleClass('active', !!item.leftParen);\n            divl.children('.rightparen').toggleClass('active', !!item.rightParen);\n            divl.children('.andor').toggleClass('or', !!item.isOr)\n                .text(localText((!!item.isOr ? 'Controls.FilterPanel.Or' :\n                    'Controls.FilterPanel.And')));\n\n            var fieldSelect = row.children('div.f')\n                .find('input.field-select').getWidget(FilterFieldSelect);\n\n            fieldSelect.value = item.field;\n            this.rowFieldChange(row);\n            var operatorSelect = row.children('div.o')\n                .find('input.op-select').getWidget(FilterOperatorSelect);\n\n            operatorSelect.set_value(item.operator);\n            this.rowOperatorChange(row);\n\n            var filtering = this.getFilteringFor(row);\n            if (filtering != null) {\n                filtering.set_operator({ key: item.operator });\n                filtering.loadState(item.state);\n            }\n        }\n\n        if (this.get_showInitialLine() && this.rowsDiv.children().length === 0) {\n            this.addEmptyRow(false);\n        }\n\n        this.updateParens();\n    }\n\n    private showSearchButton: boolean;\n\n    get_showSearchButton(): boolean {\n        return this.showSearchButton;\n    }\n\n    set_showSearchButton(value: boolean): void {\n        if (this.showSearchButton !== value) {\n            this.showSearchButton = value;\n            this.updateButtons();\n        }\n    }\n\n    private updateStoreOnReset: boolean;\n\n    get_updateStoreOnReset() {\n        return this.updateStoreOnReset;\n    }\n\n    set_updateStoreOnReset(value: boolean): void {\n        if (this.updateStoreOnReset !== value) {\n            this.updateStoreOnReset = value;\n        }\n    }\n\n    protected getTemplate(): string {\n        return \"<div id='~_Rows' class='filter-lines'>\" +\n            \"</div>\" +\n            \"<div id='~_Buttons' class='buttons'>\" +\n            \"<button id='~_AddButton' class='btn btn-primary add'></button>\" +\n            \"<button id='~_SearchButton' class='btn btn-success search'></button>\" +\n            \"<button id='~_ResetButton' class='btn btn-danger reset'></button>\" +\n            \"</div>\" +\n            \"<div style='clear: both'>\" +\n            \"</div>\"\n    }\n\n    protected initButtons(): void {\n        this.byId('AddButton').text(localText('Controls.FilterPanel.AddFilter'))\n            .click((e) => this.addButtonClick(e));\n\n        this.byId('SearchButton').text(localText('Controls.FilterPanel.SearchButton'))\n            .click((e) => this.searchButtonClick(e));\n\n        this.byId('ResetButton').text(localText('Controls.FilterPanel.ResetButton'))\n            .click((e) => this.resetButtonClick(e));\n    }\n\n    protected searchButtonClick(e: JQueryEventObject) {\n        e.preventDefault();\n        this.search();\n    }\n\n    get_hasErrors(): boolean {\n        return this.rowsDiv.children().children('div.v')\n            .children('span.error').length > 0;\n    }\n\n    search() {\n        this.rowsDiv.children().children('div.v')\n            .children('span.error').remove();\n\n        var filterLines = [];\n        var errorText = null;\n        var row = null;\n        for (var i = 0; i < this.rowsDiv.children().length; i++) {\n            row = this.rowsDiv.children().eq(i);\n            var filtering = this.getFilteringFor(row);\n            if (filtering == null) {\n                continue;\n            }\n\n            var field = this.getFieldFor(row);\n            var op = row.children('div.o').find('input.op-select')\n                .getWidget(FilterOperatorSelect).value;\n\n            if (op == null || op.length === 0) {\n                errorText = localText('Controls.FilterPanel.InvalidOperator');\n                break;\n            }\n\n            var line: FilterLine = {};\n            line.field = field.name;\n            line.operator = op;\n            line.isOr = row.children('div.l')\n                .children('a.andor').hasClass('or');\n            line.leftParen = row.children('div.l')\n                .children('a.leftparen').hasClass('active');\n            line.rightParen = row.children('div.l')\n                .children('a.rightparen').hasClass('active');\n            filtering.set_operator({ key: op });\n            var criteria = filtering.getCriteria();\n            line.criteria = criteria.criteria;\n            line.state = filtering.saveState();\n            line.displayText = criteria.displayText;\n            filterLines.push(line);\n        }\n\n        // if an error occurred, display it, otherwise set current filters\n        if (errorText != null) {\n            $('<span/>').addClass('error')\n                .attr('title', errorText).appendTo(row.children('div.v'));\n            row.children('div.v').find('input:first').focus();\n            return;\n        }\n\n        var items = this.get_store().get_items();\n        items.length = 0;\n        items.push.apply(items, filterLines);\n        this.get_store().raiseChanged();\n    }\n\n    protected addButtonClick(e: JQueryEventObject) {\n        this.addEmptyRow(true);\n        e.preventDefault();\n    }\n\n    protected resetButtonClick(e: JQueryEventObject) {\n        e.preventDefault();\n\n        if (this.get_updateStoreOnReset()) {\n            if (this.get_store().get_items().length > 0) {\n                this.get_store().get_items().length = 0;\n                this.get_store().raiseChanged();\n            }\n        }\n\n        this.rowsDiv.empty();\n        this.updateButtons();\n        if (this.get_showInitialLine()) {\n            this.addEmptyRow(false);\n        }\n    }\n\n    protected findEmptyRow(): JQuery {\n        var result: JQuery = null;\n\n        this.rowsDiv.children().each(function (index, row) {\n            var fieldInput = $(row).children('div.f')\n                .children('input.field-select').first();\n            if (fieldInput.length === 0) {\n                return true;\n            }\n            var val = fieldInput.val();\n            if (val == null || val.length === 0) {\n                result = $(row);\n                return false;\n            }\n            return true;\n        });\n\n        return result;\n    }\n\n    protected addEmptyRow(popupField: boolean): JQuery {\n        var emptyRow = this.findEmptyRow();\n\n        if (emptyRow != null) {\n            emptyRow.find('input.field-select').select2('focus');\n            if (popupField) {\n                emptyRow.find('input.field-select').select2('open');\n            }\n            return emptyRow;\n        }\n\n        var isLastRowOr = this.rowsDiv.children().last()\n            .children('a.andor').hasClass('or');\n\n        var row = $(\n            \"<div class='filter-line'>\" +\n            \"<a class='delete'><span></span></a>\" +\n            \"<div class='l'>\" +\n            \"<a class='rightparen' href='#'>)</a>\" +\n            \"<a class='andor' href='#'></a>\" +\n            \"<a class='leftparen' href='#'>(</a>\" +\n            \"</div>\" +\n            \"<div class='f'>\" +\n            \"<input type='hidden' class='field-select'>\" +\n            \"</div>\" +\n            \"<div class='o'></div>\" +\n            \"<div class='v'></div>\" +\n            \"<div style='clear: both'></div>\" +\n            \"</div>\").appendTo(this.rowsDiv);\n\n        var parenDiv = row.children('div.l').hide();\n\n        parenDiv.children('a.leftparen, a.rightparen')\n            .click((e) => this.leftRightParenClick(e));\n\n        var andor = parenDiv.children('a.andor').attr('title', localText('Controls.FilterPanel.ChangeAndOr'));\n        if (isLastRowOr) {\n            andor.addClass('or').text(localText('Controls.FilterPanel.Or'));\n        }\n        else {\n            andor.text(localText('Controls.FilterPanel.And'));\n        }\n\n        andor.click((e) => this.andOrClick(e));\n\n        row.children('a.delete')\n            .attr('title', localText('Controls.FilterPanel.RemoveField'))\n            .click((e) => this.deleteRowClick(e));\n\n        var fieldSel = new FilterFieldSelect(row.children('div.f')\n            .children('input'), this.get_store().get_fields())\n            .changeSelect2(e => this.onRowFieldChange(e));\n\n        this.updateParens();\n        this.updateButtons();\n\n        row.find('input.field-select').select2('focus');\n\n        if (popupField) {\n            row.find('input.field-select').select2('open');\n        }\n\n        return row;\n    }\n\n    protected onRowFieldChange(e: JQueryEventObject) {\n        var row = $(e.target).closest('div.filter-line');\n        this.rowFieldChange(row);\n        var opSelect = row.children('div.o').find('input.op-select');\n        opSelect.select2('focus');\n    }\n\n    protected rowFieldChange(row: JQuery) {\n        row.removeData('Filtering');\n        var select = row.children('div.f').find('input.field-select')\n            .getWidget(FilterFieldSelect);\n        var fieldName = select.get_value();\n        var isEmpty = fieldName == null || fieldName === '';\n        this.removeFiltering(row);\n        this.populateOperatorList(row);\n        this.rowOperatorChange(row);\n        this.updateParens();\n        this.updateButtons();\n    }\n\n    protected removeFiltering(row: JQuery): void {\n        row.data('Filtering', null);\n        row.data('FilteringField', null);\n    }\n\n    protected populateOperatorList(row: JQuery): void {\n        row.children('div.o').html('');\n\n        var filtering = this.getFilteringFor(row);\n        if (filtering == null)\n            return;\n\n        var hidden = row.children('div.o').html('<input/>')\n            .children().attr('type', 'hidden').addClass('op-select');\n\n        var operators = filtering.getOperators();\n        var opSelect = new FilterOperatorSelect(hidden, operators);\n        opSelect.changeSelect2(e => this.onRowOperatorChange(e));\n    }\n\n    protected getFieldFor(row: JQuery) {\n        if (row.length === 0) {\n            return null;\n        }\n        var select = row.children('div.f').find('input.field-select')\n            .getWidget(FilterFieldSelect);\n\n        if (isEmptyOrNull(select.value)) {\n            return null;\n        }\n\n        return this.get_store().get_fieldByName()[select.get_value()];\n    }\n\n    protected getFilteringFor(row: JQuery): IFiltering {\n        var field = this.getFieldFor(row);\n\n        if (field == null)\n            return null;\n\n        var filtering = cast(row.data('Filtering'), IFiltering);\n\n        if (filtering != null)\n            return filtering;\n\n        var filteringType = FilteringTypeRegistry.get(\n            (field.filteringType ?? 'String'));\n\n        var editorDiv = row.children('div.v');\n        filtering = new (filteringType as any)() as IFiltering;\n        ReflectionOptionsSetter.set(filtering, field.filteringParams);\n        filtering.set_container(editorDiv);\n        filtering.set_field(field);\n        row.data('Filtering', filtering);\n        return filtering;\n    }\n\n    protected onRowOperatorChange(e: JQueryEventObject) {\n        var row = $(e.target).closest('div.filter-line');\n        this.rowOperatorChange(row);\n        var firstInput = row.children('div.v').find(':input:visible').first();\n        try {\n            firstInput.focus();\n        }\n        catch ($t1) {\n        }\n    }\n\n    protected rowOperatorChange(row: JQuery): void {\n\n        if (row.length === 0) {\n            return;\n        }\n\n        var editorDiv = row.children('div.v');\n        editorDiv.html('');\n        var filtering = this.getFilteringFor(row);\n        if (filtering == null)\n            return;\n        \n        var operatorSelect = row.children('div.o').find('input.op-select')\n            .getWidget(FilterOperatorSelect);\n\n        if (isEmptyOrNull(operatorSelect.get_value()))\n            return;\n        \n        var ops = filtering.getOperators().filter(function (x) {\n            return x.key === operatorSelect.value;\n        });\n\n        var op = ((ops.length > 0) ? ops[0] : null);\n        if (op == null)\n            return;\n\n        filtering.set_operator(op);\n        filtering.createEditor();\n    }\n\n    protected deleteRowClick(e: JQueryEventObject): void {\n        e.preventDefault();\n        var row = $(e.target).closest('div.filter-line');\n        row.remove();\n\n        if (this.rowsDiv.children().length === 0) {\n            this.search();\n        }\n\n        this.updateParens();\n        this.updateButtons();\n    }\n\n    protected updateButtons(): void {\n        this.byId('SearchButton').toggle(\n            this.rowsDiv.children().length >= 1 && this.showSearchButton);\n        this.byId('ResetButton').toggle(\n            this.rowsDiv.children().length >= 1);\n    }\n\n    protected andOrClick(e: JQueryEventObject): void {\n        e.preventDefault();\n        var andor = $(e.target).toggleClass('or');\n        andor.text(localText('Controls.FilterPanel.' +\n            (andor.hasClass('or') ? 'Or' : 'And')));\n    }\n\n    protected leftRightParenClick(e: JQueryEventObject): void {\n        e.preventDefault();\n        $(e.target).toggleClass('active');\n        this.updateParens();\n    }\n\n    protected updateParens() {\n        var rows = this.rowsDiv.children();\n        if (rows.length === 0) {\n            return;\n        }\n        rows.removeClass('paren-start');\n        rows.removeClass('paren-end');\n        rows.children('div.l').css('display', ((rows.length === 1) ? 'none' : 'block'));\n        rows.first().children('div.l').children('a.rightparen, a.andor')\n            .css('visibility', 'hidden');\n\n        for (var i = 1; i < rows.length; i++) {\n            var row = rows.eq(i);\n            row.children('div.l').css('display', 'block')\n                .children('a.lefparen, a.andor').css('visibility', 'visible');\n        }\n\n        var inParen = false;\n        for (var i1 = 0; i1 < rows.length; i1++) {\n            var row1 = rows.eq(i1);\n            var divParen = row1.children('div.l');\n            var lp = divParen.children('a.leftparen');\n            var rp = divParen.children('a.rightparen');\n            if (rp.hasClass('active') && inParen) {\n                inParen = false;\n                if (i1 > 0) {\n                    rows.eq(i1 - 1).addClass('paren-end');\n                }\n            }\n            if (lp.hasClass('active')) {\n                inParen = true;\n                if (i1 > 0) {\n                    row1.addClass('paren-start');\n                }\n            }\n        }\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { notifyError, localText } from \"@serenity-is/corelib/q\";\nimport { TemplatedDialog } from \"../dialogs/templateddialog\";\nimport { FilterPanel } from \"./filterpanel\";\n\n@Decorators.registerClass('Serenity.FilterDialog')\nexport class FilterDialog extends TemplatedDialog<any> {\n\n    private filterPanel: FilterPanel;\n\n    constructor() {\n        super();\n\n        this.filterPanel = new FilterPanel(this.byId('FilterPanel'));\n        this.filterPanel.set_showInitialLine(true);\n        this.filterPanel.set_showSearchButton(false);\n        this.filterPanel.set_updateStoreOnReset(false);\n\n        this.dialogTitle = localText('Controls.FilterPanel.DialogTitle');\n    }\n\n    get_filterPanel(): FilterPanel {\n        return this.filterPanel;\n    }\n\n    protected getTemplate(): string {\n        return '<div id=\"~_FilterPanel\"/>';\n    }\n\n    protected getDialogButtons() {\n        return [\n            {\n                text: localText('Dialogs.OkButton'),\n                click: () => {\n                    this.filterPanel.search();\n                    if (this.filterPanel.get_hasErrors()) {\n                        notifyError(localText('Controls.FilterPanel.FixErrorsMessage'), '', null);\n                        return;\n                    }\n\n                    this.dialogClose();\n                }\n            },\n            {\n                text: localText('Dialogs.CancelButton'),\n                click: () => this.dialogClose()\n            }\n        ];\n    }\n}\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { localText, trimToNull } from \"@serenity-is/corelib/q\";\nimport { FilterDialog } from \"./filterdialog\";\nimport { FilterWidgetBase } from \"./filterwidgetbase\";\n\n@Decorators.registerClass('Serenity.FilterDisplayBar')\nexport class FilterDisplayBar extends FilterWidgetBase<any> {\n\n    constructor(div: JQuery) {\n        super(div);\n\n        this.element.find('.cap').text(\n            localText('Controls.FilterPanel.EffectiveFilter'));\n\n        this.element.find('.edit').text(\n            localText('Controls.FilterPanel.EditFilter'));\n\n        this.element.find('.reset').attr('title',\n            localText('Controls.FilterPanel.ResetFilterHint'));\n\n        var openFilterDialog = (e: JQueryEventObject) => {\n            e.preventDefault();\n            var dialog = new FilterDialog();\n            dialog.get_filterPanel().set_store(this.get_store());\n            dialog.dialogOpen(null);\n        };\n\n        this.element.find('.edit').click(openFilterDialog);\n        this.element.find('.txt').click(openFilterDialog);\n\n        this.element.find('.reset').click(e1 => {\n            e1.preventDefault();\n            this.get_store().get_items().length = 0;\n            this.get_store().raiseChanged();\n        });\n    }\n\n    protected filterStoreChanged() {\n        super.filterStoreChanged();\n\n        var displayText = trimToNull(this.get_store().get_displayText());\n\n        this.element.find('.current').toggle(displayText != null);\n        this.element.find('.reset').toggle(displayText != null);\n\n        if (displayText == null)\n            displayText = localText('Controls.FilterPanel.EffectiveEmpty');\n\n        this.element.find('.txt').text('[' + displayText + ']');\n    }\n\n    protected getTemplate() {\n        return \"<div><a class='reset'></a><a class='edit'></a>\" + \n            \"<div class='current'><span class='cap'></span>\" +\n            \"<a class='txt'></a></div></div>\";\n    }\n}\n", "\uFEFFimport { htmlEncode, extend, localText } from \"@serenity-is/corelib/q\";\nimport { PagerOptions } from \"@serenity-is/corelib/slick\";\nimport { Decorators } from \"../../decorators\";\nimport { Widget } from \"../widgets/widget\";\n\n@Decorators.registerClass(\"Serenity.SlickPager\")\nexport class SlickPager extends Widget<PagerOptions> {\n\n    constructor(div: JQuery, o: PagerOptions) {\n        super(div, extend({\n            showRowsPerPage: true,\n            rowsPerPageOptions: [20, 100, 500, 2000]\n        } as any, o));\n\n        o = this.options;\n        var v = o.view;\n\n        if (!v)\n            throw \"SlickPager requires view option to be set!\";\n\n        this.element.addClass('s-SlickPager slick-pg')\n            .html(\n                '<div class=\"slick-pg-in\">' + \n                    '<div class=\"slick-pg-grp\">' +\n                        '<div class=\"slick-pg-first slick-pg-btn\"><span class=\"slick-pg-btn-span\"></span></div>' + \n                        '<div class=\"slick-pg-prev slick-pg-btn\"><span class=\"slick-pg-btn-span\"></span></div>' + \n                    '</div><div class=\"slick-pg-sep\"></div><div class=\"slick-pg-grp\">' + \n                        '<span class=\"slick-pg-control\">&nbsp;' + htmlEncode(localText(\"Controls.Pager.Page\")) +\n                        '&nbsp;<input class=\"slick-pg-current\" type=\"text\" size=\"4\" value=\"1\" /> / ' +\n                        '<span class=\"slick-pg-total\"> 1 </span></span>' + \n                    '</div><div class=\"slick-pg-sep\"></div><div class=\"slick-pg-grp\">' + \n                        '<div class=\"slick-pg-next slick-pg-btn\"><span class=\"slick-pg-btn-span\"></span></div>' + \n                        '<div class=\"slick-pg-last slick-pg-btn\"><span class=\"slick-pg-btn-span\"></span></div>' + \n                    '</div><div class=\"slick-pg-sep\"></div><div class=\"slick-pg-grp\">' + \n                        '<div class=\"slick-pg-reload slick-pg-btn\"><span class=\"slick-pg-btn-span\"></span></div>' + \n                    '</div><div class=\"slick-pg-sep\"></div>' + \n                    '<div class=\"slick-pg-grp\"><span class=\"slick-pg-stat\"></span></div></div>');\n\n        var self = this;\n        $('.slick-pg-reload', this.element).click(function () { v.populate() });\n        $('.slick-pg-first', this.element).click(function () { self._changePage('first') });\n        $('.slick-pg-prev', this.element).click(function () { self._changePage('prev') });\n        $('.slick-pg-next', this.element).click(function () { self._changePage('next') });\n        $('.slick-pg-last', this.element).click(function () { self._changePage('last') });\n        $('.slick-pg-current', this.element).keydown(function (e) { if (e.keyCode == 13) self._changePage('input') });\n\n        if (self.options.showRowsPerPage) {\n            var opt: string = \"\", sel = \"\";\n            for (var nx = 0; nx < o.rowsPerPageOptions.length; nx++) {\n                if (v.rowsPerPage == o.rowsPerPageOptions[nx]) \n                    sel = 'selected=\"selected\"'; else sel = '';\n                opt += \"<option value='\" + o.rowsPerPageOptions[nx] + \"' \" + sel + \" >\" + o.rowsPerPageOptions[nx] + \"&nbsp;&nbsp;</option>\";\n            };\n            $('.slick-pg-in', this.element).prepend('<div class=\"slick-pg-grp\"><select class=\"slick-pg-size\" name=\"rp\">' + opt + '</select></div><div class=\"slick-pg-sep\"></div>');\n            $('select.slick-pg-size', this.element).change(\n                function (this: HTMLSelectElement) {\n                    if (o.onRowsPerPageChange)\n                        o.onRowsPerPageChange(+this.value);\n                    else {\n                        v[\"newp\"] = 1;\n                        v.setPagingOptions({\n                            page: 1,\n                            rowsPerPage: +this.value \n                        });\n                    }\n                }\n            );\n        }\n\n        v.onPagingInfoChanged.subscribe(function() {\n            self._updatePager();\n        });\n    }\n\n    _changePage(ctype: string) { //change page\n\n        var view = this.options.view;\n\n        if (!view || view.loading)\n            return true;\n\n        var info = view.getPagingInfo();\n        var pages = (!info.rowsPerPage || !info.totalCount) ? 1 : Math.ceil(info.totalCount / info.rowsPerPage);\n\n        var newp: number;\n\n        switch (ctype) {\n            case 'first': newp = 1; break;\n            case 'prev': if (info.page > 1) newp = parseInt(info.page as any) - 1; break;\n            case 'next': if (info.page < pages) newp = parseInt(info.page as any) + 1; break;\n            case 'last': newp = pages; break;\n            case 'input':\n                var nv = parseInt($('input.slick-pg-current', this.element).val());\n                if (isNaN(nv)) \n                    nv = 1;\n                else if (nv < 1) \n                    nv = 1;\n                else if (nv > pages) \n                    nv = pages;\n\n                $('.slick-pg-current', this.element).val(nv);\n\n                newp = nv;\n                break;\n        }\n\n        if (newp == info.page)\n            return false;\n\n        if (this.options.onChangePage)\n            this.options.onChangePage(newp);\n        else {\n            view.setPagingOptions({ page: newp });\n        }\n    }\n\n    _updatePager() { \n\n        var view = this.options.view;\n        var info = view.getPagingInfo();\n        var pages = (!info.rowsPerPage || !info.totalCount) ? 1 : Math.ceil(info.totalCount / info.rowsPerPage);\n\n        $('.slick-pg-current', this.element).val(info.page);\n        $('.slick-pg-total', this.element).html(pages as any);\n\n        var r1 = (info.page - 1) * info.rowsPerPage + 1;\n        var r2 = r1 + info.rowsPerPage - 1;\n\n        if (info.totalCount < r2) \n            r2 = info.totalCount;\n\n        var stat: string;\n\n        if (info.loading) {\n            stat = htmlEncode(localText(\"Controls.Pager.LoadingStatus\"));\n        }\n        else if (info.error) {\n            stat = info.error;\n        }\n        else if (info.totalCount > 0) {\n            stat = htmlEncode(localText(\"Controls.Pager.PageStatus\"));\n            stat = stat.replace(/{from}/, <any>r1);\n            stat = stat.replace(/{to}/, <any>r2);\n            stat = stat.replace(/{total}/, <any>info.totalCount);\n        }\n        else\n            stat = htmlEncode(localText(\"Controls.Pager.NoRowStatus\"));\n\n        $('.slick-pg-stat', this.element).html(stat);\n        $('.slick-pg-size', this.element).val((info.rowsPerPage || 0).toString());\n    }\n}", "\uFEFFimport { Column, FormatterContext, Grid, IPlugin } from \"@serenity-is/sleekgrid\";\nimport { Decorators } from \"../../decorators\";\nimport { Authorization, clearKeys, Culture, htmlEncode, isEmptyOrNull, PropertyItem, replaceAll, safeCast, SaveRequest, serviceCall, startsWith, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Format, Formatter, RemoteView } from \"@serenity-is/corelib/slick\";\nimport { IDataGrid } from \"../datagrid/idatagrid\";\nimport { QuickSearchField, QuickSearchInput } from \"../datagrid/quicksearchinput\";\nimport { DateFormatter, EnumFormatter, IInitializeColumn, NumberFormatter } from \"../formatters/formatters\";\nimport { ReflectionOptionsSetter } from \"../widgets/reflectionoptionssetter\";\nimport { Toolbar, ToolButton } from \"../widgets/toolbar\";\nimport { FormatterTypeRegistry } from \"../../types/formattertyperegistry\";\n\nexport interface GridRowSelectionMixinOptions {\n    selectable?: (item: any) => boolean;\n}\n\n@Decorators.registerClass('Serenity.GridRowSelectionMixin')\nexport class GridRowSelectionMixin {\n\n    private idField: string;\n    private include: { [key: string]: boolean}\n    private grid: IDataGrid;\n    private options: GridRowSelectionMixinOptions;\n\n    constructor(grid: IDataGrid, options?: GridRowSelectionMixinOptions) {\n\n        this.include = {};\n        this.grid = grid;\n        this.idField = (grid.getView() as any).idField;\n        this.options = options || {};\n\n        grid.getGrid().onClick.subscribe((e, p) => {\n            if ($(e.target).hasClass('select-item')) {\n                e.preventDefault();\n                var item = grid.getView().getItem(p.row);\n                var id = item[this.idField].toString();\n\n                if (this.include[id]) {\n                    delete this.include[id];\n                }\n                else {\n                    this.include[id] = true;\n                }\n\n                for (var i = 0; i < (grid.getView() as any).getLength(); i++) {\n                    grid.getGrid().updateRow(i);\n                }\n\n                this.updateSelectAll();\n            }\n        });\n\n        grid.getGrid().onHeaderClick.subscribe((e1, u) => {\n            if (e1.isDefaultPrevented())\n                return;\n            if ($(e1.target).hasClass('select-all-items')) {\n                e1.preventDefault();\n                if (Object.keys(this.include).length > 0) {\n                    clearKeys(this.include);\n                }\n                else {\n                    var items = grid.getView().getItems();\n                    for (var x of items.filter(this.isSelectable.bind(this))) {\n                        var id1 = x[this.idField];\n                        this.include[id1] = true;\n                    }\n                }\n                this.updateSelectAll();\n                grid.getView().setItems(grid.getView().getItems(), true);\n                setTimeout(this.updateSelectAll.bind(this), 0);\n            }\n        });\n\n        (grid.getView() as any).onRowsChanged.subscribe(() => {\n            return this.updateSelectAll();\n        });\n    }\n\n    updateSelectAll(): void {\n        var selectAllButton = this.grid.getElement()\n            .find('.select-all-header .slick-column-name .select-all-items');\n\n        if (selectAllButton) {\n            var keys = Object.keys(this.include);\n            selectAllButton.toggleClass('checked',\n                keys.length > 0 &&\n                this.grid.getView().getItems().filter(\n                    this.isSelectable.bind(this)).length <= keys.length);\n        }\n    }\n\n    clear(): void {\n        clearKeys(this.include);\n        this.updateSelectAll();\n    }\n\n    resetCheckedAndRefresh(): void {\n        this.include = {};\n        this.updateSelectAll();\n        this.grid.getView().populate();\n    }\n\n    selectKeys(keys: string[]): void {\n        for (var k of keys) {\n            this.include[k] = true;\n        }\n\n        this.updateSelectAll();\n    }\n\n    getSelectedKeys(): string[] {\n        return Object.keys(this.include);\n    }\n\n    getSelectedAsInt32(): number[] {\n        return Object.keys(this.include).map(function (x) {\n            return parseInt(x, 10);\n        });\n    }\n\n    getSelectedAsInt64(): number[] {\n        return Object.keys(this.include).map(function (x) {\n            return parseInt(x, 10);\n        });\n    }\n\n    setSelectedKeys(keys: string[]): void {\n        this.clear();\n        for (var k of keys) {\n            this.include[k] = true;\n        }\n\n        this.updateSelectAll();\n    }\n\n    private isSelectable(item: any) {\n        return item && (\n            this.options.selectable == null ||\n            this.options.selectable(item));\n    }\n\n    static createSelectColumn(getMixin: () => GridRowSelectionMixin): Column {\n        return {\n            name: '<span class=\"select-all-items check-box no-float \"></span>',\n            nameIsHtml: true,\n            toolTip: ' ',\n            field: '__select__',\n            width: 27,\n            minWidth: 27,\n            headerCssClass: 'select-all-header',\n            sortable: false,\n            format: function (ctx) {\n                var item = ctx.item;\n                var mixin = getMixin();\n                if (!mixin || !mixin.isSelectable(item)) {\n                    return '';\n                }\n                var isChecked = mixin.include[ctx.item[mixin.idField]];\n                return '<span class=\"select-item check-box no-float ' + (isChecked ? ' checked' : '') + '\"></span>';\n            }\n        };\n    }\n}\n\nexport interface GridRadioSelectionMixinOptions {\n    selectable?: (item: any) => boolean;\n}\n\n@Decorators.registerClass('GridRadioSelectionMixin')\nexport class GridRadioSelectionMixin {\n\n    private idField: string;\n    private include: { [key: string]: boolean };\n    private grid: IDataGrid;\n    private options: GridRadioSelectionMixinOptions;\n\n    constructor(grid: IDataGrid, options?: GridRadioSelectionMixinOptions) {\n\n        this.include = {};\n        this.grid = grid;\n        this.idField = (grid.getView() as any).idField;\n        this.options = options || {};\n\n        grid.getGrid().onClick.subscribe((e, p) => {\n            if ($(e.target).hasClass('rad-select-item')) {\n                e.preventDefault();\n                var item = grid.getView().getItem(p.row);\n\n                if (!this.isSelectable(item)) {\n                    return;\n                }\n\n                var id = item[this.idField].toString();\n\n                if (this.include[id] == true) {\n                    clearKeys(this.include);\n                }\n                else {\n                    clearKeys(this.include);\n                    this.include[id] = true;\n                }\n\n                for (var i = 0; i < (grid.getView() as any).getLength(); i++) {\n                    grid.getGrid().updateRow(i);\n                }\n            }\n        });\n    }\n\n    private isSelectable(item: any) {\n        return item && (\n            this.options.selectable == null ||\n            this.options.selectable(item));\n    }\n\n    clear(): void {\n        clearKeys(this.include);\n    }\n\n    resetCheckedAndRefresh(): void {\n        this.include = {};\n        this.grid.getView().populate();\n    }\n\n    getSelectedKey(): string {\n        var items = Object.keys(this.include);\n        if (items != null && items.length > 0) {\n            return items[0];\n        }\n\n        return null;\n    }\n\n    getSelectedAsInt32(): number {\n        var items = Object.keys(this.include).map(function (x) {\n            return parseInt(x, 10);\n        });\n\n        if (items != null && items.length > 0) {\n            return items[0];\n        }\n\n        return null;\n    }\n\n    getSelectedAsInt64(): number {\n        var items = Object.keys(this.include).map(function (x) {\n            return parseInt(x, 10);\n        });\n\n        if (items != null && items.length > 0) {\n            return items[0];\n        }\n\n        return null;\n    }\n\n    setSelectedKey(key: string): void {\n        this.clear();\n        this.include[key] = true;\n    }\n\n    static createSelectColumn(getMixin: () => GridRadioSelectionMixin): Column {\n        return {\n            name: '',\n            toolTip: ' ',\n            field: '__select__',\n            width: 27,\n            minWidth: 27,\n            headerCssClass: '',\n            sortable: false,\n            formatter: function (row, cell, value, column, item) {\n                var mixin = getMixin();\n                if (!mixin || !mixin.isSelectable(item)) {\n                    return '';\n                }\n\n                var isChecked = mixin.include[item[mixin.idField]];\n                return '<input type=\"radio\" name=\"radio-selection-group\" class=\"rad-select-item no-float\" style=\"cursor: pointer;width: 13px; height:13px;\" ' + (isChecked ? ' checked' : '') + ' /> ';\n            }\n        };\n    }\n}\n\nexport namespace GridSelectAllButtonHelper {\n    export function update(grid: IDataGrid, getSelected: (p1: any) => boolean): void {\n        var toolbar = (grid as any).element.children('.s-Toolbar') as JQuery;\n        if (toolbar.length === 0) {\n            return;\n        }\n        var btn = toolbar.getWidget(Toolbar).findButton('select-all-button');\n        var items = grid.getView().getItems();\n        btn.toggleClass('checked', items.length > 0 && !items.some(function (x) {\n            return !getSelected(x);\n        }));\n    }\n\n    export function define(getGrid: () => IDataGrid, getId: (p1: any) => any,\n        getSelected: (p1: any) => boolean,\n        setSelected: (p1: any, p2: boolean) => void,\n        text?: string, onClick?: () => void): ToolButton {\n\n        if (text == null) {\n            text = tryGetText('Controls.CheckTreeEditor.SelectAll') ??\n                'Select All';\n        }\n        return {\n            title: text,\n            action: \"select-all\",\n            cssClass: 'select-all-button',\n            onClick: function () {\n                var grid = getGrid();\n                var view = grid.getView();\n                var btn = (grid as any).element.children('.s-Toolbar')\n                    .getWidget(Toolbar).findButton('select-all-button');\n                var makeSelected = !btn.hasClass('checked');\n                view.beginUpdate();\n                try {\n                    for (var item of view.getItems()) {\n                        setSelected(item, makeSelected);\n                        view.updateItem(getId(item), item);\n                    }\n                    onClick && onClick();\n                }\n                finally {\n                    view.endUpdate();\n                }\n\n                btn.toggleClass('checked', makeSelected);\n            }\n        };\n    }\n}\n\nexport namespace GridUtils {\n    export function addToggleButton(toolDiv: JQuery, cssClass: string,\n        callback: (p1: boolean) => void, hint: string, initial?: boolean): void {\n\n        var div = $('<div><a href=\"#\"></a></div>')\n            .addClass('s-ToggleButton').addClass(cssClass)\n            .prependTo(toolDiv);\n        div.children('a').click(function (e) {\n            e.preventDefault();\n            div.toggleClass('pressed');\n            var pressed = div.hasClass('pressed');\n            callback && callback(pressed);\n        }).attr('title', hint ?? '');\n        if (initial) {\n            div.addClass('pressed');\n        }\n    }\n\n    export function addIncludeDeletedToggle(toolDiv: JQuery,\n        view: RemoteView<any>, hint?: string, initial?: boolean): void {\n\n        var includeDeleted = false;\n        var oldSubmit = view.onSubmit;\n        view.onSubmit = function (v) {\n            v.params.IncludeDeleted = includeDeleted;\n            if (oldSubmit != null) {\n                return oldSubmit(v);\n            }\n            return true;\n        };\n\n        if (hint == null) \n            hint = localText('Controls.EntityGrid.IncludeDeletedToggle');\n        \n        addToggleButton(toolDiv, 's-IncludeDeletedToggle',\n            function (pressed) {\n                includeDeleted = pressed;\n                view.seekToPage = 1;\n                view.populate();\n            }, hint, initial);\n        toolDiv.bind('remove', function () {\n            view.onSubmit = null;\n            oldSubmit = null;\n        });\n    }\n\n    export function addQuickSearchInput(toolDiv: JQuery,\n        view: RemoteView<any>, fields?: QuickSearchField[], onChange?: () => void): void {\n\n        var oldSubmit = view.onSubmit;\n        var input: QuickSearchInput;\n        view.onSubmit = function (v) {\n            if (input) {\n                var searchText = input.get_value();\n                if (searchText && searchText.length > 0) {\n                    v.params.ContainsText = searchText;\n                }\n                else {\n                    delete v.params['ContainsText'];\n                }\n                var searchField = input.get_field()?.name;\n                if (searchField != null && searchField.length > 0) {\n                    v.params.ContainsField = searchField;\n                }\n                else {\n                    delete v.params['ContainsField'];\n                }\n            }\n\n            if (oldSubmit != null) \n                return oldSubmit(v);\n            \n            return true;\n        };\n\n        var lastDoneEvent: any = null;\n        input = addQuickSearchInputCustom(toolDiv, (field, query, done) => {\n            onChange && onChange();\n            view.seekToPage = 1;\n            lastDoneEvent = done;\n            view.populate();\n        }, fields);\n\n        view.onDataLoaded.subscribe(function (e, ui) {\n            if (lastDoneEvent != null) {\n                lastDoneEvent(view.getLength() > 0);\n                lastDoneEvent = null;\n            }\n        });\n    }\n\n    export function addQuickSearchInputCustom(container: JQuery,\n        onSearch: (p1: string, p2: string, done: (p3: boolean) => void) => void,\n        fields?: QuickSearchField[]): QuickSearchInput {\n\n        var div = $('<div><input type=\"text\"/></div>')\n            .addClass('s-QuickSearchBar').prependTo(container);\n\n        if (fields != null && fields.length > 0) {\n            div.addClass('has-quick-search-fields');\n        }\n\n        return new QuickSearchInput(div.children(), {\n            fields: fields,\n            onSearch: onSearch as any\n        });\n    }\n\n    export function makeOrderable(grid: Grid,\n        handleMove: (p1: any, p2: number) => void): void {\n\n        var moveRowsPlugin = new Slick.RowMoveManager({ cancelEditOnDrag: true });\n        moveRowsPlugin.onBeforeMoveRows.subscribe(function (e, data) {\n            for (var i = 0; !!(i < data.rows.length); i++) {\n                if (!!(data.rows[i] === data.insertBefore ||\n                    data.rows[i] === data.insertBefore - 1)) {\n                    e.stopPropagation();\n                    return false;\n                }\n            }\n\n            return true;\n        });\n\n        moveRowsPlugin.onMoveRows.subscribe(function (e1, data1) {\n            handleMove(data1.rows, data1.insertBefore);\n            try {\n                grid.setSelectedRows([]);\n            }\n            catch ($t1) {\n            }\n        });\n        grid.registerPlugin(moveRowsPlugin);\n    }\n\n    export function makeOrderableWithUpdateRequest(grid: IDataGrid,\n        getId: (p1: any) => number, getDisplayOrder: (p1: any) => any, service: string,\n        getUpdateRequest: (p1: number, p2: number) => SaveRequest<any>): void {\n\n        makeOrderable(grid.getGrid(), function (rows, insertBefore) {\n            if (rows.length === 0) {\n                return;\n            }\n\n            var order: number;\n            var index = insertBefore;\n            if (index < 0) {\n                order = 1;\n            }\n            else if (insertBefore >= grid.getGrid().getDataLength()) {\n                order = (getDisplayOrder(grid.getGrid().getDataItem(grid.getGrid().getDataLength() - 1)) ?? 0);\n                if (order === 0) {\n                    order = insertBefore + 1;\n                }\n                else {\n                    order = order + 1;\n                }\n            }\n            else {\n                order = (getDisplayOrder(grid.getGrid().getDataItem(insertBefore)) ?? 0);\n                if (order === 0) {\n                    order = insertBefore + 1;\n                }\n            }\n\n            var i = 0;\n            var next: any = null;\n            next = function () {\n                serviceCall({\n                    service: service,\n                    request: getUpdateRequest(getId(\n                        grid.getGrid().getDataItem(rows[i])), order++),\n                    onSuccess: function (response) {\n                        i++;\n                        if (i < rows.length) {\n                            next();\n                        }\n                        else {\n                            grid.getView().populate();\n                        }\n                    }\n                });\n            };\n            next();\n        });\n    }\n}\n\nexport namespace PropertyItemSlickConverter {\n\n    export function toSlickColumns(items: PropertyItem[]): Column[] {\n        var result: Column[] = [];\n        if (items == null) {\n            return result;\n        }\n        for (var i = 0; i < items.length; i++) {\n            result.push(PropertyItemSlickConverter.toSlickColumn(items[i]));\n        }\n        return result;\n    }\n\n    export function toSlickColumn(item: PropertyItem): Column {\n        var result: Column = {\n            field: item.name,\n            sourceItem: item,\n            cssClass: item.cssClass,\n            headerCssClass: item.headerCssClass,\n            sortable: item.sortable !== false,\n            sortOrder: item.sortOrder ?? 0,\n            width: item.width != null ? item.width : 80,\n            minWidth: item.minWidth ?? 30,\n            maxWidth: (item.maxWidth == null || item.maxWidth === 0) ? null : item.maxWidth,\n            resizable: item.resizable == null || !!item.resizable\n        };\n\n        result.visible = item.visible !== false && item.filterOnly !== true &&\n            (item.readPermission == null || Authorization.hasPermission(item.readPermission));\n\n        var name = tryGetText(item.title);\n        if (name == null)\n            name = item.title;\n        result.name = name;\n\n        if (item.alignment != null && item.alignment.length > 0) {\n            if (!isEmptyOrNull(result.cssClass)) {\n                result.cssClass += ' align-' + item.alignment;\n            }\n            else {\n                result.cssClass = 'align-' + item.alignment;\n            }\n        }\n\n        if (item.formatterType != null && item.formatterType.length > 0) {\n\n            var formatterType = FormatterTypeRegistry.get(item.formatterType) as any;\n            var formatter = new formatterType() as Formatter;\n\n            if (item.formatterParams != null) {\n                ReflectionOptionsSetter.set(formatter, item.formatterParams);\n            }\n\n            var initializer = safeCast(formatter, IInitializeColumn);\n            if (initializer != null) {\n                initializer.initializeColumn(result);\n            }\n\n            result.format = (ctx) => formatter.format(ctx);\n        }\n\n        return result;\n    }\n}\n\nexport namespace SlickFormatting {\n    export function getEnumText(enumKey: string, name: string): string {\n        return EnumFormatter.getText(enumKey, name);\n    }\n\n    export function treeToggle(getView: () => RemoteView<any>, getId: (x: any) => any,\n        formatter: Format): Format {\n        return function (ctx: FormatterContext) {\n            var text = formatter(ctx);\n            var view = getView();\n            var indent = (ctx.item as any)._indent ?? 0;\n            var spacer = '<span class=\"s-TreeIndent\" style=\"width:' + 15 * indent + 'px\"></span>';\n            var id = getId(ctx.item);\n            var idx = view.getIdxById(id);\n            var next = view.getItemByIdx(idx + 1);\n            if (next != null) {\n                var nextIndent = next._indent ?? 0;\n                if (nextIndent > indent) {\n                    if (!!!!(ctx.item as any)._collapsed) {\n                        return spacer + '<span class=\"s-TreeToggle s-TreeExpand\"></span>' + text;\n                    }\n                    else {\n                        return spacer + '<span class=\"s-TreeToggle s-TreeCollapse\"></span>' + text;\n                    }\n                }\n            }\n            return spacer + '<span class=\"s-TreeToggle\"></span>' + text;\n        };\n    }\n\n    export function date(format?: string): Format {\n        if (format == null) {\n            format = Culture.dateFormat;\n        }\n\n        return function (ctx: FormatterContext) {\n            return htmlEncode(DateFormatter.format(ctx.value, format));\n        };\n    }\n\n    export function dateTime(format?: string): Format {\n        if (format == null) {\n            format = Culture.dateTimeFormat;\n        }\n        return function (ctx: FormatterContext) {\n            return htmlEncode(DateFormatter.format(ctx.value, format));\n        };\n    }\n\n    export function checkBox(): Format {\n        return function (ctx: FormatterContext) {\n            return '<span class=\"check-box no-float ' + (!!ctx.value ? ' checked' : '') + '\"></span>';\n        };\n    }\n\n    export function number(format: string): Format {\n        return function (ctx: FormatterContext) {\n            return NumberFormatter.format(ctx.value, format);\n        };\n    }\n\n    export function getItemType(link: JQuery): string {\n        return link.data('item-type');\n    }\n\n    export function getItemId(link: JQuery): string {\n        var value = link.data('item-id');\n        return value == null ? null : value.toString();\n    }\n\n    export function itemLinkText(itemType: string, id: any, text: any,\n        extraClass: string, encode: boolean): string {\n        return '<a' + (id != null ? (' href=\"#' + replaceAll(itemType, '.', '-') +\n            '/' + id + '\"') : '') + ' data-item-type=\"' +\n            htmlEncode(itemType) + '\"' + ' data-item-id=\"' +\n            htmlEncode(id) + '\"' + ' class=\"s-EditLink s-' +\n            replaceAll(itemType, '.', '-') + 'Link' +\n            (isEmptyOrNull(extraClass) ? '' : (' ' + extraClass)) + '\">' +\n            (encode ? htmlEncode(text ?? '') : text ?? '') + '</a>';\n    }\n\n    export function itemLink<TItem = any>(itemType: string, idField: string, getText: Format<TItem>,\n        cssClass?: Format<TItem>, encode?: boolean): Format<TItem> {\n        return function (ctx: FormatterContext<TItem>) {\n            var text = (getText == null ? ctx.value : getText(ctx)) ?? '';\n            if ((ctx.item as any)?.__nonDataRow) {\n                return encode ? htmlEncode(text) : text;\n            }\n\n            return itemLinkText(itemType, (ctx.item as any)[idField],\n                (getText == null ? ctx.value : getText(ctx)),\n                (cssClass == null ? '' : cssClass(ctx)), encode);\n        };\n    }\n}\n\nexport namespace SlickHelper {\n    export function setDefaults(columns: Column[], localTextPrefix?: string): any {\n        for (var col of columns) {\n            col.sortable = (col.sortable != null ? col.sortable : true);\n            var id = col.id;\n            if (id == null) {\n                id = col.field;\n            }\n            col.id = id;\n\n            if (localTextPrefix != null && col.id != null &&\n                (col.name == null || startsWith(col.name, '~'))) {\n                var key = (col.name != null ? col.name.substr(1) : col.id);\n                col.name = localText(localTextPrefix + key);\n            }\n        }\n\n        return columns;\n    }\n}\n\nexport namespace SlickTreeHelper {\n    export function filterCustom<TItem>(item: TItem, getParent: (x: TItem) => any): boolean {\n        var parent = getParent(item);\n        var loop = 0;\n        while (parent != null) {\n            if (!!parent._collapsed) {\n                return false;\n            }\n            parent = getParent(parent);\n            if (loop++ > 1000) {\n                throw new Error(\n                    'Possible infinite loop, check parents has no circular reference!');\n            }\n        }\n        return true;\n    }\n\n    export function filterById<TItem>(item: TItem, view: RemoteView<TItem>,\n        getParentId: (x: TItem) => any): boolean {\n        return filterCustom(item, function (x) {\n            var parentId = getParentId(x);\n            if (parentId == null) {\n                return null;\n            }\n            return view.getItemById(parentId);\n        });\n    }\n\n    export function setCollapsed<TItem>(items: TItem[], collapsed: boolean): void {\n        if (items != null) {\n            for (var item of items) {\n                (item as any)._collapsed = collapsed;\n            }\n        }\n    }\n\n    export function setCollapsedFlag<TItem>(item: TItem, collapsed: boolean): void {\n        (item as any)._collapsed = collapsed;\n    }\n\n    export function setIndents<TItem>(items: TItem[], getId: (x: TItem) => any,\n        getParentId: (x: TItem) => any, setCollapsed?: boolean): void {\n        var depth = 0;\n        var depths: Record<any, any> = {};\n        for (var line = 0; line < items.length; line++) {\n            var item = items[line];\n            if (line > 0) {\n                var parentId = getParentId(item);\n                if (parentId != null && parentId === getId(items[line - 1])) {\n                    depth += 1;\n                }\n                else if (parentId == null) {\n                    depth = 0;\n                }\n                else if (parentId !== getParentId(items[line - 1])) {\n                    if (depths[parentId] != null) {\n                        depth = depths[parentId] + 1;\n                    }\n                    else {\n                        depth = 0;\n                    }\n                }\n            }\n            depths[getId(item)] = depth;\n            (item as any)._indent = depth;\n            if (setCollapsed != null) {\n                (item as any)._collapsed = setCollapsed;\n            }\n        }\n    }\n\n    export function toggleClick<TItem>(e: JQueryEventObject, row: number, cell: number,\n        view: RemoteView<TItem>, getId: (x: TItem) => any): void {\n        var target = $(e.target);\n        if (!target.hasClass('s-TreeToggle')) {\n            return;\n        }\n        if (target.hasClass('s-TreeCollapse') || target.hasClass('s-TreeExpand')) {\n            var item = view.getItem(row);\n            if (item != null) {\n                if (!!!item._collapsed) {\n                    item._collapsed = true;\n                }\n                else {\n                    item._collapsed = false;\n                }\n                view.updateItem(getId(item), item);\n            }\n            if (e.shiftKey) {\n                view.beginUpdate();\n                try {\n                    setCollapsed(view.getItems(), !!item._collapsed);\n                    view.setItems(view.getItems(), true);\n                }\n                finally {\n                    view.endUpdate();\n                }\n            }\n        }\n    }\n}", "\uFEFFimport { Culture, Enum, format, formatDate, formatNumber, getAttributes, getTypeFullName, htmlEncode, isEmptyOrNull, ISlickFormatter, parseDecimal, parseISODateTime, replaceAll, resolveUrl, safeCast, startsWith, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Formatter } from \"@serenity-is/corelib/slick\";\nimport { Column, FormatterContext } from \"@serenity-is/sleekgrid\";\nimport { Decorators, EnumKeyAttribute } from \"../../decorators\";\nimport { EnumTypeRegistry } from \"../../types/enumtyperegistry\";\n\nexport interface IInitializeColumn {\n    initializeColumn(column: Column): void;\n}\n\n@Decorators.registerInterface('Serenity.IInitializeColumn')\nexport class IInitializeColumn {\n}\n\n@Decorators.registerFormatter('Serenity.BooleanFormatter')\nexport class BooleanFormatter implements Formatter {\n    format(ctx: FormatterContext) {\n\n        if (ctx.value == null) {\n            return '';\n        }\n\n        var text;\n        if (!!ctx.value) {\n            text = tryGetText(this.trueText);\n            if (text == null) {\n                text = this.trueText;\n                if (text == null) {\n                    text = tryGetText('Dialogs.YesButton') ?? 'Yes';\n                }\n            }\n        }\n        else {\n            text = tryGetText(this.falseText);\n            if (text == null) {\n                text = this.falseText;\n                if (text == null) {\n                    text = tryGetText('Dialogs.NoButton') ?? 'No';\n                }\n            }\n        }\n\n        return htmlEncode(text);\n    }\n\n    @Decorators.option()\n    public falseText: string;\n\n    @Decorators.option()\n    public trueText: string;\n}\n\n@Decorators.registerFormatter('Serenity.CheckboxFormatter')\nexport class CheckboxFormatter implements Formatter {\n    format(ctx: FormatterContext) {\n        return '<span class=\"check-box no-float readonly slick-edit-preclick ' + (!!ctx.value ? ' checked' : '') + '\"></span>';\n    }\n}\n\n@Decorators.registerFormatter('Serenity.DateFormatter')\nexport class DateFormatter implements Formatter {\n    constructor() {\n        this.displayFormat = Culture.dateFormat;\n    }\n\n    static format(value: any, format?: string) {\n        if (value == null) {\n            return '';\n        }\n\n        var date: Date;\n\n        if (value instanceof Date) {\n            date = value;\n        }\n        else if (typeof value === 'string') {\n            date = parseISODateTime(value);\n\n            if (date == null) {\n                return htmlEncode(value);\n            }\n        }\n        else {\n            return value.toString();\n        }\n\n        return htmlEncode(formatDate(date, format));\n    }\n\n    @Decorators.option()\n    public displayFormat: string;\n\n    format(ctx: FormatterContext): string {\n        return DateFormatter.format(ctx.value, this.displayFormat);\n    }\n}\n\n@Decorators.registerFormatter('Serenity.DateTimeFormatter')\nexport class DateTimeFormatter extends DateFormatter {\n    constructor() {\n        super();\n        this.displayFormat = Culture.dateTimeFormat;\n    }\n}\n\n@Decorators.registerFormatter('Serenity.EnumFormatter')\nexport class EnumFormatter implements Formatter {\n\n    format(ctx: FormatterContext): string {\n        return EnumFormatter.format(EnumTypeRegistry.get(this.enumKey), ctx.value);\n    }\n\n    @Decorators.option()\n    enumKey: string;\n\n    static format(enumType: any, value: any) {\n\n        if (value == null) {\n            return '';\n        }\n\n        var name = Enum.toString(enumType, value);\n        var enumKeyAttr = getAttributes(enumType, EnumKeyAttribute, false);\n        var enumKey = ((enumKeyAttr.length > 0) ? enumKeyAttr[0].value : getTypeFullName(enumType));\n        return EnumFormatter.getText(enumKey, name);\n    }\n\n    static getText(enumKey: string, name: string) {\n        if (isEmptyOrNull(name)) {\n            return '';\n        }\n\n        return htmlEncode(tryGetText('Enums.' + enumKey + '.' + name) ?? name);\n    }\n\n    static getName(enumType: any, value: any) {\n        if (value == null) {\n            return '';\n        }\n        return Enum.toString(enumType, value);\n    }\n}\n\n@Decorators.registerFormatter('Serenity.FileDownloadFormatter', [ISlickFormatter, IInitializeColumn])\nexport class FileDownloadFormatter implements Formatter, IInitializeColumn {\n\n    format(ctx: FormatterContext): string {\n        var dbFile = safeCast(ctx.value, String);\n        if (isEmptyOrNull(dbFile)) {\n            return '';\n        }\n\n        var downloadUrl = FileDownloadFormatter.dbFileUrl(dbFile);\n        var originalName = (!isEmptyOrNull(this.originalNameProperty) ?\n            safeCast(ctx.item[this.originalNameProperty], String) : null);\n\n        originalName = (originalName ?? '');\n        var text = format((this.displayFormat ?? '{0}'),\n            originalName, dbFile, downloadUrl);\n\n        var iconClass = this.iconClass ?? \"fa fa-download\";\n\n        if (iconClass.startsWith(\"fa-\"))\n            iconClass = \"fa \" + iconClass;\n\n        return \"<a class='file-download-link' target='_blank' href='\" +\n            htmlEncode(downloadUrl) + \"'><i class='\" + iconClass + \"'></i> \" + htmlEncode(text) + '</a>';\n    }\n\n    static dbFileUrl(filename: string): string {\n        filename = replaceAll((filename ?? ''), '\\\\', '/');\n        return resolveUrl('~/upload/') + filename;\n    }\n\n    initializeColumn(column: Column): void {\n        column.referencedFields = column.referencedFields || [];\n        if (!isEmptyOrNull(this.originalNameProperty)) {\n            column.referencedFields.push(this.originalNameProperty);\n            return;\n        }\n    }\n\n    @Decorators.option()\n    displayFormat: string;\n\n    @Decorators.option()\n    originalNameProperty: string;\n\n    @Decorators.option()\n    iconClass: string;\n}\n\n@Decorators.registerFormatter('Serenity.MinuteFormatter')\nexport class MinuteFormatter implements Formatter {\n\n    format(ctx: FormatterContext) {\n        return MinuteFormatter.format(ctx.value);\n    }\n\n    static format(value: number): string {\n        var hour = Math.floor(value / 60);\n        var minute = value - hour * 60;\n        var hourStr, minuteStr;\n\n        if (value == null || isNaN(value))\n            return '';\n\n        if (hour < 10)\n            hourStr = '0' + hour;\n        else\n            hourStr = hour.toString();\n\n        if (minute < 10)\n            minuteStr = '0' + minute;\n        else\n            minuteStr = minute.toString();\n\n        return format('{0}:{1}', hourStr, minuteStr);\n    }\n}\n\n@Decorators.registerFormatter('Serenity.NumberFormatter')\nexport class NumberFormatter {\n    format(ctx: FormatterContext): string {\n        return NumberFormatter.format(ctx.value, this.displayFormat);\n    }\n\n    static format(value: any, format?: string): string {\n        format = (format ?? '0.##');\n        if (value == null)\n            return '';\n\n        if (typeof (value) === 'number') {\n            if (isNaN(value))\n                return '';\n\n            return htmlEncode(formatNumber(value, format));\n        }\n\n        var dbl = parseDecimal(value.toString());\n        if (dbl == null)\n            return '';\n\n        return htmlEncode(value.toString());\n    }\n\n    @Decorators.option()\n    displayFormat: string;\n}\n\n@Decorators.registerFormatter('Serenity.UrlFormatter', [ISlickFormatter, IInitializeColumn])\nexport class UrlFormatter implements Formatter, IInitializeColumn {\n\n    format(ctx: FormatterContext): string {\n        var url = (!isEmptyOrNull(this.urlProperty) ?\n            (ctx.item[this.urlProperty] ?? '').toString() :\n            (ctx.value ?? '').toString());\n\n        if (isEmptyOrNull(url))\n            return '';\n\n        if (!isEmptyOrNull(this.urlFormat))\n            url = format(this.urlFormat, url);\n\n        if (url != null && startsWith(url, '~/'))\n            url = resolveUrl(url);\n\n        var display = (!isEmptyOrNull(this.displayProperty) ?\n            (ctx.item[this.displayProperty] ?? '').toString() :\n            (ctx.value ?? '').toString());\n\n        if (!isEmptyOrNull(this.displayFormat))\n            display = format(this.displayFormat, display);\n\n        var s = \"<a href='\" + htmlEncode(url) + \"'\";\n        if (!isEmptyOrNull(this.target))\n            s += \" target='\" + this.target + \"'\";\n\n        s += '>' + htmlEncode(display) + '</a>';\n\n        return s;\n    }\n\n    initializeColumn(column: Column): void {\n        column.referencedFields = column.referencedFields || [];\n\n        if (!isEmptyOrNull(this.displayProperty)) {\n            column.referencedFields.push(this.displayProperty);\n            return;\n        }\n\n        if (!isEmptyOrNull(this.urlProperty)) {\n            column.referencedFields.push(this.urlProperty);\n            return;\n        }\n    }\n\n    @Decorators.option()\n    displayProperty: string;\n\n    @Decorators.option()\n    displayFormat: string;\n\n    @Decorators.option()\n    urlProperty: string;\n\n    @Decorators.option()\n    urlFormat: string;\n\n    @Decorators.option()\n    target: string;\n}", "\uFEFFimport { ArgumentNullException, Exception, htmlEncode, isAssignableFrom, isEmptyOrNull, ISlickFormatter, notifyError } from \"@serenity-is/corelib/q\";\nimport { commonTypeRegistry } from \"./commontyperegistry\";\n\nexport namespace FormatterTypeRegistry {\n\n    let registry = commonTypeRegistry(\n        type => isAssignableFrom(ISlickFormatter, type), \n        null, \"Formatter\");\n\n    export function get(key: string): any {\n        if (isEmptyOrNull(key)) \n            throw new ArgumentNullException('key');\n        \n        var type = registry.tryGet(key);\n        if (type)\n            return type;\n\n        var message = `\"${htmlEncode(key)}\" formatter class not found! \nMake sure there is such a formatter type under the project root namespace,\nand its namespace parts start with capital letters like MyProject.MyModule.MyFormatter.\n\nIf using ES modules, make sure the formatter type has a decorator like \n@Decorators.registerFormatter('MyProject.MyModule.MyFormatter') with the full name \nof your formatter type and \"side-effect-import\" this formatter class from the current \n\"page.ts/grid.ts/dialog.ts file (import \"./path/to/MyFormatter.ts\").\n\nAfter applying fixes, build and run \"node ./tsbuild.js\" (or \"tsc\" if using namespaces) \nfrom the project folder.`;\n\n        notifyError(message.replace(/\\r?\\n\\r?\\n/g, '<br/><br/>'), '', { escapeHtml: false, timeOut: 5000 });\n        throw new Exception(message);\n    }\n\n    export function reset() {\n        registry.reset();\n    }\n\n    export function tryGet(key: string) {\n        return registry.tryGet(key);\n    }\n}", "\uFEFFimport { Authorization, Criteria, debounce, deepClone, endsWith, extend, getAttributes, getColumnsData, getColumnsDataAsync, getInstanceType, getTypeFullName, htmlEncode, indexOf, isEmptyOrNull, isInstanceOfType, layoutFillHeight, LayoutTimer, ListResponse, PropertyItem, PropertyItemsData, ScriptData, setEquality, startsWith, trimEnd, trimToNull, tryGetText } from \"@serenity-is/corelib/q\";\nimport { Format, PagerOptions, RemoteView, RemoteViewOptions } from \"@serenity-is/corelib/slick\";\nimport { AutoTooltips, Column, ColumnSort, EventEmitter, FormatterContext, Grid, GridOptions, GroupItemMetadataProvider, IPlugin, Range, SelectionModel } from \"@serenity-is/sleekgrid\";\nimport { ColumnsKeyAttribute, Decorators, FilterableAttribute, IdPropertyAttribute, IsActivePropertyAttribute, LocalTextPrefixAttribute } from \"../../decorators\";\nimport { IReadOnly } from \"../../interfaces\";\nimport { DateEditor } from \"../editors/dateeditor\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { SelectEditor } from \"../editors/selecteditor\";\nimport { FilterDisplayBar } from \"../filtering/filterdisplaybar\";\nimport { BooleanFiltering, DateFiltering, DateTimeFiltering, FilteringTypeRegistry, IFiltering, IQuickFiltering } from \"../filtering/filtering\";\nimport { FilterLine } from \"../filtering/filterline\";\nimport { FilterOperators } from \"../filtering/filteroperator\";\nimport { FilterStore } from \"../filtering/filterstore\";\nimport { LazyLoadHelper } from \"../helpers/lazyloadhelper\";\nimport { GridUtils, PropertyItemSlickConverter, SlickFormatting, SlickHelper } from \"../helpers/slickhelpers\";\nimport { ReflectionOptionsSetter } from \"../widgets/reflectionoptionssetter\";\nimport { Toolbar, ToolButton } from \"../widgets/toolbar\";\nimport { Widget } from \"../widgets/widget\";\nimport { IDataGrid } from \"./idatagrid\";\nimport { IRowDefinition } from \"./irowdefinition\";\nimport { QuickFilter } from \"./quickfilter\";\nimport { QuickFilterBar } from \"./quickfilterbar\";\nimport { QuickSearchField, QuickSearchInput } from \"./quicksearchinput\";\nimport { SlickPager } from \"./slickpager\";\n\ntype GroupItemMetadataProviderType = typeof GroupItemMetadataProvider;\n\ndeclare global {\n    namespace Slick {\n        namespace Data {\n            /** @obsolete use the type exported from @serenity-is/sleekgrid */\n            export const GroupItemMetadataProvider: GroupItemMetadataProviderType;\n        }\n   \n        interface RowMoveManagerOptions {\n            cancelEditOnDrag: boolean;\n        }\n    \n        class RowMoveManager implements IPlugin {\n            constructor(options: RowMoveManagerOptions);\n            init(): void;\n            onBeforeMoveRows: EventEmitter;\n            onMoveRows: EventEmitter;\n        }\n\n        class RowSelectionModel implements SelectionModel {\n            init(grid: Grid): void;\n            destroy?: () => void;\n            setSelectedRanges(ranges: Range[]): void;\n            onSelectedRangesChanged: EventEmitter<Range[]>;\n            refreshSelections?(): void;\n        }        \n    }\n}\n\nexport interface SettingStorage {\n    getItem(key: string): string;\n    setItem(key: string, value: string): void;\n}\n\nexport interface PersistedGridColumn {\n    id: string;\n    width?: number;\n    sort?: number;\n    visible?: boolean;\n}\n\nexport interface PersistedGridSettings {\n    columns?: PersistedGridColumn[];\n    filterItems?: FilterLine[];\n    quickFilters?: { [key: string]: any };\n    quickFilterText?: string;\n    quickSearchField?: QuickSearchField;\n    quickSearchText?: string;\n    includeDeleted?: boolean;\n}\n\nexport interface GridPersistanceFlags {\n    columnWidths?: boolean;\n    columnVisibility?: boolean;\n    sortColumns?: boolean;\n    filterItems?: boolean;\n    quickFilters?: boolean;\n    quickFilterText?: boolean;\n    quickSearch?: boolean;\n    includeDeleted?: boolean;\n}\n\n@Decorators.registerClass('Serenity.DataGrid', [IReadOnly])\n@Decorators.element(\"<div/>\")\nexport class DataGrid<TItem, TOptions> extends Widget<TOptions> implements IDataGrid, IReadOnly {\n\n    private _isDisabled: boolean;\n    private _layoutTimer: number; \n    private _slickGridOnSort: any;\n    private _slickGridOnClick: any;\n    protected titleDiv: JQuery;\n    protected toolbar: Toolbar;\n    protected filterBar: FilterDisplayBar;\n    protected quickFiltersDiv: JQuery;\n    protected quickFiltersBar: QuickFilterBar;\n    protected slickContainer: JQuery;\n    protected allColumns: Column[];\n    protected propertyItemsData: PropertyItemsData;\n    protected initialSettings: PersistedGridSettings;\n    protected restoringSettings: number = 0;\n    public view: RemoteView<TItem>;\n    public slickGrid: Grid;\n    public openDialogsAsPanel: boolean;\n\n    public static defaultRowHeight: number;\n    public static defaultHeaderHeight: number;\n    public static defaultPersistanceStorage: SettingStorage;\n    public static defaultColumnWidthScale: number;\n    public static defaultColumnWidthDelta: number;\n\n    constructor(container: JQuery, options?: TOptions) {\n        super(container, options);\n\n        var self = this;\n\n        this.element.addClass('s-DataGrid').html('');\n\n        var layout = function() {\n            self.layout();\n            if (self._layoutTimer != null)\n                LayoutTimer.store(self._layoutTimer);\n        }\n        this.element.addClass('require-layout').on('layout.' + this.uniqueName, layout);\n\n        if (this.useLayoutTimer())\n            this._layoutTimer = LayoutTimer.onSizeChange(() => this.element && this.element[0], debounce(layout, 50));\n\n        this.setTitle(this.getInitialTitle());\n\n        var buttons = this.getButtons();\n        if (buttons != null) {\n            this.createToolbar(buttons);\n        }\n\n        this.slickContainer = this.createSlickContainer();\n        this.view = this.createView();\n\n        if (this.useAsync())\n            this.initAsync();\n        else \n            this.initSync();\n    }\n\n    protected internalInit() {\n        this.allColumns = this.allColumns ?? this.getColumns();\n        this.slickGrid = this.createSlickGrid();\n\n        if (this.enableFiltering()) {\n            this.createFilterBar();\n        }\n\n        if (this.usePager()) {\n            this.createPager();\n        }\n        this.bindToSlickEvents();\n        this.bindToViewEvents();\n\n        if (this.toolbar) {\n            this.createToolbarExtensions();\n        }\n\n        this.createQuickFilters();\n\n        this.updateDisabledState();\n        this.updateInterface();\n\n        this.initialSettings = this.getCurrentSettings(null);\n        this.restoreSettings(null, null);\n\n        window.setTimeout(() => this.initialPopulate(), 0);   \n    }\n\n    protected initSync() {\n        this.propertyItemsData = this.getPropertyItemsData();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected async initAsync() {\n        this.propertyItemsData = await this.getPropertyItemsDataAsync();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected afterInit() {\n    }\n\n    protected useAsync() {\n        return false;\n    }\n\n    protected useLayoutTimer() {\n        return true;\n    }\n\n    protected attrs<TAttr>(attrType: { new(...args: any[]): TAttr }): TAttr[] {\n        return getAttributes(getInstanceType(this), attrType, true);\n    }\n\n    protected layout(): void {\n        if (!this.element || !this.element.is(':visible') || !this.slickContainer || !this.slickGrid)\n            return;\n\n        var responsiveHeight = this.element.hasClass('responsive-height');\n        var madeAutoHeight = this.slickGrid != null && this.slickGrid.getOptions().autoHeight;\n        var shouldAutoHeight = responsiveHeight && window.innerWidth < 768;\n\n        if (shouldAutoHeight) {\n            if (this.element[0] && this.element[0].style.height != \"auto\")\n                this.element[0].style.height = \"auto\";\n\n            if (!madeAutoHeight) {\n\n                this.slickContainer.css('height', 'auto')\n                    .children('.slick-pane').each((i, e: HTMLElement) => {\n                        if (e.style.height != null && e.style.height != \"auto\")\n                            e.style.height = \"auto\";\n                    });\n\n                this.slickGrid.setOptions({ autoHeight: true });\n            }\n        }\n        else {\n            if (madeAutoHeight) {\n                this.slickContainer.children('.slick-viewport').css('height', 'auto');\n                this.slickGrid.setOptions({ autoHeight: false });\n            }\n\n            layoutFillHeight(this.slickContainer);\n        }\n\n        this.slickGrid.resizeCanvas();\n    }\n\n    protected getInitialTitle(): string {\n        return null;\n    }\n\n    protected createToolbarExtensions(): void {\n    }\n\n    protected ensureQuickFilterBar(): QuickFilterBar {\n\n        if (this.quickFiltersDiv == null)\n            this.createQuickFilters([]);\n\n        return this.quickFiltersBar;\n    }\n\n    protected createQuickFilters(filters?: QuickFilter<Widget<any>, any>[]): void {\n\n        if (this.quickFiltersDiv == null && (filters != null ||\n            ((filters = this.getQuickFilters()) && filters != null && filters.length))) {\n            this.quickFiltersDiv = $('<div/>').addClass('quick-filters-bar');\n            if (this.toolbar) {\n                $('<div/>').addClass('clear').appendTo(this.toolbar.element);\n                this.quickFiltersDiv.appendTo(this.toolbar.element);\n            }\n            else {\n                this.quickFiltersDiv.appendTo($('<div/>').addClass('s-Toolbar').insertBefore(this.slickContainer));\n            }\n\n            this.quickFiltersBar = new QuickFilterBar(this.quickFiltersDiv, {\n                filters: filters,\n                getTitle: (filter: QuickFilter<Widget<any>, any>) => this.determineText(pre => pre + filter.field),\n                idPrefix: this.uniqueName + '_QuickFilter_'\n            });\n            this.quickFiltersBar.onChange = (e) => this.quickFilterChange(e);\n        }\n    }\n\n    protected getQuickFilters(): QuickFilter<Widget<any>, any>[] {\n        return this.allColumns.filter(function (x) {\n            return x.sourceItem &&\n                x.sourceItem.quickFilter === true &&\n                (x.sourceItem.readPermission == null ||\n                    Authorization.hasPermission(x.sourceItem.readPermission));\n        }).map(x => DataGrid.propertyItemToQuickFilter(x.sourceItem))\n            .filter(x => x != null);\n    }\n\n    public static propertyItemToQuickFilter(item: PropertyItem) {\n        var quick: any = {};\n\n        var name = item.name;\n        var title = tryGetText(item.title);\n        if (title == null) {\n            title = item.title;\n            if (title == null) {\n                title = name;\n            }\n        }\n\n        var filteringType = FilteringTypeRegistry.get((item.filteringType ?? 'String'));\n        if (filteringType === DateFiltering) {\n            quick = QuickFilterBar.dateRange(name, title);\n        }\n        else if (filteringType === DateTimeFiltering) {\n            quick = QuickFilterBar.dateTimeRange(name, title, item.editorParams?.useUtc);\n        }\n        else if (filteringType === BooleanFiltering) {\n            var q = item.quickFilterParams || {};\n            var f = item.filteringParams || {};\n            var trueText = q['trueText'];\n            if (trueText == null) {\n                trueText = f['trueText'];\n            }\n            var falseText = q['falseText'];\n            if (falseText == null) {\n                falseText = f['falseText'];\n            }\n            quick = QuickFilterBar.boolean(name, title, trueText, falseText);\n        }\n        else {\n            var filtering = new (filteringType as any)() as IFiltering;\n            if (filtering && isInstanceOfType(filtering, IQuickFiltering)) {\n                ReflectionOptionsSetter.set(filtering, item.filteringParams);\n                filtering.set_field(item);\n                filtering.set_operator({ key: FilterOperators.EQ });\n                (filtering as any).initQuickFilter(quick);\n                quick.options = extend(deepClone(quick.options), item.quickFilterParams);\n            }\n            else {\n                return null;\n            }\n        }\n\n        if (!!item.quickFilterSeparator) {\n            quick.separator = true;\n        }\n\n        quick.cssClass = item.quickFilterCssClass;\n        return quick;\n    }\n\n    protected findQuickFilter<TWidget>(type: { new(...args: any[]): TWidget }, field: string): TWidget {\n        if (this.quickFiltersBar != null)\n            return this.quickFiltersBar.find(type, field);\n\n        return $('#' + this.uniqueName + '_QuickFilter_' + field).getWidget(type);\n    }\n\n    protected tryFindQuickFilter<TWidget>(type: { new(...args: any[]): TWidget }, field: string): TWidget {\n        if (this.quickFiltersBar != null)\n            return this.quickFiltersBar.tryFind(type, field);\n\n        var el = $('#' + this.uniqueName + '_QuickFilter_' + field);\n        if (!el.length)\n            return null;\n\n        return el.tryGetWidget(type);\n    }\n\n    protected createIncludeDeletedButton(): void {\n        if (!isEmptyOrNull(this.getIsActiveProperty()) ||\n            !isEmptyOrNull(this.getIsDeletedProperty())) {\n            GridUtils.addIncludeDeletedToggle(this.toolbar.element, this.view, null, false);\n        }\n    }\n\n    protected getQuickSearchFields(): QuickSearchField[] {\n        return null;\n    }\n\n    protected createQuickSearchInput(): void {\n        GridUtils.addQuickSearchInput(this.toolbar.element, this.view, this.getQuickSearchFields(), () => this.persistSettings(null));\n    }\n\n    public destroy() {\n        if (this._layoutTimer) {\n            this._layoutTimer = LayoutTimer.off(this._layoutTimer);\n        }\n        if (this.quickFiltersBar) {\n            this.quickFiltersBar.destroy();\n            this.quickFiltersBar = null;\n        }\n\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = null;\n        }\n\n        if (this.slickGrid) {\n            this.slickGrid.onClick.clear();\n            this.slickGrid.onSort.clear();\n            this.slickGrid.onColumnsResized.clear();\n            this.slickGrid.onColumnsReordered.clear();\n            this.slickGrid.destroy();\n            this.slickGrid = null;\n        }\n\n        if (this.view) {\n            this.view.onDataChanged.clear();\n            this.view.onSubmit = null;\n            this.view.setFilter(null);\n            this.view = null;\n        }\n\n        this.titleDiv = null;\n        super.destroy();\n    }\n\n    protected getItemCssClass(item: TItem, index: number): string {\n        var activeFieldName = this.getIsActiveProperty();\n        var deletedFieldName = this.getIsDeletedProperty();\n        if (isEmptyOrNull(activeFieldName) && isEmptyOrNull(deletedFieldName)) {\n            return null;\n        }\n\n        if (activeFieldName) {\n            var value = (item as any)[activeFieldName];\n            if (value == null) {\n                return null;\n            }\n\n            if (typeof (value) === 'number') {\n                if (value < 0) {\n                    return 'deleted';\n                }\n                else if (value === 0) {\n                    return 'inactive';\n                }\n            }\n            else if (typeof (value) === 'boolean') {\n                if (value === false) {\n                    return 'deleted';\n                }\n            }\n        }\n        else {\n            return (item as any)[deletedFieldName] ? 'deleted' : null;\n        }\n\n        return null;\n    }\n\n    protected getItemMetadata(item: TItem, index: number): any {\n        var itemClass = this.getItemCssClass(item, index);\n        if (isEmptyOrNull(itemClass)) {\n            return new Object();\n        }\n        return { cssClasses: itemClass };\n    }\n\n    protected postProcessColumns(columns: Column[]): Column[] {\n        SlickHelper.setDefaults(columns, this.getLocalTextDbPrefix());\n\n        var delta = this.getColumnWidthDelta();\n        var scale = this.getColumnWidthScale();\n        if (scale < 0)\n            scale = 1;\n        if (delta !== 0 || scale !== 1) {\n            for (var col of columns) {\n                if (typeof col.width === \"number\")\n                    col.width = Math.round(col.width * scale + delta);\n                if (typeof col.minWidth === \"number\")\n                    col.minWidth = Math.round(col.minWidth * scale + delta);\n                if (typeof col.maxWidth === \"number\")\n                    col.maxWidth = Math.round(col.maxWidth * scale + delta);\n            }\n        }\n\n        return columns;\n    }\n\n    protected getColumnWidthDelta() {\n        return DataGrid.defaultColumnWidthDelta ?? 0;\n    }\n\n    protected getColumnWidthScale() {\n        return DataGrid.defaultColumnWidthScale ?? 1;\n    }\n\n    protected initialPopulate(): void {\n        var self = this;\n        if (this.populateWhenVisible()) {\n            LazyLoadHelper.executeEverytimeWhenShown(this.element, function () {\n                self.refreshIfNeeded();\n            }, false);\n            if (this.element.is(':visible') && this.view) {\n                this.view.populate();\n            }\n        }\n        else if (this.view) {\n            this.view.populate();\n        }\n    }\n\n    protected canFilterColumn(column: Column): boolean {\n        return (column.sourceItem != null && \n            column.sourceItem.notFilterable !== true &&\n            (column.sourceItem.readPermission == null ||\n                Authorization.hasPermission(column.sourceItem.readPermission)));\n    }\n\n    protected initializeFilterBar() {\n\n        this.filterBar.set_store(new FilterStore(\n            this.allColumns\n                .filter(c => this.canFilterColumn(c))\n                .map(x => x.sourceItem)));\n\n        this.filterBar.get_store().add_changed((s: JQueryEventObject, e: any) => {\n            if (this.restoringSettings <= 0) {\n                this.persistSettings(null);\n                this.view && (this.view.seekToPage = 1);\n                this.refresh();\n            }\n        });\n    }\n\n    protected createSlickGrid(): Grid {\n\n        var visibleColumns = this.postProcessColumns(this.allColumns).filter(function (x) {\n            return x.visible !== false;\n        });\n\n        var slickOptions = this.getSlickOptions();\n        var grid = new Grid(this.slickContainer, this.view as any, visibleColumns, slickOptions) as Grid;\n        grid.registerPlugin(new AutoTooltips({\n            enableForHeaderCells: true\n        }));\n\n        this.slickGrid = grid;\n        \n        this.setInitialSortOrder();\n\n        return grid;\n    }\n\n    protected setInitialSortOrder(): void {\n        var sortBy = this.getDefaultSortBy();\n\n        if (this.view) {\n            this.view.sortBy = Array.prototype.slice.call(sortBy);\n        }\n\n        var mapped = sortBy.map(function (s): ColumnSort {\n            var x: ColumnSort;\n            if (s && endsWith(s.toLowerCase(), ' desc')) {\n                return {\n                    columnId: trimEnd(s.substr(0, s.length - 5)),\n                    sortAsc: false\n                }\n            }\n            else return {\n                columnId: s,\n                sortAsc: true\n            }\n            return x;\n        });\n\n        this.slickGrid.setSortColumns(mapped);\n    }\n\n    itemAt(row: number): TItem {\n        return this.slickGrid.getDataItem(row);\n    }\n\n    rowCount() {\n        return this.slickGrid.getDataLength();\n    }\n\n    getItems(): TItem[] {\n        return this.view.getItems();\n    }\n\n    setItems(value: TItem[]) {\n        this.view.setItems(value, true);\n    }\n\n    protected bindToSlickEvents() {\n        var self = this;\n        this._slickGridOnSort = (e: JQuery, p: any) => {\n            self.view.populateLock();\n            try {\n                var sortBy = [];\n                var col: any;\n                if (!!p.multiColumnSort) {\n                    for (var i = 0; !!(i < p.sortCols.length); i++) {\n                        var x = p.sortCols[i];\n                        col = x.sortCol;\n                        if (col == null) {\n                            col = {};\n                        }\n                        sortBy.push(col.field + (!!x.sortAsc ? '' : ' DESC'));\n                    }\n                }\n                else {\n                    var col = p.sortCol;\n                    if (col == null) {\n                        col = {};\n                    }\n                    sortBy.push(col.field + (!!p.sortAsc ? '' : ' DESC'));\n                }\n\n                self.view.seekToPage = 1;\n                self.view.sortBy = sortBy;\n            }\n            finally {\n                self.view.populateUnlock();\n            }\n\n            if (self.view.getLocalSort && self.view.getLocalSort()) {\n                self.view.sort();\n            }\n            else {\n                self.view.populate();\n            }\n            this.persistSettings(null);\n        };\n\n        this.slickGrid.onSort.subscribe(this._slickGridOnSort);\n\n        this._slickGridOnClick = (e1: JQueryEventObject, p1: any) => {\n            self.onClick(e1, p1.row, p1.cell);\n        }\n\n        this.slickGrid.onClick.subscribe(this._slickGridOnClick);\n\n        this.slickGrid.onColumnsReordered.subscribe((e2: JQueryEventObject, p2: any) => {\n            return this.persistSettings(null);\n        });\n\n        this.slickGrid.onColumnsResized.subscribe((e3: JQueryEventObject, p3: any) => {\n            return this.persistSettings(null);\n        });\n    }\n\n    protected getAddButtonCaption(): string {\n        return tryGetText('Controls.DataGrid.NewButton') ?? 'New';\n    }\n\n    protected getButtons(): ToolButton[] {\n        return [];\n    }\n\n    protected editItem(entityOrId: any): void {\n        throw new Error(\"Not Implemented!\");\n    }\n\n    protected editItemOfType(itemType: string, entityOrId: any): void {\n        if (itemType === this.getItemType()) {\n            this.editItem(entityOrId);\n            return;\n        }\n\n        throw new Error(\"Not Implemented!\");\n    }\n\n    protected onClick(e: JQueryEventObject, row: number, cell: number): void {\n        if (e.isDefaultPrevented()) {\n            return;\n        }\n\n        var target = $(e.target);\n        if (!target.hasClass('s-EditLink')) {\n            target = target.closest('a');\n        }\n\n        if (target.hasClass('s-EditLink')) {\n            e.preventDefault();\n            this.editItemOfType(SlickFormatting.getItemType(target), SlickFormatting.getItemId(target));\n        }\n    }\n\n    protected viewDataChanged(e: any, rows: TItem[]): void {\n        this.markupReady();\n        this.layout();\n    }\n\n    protected bindToViewEvents(): void {\n        var self = this;\n\n        this.view.onDataChanged.subscribe(function (e, d) {\n            return self.viewDataChanged(e, d);\n        });\n\n        this.view.onSubmit = function (view) {\n            return self.onViewSubmit();\n        };\n\n        this.view.setFilter(function (item, view1) {\n            return self.onViewFilter(item);\n        });\n\n        this.view.onProcessData = function (response, view2) {\n            return self.onViewProcessData(response);\n        }\n    }\n\n    protected onViewProcessData(response: ListResponse<TItem>): ListResponse<TItem> {\n        return response;\n    }\n\n    protected onViewFilter(item: TItem): boolean {\n        return true;\n    }\n\n    protected getIncludeColumns(include: { [key: string]: boolean }): void {\n        var columns = this.slickGrid.getColumns();\n        for (var column of columns) {\n            if (column.field) {\n                include[column.field] = true;\n            }\n\n            if (column.referencedFields) {\n                for (var x of column.referencedFields) {\n                    include[x] = true;\n                }\n            }\n        }\n    }\n\n    protected setCriteriaParameter(): void {\n        delete this.view.params['Criteria'];\n        if (this.filterBar) {\n            var criteria = this.filterBar.get_store().get_activeCriteria();\n            if (!Criteria.isEmpty(criteria)) {\n                this.view.params.Criteria = criteria;\n            }\n        }\n    }\n\n    protected setEquality(field: string, value: any): void {\n        setEquality(this.view.params, field, value);\n    }\n\n    protected setIncludeColumnsParameter(): void {\n        var include = {};\n        this.getIncludeColumns(include);\n        var array = [];\n        for (var key of Object.keys(include)) {\n            array.push(key);\n        }\n        this.view.params.IncludeColumns = array;\n    }\n\n    protected onViewSubmit(): boolean {\n        if (this._isDisabled || !this.getGridCanLoad()) {\n            return false;\n        }\n\n        this.setCriteriaParameter();\n        this.setIncludeColumnsParameter();\n        this.invokeSubmitHandlers();\n\n        return true;\n    }\n\n    protected markupReady(): void {\n    }\n\n    protected createSlickContainer(): JQuery {\n        return $('<div class=\"grid-container\"></div>').appendTo(this.element);\n    }\n\n    protected createView(): RemoteView<TItem> {\n        var opt = this.getViewOptions();\n        return new RemoteView<TItem>(opt) as any;\n    }\n\n    protected getDefaultSortBy(): any[] {\n        if (this.slickGrid) {\n\n            var columns = this.slickGrid.getColumns().filter(function (x) {\n                return x.sortOrder && x.sortOrder !== 0;\n            });\n\n            if (columns.length > 0) {\n                columns.sort(function (x1, y) {\n                    return Math.abs(x1.sortOrder) < Math.abs(y.sortOrder) ? -1 : (Math.abs(x1.sortOrder) > Math.abs(y.sortOrder) ? 1 : 0);\n                });\n\n                var list = [];\n                for (var i = 0; i < columns.length; i++) {\n                    var col = columns[i];\n                    list.push(col.field + ((col.sortOrder < 0) ? ' DESC' : ''));\n                }\n\n                return list;\n            }\n        }\n\n        return [];\n    }\n\n    protected usePager(): boolean {\n        return false;\n    }\n\n    protected enableFiltering(): boolean {\n        var attr = this.attrs(FilterableAttribute);\n        return attr.length > 0 && attr[0].value;\n    }\n\n    protected populateWhenVisible(): boolean {\n        return false;\n    }\n\n    protected createFilterBar(): void {\n        var filterBarDiv = $('<div/>').appendTo(this.element);\n        this.filterBar = new FilterDisplayBar(filterBarDiv);\n        this.initializeFilterBar();\n    }\n\n    protected getPagerOptions(): PagerOptions {\n        return {\n            view: this.view,\n            rowsPerPage: 20,\n            rowsPerPageOptions: [20, 100, 500, 2500]\n        };\n    }\n\n    protected createPager(): void {\n        var pagerDiv = $('<div></div>').appendTo(this.element);\n        new SlickPager(pagerDiv, this.getPagerOptions());\n    }\n\n    protected getViewOptions() {\n        var opt: RemoteViewOptions = {};\n        opt.idField = this.getIdProperty();\n        opt.sortBy = this.getDefaultSortBy();\n\n        if (!this.usePager()) {\n            opt.rowsPerPage = 0;\n        }\n        else if (this.element.hasClass('responsive-height')) {\n            opt.rowsPerPage = (($(window.window).width() < 768) ? 20 : 100);\n        }\n        else {\n            opt.rowsPerPage = 100;\n        }\n\n        opt.getItemMetadata = (item, index) => {\n            return this.getItemMetadata(item, index);\n        };\n\n        return opt;\n    }\n\n    protected createToolbar(buttons: ToolButton[]): void {\n        var toolbarDiv = $('<div class=\"grid-toolbar\"></div>').appendTo(this.element);\n        this.toolbar = new Toolbar(toolbarDiv, { buttons: buttons, hotkeyContext: this.element[0] });\n    }\n\n    getTitle(): string {\n        if (!this.titleDiv) {\n            return null;\n        }\n\n        return this.titleDiv.children('.title-text').text();\n    }\n\n    setTitle(value: string) {\n        if (value !== this.getTitle()) {\n            if (value == null) {\n                if (this.titleDiv) {\n                    this.titleDiv.remove();\n                    this.titleDiv = null;\n                }\n            }\n            else {\n                if (!this.titleDiv) {\n                    this.titleDiv = $('<div class=\"grid-title\"><div class=\"title-text\"></div></div>')\n                        .prependTo(this.element);\n                }\n                this.titleDiv.children('.title-text').text(value);\n            }\n\n            this.layout();\n        }\n    }\n\n    protected getItemType(): string {\n        return 'Item';\n    }\n\n    protected itemLink(itemType?: string, idField?: string, text?: (ctx: FormatterContext) => string,\n        cssClass?: (ctx: FormatterContext) => string, encode: boolean = true): Format<TItem> {\n\n        if (itemType == null) {\n            itemType = this.getItemType();\n        }\n\n        if (idField == null) {\n            idField = this.getIdProperty();\n        }\n\n        return SlickFormatting.itemLink(itemType, idField, text, cssClass, encode);\n    }\n\n    protected getColumnsKey(): string {\n        var attr = this.attrs(ColumnsKeyAttribute);\n        if (attr && attr.length > 0) {\n            return attr[0].value;\n        }\n\n        return null;\n    }\n\n    protected getPropertyItems() {\n        return this.propertyItemsData?.items || [];\n    }\n\n    protected getPropertyItemsData(): PropertyItemsData {\n        var columnsKey = this.getColumnsKey();\n\n        if (this.getColumnsKey === DataGrid.prototype.getColumnsKey &&\n            this.getPropertyItems !== DataGrid.prototype.getPropertyItems &&\n            !ScriptData.canLoad('Columns.' + columnsKey)) {\n            return {\n                items: this.getPropertyItems(),\n                additionalItems: []\n            }\n        }\n\n\n        if (!isEmptyOrNull(columnsKey)) {\n            return getColumnsData(columnsKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }\n\n    protected async getPropertyItemsDataAsync(): Promise<PropertyItemsData> {\n        var columnsKey = this.getColumnsKey();\n        if (!isEmptyOrNull(columnsKey)) {\n            return await getColumnsDataAsync(columnsKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }\n\n    protected getColumns(): Column[] {\n        return this.propertyItemsToSlickColumns(this.getPropertyItems());\n    }\n\n    protected propertyItemsToSlickColumns(propertyItems: PropertyItem[]): Column[] {\n        var columns = PropertyItemSlickConverter.toSlickColumns(propertyItems);\n        for (var i = 0; i < propertyItems.length; i++) {\n            var item = propertyItems[i];\n            var column = columns[i];\n            if (item.editLink === true) {\n                var oldFormat = { $: column.format };\n                var css = { $: (item.editLinkCssClass) != null ? item.editLinkCssClass : null };\n                column.format = this.itemLink(\n                    item.editLinkItemType != null ? item.editLinkItemType : null,\n                    item.editLinkIdField != null ? item.editLinkIdField : null,\n                    function(ctx: FormatterContext) {\n                        if (this.oldFormat.$ != null) {\n                            return this.oldFormat.$(ctx);\n                        }\n                        return htmlEncode(ctx.value);\n                    }.bind({ oldFormat: oldFormat }),\n                    function(ctx1: FormatterContext) {\n                        return (this.css.$ ?? '');\n                    }.bind({ css: css }), false);\n\n                if (!isEmptyOrNull(item.editLinkIdField)) {\n                    column.referencedFields = column.referencedFields || [];\n                    column.referencedFields.push(item.editLinkIdField);\n                }\n            }\n        }\n        return columns;\n    }\n\n    protected getSlickOptions(): GridOptions {\n        var opt: GridOptions = {};\n        opt.multiSelect = false;\n        opt.multiColumnSort = true;\n        opt.enableCellNavigation = false;\n        if (DataGrid.defaultHeaderHeight)\n            opt.headerRowHeight = DataGrid.defaultHeaderHeight;\n        if (DataGrid.defaultRowHeight)\n            opt.rowHeight = DataGrid.defaultRowHeight;\n        return opt;\n    }\n\n    protected populateLock(): void {\n        this.view.populateLock();\n    }\n\n    protected populateUnlock(): void {\n        this.view.populateUnlock();\n    }\n\n    protected getGridCanLoad(): boolean {\n        return true;\n    }\n\n    public refresh() {\n        if (!this.populateWhenVisible()) {\n            this.internalRefresh();\n            return;\n        }\n        if (this.slickContainer.is(':visible')) {\n            this.slickContainer.data('needsRefresh', false);\n            this.internalRefresh();\n            return;\n        }\n        this.slickContainer.data('needsRefresh', true);\n    }\n\n    protected refreshIfNeeded(): void {\n        if (!!this.slickContainer.data('needsRefresh')) {\n            this.slickContainer.data('needsRefresh', false);\n            this.internalRefresh();\n        }\n    }\n\n    protected internalRefresh(): void {\n        this.view.populate();\n    }\n\n    public setIsDisabled(value: boolean): void {\n        if (this._isDisabled !== value) {\n            this._isDisabled = value;\n            if (this._isDisabled) {\n                this.view.setItems([], true);\n            }\n\n            this.updateDisabledState();\n        }\n    }\n\n    private _readonly: boolean;\n\n    public get readOnly(): boolean {\n        return this.get_readOnly();\n    }\n\n    public set readOnly(value: boolean) {\n        this.set_readOnly(value);\n    }\n\n    public get_readOnly() {\n        return !!this._readonly;\n    }\n\n    public set_readOnly(value: boolean) {\n        if (!!this._readonly != !!value) {\n            this._readonly = !!value;\n            this.updateInterface();\n        }\n    }\n\n    protected updateInterface() {\n        this.toolbar && this.toolbar.updateInterface();\n    }\n\n    protected getRowDefinition(): IRowDefinition {\n        return null;\n    }\n\n    private _localTextDbPrefix: string;\n\n    protected getLocalTextDbPrefix(): string {\n\n        if (this._localTextDbPrefix != null)\n            return this._localTextDbPrefix;\n\n        this._localTextDbPrefix = this.getLocalTextPrefix() ?? '';\n        if (this._localTextDbPrefix.length > 0 && !endsWith(this._localTextDbPrefix, '.'))\n            this._localTextDbPrefix = 'Db.' + this._localTextDbPrefix + '.';\n\n        return this._localTextDbPrefix;\n    }\n\n    protected getLocalTextPrefix(): string {\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return rowDefinition.localTextPrefix;\n\n        var attr = this.attrs(LocalTextPrefixAttribute);\n\n        if (attr.length >= 1)\n            return attr[0].value;\n    }\n   \n    private _idProperty: string;\n\n    protected getIdProperty(): string {\n        if (this._idProperty != null)\n            return this._idProperty;\n\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return this._idProperty = rowDefinition.idProperty ?? '';\n\n        var attr = this.attrs(IdPropertyAttribute);\n        if (attr.length === 1)\n            return this._idProperty = attr[0].value ?? '';\n\n        return this._idProperty = 'ID';\n    }\n\n    protected getIsDeletedProperty(): string {\n        return this.getRowDefinition()?.isDeletedProperty;\n    }\n\n    private _isActiveProperty: string;\n\n    protected getIsActiveProperty(): string {\n        if (this._isActiveProperty != null)\n            return this._isActiveProperty;\n\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return this._isActiveProperty = rowDefinition.isActiveProperty ?? '';\n\n        var attr = this.attrs(IsActivePropertyAttribute);\n        if (attr.length === 1)\n            return this._isActiveProperty = attr[0].value ?? '';\n\n        return this._isActiveProperty = '';\n    }\n\n    protected updateDisabledState(): void {\n        this.slickContainer.toggleClass('ui-state-disabled', !!this._isDisabled);\n    }\n\n    protected resizeCanvas(): void {\n        this.slickGrid?.resizeCanvas();\n    }\n\n    protected subDialogDataChange(): void {\n        this.refresh();\n    }\n\n    protected addFilterSeparator(): void {\n        this.ensureQuickFilterBar().addSeparator();\n    }\n\n    protected determineText(getKey: (prefix: string) => string) {\n        var localTextPrefix = this.getLocalTextDbPrefix();\n        if (!isEmptyOrNull(localTextPrefix)) {\n            var local = tryGetText(getKey(localTextPrefix));\n            if (local != null) {\n                return local;\n            }\n        }\n\n        return null;\n    }\n\n    protected addQuickFilter<TWidget extends Widget<any>, TOptions>(opt: QuickFilter<TWidget, TOptions>): TWidget {\n        return this.ensureQuickFilterBar().add(opt);\n    }\n\n    protected addDateRangeFilter(field: string, title?: string): DateEditor {\n        return this.ensureQuickFilterBar().addDateRange(field, title);\n    }\n\n    protected dateRangeQuickFilter(field: string, title?: string) {\n        return QuickFilterBar.dateRange(field, title);\n    }\n\n    protected addDateTimeRangeFilter(field: string, title?: string) {\n        return this.ensureQuickFilterBar().addDateTimeRange(field, title);\n    }\n\n    protected dateTimeRangeQuickFilter(field: string, title?: string) {\n        return QuickFilterBar.dateTimeRange(field, title);\n    }\n\n    protected addBooleanFilter(field: string, title?: string, yes?: string, no?: string): SelectEditor {\n        return this.ensureQuickFilterBar().addBoolean(field, title, yes, no);\n    }\n\n    protected booleanQuickFilter(field: string, title?: string, yes?: string, no?: string) {\n        return QuickFilterBar.boolean(field, title, yes, no);\n    }\n\n    protected invokeSubmitHandlers() {\n        if (this.quickFiltersBar != null) {\n            this.quickFiltersBar.onSubmit(this.view.params);\n        }\n    }\n\n    protected quickFilterChange(e: JQueryEventObject) {\n        this.persistSettings(null);\n        this.view && (this.view.seekToPage = 1);\n        this.refresh();\n    }\n\n    protected getPersistanceStorage(): SettingStorage {\n        return DataGrid.defaultPersistanceStorage;\n    }\n\n    protected getPersistanceKey(): string {\n        var key = 'GridSettings:';\n        var path = window.location.pathname;\n        if (!isEmptyOrNull(path)) {\n            key += path.substr(1).split(String.fromCharCode(47)).slice(0, 2).join('/') + ':';\n        }\n\n        key += getTypeFullName(getInstanceType(this));\n        return key;\n    }\n\n    protected gridPersistanceFlags(): GridPersistanceFlags {\n        return {};\n    }\n\n    protected canShowColumn(column: Column) {\n        if (column == null) {\n            return false;\n        }\n\n        var item = column.sourceItem;\n        if (item == null) {\n            return true;\n        }\n\n        if (item.filterOnly === true) {\n            return false;\n        }\n\n        if (item.readPermission == null) {\n            return true;\n        }\n\n        return Authorization.hasPermission(item.readPermission);\n    }\n\n    protected getPersistedSettings(): PersistedGridSettings {\n        var storage = this.getPersistanceStorage();\n        if (storage == null)\n            return null;\n\n        var json = trimToNull(storage.getItem(this.getPersistanceKey()));\n        if (json != null && startsWith(json, '{') && endsWith(json, '}'))\n            return JSON.parse(json);\n\n        return null;\n    }\n\n    protected restoreSettings(settings?: PersistedGridSettings, flags?: GridPersistanceFlags): void {\n        if (!this.slickGrid)\n            return;\n\n        if (settings == null) {\n            settings = this.getPersistedSettings();\n            if (settings == null)\n                return;\n        }\n\n        var columns = this.slickGrid.getColumns();\n        var colById: { [key: string]: Column } = null;\n        var updateColById = function(cl: Column[]) {\n            colById = {};\n            for (var $t1 = 0; $t1 < cl.length; $t1++) {\n                var c = cl[$t1];\n                colById[c.id] = c;\n            }\n        };\n\n        this.view.beginUpdate();\n        this.restoringSettings++;\n        try {\n            flags = flags || this.gridPersistanceFlags();\n            if (settings.columns != null) {\n                if (flags.columnVisibility !== false) {\n                    var visible = {};\n                    updateColById(this.allColumns);\n                    var newColumns = [];\n                    for (var $t2 = 0; $t2 < settings.columns.length; $t2++) {\n                        var x = settings.columns[$t2];\n                        if (x.id != null && x.visible === true) {\n                            var column = colById[x.id];\n                            if (this.canShowColumn(column)) {\n                                column.visible = true;\n                                newColumns.push(column);\n                                delete colById[x.id];\n                            }\n                        }\n                    }\n                    for (var $t3 = 0; $t3 < this.allColumns.length; $t3++) {\n                        var c1 = this.allColumns[$t3];\n                        if (colById[c1.id] != null) {\n                            c1.visible = false;\n                            newColumns.push(c1);\n                        }\n                    }\n                    this.allColumns = newColumns;\n                    columns = this.allColumns.filter(function (x1) {\n                        return x1.visible === true;\n                    });\n                }\n                if (flags.columnWidths !== false) {\n                    updateColById(columns);\n                    for (var $t4 = 0; $t4 < settings.columns.length; $t4++) {\n                        var x2 = settings.columns[$t4];\n                        if (x2.id != null && x2.width != null && x2.width !== 0) {\n                            var column1 = colById[x2.id];\n                            if (column1 != null) {\n                                column1.width = x2.width;\n                            }\n                        }\n                    }\n                }\n\n                if (flags.sortColumns !== false) {\n                    updateColById(columns);\n                    var list = [];\n                    var sortColumns = settings.columns.filter(function (x3) {\n                        return x3.id != null && (x3.sort ?? 0) !== 0;\n                    });\n\n                    sortColumns.sort(function (a, b) {\n                        // sort holds two informations:\n                        // absoulte value: order of sorting\n                        // sign: positive = ascending, negativ = descending\n                        // so we have to compare absolute values here\n                        return Math.abs(a.sort) - Math.abs(b.sort);\n                    });\n\n                    for (var $t5 = 0; $t5 < sortColumns.length; $t5++) {\n                        var x4 = sortColumns[$t5];\n                        var column2 = colById[x4.id];\n                        if (column2 != null) {\n                            list.push({\n                                columnId: x4.id,\n                                sortAsc: x4.sort > 0\n                            });\n                        }\n                    }\n                    this.view.sortBy = list.map(function (x5) {\n                        return x5.columnId + ((x5.sortAsc === false) ? ' DESC' : '');\n                    });\n                    this.slickGrid.setSortColumns(list);\n                }\n                this.slickGrid.setColumns(columns);\n                this.slickGrid.invalidate();\n            }\n\n            if (settings.filterItems != null &&\n                flags.filterItems !== false &&\n                this.filterBar != null &&\n                this.filterBar.get_store() != null) {\n                var items = this.filterBar.get_store().get_items();\n                items.length = 0;\n                items.push.apply(items, settings.filterItems);\n                this.filterBar.get_store().raiseChanged();\n            }\n\n            if (settings.includeDeleted != null &&\n                flags.includeDeleted !== false) {\n                var includeDeletedToggle = this.element.find('.s-IncludeDeletedToggle');\n                if (!!settings.includeDeleted !== includeDeletedToggle.hasClass('pressed')) {\n                    includeDeletedToggle.children('a').click();\n                }\n            }\n\n            if (settings.quickFilters != null &&\n                flags.quickFilters !== false &&\n                this.quickFiltersDiv != null &&\n                this.quickFiltersDiv.length > 0) {\n                this.quickFiltersDiv.find('.quick-filter-item').each((i, e) => {\n                    var field = $(e).data('qffield');\n\n                    if (isEmptyOrNull(field)) {\n                        return;\n                    }\n\n                    var widget = $('#' + this.uniqueName + '_QuickFilter_' + field).tryGetWidget(Widget);\n                    if (widget == null) {\n                        return;\n                    }\n\n                    var state = settings.quickFilters[field];\n                    var loadState = $(e).data('qfloadstate');\n                    if (loadState != null) {\n                        loadState(widget, state);\n                    }\n                    else {\n                        EditorUtils.setValue(widget, state);\n                    }\n                });\n            }\n\n            if (flags.quickSearch === true && (settings.quickSearchField !== undefined || settings.quickSearchText !== undefined)) {\n                var qsInput = this.toolbar.element.find('.s-QuickSearchInput').first();\n                if (qsInput.length > 0) {\n                    var qsWidget = qsInput.tryGetWidget(QuickSearchInput);\n                    qsWidget && qsWidget.restoreState(settings.quickSearchText, settings.quickSearchField);\n                }\n            }\n        }\n        finally {\n            this.restoringSettings--;\n            this.view.endUpdate();\n        }\n    }\n\n    protected persistSettings(flags?: GridPersistanceFlags): void {\n        var storage = this.getPersistanceStorage();\n        if (!storage) {\n            return;\n        }\n\n        var settings = this.getCurrentSettings(flags);\n        storage.setItem(this.getPersistanceKey(), JSON.stringify(settings));\n    }\n\n    protected getCurrentSettings(flags?: GridPersistanceFlags) {\n        flags = flags || this.gridPersistanceFlags();\n        var settings: PersistedGridSettings = {};\n        if (flags.columnVisibility !== false || flags.columnWidths !== false || flags.sortColumns !== false) {\n            settings.columns = [];\n            var sortColumns = this.slickGrid.getSortColumns() as any[];\n            var columns = this.slickGrid.getColumns();\n            for (var column of columns) {\n                var p: PersistedGridColumn = {\n                    id: column.id\n                };\n\n                if (flags.columnVisibility !== false) {\n                    p.visible = true;\n                }\n                if (flags.columnWidths !== false) {\n                    p.width = column.width;\n                }\n\n                if (flags.sortColumns !== false) {\n                    var sort = indexOf(sortColumns, x => x.columnId == column.id);\n                    p.sort = ((sort >= 0) ? ((sortColumns[sort].sortAsc !== false) ? (sort + 1) : (-sort - 1)) : 0);\n                }\n                settings.columns.push(p);\n            }\n        }\n\n        if (flags.includeDeleted !== false) {\n            settings.includeDeleted = this.element.find('.s-IncludeDeletedToggle').hasClass('pressed');\n        }\n\n        if (flags.filterItems !== false && (this.filterBar != null) && (this.filterBar.get_store() != null)) {\n            settings.filterItems = this.filterBar.get_store().get_items().slice();\n        }\n\n        if (flags.quickSearch === true) {\n            var qsInput = this.toolbar.element.find('.s-QuickSearchInput').first();\n            if (qsInput.length > 0) {\n                var qsWidget = qsInput.tryGetWidget(QuickSearchInput);\n                if (qsWidget != null) {\n                    settings.quickSearchField = qsWidget.get_field();\n                    settings.quickSearchText = qsWidget.element.val();\n                }\n            }\n        }\n\n        if (flags.quickFilters !== false && (this.quickFiltersDiv != null) && this.quickFiltersDiv.length > 0) {\n            settings.quickFilters = {};\n            this.quickFiltersDiv.find('.quick-filter-item').each((i, e) => {\n                var field = $(e).data('qffield');\n                if (isEmptyOrNull(field)) {\n                    return;\n                }\n\n                var widget = $('#' + this.uniqueName + '_QuickFilter_' + field).tryGetWidget(Widget);\n                if (widget == null) {\n                    return;\n                }\n\n                var saveState = $(e).data('qfsavestate');\n                var state = (saveState != null) ? saveState(widget) : EditorUtils.getValue(widget);\n                settings.quickFilters[field] = state;\n                if (flags.quickFilterText === true && $(e).hasClass('quick-filter-active')) {\n\n                    var getDisplayText = $(e).data('qfdisplaytext');\n                    var filterLabel = $(e).find('.quick-filter-label').text();\n\n                    var displayText;\n                    if (getDisplayText != null) {\n                        displayText = getDisplayText(widget, filterLabel);\n                    }\n                    else {\n                        displayText = filterLabel + ' = ' + EditorUtils.getDisplayText(widget);\n                    }\n\n                    if (!isEmptyOrNull(displayText)) {\n                        if (!isEmptyOrNull(settings.quickFilterText)) {\n                            settings.quickFilterText += ' ' + (tryGetText('Controls.FilterPanel.And') ?? 'and') + ' ';\n                            settings.quickFilterText += displayText;\n                        }\n                        else {\n                            settings.quickFilterText = displayText;\n                        }\n                    }\n                }\n            });\n        }\n        return settings;\n    }\n\n    getElement(): JQuery {\n        return this.element;\n    }\n\n    getGrid(): Grid {\n        return this.slickGrid;\n    }\n\n    getView(): RemoteView<TItem> {\n        return this.view;\n    }\n\n    getFilterStore(): FilterStore {\n        return (this.filterBar == null) ? null : this.filterBar.get_store();\n    }\n}\n", "\uFEFFimport { Column } from \"@serenity-is/sleekgrid\";\nimport { Decorators } from \"../../decorators\";\nimport { Authorization, centerDialog, Culture, htmlEncode, Router, localText, trimToNull } from \"@serenity-is/corelib/q\";\nimport { QuickSearchInput } from \"../datagrid/quicksearchinput\";\nimport { TemplatedDialog } from \"../dialogs/templateddialog\";\nimport { ToolButton } from \"../widgets/toolbar\";\nimport { IDataGrid } from \"./idatagrid\";\n\n@Decorators.registerClass('Serenity.ColumnPickerDialog')\n@Decorators.resizable()\n@Decorators.responsive()\nexport class ColumnPickerDialog extends TemplatedDialog<any> {\n\n    private ulVisible: JQuery;\n    private ulHidden: JQuery;\n    private colById: { [key: string]: Column };\n\n    public allColumns: Column[];\n    public visibleColumns: string[];\n    public defaultColumns: string[];\n    public done: () => void;\n\n    constructor() {\n        super();\n\n        new QuickSearchInput(this.byId(\"Search\"), {\n            onSearch: (fld, txt, done) => {\n                txt = trimToNull(txt);\n                if (txt != null)\n                    txt = Select2.util.stripDiacritics(txt.toLowerCase());\n\n                this.element.find('li').each((x, e) => {\n                    $(e).toggle(!txt || Select2.util.stripDiacritics(\n                        $(e).text().toLowerCase()).indexOf(txt) >= 0);\n                });\n                done && done(true);\n            }\n        });\n\n        this.ulVisible = this.byId(\"VisibleCols\");\n        this.ulHidden = this.byId(\"HiddenCols\");\n        this.dialogTitle = localText(\"Controls.ColumnPickerDialog.Title\");\n    }\n\n    public static createToolButton(grid: IDataGrid): ToolButton {\n        function onClick() {\n            var picker = new ColumnPickerDialog();\n            picker.allColumns = (grid as any).allColumns;\n            if ((grid as any).initialSettings) {\n                var initialSettings = (grid as any).initialSettings;\n                if (initialSettings.columns && initialSettings.columns.length)\n                    picker.defaultColumns = initialSettings.columns.map((x: any) => x.id);\n            }\n            picker.visibleColumns = grid.getGrid().getColumns().map(x => x.id);\n            picker.done = () => {\n                (grid as any).allColumns = picker.allColumns;\n                var visible = picker.allColumns.filter(x => x.visible === true);\n                grid.getGrid().setColumns(visible);\n                (grid as any).persistSettings();\n                grid.getView().populate();\n            };\n\n            Router && Router.dialog && Router.dialog((grid as any).element, picker.element, () => \"columns\");\n            picker.dialogOpen();\n        }\n\n        (grid as any).element.on('handleroute.' + (grid as any).uniqueName, (e: any, arg: any) => {\n            if (arg && !arg.handled && arg.route == \"columns\") {\n                onClick();\n            }\n        });\n\n        return {\n            hint: localText(\"Controls.ColumnPickerDialog.Title\"),\n            action: 'column-picker',\n            cssClass: \"column-picker-button\",\n            icon: 'fa-th-list text-blue',\n            onClick: onClick\n        }\n    }\n\n    protected getDialogButtons() {\n        return [\n            {\n                text: localText(\"Controls.ColumnPickerDialog.RestoreDefaults\"),\n                click: () => {\n                    let liByKey: { [key: string]: JQuery } = {};\n                    this.ulVisible.children().add(this.ulHidden.children()).each((x, e) => {\n                        let el = $(e);\n                        liByKey[el.data('key')] = el;\n                    });\n\n                    let last: JQuery = null;\n                    for (let id of this.defaultColumns) {\n                        let li = liByKey[id];\n                        if (!li)\n                            continue;\n\n                        if (last == null)\n                            li.prependTo(this.ulVisible);\n                        else\n                            li.insertAfter(last);\n\n                        last = li;\n                        let key: string = li.data('key');\n                        delete liByKey[key];\n                    }\n\n                    for (let key in liByKey)\n                        liByKey[key].appendTo(this.ulHidden);\n\n                    this.updateListStates();\n                }\n            },\n            {\n                text: localText(\"Dialogs.OkButton\"),\n                click: () => {\n                    let newColumns: Column[] = [];\n\n                    for (var col of this.allColumns)\n                        col.visible = false;\n\n                    this.visibleColumns = this.ulVisible.children().toArray().map(x => {\n                        let id = $(x).data(\"key\");\n                        var col = this.colById[id];\n                        col.visible = true;\n                        newColumns.push(col);\n                        return id;\n                    });\n\n                    for (var col of this.allColumns) {\n                        if (!col.visible)\n                            newColumns.push(col);\n                    }\n\n                    this.allColumns = newColumns;\n                    this.done && this.done();\n                    this.dialogClose()\n                }\n            },\n            {\n                text: localText(\"Dialogs.CancelButton\"),\n                click: () => {\n                    this.dialogClose()\n                }\n            }\n        ];\n    }\n\n    protected getDialogOptions() {\n        var opt = super.getDialogOptions();\n        opt.width = 600;\n        return opt;\n    }\n\n    private getTitle(col: Column) {\n        if (col.id == \"__select__\")\n            return \"[x]\";\n\n        return col.name || col.toolTip || col.id;\n    }\n\n    private allowHide(col: Column): boolean {\n        return col.sourceItem == null || col.sourceItem.allowHide == null || col.sourceItem.allowHide;\n    }\n\n    private createLI(col: Column): JQuery {\n        var allowHide = this.allowHide(col);\n        return $(`\n<li data-key=\"${col.id}\" class=\"${allowHide ? \"\" : \"cant-hide\"}\">\n<span class=\"drag-handle\">\u2630</span>\n${ htmlEncode(this.getTitle(col)) }\n${ allowHide ? `<i class=\"js-hide fa fa-eye-slash\" title=\"${htmlEncode(localText(\"Controls.ColumnPickerDialog.HideHint\"))}\"></i>` : '' }\n<i class=\"js-show fa fa-eye\" title=\"${ htmlEncode(localText(\"Controls.ColumnPickerDialog.ShowHint\")) }\"></i>\n</li>`);\n    }\n\n    private updateListStates() {\n        this.ulVisible.children().removeClass(\"bg-info\").addClass(\"bg-success\");\n        this.ulHidden.children().removeClass(\"bg-success\").addClass(\"bg-info\");\n    }\n\n    protected setupColumns(): void {\n        this.allColumns = this.allColumns || [];\n        this.visibleColumns = this.visibleColumns || [];\n\n        let visible: { [key: string]: boolean } = {};\n        for (let id of this.visibleColumns) {\n            visible[id] = true;\n        }\n\n        this.colById = {};\n        for (let c of this.allColumns) {\n            this.colById[c.id] = c;\n        }\n\n        if (this.defaultColumns == null)\n            this.defaultColumns = this.visibleColumns.slice(0);\n\n        let hidden: Column[] = [];\n\n        for (let c of this.allColumns) {\n            if (!visible[c.id] && (!c.sourceItem ||\n                (c.sourceItem.filterOnly !== true &&\n                    (c.sourceItem.readPermission == null || Authorization.hasPermission(c.sourceItem.readPermission))))) {\n                hidden.push(c);\n            }\n        }\n\n        let hiddenColumns = hidden.sort((a, b) => Culture.stringCompare(this.getTitle(a), this.getTitle(b)));\n\n        for (let id of this.visibleColumns) {\n            var c = this.colById[id];\n            if (!c)\n                continue;\n\n            this.createLI(c).appendTo(this.ulVisible);\n        }\n\n        for (let c of hiddenColumns) {\n            this.createLI(c).appendTo(this.ulHidden);\n        }\n\n        this.updateListStates();\n\n        // @ts-ignore\n        if (typeof Sortable !== \"undefined\" && Sortable.create) {\n\n            // @ts-ignore\n            Sortable.create(this.ulVisible[0], {\n                group: this.uniqueName + \"_group\",\n                filter: '.js-hide',\n                onFilter: (evt: any) => {\n                    $(evt.item).appendTo(this.ulHidden);\n                    this.updateListStates();\n                },\n                onMove: (x: any) => {\n                    if ($(x.dragged).hasClass('cant-hide') &&\n                        x.from == this.ulVisible[0] &&\n                        x.to !== x.from)\n                        return false;\n                    return true;\n                },\n                onEnd: (evt: any) => this.updateListStates()\n            });\n\n            // @ts-ignore\n            Sortable.create(this.ulHidden[0], {\n                group: this.uniqueName + \"_group\",\n                sort: false,\n                filter: '.js-show',\n                onFilter: (evt: any) => {\n                    $(evt.item).appendTo(this.ulVisible);\n                    this.updateListStates();\n                },\n                onEnd: () => this.updateListStates()\n            });\n        }\n    }\n\n    protected onDialogOpen(): void {\n        super.onDialogOpen();\n        this.element.find(\"input\").removeAttr(\"disabled\")\n        this.element.closest('.ui-dialog').children(\".ui-dialog-buttonpane\")\n            .find('button').eq(0).addClass(\"restore-defaults\")\n            .next().focus();\n\n        this.setupColumns();\n        centerDialog(this.element);\n    }\n\n    protected getTemplate() {\n        return `\n<div class=\"search\"><input id=\"~_Search\" type=\"text\" disabled /></div>\n<div class=\"columns-container\">\n<div class=\"column-list visible-list bg-success\">\n<h5><i class=\"fa fa-eye\"></i> ${htmlEncode(localText(\"Controls.ColumnPickerDialog.VisibleColumns\"))}</h5>\n<ul id=\"~_VisibleCols\"></ul>\n</div>\n<div class=\"column-list hidden-list bg-info\">\n<h5><i class=\"fa fa-eye-slash\"></i> ${htmlEncode(localText(\"Controls.ColumnPickerDialog.HiddenColumns\"))}</h5>\n<ul id=\"~_HiddenCols\"></ul>\n</div>\n</div>`;\n    }\n}\n", "\uFEFFimport { Column, FormatterContext } from \"@serenity-is/sleekgrid\";\nimport { htmlEncode, ListResponse, toGrouping, tryFirst } from \"@serenity-is/corelib/q\";\nimport { SlickFormatting, SlickHelper, SlickTreeHelper } from \"../helpers/slickhelpers\";\nimport { DataGrid } from \"./datagrid\";\n\n/**\n * A mixin that can be applied to a DataGrid for tree functionality\n */\nexport class TreeGridMixin<TItem> {\n\n    private dataGrid: DataGrid<TItem, any>;\n    private getId: (item: TItem) => any;\n\n    constructor(private options: TreeGridMixinOptions<TItem>) {\n        var dg = this.dataGrid = options.grid;\n        var idProperty = (dg as any).getIdProperty();\n        var getId = this.getId = (item: TItem) => (item as any)[idProperty];\n\n        dg.element.find('.grid-container').on('click', e => {\n            if ($(e.target).hasClass('s-TreeToggle')) {\n                var src = dg.slickGrid.getCellFromEvent(e);\n                if (src.cell >= 0 &&\n                    src.row >= 0) {\n                    SlickTreeHelper.toggleClick<TItem>(e, src.row, src.row, dg.view, getId);\n                }\n            }\n        });\n\n        var oldViewFilter = (dg as any).onViewFilter;\n        (dg as any).onViewFilter = function (item: TItem) {\n            if (!oldViewFilter.apply(this, [item]))\n                return false;\n\n            return SlickTreeHelper.filterById(item, dg.view, options.getParentId);\n        };\n\n        var oldProcessData = (dg as any).onViewProcessData;\n        (dg as any).onViewProcessData = function (response: ListResponse<TItem>) {\n\n            response = oldProcessData.apply(this, [response]);\n            response.Entities = TreeGridMixin.applyTreeOrdering(response.Entities, getId, options.getParentId);\n            SlickTreeHelper.setIndents(response.Entities, getId, options.getParentId,\n                (options.initialCollapse && options.initialCollapse()) || false);\n            return response;\n        };\n\n        if (options.toggleField) {\n            var col = tryFirst(dg['allColumns'] || dg.slickGrid.getColumns() || [], x => x.field == options.toggleField) as Column<TItem>;\n            if (col) {\n                col.format = SlickFormatting.treeToggle(() => dg.view, getId,\n                    col.format || ((ctx: FormatterContext<TItem>) => htmlEncode(ctx.value)));\n            }\n        }\n    }\n\n    /**\n     * Expands / collapses all rows in a grid automatically\n     */\n    toggleAll(): void {\n        SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(),\n            !this.dataGrid.view.getItems().every(x => (x as any)._collapsed == true));\n\n        this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);\n    }\n\n    collapseAll(): void {\n        SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(), true);\n        this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);\n    }\n    \n    expandAll(): void {\n        SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(), false);\n        this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);\n    }\n    \n    /**\n     * Reorders a set of items so that parents comes before their children.\n     * This method is required for proper tree ordering, as it is not so easy to perform with SQL.\n     * @param items list of items to be ordered\n     * @param getId a delegate to get ID of a record (must return same ID with grid identity field)\n     * @param getParentId a delegate to get parent ID of a record\n     */\n    static applyTreeOrdering<TItem>(items: TItem[], getId: (item: TItem) => any, getParentId: (item: TItem) => any): TItem[] {\n        var result: TItem[] = [];\n\n        var byId = toGrouping(items, getId);\n        var byParentId = toGrouping(items, getParentId);\n        var visited: Record<string, boolean> = {};\n\n        function takeChildren(theParentId: any) {\n            if (visited[theParentId])\n                return;\n\n            visited[theParentId] = true;\n            for (var child of (byParentId[theParentId] || [])) {\n                result.push(child);\n                takeChildren(getId(child));\n            }\n        }\n\n        for (var item of items)\n        {\n            var parentId = getParentId(item);\n            if (parentId == null ||\n                !((byId[parentId] || []).length)) {\n                result.push(item);\n                takeChildren(getId(item));\n            }\n        }\n\n        return result;\n    }\n}\n\nexport interface TreeGridMixinOptions<TItem> {\n    // data grid object\n    grid: DataGrid<TItem, any>;\n    // a function to get parent id\n    getParentId: (item: TItem) => any;\n    // where should the toggle button be placed\n    toggleField: string;\n    // a delegate that should return initial collapsing state\n    initialCollapse?: () => boolean;\n}\n", "\uFEFFimport { Column, FormatterContext, Grid, GridOptions } from \"@serenity-is/sleekgrid\"\nimport { Decorators } from \"../../decorators\";\nimport { IGetEditValue, IReadOnly, ISetEditValue } from \"../../interfaces\";\nimport { Culture, getLookup, htmlEncode, isEmptyOrNull, ListResponse, Lookup, PropertyItem, ScriptData, trimToNull, tryGetText } from \"@serenity-is/corelib/q\";\nimport { ReflectionUtils } from \"../../types/reflectionutils\";\nimport { DataGrid } from \"../datagrid/datagrid\";\nimport { GridSelectAllButtonHelper, GridUtils, SlickFormatting, SlickTreeHelper } from \"../helpers/slickhelpers\";\nimport { ToolButton } from \"../widgets/toolbar\";\nimport { Widget } from \"../widgets/widget\";\nimport { CascadedWidgetLink } from \"./cascadedwidgetlink\";\nimport { EditorUtils } from \"./editorutils\";\n\nexport interface CheckTreeItem<TSource> {\n    isSelected?: boolean;\n    hideCheckBox?: boolean;\n    isAllDescendantsSelected?: boolean;\n    id?: string;\n    text?: string;\n    parentId?: string;\n    children?: CheckTreeItem<TSource>[];\n    source?: TSource;\n}\n\n@Decorators.registerEditor('Serenity.CheckTreeEditor', [IGetEditValue, ISetEditValue, IReadOnly])\n@Decorators.element(\"<div/>\")\nexport class CheckTreeEditor<TItem extends CheckTreeItem<any>, TOptions> extends DataGrid<TItem, TOptions>\n    implements IGetEditValue, ISetEditValue, IReadOnly {\n\n    private byId: { [key: string]: TItem };\n\n    constructor(div: JQuery, opt?: TOptions) {\n        super(div, opt);\n\n        div.addClass('s-CheckTreeEditor');\n        this.updateItems();\n    }\n\n    protected getIdProperty() {\n        return \"id\";\n    }\n\n    protected getTreeItems(): TItem[] {\n        return [];\n    }\n\n    protected updateItems(): void {\n        var items = this.getTreeItems();\n        var itemById: Record<any, TItem> = {};\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            item.children = [];\n            if (!isEmptyOrNull(item.id)) {\n                itemById[item.id] = item;\n            }\n            if (!isEmptyOrNull(item.parentId)) {\n                var parent = itemById[item.parentId];\n                if (parent != null) {\n                    parent.children.push(item);\n                }\n            }\n        }\n        this.view.addData({ Entities: items, Skip: 0, Take: 0, TotalCount: items.length });\n        this.updateSelectAll();\n        this.updateFlags();\n    }\n\n    getEditValue(property: PropertyItem, target: any): void {\n        if (this.getDelimited())\n            target[property.name] = this.get_value().join(\",\");\n        else\n            target[property.name] = this.get_value();\n    }\n\n    setEditValue(source: any, property: PropertyItem): void {\n        var value = source[property.name];\n        this.set_value(value);\n    }\n\n    protected getButtons(): ToolButton[] {\n        var selectAllText = this.getSelectAllText();\n        if (isEmptyOrNull(selectAllText)) {\n            return null;\n        }\n\n        var self = this;\n        var buttons: ToolButton[] = [];\n        buttons.push(GridSelectAllButtonHelper.define(function () {\n            return self;\n        }, function (x) {\n            return x.id;\n        }, function (x1) {\n            return x1.isSelected;\n        }, (x2, v) => {\n            if (x2.isSelected !== v) {\n                x2.isSelected = v;\n                this.itemSelectedChanged(x2);\n            }\n        }, null, () => {\n            this.updateFlags();\n        }));\n\n        return buttons;\n    }\n\n    protected itemSelectedChanged(item: TItem): void {\n    }\n\n    protected getSelectAllText(): string {\n        return tryGetText('Controls.CheckTreeEditor.SelectAll') ?? 'Select All';\n    }\n\n    protected isThreeStateHierarchy(): boolean {\n        return false;\n    }\n\n    protected createSlickGrid(): Grid {\n        this.element.addClass('slick-no-cell-border').addClass('slick-no-odd-even');\n        var result = super.createSlickGrid();\n        this.element.addClass('slick-hide-header');\n        result.resizeCanvas();\n        return result;\n    }\n\n    protected onViewFilter(item: TItem): boolean {\n        if (!super.onViewFilter(item)) {\n            return false;\n        }\n\n        var items = this.view.getItems();\n        var self = this;\n        return SlickTreeHelper.filterCustom(item, function (x) {\n            if (x.parentId == null) {\n                return null;\n            }\n\n            if (self.byId == null) {\n                self.byId = {};\n                for (var i = 0; i < items.length; i++) {\n                    var o = items[i];\n                    if (o.id != null) {\n                        self.byId[o.id] = o;\n                    }\n                }\n            }\n\n            return self.byId[x.parentId];\n        });\n    }\n\n    protected getInitialCollapse(): boolean {\n        return false;\n    }\n\n    protected onViewProcessData(response: ListResponse<TItem>): ListResponse<TItem> {\n        response = super.onViewProcessData(response);\n        this.byId = null;\n        SlickTreeHelper.setIndents(response.Entities, function (x) {\n            return x.id;\n        }, function (x1) {\n            return x1.parentId;\n        }, this.getInitialCollapse());\n        return response;\n    }\n\n    protected onClick(e: JQueryEventObject, row: number, cell: number): void {\n        super.onClick(e, row, cell);\n\n        if (!e.isDefaultPrevented()) {\n            SlickTreeHelper.toggleClick(e, row, cell, this.view, function (x) {\n                return x.id;\n            });\n        }\n\n        if (e.isDefaultPrevented()) {\n            return;\n        }\n\n        var target = $(e.target);\n        if (target.hasClass('check-box')) {\n            e.preventDefault();\n\n            if (this._readOnly)\n                return;\n\n            var checkedOrPartial = target.hasClass('checked') || target.hasClass('partial');\n            var item = this.itemAt(row);\n            var anyChanged = item.isSelected !== !checkedOrPartial;\n            this.view.beginUpdate();\n            try {\n                if (item.isSelected !== !checkedOrPartial) {\n                    item.isSelected = !checkedOrPartial;\n                    this.view.updateItem(item.id, item);\n                    this.itemSelectedChanged(item);\n                }\n                anyChanged = this.setAllSubTreeSelected(item, item.isSelected) || anyChanged;\n                this.updateSelectAll();\n                this.updateFlags();\n            }\n            finally {\n                this.view.endUpdate();\n            }\n            if (anyChanged) {\n                this.element.triggerHandler('change');\n            }\n        }\n    }\n\n    protected updateSelectAll(): void {\n        GridSelectAllButtonHelper.update(this, function (x) {\n            return x.isSelected;\n        });\n    }\n\n    protected updateFlags(): void {\n        var view = this.view;\n        var items = view.getItems();\n        var threeState = this.isThreeStateHierarchy();\n        if (!threeState) {\n            return;\n        }\n        view.beginUpdate();\n        try {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                if (item.children == null || item.children.length === 0) {\n                    var allsel = this.getDescendantsSelected(item);\n                    if (allsel !== item.isAllDescendantsSelected) {\n                        item.isAllDescendantsSelected = allsel;\n                        view.updateItem(item.id, item);\n                    }\n                    continue;\n                }\n                var allSelected = this.allDescendantsSelected(item);\n                var selected = allSelected || this.anyDescendantsSelected(item);\n                if (allSelected !== item.isAllDescendantsSelected || selected !== item.isSelected) {\n                    var selectedChange = item.isSelected !== selected;\n                    item.isAllDescendantsSelected = allSelected;\n                    item.isSelected = selected;\n                    view.updateItem(item.id, item);\n                    if (selectedChange) {\n                        this.itemSelectedChanged(item);\n                    }\n                }\n            }\n        }\n        finally {\n            view.endUpdate();\n        }\n    }\n\n    protected getDescendantsSelected(item: TItem): boolean {\n        return true;\n    }\n\n    protected setAllSubTreeSelected(item: TItem, selected: boolean): boolean {\n        var result = false;\n        for (var i = 0; i < item.children.length; i++) {\n            var sub = item.children[i];\n            if (sub.isSelected !== selected) {\n                result = true;\n                sub.isSelected = selected;\n                this.view.updateItem(sub.id, sub as TItem);\n                this.itemSelectedChanged(sub as TItem);\n            }\n            if (sub.children.length > 0) {\n                result = this.setAllSubTreeSelected(sub as TItem, selected) || result;\n            }\n        }\n        return result;\n    }\n\n    protected allItemsSelected() {\n        for (var i = 0; i < this.rowCount(); i++) {\n            var row = this.itemAt(i);\n            if (!row.isSelected) {\n                return false;\n            }\n        }\n\n        return this.rowCount() > 0;\n    }\n\n    protected allDescendantsSelected(item: TItem): boolean {\n        if (item.children.length > 0) {\n            for (var i = 0; i < item.children.length; i++) {\n                var sub = item.children[i];\n                if (!sub.isSelected) {\n                    return false;\n                }\n\n                if (!this.allDescendantsSelected(sub as TItem)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    protected getDelimited() {\n        return !!!!(this.options as any)['delimited'];\n    }\n\n    protected anyDescendantsSelected(item: TItem): boolean {\n        if (item.children.length > 0) {\n            for (var i = 0; i < item.children.length; i++) {\n                var sub = item.children[i];\n                if (sub.isSelected) {\n                    return true;\n                }\n                if (this.anyDescendantsSelected(sub as TItem)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    protected getColumns(): Column[] {\n        var self = this;\n        var columns: Column[] = [];\n        columns.push({\n            field: 'text', name: 'Kay\u0131t', width: 80, format: SlickFormatting.treeToggle(function () {\n                return self.view;\n            }, function (x) {\n                return x.id;\n            }, ctx => {\n                var cls = 'check-box';\n                var item = ctx.item;\n                if (item.hideCheckBox) {\n                    return this.getItemText(ctx);\n                }\n                var threeState = this.isThreeStateHierarchy();\n                if (item.isSelected) {\n                    if (threeState && !item.isAllDescendantsSelected) {\n                        cls += ' partial';\n                    }\n                    else {\n                        cls += ' checked';\n                    }\n                }\n                if (this._readOnly)\n                    cls += ' readonly';\n                return '<span class=\"' + cls + '\"></span>' + this.getItemText(ctx);\n            })\n        });\n        return columns;\n    }\n\n    protected getItemText(ctx: FormatterContext): string {\n        return htmlEncode(ctx.value);\n    }\n\n    protected getSlickOptions(): GridOptions {\n        var opt = super.getSlickOptions();\n        opt.forceFitColumns = true;\n        return opt;\n    }\n\n    protected sortItems(): void {\n        if (!this.moveSelectedUp()) {\n            return;\n        }\n        var oldIndexes: Record<string, number> = {};\n        var list = this.view.getItems();\n        var i = 0;\n        for (var $t1 = 0; $t1 < list.length; $t1++) {\n            var x = list[$t1];\n            oldIndexes[x.id] = i++;\n        }\n        list.sort(function (x1, y) {\n            if (x1.isSelected && !y.isSelected) {\n                return -1;\n            }\n            if (y.isSelected && !x1.isSelected) {\n                return 1;\n            }\n            var c = Culture.stringCompare(x1.text, y.text);\n            if (c !== 0) {\n                return c;\n            }\n            return oldIndexes[x1.id] < oldIndexes[y.id] ? -1 : (oldIndexes[x1.id] > oldIndexes[y.id] ? 1 : 0);\n        });\n\n        this.view.setItems(list, true);\n    }\n\n    protected moveSelectedUp(): boolean {\n        return false;\n    }\n\n    private _readOnly: boolean;\n\n    public get_readOnly() {\n        return this._readOnly;\n    }\n\n    public set_readOnly(value: boolean) {\n        if (!!this._readOnly != !!value) {\n            this._readOnly = !!value;\n            this.view.refresh();\n        }\n    }\n\n    private get_value(): string[] {\n        var list = [];\n        var items = this.view.getItems();\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].isSelected) {\n                list.push(items[i].id);\n            }\n        }\n        return list;\n    }\n\n    public get value() {\n        return this.get_value();\n    }\n\n    private set_value(value: string | string[]) {\n\n        var selected: Record<string, boolean> = {};\n        if (value != null) {\n            if (typeof value == \"string\") {\n                value = value.split(',')\n                    .map(x => trimToNull(x))\n                    .filter(x => x != null);\n            }\n\n            for (var i = 0; i < value.length; i++) {\n                selected[value[i]] = true;\n            }\n        }\n\n        this.view.beginUpdate();\n        try {\n            var items = this.view.getItems();\n            for (var i1 = 0; i1 < items.length; i1++) {\n                var item = items[i1];\n                var select = selected[item.id];\n                if (select !== item.isSelected) {\n                    item.isSelected = select;\n                    this.view.updateItem(item.id, item);\n                }\n            }\n            this.updateSelectAll();\n            this.updateFlags();\n            this.sortItems();\n        }\n        finally {\n            this.view.endUpdate();\n        }\n    }\n\n    public set value(v: string[]) {\n        this.set_value(v);\n    }\n}\n\nexport interface CheckLookupEditorOptions {\n    lookupKey?: string;\n    checkedOnTop?: boolean;\n    showSelectAll?: boolean;\n    hideSearch?: boolean;\n    delimited?: boolean;\n    cascadeFrom?: string;\n    cascadeField?: string;\n    cascadeValue?: any;\n    filterField?: string;\n    filterValue?: any;\n}\n\n@Decorators.registerEditor(\"Serenity.CheckLookupEditor\")\nexport class CheckLookupEditor<TItem = any> extends CheckTreeEditor<CheckTreeItem<TItem>, CheckLookupEditorOptions> {\n\n    private searchText: string;\n    private enableUpdateItems: boolean;\n\n    constructor(div: JQuery, options: CheckLookupEditorOptions) {\n        super(div, options);\n\n        this.enableUpdateItems = true;\n        this.setCascadeFrom(this.options.cascadeFrom);\n        this.updateItems();\n        ScriptData.bindToChange('Lookup.' + this.getLookupKey(), this.uniqueName,\n            () => this.updateItems());\n    }\n\n    protected updateItems() {\n        if (this.enableUpdateItems)\n            super.updateItems();\n    }\n\n    protected getLookupKey() {\n        return this.options.lookupKey;\n    }\n\n    protected getButtons(): ToolButton[] {\n        return super.getButtons() ?? (this.options.hideSearch ? null : []);\n    }\n\n    protected createToolbarExtensions() {\n        super.createToolbarExtensions();\n\n        GridUtils.addQuickSearchInputCustom(this.toolbar.element, (field, text) => {\n            this.searchText = Select2.util.stripDiacritics(text || '').toUpperCase();\n            this.view.setItems(this.view.getItems(), true);\n        });\n    }\n\n    protected getSelectAllText(): string {\n        if (!this.options.showSelectAll)\n            return null;\n\n        return super.getSelectAllText();\n    }\n\n    protected cascadeItems(items: TItem[]) {\n\n        var val = this.get_cascadeValue();\n\n        if (val == null || val === '') {\n\n            if (!isEmptyOrNull(this.get_cascadeField())) {\n                return [];\n            }\n\n            return items;\n        }\n\n        var key = val.toString();\n        var fld = this.get_cascadeField();\n\n        return items.filter(x => {\n            var itemKey = (x as any)[fld] ?? ReflectionUtils.getPropertyValue(x, fld);\n            return !!(itemKey != null && itemKey.toString() === key);\n        });\n    }\n\n    protected filterItems(items: TItem[]) {\n        var val = this.get_filterValue();\n\n        if (val == null || val === '') {\n            return items;\n        }\n\n        var key = val.toString();\n        var fld = this.get_filterField();\n\n        return items.filter(x => {\n            var itemKey = (x as any)[fld] ?? ReflectionUtils.getPropertyValue(x, fld);\n            return !!(itemKey != null && itemKey.toString() === key);\n        });\n    }\n\n    protected getLookupItems(lookup: Lookup<TItem>): TItem[] {\n        return this.filterItems(this.cascadeItems(lookup.items));\n    }\n\n    protected getTreeItems() {\n        var lookup = getLookup<TItem>(this.options.lookupKey);\n        var items = this.getLookupItems(lookup);\n        return items.map(item => <CheckTreeItem<TItem>>{\n            id: ((item as any)[lookup.idField] ?? \"\").toString(),\n            text: ((item as any)[lookup.textField] ?? \"\").toString(),\n            source: item\n        });\n    }\n\n    protected onViewFilter(item: CheckTreeItem<TItem>) {\n        return super.onViewFilter(item) &&\n            (isEmptyOrNull(this.searchText) ||\n                Select2.util.stripDiacritics(item.text || '')\n                    .toUpperCase().indexOf(this.searchText) >= 0);\n    }\n\n    protected moveSelectedUp(): boolean {\n        return this.options.checkedOnTop;\n    }\n\n    protected get_cascadeFrom(): string {\n        return this.options.cascadeFrom;\n    }\n\n    get cascadeFrom(): string {\n        return this.get_cascadeFrom();\n    }\n\n    protected getCascadeFromValue(parent: Widget<any>) {\n        return EditorUtils.getValue(parent);\n    }\n\n    protected cascadeLink: CascadedWidgetLink<Widget<any>>;\n\n    protected setCascadeFrom(value: string) {\n\n        if (isEmptyOrNull(value)) {\n            if (this.cascadeLink != null) {\n                this.cascadeLink.set_parentID(null);\n                this.cascadeLink = null;\n            }\n            this.options.cascadeFrom = null;\n            return;\n        }\n\n        this.cascadeLink = new CascadedWidgetLink<Widget<any>>(Widget, this, p => {\n            this.set_cascadeValue(this.getCascadeFromValue(p));\n        });\n\n        this.cascadeLink.set_parentID(value);\n        this.options.cascadeFrom = value;\n    }\n\n    protected set_cascadeFrom(value: string) {\n        if (value !== this.options.cascadeFrom) {\n            this.setCascadeFrom(value);\n            this.updateItems();\n        }\n    }\n\n    set cascadeFrom(value: string) {\n        this.set_cascadeFrom(value);\n    }\n\n    protected get_cascadeField() {\n        return (this.options.cascadeField ?? this.options.cascadeFrom);\n    }\n\n    get cascadeField(): string {\n        return this.get_cascadeField();\n    }\n\n    protected set_cascadeField(value: string) {\n        this.options.cascadeField = value;\n    }\n\n    set cascadeField(value: string) {\n        this.set_cascadeField(value);\n    }\n\n    protected get_cascadeValue(): any {\n        return this.options.cascadeValue;\n    }\n\n    get cascadeValue(): any {\n        return this.get_cascadeValue();\n    }\n\n    protected set_cascadeValue(value: any) {\n        if (this.options.cascadeValue !== value) {\n            this.options.cascadeValue = value;\n            this.value = [];\n            this.updateItems();\n        }\n    }\n\n    set cascadeValue(value: any) {\n        this.set_cascadeValue(value);\n    }\n\n    protected get_filterField() {\n        return this.options.filterField;\n    }\n\n    get filterField(): string {\n        return this.get_filterField();\n    }\n\n    protected set_filterField(value: string) {\n        this.options.filterField = value;\n    }\n\n    set filterField(value: string) {\n        this.set_filterField(value);\n    }\n\n    protected get_filterValue(): any {\n        return this.options.filterValue;\n    }\n\n    get filterValue(): any {\n        return this.get_filterValue();\n    }\n\n    protected set_filterValue(value: any) {\n        if (this.options.filterValue !== value) {\n            this.options.filterValue = value;\n            this.value = null;\n            this.updateItems();\n        }\n    }\n\n    set filterValue(value: any) {\n        this.set_filterValue(value);\n    }\n}", "\uFEFFimport { Decorators, DialogTypeAttribute, DisplayNameAttribute, EntityTypeAttribute, ItemNameAttribute, ServiceAttribute } from \"../../decorators\";\nimport { IEditDialog } from \"../../interfaces\";\nimport { Authorization, endsWith, format, getInstanceType, getTypeFullName, HandleRouteEventArgs, isEmptyOrNull, LT, replaceAll, resolveUrl, Router, safeCast, localText, tryGetText } from \"@serenity-is/corelib/q\";\nimport { RemoteViewOptions } from \"@serenity-is/corelib/slick\";\nimport { DialogTypeRegistry } from \"../../types/dialogtyperegistry\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { SubDialogHelper } from \"../helpers/subdialoghelper\";\nimport { ToolButton } from \"../widgets/toolbar\";\nimport { Widget, WidgetDialogClass } from \"../widgets/widget\";\nimport { ColumnPickerDialog } from \"./columnpickerdialog\";\nimport { DataGrid } from \"./datagrid\";\nimport $ from \"@optionaldeps/jquery\"\n\n@Decorators.registerClass('Serenity.EntityGrid')\nexport class EntityGrid<TItem, TOptions> extends DataGrid<TItem, TOptions> {\n\n    constructor(container: JQuery, options?: TOptions) {\n        super(container, options);\n\n        this.element.addClass('route-handler')\n            .on('handleroute.' + this.uniqueName, (_, args: any) => this.handleRoute(args));\n    }\n\n    protected handleRoute(args: HandleRouteEventArgs): void {\n        if (!!args.handled)\n            return;\n\n        if (!!(args.route === 'new')) {\n            args.handled = true;\n            this.addButtonClick();\n            return;\n        }\n\n        var oldRequests = ($ as any)?.[\"active\"];\n\n        var parts = args.route.split('/');\n        if (!!(parts.length === 2 && parts[0] === 'edit')) {\n            args.handled = true;\n            this.editItem(decodeURIComponent(parts[1]));\n        }\n        else if (!!(parts.length === 2 && parts[1] === 'new')) {\n            args.handled = true;\n            this.editItemOfType(parts[0], null);\n        }\n        else if (!!(parts.length === 3 && parts[1] === 'edit')) {\n            args.handled = true;\n            this.editItemOfType(parts[0], decodeURIComponent(parts[2]));\n        }\n        else\n            return;\n\n        if (($ as any)?.[\"active\"] > oldRequests && args.handled && args.index >= 0 && args.index < args.parts.length - 1) {\n            $(document).one('ajaxStop', () => {\n                setTimeout(() => Router.resolve('#' + args.parts.join('/+/')), 1);\n            });\n        }\n    }\n\n    protected usePager(): boolean {\n        return true;\n    }\n\n    protected createToolbarExtensions(): void {\n        this.createIncludeDeletedButton();\n        this.createQuickSearchInput();\n    }\n\n    protected getInitialTitle(): string {\n        return this.getDisplayName();\n    }\n\n    protected getLocalTextPrefix(): string {\n        var result = super.getLocalTextPrefix();\n\n        if (result != null ||\n            this.getRowDefinition())\n            return result;\n            \n        return this.getEntityType();\n    }\n\n    private _entityType: string;\n\n    protected getEntityType(): string {\n        if (this._entityType != null)\n            return this._entityType;\n\n        var attr = this.attrs(EntityTypeAttribute);\n\n        if (attr.length === 1) {\n            return (this._entityType = attr[0].value);\n        }\n\n        var name = getTypeFullName(getInstanceType(this));\n\n        var px = name.indexOf('.');\n        if (px >= 0) {\n            name = name.substring(px + 1);\n        }\n\n        if (endsWith(name, 'Grid')) {\n            name = name.substr(0, name.length - 4);\n        }\n        else if (endsWith(name, 'SubGrid')) {\n            name = name.substr(0, name.length - 7);\n        }\n\n        this._entityType = name;\n\n        return this._entityType;\n    }\n\n    private _displayName: string;\n\n    protected getDisplayName(): string {\n        if (this._displayName != null)\n            return this._displayName;\n\n        var attr = this.attrs(DisplayNameAttribute);\n        if (attr.length >= 1) {\n            this._displayName = attr[0].displayName;\n            this._displayName = LT.getDefault(this._displayName, this._displayName);\n        }\n        else {\n            this._displayName = tryGetText(this.getLocalTextDbPrefix() + 'EntityPlural');\n            if (this._displayName == null)\n                this._displayName = this.getEntityType();\n        }\n\n        return this._displayName;\n    }\n\n    private _itemName: string;\n\n    protected getItemName(): string {\n        if (this._itemName != null)\n            return this._itemName;\n\n        var attr = this.attrs(ItemNameAttribute);\n        if (attr.length >= 1) {\n            this._itemName = attr[0].value;\n            this._itemName = LT.getDefault(this._itemName, this._itemName);\n        }\n        else {\n            this._itemName = tryGetText(this.getLocalTextDbPrefix() + 'EntitySingular');\n            if (this._itemName == null)\n                this._itemName = this.getEntityType();\n        }\n\n        return this._itemName;\n    }\n\n    protected getAddButtonCaption(): string {\n        return format(localText('Controls.EntityGrid.NewButton'), this.getItemName());\n    }\n\n    protected getButtons(): ToolButton[] {\n\n        var buttons: ToolButton[] = [];\n        buttons.push({\n            title: this.getAddButtonCaption(),\n            action: 'add',\n            cssClass: 'add-button',\n            icon: 'fa-plus-circle text-green',\n            hotkey: 'alt+n',\n            onClick: () => {\n                this.addButtonClick();\n            },\n            disabled: () => !this.hasInsertPermission() || this.readOnly\n        });\n\n        buttons.push(this.newRefreshButton(true));\n        buttons.push(ColumnPickerDialog.createToolButton(this as any));\n\n        return buttons;\n    }\n\n    protected newRefreshButton(noText?: boolean): ToolButton {\n        return {\n            title: (noText ? null : localText('Controls.EntityGrid.RefreshButton')),\n            hint: (noText ? localText('Controls.EntityGrid.RefreshButton') : null),\n            icon: 'fa-refresh text-blue',\n            action: 'refresh',\n            cssClass: 'refresh-button',\n            onClick: () => {\n                this.refresh();\n            }\n        };\n    }\n\n    protected addButtonClick(): void {\n        this.editItem(new Object());\n    }\n\n    protected editItem(entityOrId: any): void {\n        this.createEntityDialog(this.getItemType(), dlg => {\n            var dialog = safeCast(dlg, IEditDialog);\n            if (dialog != null) {\n                dialog.load(entityOrId, () => {\n                    dialog.dialogOpen(this.openDialogsAsPanel);\n                });\n\n                return;\n            }\n\n            throw new Error(\n                format(\"{0} doesn't implement IEditDialog!\",\n                    getTypeFullName(getInstanceType(dlg))));\n        });\n    }\n\n    protected editItemOfType(itemType: string, entityOrId: any): void {\n\n        if (itemType === this.getItemType()) {\n            this.editItem(entityOrId);\n            return;\n        }\n\n        this.createEntityDialog(itemType, dlg => {\n            var dialog = safeCast(dlg, IEditDialog);\n            if (dialog != null) {\n                dialog.load(entityOrId, () =>\n                    dialog.dialogOpen(this.openDialogsAsPanel));\n                return;\n            }\n\n            throw new Error(\n                format(\"{0} doesn't implement IEditDialog!\",\n                    getTypeFullName(getInstanceType(dlg))));\n        });\n    }\n\n    private _service: string;\n\n    protected getService(): string {\n        if (this._service != null)\n            return this._service;\n\n        var attr = this.attrs(ServiceAttribute);\n        if (attr.length >= 1)\n            this._service = attr[0].value;\n        else\n            this._service = replaceAll(this.getEntityType(), '.', '/');\n\n        return this._service;\n    }\n\n    protected getViewOptions(): RemoteViewOptions {\n        var opt = super.getViewOptions();\n        opt.url = resolveUrl('~/Services/' + this.getService() + '/List');\n        return opt;\n    }\n\n    protected getItemType() {\n        return this.getEntityType();\n    }\n\n    protected routeDialog(itemType: string, dialog: Widget<any>) {\n        Router && Router.dialog && Router.dialog(this.element, dialog.element, () => {\n            var hash = '';\n\n            if (itemType !== this.getItemType())\n                hash = itemType + '/';\n\n            if (!!(dialog != null && (dialog as any).entityId != null))\n                hash += 'edit/' + (dialog as any).entityId.toString();\n            else\n                hash += 'new';\n\n            return hash;\n        });\n    }\n\n    protected getInsertPermission(): string {\n        return this.getRowDefinition()?.insertPermission;\n    }\n\n    protected hasInsertPermission(): boolean {\n        var insertPermission = this.getInsertPermission();\n        return insertPermission == null || Authorization.hasPermission(this.getInsertPermission());\n    }\n\n    protected transferDialogReadOnly(dialog: Widget<any>) {\n        if (this.readOnly)\n            EditorUtils.setReadOnly(dialog, true);\n    }\n\n    protected initDialog(dialog: Widget<any>): void {\n        SubDialogHelper.bindToDataChange(dialog, this, (e, dci) => {\n            this.subDialogDataChange();\n        }, true);\n\n        this.transferDialogReadOnly(dialog);\n        this.routeDialog(this.getItemType(), dialog);\n    }\n\n    protected initEntityDialog(itemType: string, dialog: Widget<any>): void {\n        if (itemType === this.getItemType()) {\n            this.initDialog(dialog);\n            return;\n        }\n\n        SubDialogHelper.bindToDataChange(dialog, this, (e, dci) => {\n            this.subDialogDataChange();\n        }, true);\n\n        this.transferDialogReadOnly(dialog);\n        this.routeDialog(itemType, dialog);\n    }\n\n    protected createEntityDialog(itemType: string, callback?: (dlg: Widget<any>) => void): Widget<any> {\n        var dialogClass = this.getDialogTypeFor(itemType);\n        var dialog = Widget.create({\n            type: dialogClass,\n            options: this.getDialogOptionsFor(itemType),\n            init: d => {\n                this.initEntityDialog(itemType, d);\n                callback && callback(d);\n            }\n        });\n\n        return dialog;\n    }\n\n    protected getDialogOptions(): any {\n        return {};\n    }\n\n    protected getDialogOptionsFor(itemType: string): any {\n        if (itemType === this.getItemType())\n            return this.getDialogOptions();\n\n        return {};\n    }\n\n    protected getDialogTypeFor(itemType: string): { new(...args: any[]): Widget<any> } {\n\n        if (itemType === this.getItemType()) {\n            return this.getDialogType();\n        }\n\n        return DialogTypeRegistry.get(itemType) as any;\n    }\n\n    private _dialogType: WidgetDialogClass;\n\n    protected getDialogType(): { new(...args: any[]): Widget<any> } {\n\n        if (this._dialogType != null)\n            return this._dialogType;\n\n        var attr = this.attrs(DialogTypeAttribute);\n        if (attr.length >= 1)\n            this._dialogType = attr[0].value;\n        else\n            this._dialogType = DialogTypeRegistry.get(this.getEntityType());\n\n        return this._dialogType;\n    }\n}\n", "\uFEFFimport { any, Authorization, confirmDialog, DeleteRequest, DeleteResponse, endsWith, Exception, extend, format, getAttributes, getFormData, getFormDataAsync, getInstanceType, getTypeFullName, isEmptyOrNull, localText, LT, notifySuccess, PropertyItem, PropertyItemsData, replaceAll, RetrieveRequest, RetrieveResponse, safeCast, SaveRequest, SaveResponse, ScriptData, serviceCall, ServiceOptions, startsWith, tryGetText, UndeleteRequest, UndeleteResponse, validatorAbortHandler } from \"@serenity-is/corelib/q\";\nimport { Decorators, EntityTypeAttribute, FormKeyAttribute, IdPropertyAttribute, IsActivePropertyAttribute, ItemNameAttribute, LocalTextPrefixAttribute, NamePropertyAttribute, ServiceAttribute } from \"../../decorators\";\nimport { IEditDialog, IReadOnly } from \"../../interfaces\";\nimport { IRowDefinition } from \"../datagrid/irowdefinition\";\nimport { EditorUtils } from \"../editors/editorutils\";\nimport { SubDialogHelper } from \"../helpers/subdialoghelper\";\nimport { TabsExtensions } from \"../helpers/tabsextensions\";\nimport { ValidationHelper } from \"../helpers/validationhelper\";\nimport { PropertyGrid, PropertyGridMode, PropertyGridOptions } from \"../widgets/propertygrid\";\nimport { Toolbar, ToolButton } from \"../widgets/toolbar\";\nimport { Widget } from \"../widgets/widget\";\nimport { TemplatedDialog } from \"./templateddialog\";\n\n@Decorators.registerClass('Serenity.EntityDialog', [IEditDialog, IReadOnly])\nexport class EntityDialog<TItem, TOptions> extends TemplatedDialog<TOptions> implements IEditDialog, IReadOnly {\n\n    protected entity: TItem;\n    protected entityId: any;\n    protected propertyItemsData: PropertyItemsData;\n    protected propertyGrid: PropertyGrid;\n\n    protected toolbar: Toolbar;\n    protected saveAndCloseButton: JQuery;\n    protected applyChangesButton: JQuery;\n    protected deleteButton: JQuery;\n    protected undeleteButton: JQuery;\n    protected cloneButton: JQuery;\n    protected editButton: JQuery;\n\n    protected localizationGrid: PropertyGrid;\n    protected localizationButton: JQuery;\n    protected localizationPendingValue: any;\n    protected localizationLastValue: any;\n\n    static defaultLanguageList: () => string[][];\n\n    constructor(opt?: TOptions) {\n        super(opt);\n\n        if (this.useAsync())\n            this.initAsync();\n        else \n            this.initSync();        \n    }\n\n    internalInit() {\n        this.initPropertyGrid();\n        this.initLocalizationGrid();\n    }\n\n    protected initSync() {\n        this.propertyItemsData = this.getPropertyItemsData();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected async initAsync() {\n        this.propertyItemsData = await this.getPropertyItemsDataAsync();\n        this.internalInit();\n        this.afterInit();\n    }\n\n    protected afterInit() {\n    }    \n\n    protected useAsync() {\n        return false;\n    }    \n\n    destroy(): void {\n\n        if (this.propertyGrid) {\n            this.propertyGrid.destroy();\n            this.propertyGrid = null;\n        }\n\n        if (this.localizationGrid) {\n            this.localizationGrid.destroy();\n            this.localizationGrid = null;\n        }\n\n        this.undeleteButton = null;\n        this.applyChangesButton = null;\n        this.deleteButton = null;\n        this.saveAndCloseButton = null;\n        this.editButton = null;\n        this.cloneButton = null;\n        this.toolbar = null;\n\n        super.destroy();\n    }\n\n    protected get_entity(): TItem {\n        return this.entity;\n    }\n\n    protected set_entity(entity: any): void {\n        this.entity = entity || new Object();\n    }\n\n    protected get_entityId(): any {\n        return this.entityId;\n    }\n\n    protected set_entityId(value: any) {\n        this.entityId = value;\n    }\n\n    protected getEntityNameFieldValue(): any {\n        return ((this.get_entity() as any)[this.getNameProperty()] ?? '').toString();\n    }\n\n    protected getEntityTitle(): string {\n        if (!this.isEditMode()) {\n            return format(localText('Controls.EntityDialog.NewRecordTitle'), this.getEntitySingular());\n        }\n        else {\n            var titleFormat = (this.isViewMode() || this.readOnly || !this.hasSavePermission()) ?\n                localText('Controls.EntityDialog.ViewRecordTitle') : localText('Controls.EntityDialog.EditRecordTitle');\n            var title = this.getEntityNameFieldValue() ?? '';\n            return format(titleFormat,\n                this.getEntitySingular(), (isEmptyOrNull(title) ? '' : (' (' + title + ')')));\n        }\n    }\n\n    protected updateTitle(): void {\n        this.dialogTitle = this.getEntityTitle();\n    }\n\n    protected isCloneMode(): boolean {\n        return false;\n    }\n\n    protected isEditMode(): boolean {\n        return this.get_entityId() != null && !this.isCloneMode();\n    }\n\n    protected isDeleted(): boolean {\n        if (this.get_entityId() == null) {\n            return false;\n        }\n\n        var isDeletedProperty = this.getIsDeletedProperty();\n        if (isDeletedProperty) {\n            return !!(this.get_entity() as any)[isDeletedProperty];\n        }\n\n        var value = (this.get_entity() as any)[this.getIsActiveProperty()];\n        if (value == null) {\n            return false;\n        }\n\n        return value < 0;\n    }\n\n    protected isNew(): boolean {\n        return this.get_entityId() == null;\n    }\n\n    protected isNewOrDeleted(): boolean {\n        return this.isNew() || this.isDeleted();\n    }\n\n    protected getDeleteOptions(callback: (response: DeleteResponse) => void): ServiceOptions<DeleteResponse> {\n        return {};\n    }\n\n    protected deleteHandler(options: ServiceOptions<DeleteResponse>, callback: (response: DeleteResponse) => void): void {\n        serviceCall(options);\n    }\n\n    protected doDelete(callback: (response: DeleteResponse) => void): void {\n        var self = this;\n\n        var request: DeleteRequest = {\n            EntityId: this.get_entityId()\n        };\n\n        var baseOptions: ServiceOptions<DeleteResponse> = {\n            service: this.getService() + '/Delete',\n            request: request,\n            onSuccess: response => {\n                self.onDeleteSuccess(response);\n                if (callback != null) {\n                    callback(response);\n                }\n                self.element.triggerHandler('ondatachange', [{\n                    entityId: request.EntityId,\n                    entity: this.entity,\n                    type: 'delete'\n                }]);\n            }\n        };\n\n        var thisOptions = this.getDeleteOptions(callback);\n        var finalOptions = extend(baseOptions, thisOptions);\n\n        this.deleteHandler(finalOptions, callback);\n    }\n\n    protected onDeleteSuccess(response: DeleteResponse): void {\n    }\n\n    protected attrs<TAttr>(attrType: { new(...args: any[]): TAttr }): TAttr[] {\n        return getAttributes(getInstanceType(this), attrType, true);\n    }\n\n    protected getRowDefinition(): IRowDefinition {\n        return null;\n    }\n\n    private _entityType: string;\n\n    protected getEntityType(): string {\n\n        if (this._entityType != null)\n            return this._entityType;\n\n        var typeAttributes = this.attrs(EntityTypeAttribute);\n\n        if (typeAttributes.length === 1)\n            return (this._entityType = typeAttributes[0].value);\n\n        // remove global namespace\n        var name = getTypeFullName(getInstanceType(this));\n        var px = name.indexOf('.');\n        if (px >= 0)\n            name = name.substring(px + 1);\n\n        // don't like this kind of convention, make it obsolete soon...\n        if (endsWith(name, 'Dialog') || endsWith(name, 'Control'))\n            name = name.substr(0, name.length - 6);\n        else if (endsWith(name, 'Panel'))\n            name = name.substr(0, name.length - 5);\n\n        return (this._entityType = name);\n    }\n\n    private _formKey: string;\n\n    protected getFormKey(): string {\n        if (this._formKey != null)\n            return this._formKey;\n\n        var attributes = this.attrs(FormKeyAttribute);\n\n        if (attributes.length >= 1)\n            return (this._formKey = attributes[0].value);\n\n        return (this._formKey = this.getEntityType());\n    }\n\n    private _localTextDbPrefix: string;\n\n    protected getLocalTextDbPrefix(): string {\n        if (this._localTextDbPrefix != null)\n            return this._localTextDbPrefix;\n\n        this._localTextDbPrefix = this.getLocalTextPrefix() ?? '';\n\n        if (this._localTextDbPrefix.length > 0 && !endsWith(this._localTextDbPrefix, '.'))\n            this._localTextDbPrefix = 'Db.' + this._localTextDbPrefix + '.';\n\n        return this._localTextDbPrefix;\n    }\n\n    protected getLocalTextPrefix(): string {\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return rowDefinition.localTextPrefix;\n\n        var attr = this.attrs(LocalTextPrefixAttribute);\n\n        if (attr.length >= 1)\n            return attr[0].value;\n\n        return this.getEntityType();\n    }\n   \n    private _entitySingular: string;\n\n    protected getEntitySingular(): string {\n        if (this._entitySingular != null)\n            return this._entitySingular;\n\n        var attributes = this.attrs(ItemNameAttribute);\n\n        if (attributes.length >= 1) {\n            this._entitySingular = attributes[0].value;\n            this._entitySingular = LT.getDefault(this._entitySingular, this._entitySingular);\n        }\n        else {\n            var es = tryGetText(this.getLocalTextDbPrefix() + 'EntitySingular');\n            if (es == null) \n                es = this.getEntityType();\n            this._entitySingular = es;\n        }\n\n        return this._entitySingular;\n    }\n\n    private _nameProperty: string;\n\n    protected getNameProperty(): string {\n        if (this._nameProperty != null)\n            return this._nameProperty;\n\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return this._nameProperty = rowDefinition.nameProperty ?? '';\n\n        var attributes = this.attrs(NamePropertyAttribute);\n\n        if (attributes.length >= 1)\n            return this._nameProperty = attributes[0].value ?? '';\n            \n        return this._nameProperty = 'Name';\n    }\n\n    private _idProperty: string;\n\n    protected getIdProperty(): string {\n        if (this._idProperty != null)\n            return this._idProperty;\n\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return this._idProperty = rowDefinition.idProperty ?? '';\n\n        var attr = this.attrs(IdPropertyAttribute);\n        if (attr.length === 1)\n            return this._idProperty = attr[0].value ?? '';\n\n        return this._idProperty = 'ID';\n    }\n\n    private _isActiveProperty: string;\n\n    protected getIsActiveProperty(): string {\n        if (this._isActiveProperty != null)\n            return this._isActiveProperty;\n\n        var rowDefinition = this.getRowDefinition();\n        if (rowDefinition)\n            return this._isActiveProperty = rowDefinition.isActiveProperty ?? '';\n\n        var attr = this.attrs(IsActivePropertyAttribute);\n        if (attr.length === 1)\n            return this._isActiveProperty = attr[0].value ?? '';\n\n        return this._isActiveProperty = '';\n    }\n\n    protected getIsDeletedProperty(): string {\n        return this.getRowDefinition()?.isDeletedProperty;\n    }\n\n    private _service: string;\n\n    protected getService() {\n        if (this._service != null)\n            return this._service;\n\n        var attributes = this.attrs(ServiceAttribute);\n        if (attributes.length >= 1)\n            this._service = attributes[0].value;\n        else\n            this._service = replaceAll(this.getEntityType(), '.', '/');\n\n        return this._service;\n    }\n\n    load(entityOrId: any, done: () => void, fail?: (ex: Exception) => void): void {\n\n        var action = () => {\n\n            if (entityOrId == null) {\n                this.loadResponse({});\n                done && done();\n                return;\n            }\n\n            var scriptType = typeof (entityOrId);\n            if (scriptType === 'string' || scriptType === 'number') {\n                var entityId = entityOrId;\n\n                this.loadById(entityId, function (response) {\n                    if (done)\n                        window.setTimeout(done, 0);\n                }, null);\n\n                return;\n            }\n\n            var entity = entityOrId || new Object();\n            this.loadResponse({ Entity: entity });\n            done && done();\n        };\n\n        if (fail == null) {\n            action();\n            return;\n        }\n\n        try {\n            action();\n        }\n        catch (ex1) {\n            var ex = (Exception as any).wrap(ex1);\n            fail(ex);\n        }\n    }\n\n    loadNewAndOpenDialog(asPanel?: boolean): void {\n        this.loadResponse({});\n        this.dialogOpen(asPanel);\n    }\n\n    loadEntityAndOpenDialog(entity: TItem, asPanel?: boolean): void {\n        this.loadResponse({ Entity: entity });\n        this.dialogOpen(asPanel);\n    }\n\n    protected loadResponse(data: any): void {\n        data = data || {};\n        this.onLoadingData(data);\n        var entity = data.Entity || new Object();\n        this.beforeLoadEntity(entity);\n        this.loadEntity(entity);\n        this.set_entity(entity);\n        this.afterLoadEntity();\n    }\n\n    protected loadEntity(entity: TItem): void {\n        var idField = this.getIdProperty();\n\n        if (idField != null)\n            this.set_entityId((entity as any)[idField]);\n        \n        this.set_entity(entity);\n\n        if (this.propertyGrid != null) {\n            this.propertyGrid.set_mode((this.isEditMode() ?\n                PropertyGridMode.update : PropertyGridMode.insert));\n            this.propertyGrid.load(entity);\n        }\n    }\n\n    protected beforeLoadEntity(entity: TItem): void {\n        this.localizationPendingValue = null;\n        this.localizationLastValue = null;\n    }\n\n    protected afterLoadEntity(): void {\n        this.updateInterface();\n        this.updateTitle();\n    }\n\n    public loadByIdAndOpenDialog(entityId: any, asPanel?: boolean) {\n        this.loadById(entityId,\n            response => window.setTimeout(() => this.dialogOpen(asPanel), 0),\n            () => {\n                if (!this.element.is(':visible')) {\n                    this.element.remove();\n                }\n            });\n    }\n\n    protected onLoadingData(data: RetrieveResponse<TItem>): void {\n    }\n\n    protected getLoadByIdOptions(id: any, callback: (response: RetrieveResponse<TItem>) => void): ServiceOptions<RetrieveResponse<TItem>> {\n        return {};\n    }\n\n    protected getLoadByIdRequest(id: any): RetrieveRequest {\n        var request: RetrieveRequest = {};\n        request.EntityId = id;\n        return request;\n    }\n\n    protected reloadById(): void {\n        this.loadById(this.get_entityId());\n    }\n\n    loadById(id: any, callback?: (response: RetrieveResponse<TItem>) => void, fail?: () => void) {\n        var baseOptions: ServiceOptions<RetrieveResponse<TItem>> = {\n            service: this.getService() + '/Retrieve',\n            blockUI: true,\n            request: this.getLoadByIdRequest(id),\n            onSuccess: response => {\n                this.loadResponse(response);\n                callback && callback(response);\n            },\n            onCleanup: () => {\n                if (this.validator != null) {\n                    validatorAbortHandler(this.validator);\n                }\n            }\n        };\n\n        var thisOptions = this.getLoadByIdOptions(id, callback);\n        var finalOptions = extend(baseOptions, thisOptions);\n        this.loadByIdHandler(finalOptions, callback, fail);\n    }\n\n    protected loadByIdHandler(options: ServiceOptions<RetrieveResponse<TItem>>, callback: (response: RetrieveResponse<TItem>) => void, fail: () => void): void {\n        var request = serviceCall(options);\n        fail && request.fail(fail);\n    }\n\n    protected initLocalizationGrid(): void {\n        var pgDiv = this.byId('PropertyGrid');\n        if (pgDiv.length <= 0) {\n            return;\n        }\n        var pgOptions = this.getPropertyGridOptions();\n        this.initLocalizationGridCommon(pgOptions);\n    }\n\n    protected initLocalizationGridCommon(pgOptions: PropertyGridOptions) {\n        var pgDiv = this.byId('PropertyGrid');\n\n        if (!any(pgOptions.items, x => x.localizable === true))\n            return;\n\n        var localGridDiv = $('<div/>')\n            .attr('id', this.idPrefix + 'LocalizationGrid')\n            .hide().insertAfter(pgDiv);\n\n        pgOptions.idPrefix = this.idPrefix + 'Localization_';\n\n        var items: PropertyItem[] = [];\n        for (var item1 of pgOptions.items) {\n            var langs = null;\n\n            if (item1.localizable === true) {\n                var copy = extend({}, item1);\n                copy.oneWay = true;\n                copy.readOnly = true;\n                copy.required = false;\n                copy.defaultValue = null;\n                items.push(copy);\n\n                if (langs == null)\n                    langs = this.getLangs();\n\n                for (var lang of langs) {\n                    copy = extend({}, item1);\n                    copy.name = lang[0] + '$' + copy.name;\n                    copy.title = lang[1];\n                    copy.cssClass = [copy.cssClass, 'translation'].join(' ');\n                    copy.insertable = true;\n                    copy.updatable = true;\n                    copy.oneWay = false;\n                    copy.required = false;\n                    copy.localizable = false;\n                    copy.defaultValue = null;\n                    items.push(copy);\n                }\n            }\n        }\n\n        pgOptions.items = items;\n\n        this.localizationGrid = (new PropertyGrid(localGridDiv, pgOptions)).init(null);\n        localGridDiv.addClass('s-LocalizationGrid');\n    }\n\n    protected isLocalizationMode(): boolean {\n        return this.localizationButton != null && this.localizationButton.hasClass('pressed');\n    }\n\n    protected isLocalizationModeAndChanged(): boolean {\n        if (!this.isLocalizationMode()) {\n            return false;\n        }\n\n        var newValue = this.getLocalizationGridValue();\n        return JSON.stringify(this.localizationLastValue) !=  JSON.stringify(newValue);\n    }\n\n    protected localizationButtonClick(): void {\n        if (this.isLocalizationMode() && !this.validateForm()) {\n            return;\n        }\n\n        if (this.isLocalizationModeAndChanged()) {\n            var newValue = this.getLocalizationGridValue();\n            this.localizationLastValue = newValue;\n            this.localizationPendingValue = newValue;\n        }\n\n        this.localizationButton.toggleClass('pressed');\n        this.updateInterface();\n        if (this.isLocalizationMode()) {\n            this.loadLocalization();\n        }\n    }\n\n    protected getLanguages(): any[] {\n        if (EntityDialog.defaultLanguageList != null)\n            return EntityDialog.defaultLanguageList() || [];\n\n        return [];\n    }\n\n    // for compatibility with older getLanguages methods written in Saltaralle\n    private getLangs(): any {\n\n        var langsTuple = this.getLanguages();\n        var langs = safeCast(langsTuple, Array);\n        if (langs == null || langs.length === 0 ||\n            langs[0] == null || !Array.isArray(langs[0])) {\n            langs = Array.prototype.slice.call(langsTuple.map(function (x: any) {\n                return [x.item1, x.item2];\n            }));\n        }\n\n        return langs;\n    }\n\n    protected loadLocalization(): void {\n        if (this.localizationLastValue == null && this.isNew()) {\n            this.localizationGrid.load({});\n            this.setLocalizationGridCurrentValues();\n            this.localizationLastValue = this.getLocalizationGridValue();\n            return;\n        }\n\n        if (this.localizationLastValue != null) {\n            this.localizationGrid.load(this.localizationLastValue);\n            this.setLocalizationGridCurrentValues();\n            return;\n        }\n\n        var opt = <ServiceOptions<any>>{\n            service: this.getService() + '/Retrieve',\n            blockUI: true,\n            request: {\n                EntityId: this.get_entityId(),\n                ColumnSelection: 'keyOnly',\n                IncludeColumns: ['Localizations']\n            },\n            onSuccess: response => {\n                var copy = extend(new Object(), this.get_entity());\n                if (response.Localizations) {\n                    for (var language of Object.keys(response.Localizations)) {\n                        var entity = response.Localizations[language];\n                        for (var key of Object.keys(entity)) {\n                            (copy as any)[language + '$' + key] = entity[key];\n                        }\n                    }\n                }\n                \n                this.localizationGrid.load(copy);\n                this.setLocalizationGridCurrentValues();\n                this.localizationPendingValue = null;\n                this.localizationLastValue = this.getLocalizationGridValue();\n            }\n        };\n\n        serviceCall(opt);\n    }\n\n    protected setLocalizationGridCurrentValues(): void {\n        var valueByName: Record<string, any> = {};\n\n        this.localizationGrid.enumerateItems((item, widget) => {\n            if (item.name.indexOf('$') < 0 && widget.element.is(':input')) {\n                valueByName[item.name] = this.byId(item.name).val();\n                widget.element.val(valueByName[item.name]);\n            }\n        });\n\n        this.localizationGrid.enumerateItems((item1, widget1) => {\n            var idx = item1.name.indexOf('$');\n            if (idx >= 0 && widget1.element.is(':input')) {\n                var hint = valueByName[item1.name.substr(idx + 1)];\n                if (hint != null && hint.length > 0) {\n                    widget1.element.attr('title', hint).attr('placeholder', hint);\n                }\n            }\n        });\n    }\n\n    protected getLocalizationGridValue(): any {\n        var value: any = {};\n        this.localizationGrid.save(value);\n\n        for (var k of Object.keys(value)) {\n            if (k.indexOf('$') < 0) {\n                delete value[k];\n            }\n        }\n\n        return value;\n    }\n\n    protected getPendingLocalizations(): any {\n        if (this.localizationPendingValue == null) {\n            return null;\n        }\n\n        var result: { [key: string]: any } = {};\n        var idField = this.getIdProperty();\n        var langs = this.getLangs();\n\n        for (var pair of langs) {\n            var language = pair[0];\n            var entity: any = {};\n\n            if (idField != null) {\n                entity[idField] = this.get_entityId();\n            }\n\n            var prefix = language + '$';\n\n            for (var k of Object.keys(this.localizationPendingValue)) {\n                if (startsWith(k, prefix)) \n                    entity[k.substr(prefix.length)] = this.localizationPendingValue[k];\n            }\n\n            result[language] = entity;\n        }\n\n        return result;\n    }\n\n    protected initPropertyGrid(): void {\n        var pgDiv = this.byId('PropertyGrid');\n        if (pgDiv.length <= 0) {\n            return;\n        }\n        var pgOptions = this.getPropertyGridOptions();\n        this.propertyGrid = (new PropertyGrid(pgDiv, pgOptions)).init(null);\n        if (this.element.closest('.ui-dialog').hasClass('s-Flexify')) {\n            this.propertyGrid.element.children('.categories').flexHeightOnly(1);\n        }\n    }\n\n    protected getPropertyItems() {\n        return this.propertyItemsData?.items || [];\n    }\n\n    protected getPropertyItemsData(): PropertyItemsData {\n        var formKey = this.getFormKey();\n\n        if (this.getFormKey === EntityDialog.prototype.getFormKey &&\n            this.getPropertyItems !== EntityDialog.prototype.getPropertyItems &&\n            !ScriptData.canLoad('Form.' + formKey)) {\n            return {\n                items: this.getPropertyItems(),\n                additionalItems: []\n            }\n        }\n\n        if (!isEmptyOrNull(formKey)) {\n            return getFormData(formKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }\n\n    protected async getPropertyItemsDataAsync(): Promise<PropertyItemsData> {\n        var formKey = this.getFormKey();\n        if (!isEmptyOrNull(formKey)) {\n            return await getFormDataAsync(formKey);\n        }\n\n        return { items: [], additionalItems: [] };\n    }    \n\n    protected getPropertyGridOptions(): PropertyGridOptions {\n        return {\n            idPrefix: this.idPrefix,\n            items: this.getPropertyItems(),\n            mode: PropertyGridMode.insert,\n            localTextPrefix: 'Forms.' + this.getFormKey() + '.',\n            useCategories: true\n        };\n    }\n\n    protected validateBeforeSave(): boolean {\n        return true;\n    }\n\n    protected getSaveOptions(callback: (response: SaveResponse) => void): ServiceOptions<SaveResponse> {\n\n        var opt: ServiceOptions<SaveResponse> = {};\n\n        opt.service = this.getService() + '/' + (this.isEditMode() ? 'Update' : 'Create'),\n\n        opt.onSuccess = response => {\n            this.onSaveSuccess(response);\n\n            callback && callback(response);\n\n            var typ = (this.isEditMode() ? 'update' : 'create');\n\n            var ent = opt.request == null ? null : opt.request.Entity;\n            var eid: any = this.isEditMode() ? this.get_entityId() :\n                (response == null ? null : response.EntityId);\n\n            var dci = {\n                type: typ,\n                entity: ent,\n                entityId: eid\n            };\n\n            this.element.triggerHandler('ondatachange', [dci]);\n        };\n\n        opt.onCleanup = () => {\n            this.validator && validatorAbortHandler(this.validator);\n        };\n\n        opt.request = this.getSaveRequest();\n\n        return opt;\n    }\n\n    protected getSaveEntity(): TItem {\n\n        var entity: TItem = new Object() as any;\n\n        if (this.propertyGrid != null) {\n            this.propertyGrid.save(entity);\n        }\n\n        if (this.isEditMode()) {\n            var idField = this.getIdProperty();\n            if (idField != null && (entity as any)[idField] == null) {\n                (entity as any)[idField] = this.get_entityId();\n            }\n        }\n\n        return entity;\n    }\n\n    protected getSaveRequest(): SaveRequest<TItem> {\n\n        var entity = this.getSaveEntity();\n        var req: SaveRequest<TItem> = {};\n        req.Entity = entity;\n\n        if (this.isEditMode()) {\n            var idField = this.getIdProperty();\n            if (idField != null) {\n                req.EntityId = this.get_entityId();\n            }\n        }\n\n        if (this.localizationPendingValue != null) {\n            req.Localizations = this.getPendingLocalizations();\n        }\n\n        return req;\n    }\n\n    protected onSaveSuccess(response: SaveResponse): void {\n    }\n\n    protected save_submitHandler(callback: (response: SaveResponse) => void): void {\n        var options = this.getSaveOptions(callback);\n        this.saveHandler(options, callback);\n    }\n\n    protected save(callback?: (response: SaveResponse) => void): void | boolean {\n        return ValidationHelper.submit(this.byId('Form'),\n            () => this.validateBeforeSave(),\n            () => this.save_submitHandler(callback));\n    }\n\n    protected saveHandler(options: ServiceOptions<SaveResponse>,\n        callback: (response: SaveResponse) => void): void {\n        serviceCall(options);\n    }\n\n    protected initToolbar(): void {\n\n        super.initToolbar();\n\n        if (!this.toolbar)\n            return;\n\n        this.saveAndCloseButton = this.toolbar.findButton('save-and-close-button');\n        this.applyChangesButton = this.toolbar.findButton('apply-changes-button');\n        this.deleteButton = this.toolbar.findButton('delete-button');\n        this.undeleteButton = this.toolbar.findButton('undo-delete-button');\n        this.editButton = this.toolbar.findButton('edit-button');\n        this.cloneButton = this.toolbar.findButton('clone-button');\n        this.localizationButton = this.toolbar.findButton('localization-button');\n    }\n\n    protected showSaveSuccessMessage(response: SaveResponse): void {\n        notifySuccess(localText('Controls.EntityDialog.SaveSuccessMessage'), '', null);\n    }\n\n    protected getToolbarButtons(): ToolButton[] {\n        var list: ToolButton[] = [];\n\n        list.push({\n            title: localText('Controls.EntityDialog.SaveButton'),\n            action: 'save-and-close',\n            cssClass: 'save-and-close-button',\n            icon: 'fa-check-circle text-purple',\n            hotkey: 'alt+s',\n            onClick: () => {\n                this.save(response => {\n                    this.dialogClose();\n                });\n            },\n            visible: () => !this.isDeleted() && !this.isViewMode(),\n            disabled: () => !this.hasSavePermission() || this.readOnly\n        });\n\n        list.push({\n            title: '',\n            hint: localText('Controls.EntityDialog.ApplyChangesButton'),\n            action: 'apply-changes',\n            cssClass: 'apply-changes-button',\n            icon: 'fa-clipboard-check text-purple',\n            hotkey: 'alt+a',\n            onClick: () => {\n                this.save(response1 => {\n\n                    if (this.isEditMode()) {\n                        var id1 = response1.EntityId;\n                        if (id1 == null) {\n                            id1 = this.get_entityId();\n                        }\n                        this.loadById(id1);\n                    }\n                    else {\n                        this.loadById(response1.EntityId);\n                    }\n\n                    this.showSaveSuccessMessage(response1);\n                });\n            },\n            visible: () => !this.isDeleted() && !this.isViewMode(),\n            disabled: () => !this.hasSavePermission() || this.readOnly\n        });\n\n        list.push({\n            title: localText('Controls.EntityDialog.DeleteButton'),\n            cssClass: 'delete-button',\n            icon: 'fa-trash-o text-red',\n            hotkey: 'alt+x',\n            onClick: () => {\n                confirmDialog(localText('Controls.EntityDialog.DeleteConfirmation'), () => {\n                    this.doDelete(() => this.dialogClose());\n                });\n            },\n            visible: () => this.isEditMode() && !this.isDeleted() && !this.isViewMode(),\n            disabled: () => !this.hasDeletePermission() || this.readOnly\n        });\n\n        list.push({\n            title: localText('Controls.EntityDialog.UndeleteButton'),\n            action: 'undo-delete',\n            cssClass: 'undo-delete-button',\n            onClick: () => {\n                if (this.isDeleted()) {\n                    confirmDialog(localText('Controls.EntityDialog.UndeleteConfirmation'), () => {\n                        this.undelete(() => this.loadById(this.get_entityId()));\n                    });\n                }\n            },\n            visible: () => this.isEditMode() && this.isDeleted() && !this.isViewMode(),\n            disabled: () => !this.hasDeletePermission() || this.readOnly\n        });\n\n        if (this.useViewMode()) {\n            list.push({\n                title: localText('Controls.EntityDialog.EditButton'),\n                action: 'delete',\n                cssClass: 'edit-button',\n                icon: 'fa-edit',\n                onClick: () => {\n                    if (!this.isEditMode())\n                        return;\n\n                    this.editClicked = true;\n                    this.updateInterface();\n                    this.updateTitle();\n                },\n                visible: () => this.isViewMode(),\n                disabled: () => !this.hasSavePermission() || this.readOnly\n            });\n        }\n\n        list.push({\n            title: localText('Controls.EntityDialog.LocalizationButton'),\n            action: 'localization',\n            cssClass: 'localization-button',\n            onClick: () => this.localizationButtonClick()\n        });\n\n        list.push({\n            title: localText('Controls.EntityDialog.CloneButton'),\n            action: 'clone',\n            cssClass: 'clone-button',\n            icon: 'fa-clone',\n            onClick: () => {\n\n                if (!this.isEditMode()) {\n                    return;\n                }\n\n                var cloneEntity = this.getCloningEntity();\n\n                Widget.create({\n                    type: getInstanceType(this),\n                    init: w => SubDialogHelper.bubbleDataChange(\n                        SubDialogHelper.cascade(w, this.element), this, true)\n                        .loadEntityAndOpenDialog(cloneEntity, null)\n                });\n            },\n            visible: () => false,\n            disabled: () => !this.hasInsertPermission() || this.readOnly\n        });\n\n        return list;\n    }\n\n    protected getCloningEntity(): TItem {\n\n        var clone: any = new Object();\n        clone = extend(clone, this.get_entity());\n\n        var idField = this.getIdProperty();\n        if (!isEmptyOrNull(idField)) {\n            delete clone[idField];\n        }\n\n        var isActiveField = this.getIsActiveProperty();\n        if (!isEmptyOrNull(isActiveField)) {\n            delete clone[isActiveField];\n        }\n\n        var isDeletedField = this.getIsDeletedProperty();\n        if (!isEmptyOrNull(isDeletedField)) {\n            delete clone[isDeletedField];\n        }\n\n        return clone;\n    }\n\n    protected updateInterface(): void {\n\n        EditorUtils.setContainerReadOnly(this.byId('Form'), false);\n\n        var isLocalizationMode = this.isLocalizationMode();\n        var hasSavePermission = this.hasSavePermission();\n        var viewMode = this.isViewMode();\n        var readOnly = this.readOnly;\n\n        this.toolbar.updateInterface();\n\n        if (this.tabs != null) {\n            TabsExtensions.setDisabled(this.tabs, 'Log', this.isNewOrDeleted());\n        }\n\n        if (this.propertyGrid != null) {\n            this.propertyGrid.element.toggle(!isLocalizationMode);\n        }\n\n        if (this.localizationGrid != null) {\n            this.localizationGrid.element.toggle(isLocalizationMode);\n        }\n\n        if (this.localizationButton != null) {\n            this.localizationButton.toggle(this.localizationGrid != null);\n            this.localizationButton.find('.button-inner')\n                .text((this.isLocalizationMode() ?\n                    localText('Controls.EntityDialog.LocalizationBack') :\n                    localText('Controls.EntityDialog.LocalizationButton')));\n        }\n\n        if (isLocalizationMode) {\n\n            if (this.toolbar != null)\n                this.toolbar.findButton('tool-button')\n                    .not('.localization-hidden')\n                    .addClass('.localization-hidden').hide();\n\n            this.localizationButton && this.localizationButton.show();\n\n            return;\n        }\n\n        this.toolbar.findButton('localization-hidden')\n            .removeClass('localization-hidden').show();\n\n        if (!hasSavePermission || viewMode || readOnly)\n            EditorUtils.setContainerReadOnly(this.byId(\"Form\"), true);\n    }\n\n    protected getUndeleteOptions(callback?: (response: UndeleteResponse) => void): ServiceOptions<UndeleteResponse> {\n        return {}\n    }\n\n    protected undeleteHandler(options: ServiceOptions<UndeleteResponse>, callback: (response: UndeleteResponse) => void): void {\n        serviceCall(options);\n    }\n\n    protected undelete(callback?: (response: UndeleteResponse) => void): void {\n        var baseOptions: ServiceOptions<UndeleteResponse> = {};\n        baseOptions.service = this.getService() + '/Undelete';\n\n        var request: UndeleteRequest = {};\n        request.EntityId = this.get_entityId();\n\n        baseOptions.request = request;\n        baseOptions.onSuccess = response => {\n            callback && callback(response);\n            this.element.triggerHandler('ondatachange', [{\n                entityId: this.get_entityId(),\n                entity: this.entity,\n                type: 'undelete'\n            }]);\n        };\n\n        var thisOptions = this.getUndeleteOptions(callback);\n        var finalOptions = extend(baseOptions, thisOptions);\n        this.undeleteHandler(finalOptions, callback);\n    }\n\n    private _readonly: boolean;\n\n    public get readOnly(): boolean {\n        return this.get_readOnly();\n    }\n\n    public set readOnly(value: boolean) {\n        this.set_readOnly(value);\n    }\n\n    public get_readOnly() {\n        return !!this._readonly;\n    }\n\n    public set_readOnly(value: boolean) {\n        if (!!this._readonly != !!value) {\n            this._readonly = !!value;\n            this.updateInterface();\n            this.updateTitle();\n        }\n    }\n\n    protected getInsertPermission(): string {\n        return this.getRowDefinition()?.insertPermission;\n    }\n\n    protected getUpdatePermission(): string {\n        return this.getRowDefinition()?.updatePermission;\n    }\n\n    protected getDeletePermission(): string {\n        return this.getRowDefinition()?.deletePermission;\n    }\n\n    protected hasDeletePermission() {\n        var deletePermission = this.getDeletePermission();\n        return deletePermission == null || Authorization.hasPermission(deletePermission);\n    }\n\n    protected hasInsertPermission() {\n        var insertPermission = this.getInsertPermission();\n        return insertPermission == null || Authorization.hasPermission(insertPermission);\n    }\n\n    protected hasUpdatePermission() {\n        var updatePermission = this.getUpdatePermission();\n        return updatePermission == null || Authorization.hasPermission(updatePermission);\n    }\n\n    protected hasSavePermission(): boolean {\n        return this.isNew() ? this.hasInsertPermission() : this.hasUpdatePermission();\n    }\n\n    protected editClicked: boolean;\n\n    protected isViewMode() {\n        return this.useViewMode() && this.isEditMode() && !this.editClicked;\n    }\n\n    protected useViewMode() {\n        return false;\n    }\n\n    protected getFallbackTemplate() {\n        return `<div class=\"s-DialogContent\">\n    <div id=\"~_Toolbar\" class=\"s-DialogToolbar\">\n    </div>\n    <div class=\"s-Form\">\n        <form id=\"~_Form\" action=\"\">\n            <div class=\"fieldset\">\n                <div id=\"~_PropertyGrid\"></div>\n                <div class=\"clear\"></div>\n            </div>\n        </form> \n    </div>\n</div>`;\n    }\n}", "\uFEFFimport { EditorUtils } from \"../editors/editorutils\";\nimport { ReflectionOptionsSetter } from \"./reflectionoptionssetter\";\nimport { Widget, WidgetComponentProps } from \"./widget\";\n\nfunction _widgetFactory(this: any, props: any) {\n\n    var widget = Widget.create({\n        type: this,\n        element: (el$) => {\n            var el = el$[0];\n            if (props.id != null)\n                el.id = props.id;\n\n            if (props.name != null)\n                el.setAttribute('name', props.name);\n\n            if (props.placeholder != null)\n                el.setAttribute(\"placeholder\", props.placeholder);\n\n            if (props.className != null)\n                el.className = props.className;\n            else if (props.class != null)\n                el.className = props.class;\n\n            if (props.oneWay)\n                el.dataset.oneWay = \"1\";\n\n            if (props.maxLength != null)\n                el.setAttribute(\"maxLength\", props.maxLength || 0);\n            else if (props.maxlength != null)\n                el.setAttribute(\"maxLength\", props.maxlength || 0);\n        }\n    });\n\n    if (props.required != null)\n        EditorUtils.setRequired(widget, props.required);\n\n    if (props.readOnly !== null)\n        EditorUtils.setReadOnly(widget, props.readOnly);\n    else if (props.readonly !== null)\n        EditorUtils.setReadOnly(widget, props.readonly);\n\n    if (props.setOptions != props.setOptions)\n        ReflectionOptionsSetter.set(widget, props.setOptions);\n\n    if (props.value !== undefined)\n        EditorUtils.setValue(widget, props.value);\n    else if (props.initialValue != undefined)\n        EditorUtils.setValue(widget, props.initialValue);\n\n    if (props.onChange != null)\n        widget.element.on('change', props.onChange);\n    else if (props.onchange != null)\n        widget.element.on('change', props.onchange);\n\n    if (props.onChangeSelect2 != null)\n        widget.changeSelect2(props.onChangeSelect2);\n\n    if (props.ref)\n        props.ref(widget);\n\n    return widget.element[0];\n}\n\ntype JsxDomWidgetProps<P> = P & WidgetComponentProps<any> & {\n    children?: any | undefined;\n    class?: string;\n}\n\nexport interface JsxDomWidget<P = {}, TElement extends Element = HTMLElement> {\n    (props: JsxDomWidgetProps<P>, context?: any): TElement | null\n}\n\nexport function jsxDomWidget<TWidget extends Widget<TOptions>, TOptions>(\n    type: new (element: JQuery, options?: TOptions) => TWidget): JsxDomWidget<TOptions & { ref?: (r: TWidget) => void }> {\n    return _widgetFactory.bind(type);\n}\n\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { postToService, PropertyItem, serviceCall, ServiceRequest, ServiceResponse, trimToNull } from \"@serenity-is/corelib/q\";\nimport { QuickSearchInput } from \"../datagrid/quicksearchinput\";\nimport { TemplatedDialog } from \"../dialogs/templateddialog\";\nimport { PropertyGrid } from \"./propertygrid\";\nimport { Widget } from \"./widget\";\n\nexport namespace Reporting {\n    export interface ReportDialogOptions {\n        reportKey?: string;\n    }\n\n    @Decorators.registerClass('Serenity.Reporting.ReportDialog')\n    export class ReportDialog extends TemplatedDialog<ReportDialogOptions> {\n        constructor(opt: ReportDialogOptions) {\n            super(opt);\n\n            if (opt.reportKey) {\n                this.loadReport(opt.reportKey);\n            }\n        }\n\n        protected propertyGrid: PropertyGrid;\n        protected propertyItems: PropertyItem[];\n        protected reportKey: string;\n\n        protected createPropertyGrid(): void {\n            if (this.propertyGrid) {\n                this.byId('PropertyGrid').html('').attr('class', '');\n                this.propertyGrid = null;\n            }\n            this.propertyGrid = (new PropertyGrid(this.byId('PropertyGrid'), {\n                idPrefix: this.idPrefix,\n                useCategories: true,\n                items: this.propertyItems\n            })).init(null);\n        }\n\n        loadReport(reportKey: string): void {\n            serviceCall({\n                service: 'Report/Retrieve', request: { ReportKey: reportKey },\n                onSuccess: (response: ReportRetrieveResponse) => {\n                    this.reportKey = response.ReportKey ?? reportKey;\n                    this.propertyItems = response.Properties || [];\n                    this.dialogTitle = response.Title;\n                    this.createPropertyGrid();\n                    var set = response.InitialSettings;\n                    if (set == null) {\n                        set = new Object();\n                    }\n                    this.propertyGrid.load(set);\n                    this.toolbar.findButton('print-preview-button').toggle(!response.IsDataOnlyReport);\n                    this.toolbar.findButton('export-pdf-button').toggle(!response.IsDataOnlyReport);\n                    this.toolbar.findButton('export-docx-button').toggle(!response.IsDataOnlyReport);\n                    this.dialogOpen(null);\n                }\n            });\n        }\n\n        executeReport(targetFrame: string, exportType: string): void {\n            if (!this.validateForm()) {\n                return;\n            }\n            var parameters = new Object();\n            this.propertyGrid.save(parameters);\n            postToService({\n                service: 'Report/Execute',\n                request: {\n                    ReportKey: this.reportKey,\n                    DesignId: 'Default',\n                    ExportType: exportType,\n                    Parameters: parameters\n                }, target: targetFrame\n            });\n\n        }\n\n        protected getToolbarButtons() {\n            var buttons = [];\n            buttons.push({\n                title: '\u00D6nizleme', cssClass: 'print-preview-button', onClick: () => {\n                    this.executeReport('_blank', null);\n                }\n            });\n            buttons.push({\n                title: 'PDF', cssClass: 'export-pdf-button', onClick: () => {\n                    this.executeReport('', 'Pdf');\n                }\n            });\n            buttons.push({\n                title: 'Excel', cssClass: 'export-xlsx-button', onClick: () => {\n                    this.executeReport('', 'Xlsx');\n                }\n            });\n            buttons.push({\n                title: 'Word', cssClass: 'export-docx-button', onClick: () => {\n                    this.executeReport('', 'Docx');\n                }\n            });\n            return buttons;\n        }\n    }\n\n    export interface ReportExecuteRequest extends ServiceRequest {\n        ExportType?: string;\n        ReportKey?: string;\n        DesignId?: string;\n        Parameters?: any;\n    }\n\n    @Decorators.registerClass('Serenity.Reporting.ReportPage')\n    export class ReportPage extends Widget<any> {\n        constructor(div: JQuery) {\n            super(div);\n\n            $('.report-link').click((e) => this.reportLinkClick(e));\n            $('div.line').click((e) => this.categoryClick(e));\n            var self = this;\n            new QuickSearchInput($('#QuickSearchInput'), {\n                onSearch: function (field, text, done) {\n                    self.updateMatchFlags(text);\n                    done(true);\n                }\n            });\n        }\n\n        protected updateMatchFlags(text: string) {\n            var liList = $('#ReportList').find('li').removeClass('non-match');\n            text = trimToNull(text);\n            if (text == null) {\n                liList.children('ul').hide();\n                liList.show().removeClass('expanded');\n                return;\n            }\n            var parts = text.replace(',', ' ').split(' ');\n            for (var i = 0; i < parts.length; i++) {\n                parts[i] = trimToNull(Select2.util.stripDiacritics(parts[i]).toUpperCase());\n            }\n            var reportItems = liList.filter('.report-item');\n            reportItems.each(function (i1, e) {\n                var x = $(e);\n                var title = Select2.util.stripDiacritics((x.text() ?? '').toUpperCase());\n                for (var $t1 = 0; $t1 < parts.length; $t1++) {\n                    var p = parts[$t1];\n                    if (p != null && !(title.indexOf(p) !== -1)) {\n                        x.addClass('non-match');\n                        break;\n                    }\n                }\n            });\n            var matchingItems = reportItems.not('.non-match');\n            var visibles = matchingItems.parents('li').add(matchingItems);\n            var nonVisibles = liList.not(visibles);\n            nonVisibles.hide().addClass('non-match');\n            visibles.show();\n            if (visibles.length <= 100) {\n                liList.children('ul').show();\n                liList.addClass('expanded');\n            }\n        }\n\n        protected categoryClick(e: JQueryEventObject) {\n            var li = $(e.target).closest('li');\n            if (li.hasClass('expanded')) {\n                li.find('ul').hide('fast');\n                li.removeClass('expanded');\n                li.find('li').removeClass('expanded');\n            }\n            else {\n                li.addClass('expanded');\n                li.children('ul').show('fast');\n                if (li.children('ul').children('li').length === 1 && !li.children('ul').children('li').hasClass('expanded')) {\n                    li.children('ul').children('li').children('.line').click();\n                }\n            }\n        }\n\n        protected reportLinkClick(e: JQueryEventObject) {\n            e.preventDefault();\n            var dialog = new ReportDialog({ reportKey: $(e.target).data('key') });\n        }\n    }\n\n    export interface ReportRetrieveRequest extends ServiceRequest {\n        ReportKey?: string;\n    }\n\n    export interface ReportRetrieveResponse extends ServiceResponse {\n        ReportKey?: string;\n        Properties?: PropertyItem[];\n        Title?: string;\n        InitialSettings?: any;\n        IsDataOnlyReport?: boolean;\n    }\n}\n", "\uFEFFimport { Decorators } from \"../../decorators\";\n\nexport interface ScriptContext {\n}\n\n@Decorators.registerClass('Serenity.ScriptContext')\nexport class ScriptContext {\n}", "\uFEFFimport { Decorators } from \"../decorators\";\n\n@Decorators.registerInterface('Serenity.IAsyncInit')\nexport class IAsyncInit {\n}", "\uFEFFimport { Widget } from \"./widget\";\n\nexport namespace WX {\n    export function getWidget<TWidget>(element: JQuery, type: any) {\n        return element.getWidget<TWidget>(type);\n    }\n\n    export var getWidgetName = Widget.getWidgetName;\n\n    export function hasOriginalEvent(e: any): boolean {\n        return !!!(typeof (e.originalEvent) === 'undefined');\n    }\n\n    export function change(widget: any, handler: any): void {\n        widget.change(handler)\n    }\n    \n    export function changeSelect2(widget: any, handler: any): void {\n        widget.changeSelect2(handler);\n    }\n\n    export function getGridField(widget: Widget<any>): JQuery {\n        return widget.getGridField();\n    }\n}\n\n", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { Widget } from \"./widget\";\nimport { LazyLoadHelper } from \"../helpers/lazyloadhelper\";\n\nexport interface GoogleMapOptions {\n    latitude?: any;\n    longitude?: any;\n    zoom?: any;\n    mapTypeId?: any;\n    markerTitle?: string;\n    markerLatitude?: any;\n    markerLongitude?: any;\n}\n\n@Decorators.registerEditor('Serenity.GoogleMap', [])\n@Decorators.element('<div/>')\nexport class GoogleMap extends Widget<GoogleMapOptions> {\n\n    private map: any;\n\n    constructor(container: JQuery, opt: GoogleMapOptions) {\n        super(container, opt);\n\n        // @ts-ignore\n        var center = new google.m ?? s.LatLng(\n            this.options.latitude  ?? 0,\n            this.options.longitude ?? 0);\n\n        var mapOpt: any = new Object();\n        mapOpt.center = center;\n        mapOpt.mapTypeId = this.options.mapTypeId ?? 'roadmap';\n        mapOpt.zoom = this.options.zoom ?? 15;\n        mapOpt.zoomControl = true;\n        // @ts-ignore\n        this.map = new google.maps.Map(container[0], mapOpt);\n\n        if (this.options.markerTitle != null) {\n            var markerOpt: any = new Object();\n\n            var lat = this.options.markerLatitude;\n            if (lat == null) {\n                lat = this.options.latitude ?? 0;\n            }\n            var lon = this.options.markerLongitude;\n            if (lon == null) {\n                lon = this.options.longitude ?? 0;\n            }\n            // @ts-ignore\n            markerOpt.position = new google.maps.LatLng(lat, lon);\n            markerOpt.map = this.map;\n            markerOpt.title = this.options.markerTitle;\n            markerOpt.animation = 2;\n            // @ts-ignore\n            new google.maps.Marker(markerOpt);\n        }\n\n        LazyLoadHelper.executeOnceWhenShown(container, () => {\n            // @ts-ignore\n            google.maps.event.trigger(this.map, 'resize', []);\n            this.map.setCenter(center);\n            // in case it wasn't visible (e.g. in dialog)\n        });\n    }\n\n    get_map(): any {\n        return this.map;\n    }\n}", "\uFEFFimport { Decorators } from \"../../decorators\";\nimport { IStringValue } from \"../../interfaces\";\nimport { isEmptyOrNull, isValue, ListRequest, ListResponse, RetrieveResponse, safeCast, serviceCall, ServiceOptions, localText, trimToNull } from \"@serenity-is/corelib/q\";\nimport { ValidationHelper } from \"../helpers/validationhelper\";\nimport { Widget } from \"../widgets/widget\";\nimport { WX } from \"../widgets/wx\";\n\n@Decorators.registerEditor('Serenity.Select2AjaxEditor', [IStringValue])\n@Decorators.element('<input type=\"hidden\" />')\nexport class Select2AjaxEditor<TOptions, TItem> extends Widget<TOptions> implements IStringValue {\n    pageSize: number = 50;\n\n    constructor(hidden: JQuery, opt: TOptions) {\n        super(hidden, opt);\n\n        var emptyItemText = this.emptyItemText();\n        if (emptyItemText != null)\n            hidden.attr(\"placeholder\", emptyItemText);\n\n        hidden.select2(this.getSelect2Options());\n\n        hidden.attr(\"type\", \"text\"); // jquery validate to work\n\n        hidden.on(\"change.\" + this.uniqueName, (e, x) => {\n            if (WX.hasOriginalEvent(e) || !x) {\n                if (ValidationHelper.getValidator(hidden) != null)\n                    hidden.valid();\n            }\n        });\n    }\n\n    protected emptyItemText(): string {\n        var txt = this.element.attr('placeholder');\n        if (txt == null) {\n            txt = localText('Controls.SelectEditor.EmptyItemText');\n        }\n        return txt;\n    }\n\n    protected getService(): string {\n        throw new Error(\"Not implemented!\");\n    }\n\n    protected query(request: ListRequest, callback: (p1: ListResponse<any>) => void): void {\n        var options: ServiceOptions<any> = {\n            blockUI: false,\n            service: this.getService() + '/List',\n            request: request,\n            onSuccess: function (response) {\n                callback(response);\n            }\n        };\n        this.executeQuery(options);\n    }\n\n    protected executeQuery(options: ServiceOptions<ListResponse<any>>): void {\n        serviceCall(options);\n    }\n\n    protected queryByKey(key: string, callback: (p1: any) => void): void {\n        var options: ServiceOptions<any> = {\n            blockUI: false,\n            service: this.getService() + '/Retrieve',\n            request: { EntityId: key },\n            onSuccess: function (response) {\n                callback(response.Entity);\n            }\n        };\n        this.executeQueryByKey(options);\n    }\n\n    protected executeQueryByKey(options: ServiceOptions<RetrieveResponse<any>>): void {\n        serviceCall(options);\n    }\n\n    protected getItemKey(item: any): string {\n        return null;\n    }\n\n    protected getItemText(item: any): string {\n        return null;\n    }\n\n    protected getTypeDelay(): number {\n        return 200;\n    }\n\n    protected getSelect2Options(): Select2Options {\n        var emptyItemText = this.emptyItemText();\n        var queryTimeout = 0;\n        return {\n            minimumResultsForSearch: 10,\n            placeHolder: (!isEmptyOrNull(emptyItemText) ? emptyItemText : null),\n            allowClear: isValue(emptyItemText),\n            query: query => {\n                var request = {\n                    ContainsText: trimToNull(query.term), Skip: (query.page - 1) * this.pageSize, Take: this.pageSize + 1\n                };\n\n                if (queryTimeout !== 0) {\n                    window.clearTimeout(queryTimeout);\n                }\n\n                var select2 = $(this.element).data('select2');\n                select2 && select2.search && select2.search.removeClass('select2-active').parent().removeClass('select2-active');\n\n                queryTimeout = window.setTimeout(() => {\n                    select2 && select2.search.addClass('select2-active').parent().addClass('select2-active');\n\n                    this.query(request, response => {\n                        query.callback({\n                            results: response.Entities.slice(0, this.pageSize).map(x => {\n                                return { id: this.getItemKey(x), text: this.getItemText(x), source: x };\n                            }), more: response.Entities.length >= this.pageSize\n                        });\n                    });\n                }, this.getTypeDelay());\n\n            },\n            initSelection: (element, callback) => {\n                var val = element.val();\n                if (isEmptyOrNull(val)) {\n                    callback(null);\n                    return;\n                }\n                this.queryByKey(val, result => {\n                    callback((result == null ? null : {\n                        id: this.getItemKey(result),\n                        text: this.getItemText(result),\n                        source: result\n                    }));\n                });\n            }\n        };\n    }\n\n    protected addInplaceCreate(title: string): void {\n        var self = this;\n        $('<a><b/></a>').addClass('inplace-button inplace-create')\n            .attr('title', title).insertAfter(this.element).click(function (e) {\n                self.inplaceCreateClick(e);\n            });\n\n        this.get_select2Container().add(this.element)\n            .addClass('has-inplace-button');\n    }\n\n    protected inplaceCreateClick(e: any): void {\n    }\n\n    protected get_select2Container(): JQuery {\n        return this.element.prevAll('.select2-container');\n    }\n\n    get_value(): string {\n        return safeCast(this.element.select2('val'), String);\n    }\n\n    get value(): string {\n        return this.get_value();\n    }\n\n    set_value(value: string) {\n        if (value !== this.get_value()) {\n            var el = this.element;\n            el.select2('val', value);\n            el.data('select2-change-triggered', true);\n            try {\n                el.triggerHandler('change', [true]); // valueSet: true\n            }\n            finally {\n                el.data('select2-change-triggered', false);\n            }\n        }\n    }\n\n    set value(v: string) {\n        this.set_value(v);\n    }\n}"],
  "mappings": "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",
  "names": ["ColumnSelection", "RetrieveColumnSelection", "SummaryType", "Criteria", "addAttribute", "addTypeMember", "MemberType", "ISlickFormatter", "regClass", "regEditor", "regIntf", "regEnum", "startsWith", "EditorAttribute", "Attr", "name", "target", "regClass", "EnumKeyAttribute", "value", "__decorateClass", "DisplayNameAttribute", "displayName", "CategoryAttribute", "category", "ColumnsKeyAttribute", "CssClassAttribute", "cssClass", "DefaultValueAttribute", "DialogTypeAttribute", "EditorOptionAttribute", "key", "EditorTypeAttributeBase", "editorType", "editorParams", "EditorTypeAttribute", "ElementAttribute", "EntityTypeAttribute", "FilterableAttribute", "FlexifyAttribute", "FormKeyAttribute", "GeneratedCodeAttribute", "origin", "HiddenAttribute", "HintAttribute", "hint", "IdPropertyAttribute", "InsertableAttribute", "IsActivePropertyAttribute", "ItemNameAttribute", "LocalTextPrefixAttribute", "MaximizableAttribute", "MaxLengthAttribute", "maxLength", "NamePropertyAttribute", "OneWayAttribute", "OptionAttribute", "OptionsTypeAttribute", "PanelAttribute", "PlaceholderAttribute", "ReadOnlyAttribute", "RequiredAttribute", "isRequired", "ResizableAttribute", "ResponsiveAttribute", "ServiceAttribute", "UpdatableAttribute", "Decorators", "registerClass", "nameOrIntf", "intf2", "registerInterface", "regIntf", "registerEditor", "regEditor", "registerEnum", "enumKey", "regEnum", "addAttribute", "registerEnumType", "registerFormatter", "ISlickFormatter", "option", "propertyKey", "isGetSet", "startsWith", "memberName", "addTypeMember", "MemberType", "dialogType", "editor", "attr", "EditorAttribute", "element", "filterable", "flexify", "itemName", "maximizable", "optionsType", "panel", "resizable", "responsive", "service", "IBooleanValue", "__decorateClass", "Decorators", "IDoubleValue", "__decorateClass", "Decorators", "IDialog", "__decorateClass", "Decorators", "IEditDialog", "__decorateClass", "Decorators", "IGetEditValue", "__decorateClass", "Decorators", "IReadOnly", "__decorateClass", "Decorators", "ISetEditValue", "__decorateClass", "Decorators", "IStringValue", "__decorateClass", "Decorators", "IValidateRequired", "__decorateClass", "Decorators", "registerEnum", "CaptureOperationType", "registerEnum", "isEmptyOrNull", "ReflectionUtils", "getPropertyValue", "o", "property", "d", "getter", "camelCase", "makeCamelCase", "setPropertyValue", "value", "setter", "s", "hasNonUppercase", "numUppercaseChars", "index", "ArgumentNullException", "Exception", "htmlEncode", "isAssignableFrom", "isEmptyOrNull", "notifyError", "Config", "endsWith", "getType", "getTypeNameProp", "getTypes", "commonTypeRegistry", "isMatch", "attrKey", "suffix", "knownTypes", "reset", "search", "key", "type", "ns", "k", "init", "fullName", "akey", "p", "tryGet", "_a", "DialogTypeRegistry", "registry", "commonTypeRegistry", "type", "isAssignableFrom", "IDialog", "get", "key", "isEmptyOrNull", "ArgumentNullException", "message", "htmlEncode", "notifyError", "Exception", "reset", "tryGet", "ArgumentNullException", "EditorAttribute", "Exception", "getAttributes", "htmlEncode", "isAssignableFrom", "isEmptyOrNull", "notifyError", "_a", "$", "jquery_module_default", "jQueryPatch", "$", "applyJQueryUIFixes", "event", "orig", "elems", "events", "elem", "i", "e", "cloned", "addValRule", "ArgumentNullException", "Config", "Exception", "format", "getAttributes", "getInstanceType", "getTypeFullName", "getTypeShortName", "isAssignableFrom", "notifyError", "replaceAll", "startsWith", "reactPatch", "_a", "_b", "globalObj", "Widget", "element", "options", "getInstanceType", "Exception", "format", "e", "type", "classList", "fullClass", "replaceAll", "getTypeFullName", "k", "Config", "startsWith", "getTypeShortName", "v", "i", "s", "editorType", "elementAttr", "getAttributes", "ElementAttribute", "elementHtml", "jquery_module_default", "eventClass", "rule", "addValRule", "handler", "valueSet", "params", "widget", "isAssignableFrom", "IDialog", "action", "__decorateClass", "Decorators", "w", "widgetName", "data", "key", "ArgumentNullException", "message", "notifyError", "jQueryPatch", "EditorTypeRegistry", "registry", "commonTypeRegistry", "type", "getAttributes", "EditorAttribute", "isAssignableFrom", "Widget", "get", "key", "isEmptyOrNull", "ArgumentNullException", "message", "htmlEncode", "notifyError", "Exception", "reset", "tryGet", "Exception", "getAttributes", "htmlEncode", "isEnum", "notifyError", "EnumTypeRegistry", "registry", "commonTypeRegistry", "isEnum", "type", "_a", "getAttributes", "EnumKeyAttribute", "get", "key", "message", "htmlEncode", "notifyError", "Exception", "reset", "tryGet", "ISlickFormatter", "executeOnceWhenVisible", "executeEverytimeWhenVisible", "LazyLoadHelper", "PrefixedContext", "idPrefix", "id", "type", "htmlEncode", "isEmptyOrNull", "startsWith", "PopupMenuButton", "Widget", "div", "opt", "_a", "_b", "e", "_c", "_d", "menu", "uq", "x", "__decorateClass", "Decorators", "PopupToolButton", "Toolbar", "options", "container", "buttons", "currentCount", "i", "button", "b", "cssClass", "btn", "isEmptyOrNull", "text", "htmlEncode", "klass", "startsWith", "e1", "action", "className", "el", "canLoadScriptData", "Config", "format", "getBaseType", "getInstanceType", "getTemplate", "getTypeFullName", "getTypeShortName", "replaceAll", "startsWith", "localText", "TemplatedWidget", "Widget", "id", "type", "s", "dollar", "getTypeShortName", "getInstanceType", "fullName", "getTypeFullName", "templateNames", "cachedName", "name", "k", "Config", "startsWith", "canLoadScriptData", "replaceAll", "getBaseType", "templateName", "script", "template", "getTemplate", "format", "widgetMarkup", "end", "idx", "key", "txt", "localText", "useIdPrefix", "__decorateClass", "Decorators", "prefix", "idPrefixHandler", "target", "p", "bsModalMarkup", "closePanel", "Config", "dialogButtonToBS", "dialogButtonToUI", "endsWith", "getAttributes", "getInstanceType", "isEmptyOrNull", "layoutFillHeight", "newBodyDiv", "openPanel", "parseInteger", "positionToastContainer", "validateOptions", "flexY", "flexX", "Flexify", "Widget", "container", "options", "LazyLoadHelper", "designWidth", "designHeight", "tabs", "element", "xFactor", "yFactor", "width", "initialWidth", "height", "initialHeight", "containers", "tabPanels", "i", "e", "DialogExtensions", "dialogResizable", "dialog", "w", "h", "mw", "mh", "_a", "dlg", "dialogMaximizable", "dialogFlexify", "Flexify", "_a", "jquery_validation_module_default", "jquery_module_default", "TemplatedDialog", "TemplatedWidget", "options", "newBodyDiv", "panelAttr", "getAttributes", "getInstanceType", "PanelAttribute", "Config", "ResponsiveAttribute", "element", "name", "cssSize", "endsWith", "i", "parseInteger", "opt", "dialogClass", "size", "dialog", "sizeHelper", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "modal", "e", "type", "DialogExtensions", "FlexifyAttribute", "MaximizableAttribute", "self", "title", "modalClass", "div", "bsModalMarkup", "footer", "buttons", "x", "dialogButtonToBS", "toolbarDiv", "hotkeyContext", "Toolbar", "form", "valOptions", "jquery_validation_module_default", "validateOptions", "asPanel", "uniqueName", "openPanel", "closePanel", "index", "el", "positionToastContainer", "dialogButtonToUI", "ResizableAttribute", "value", "pt", "isEmptyOrNull", "oldTitle", "tabsDiv", "dlg", "uiDialog", "data", "pos", "layoutFillHeight", "d", "__decorateClass", "Decorators", "IDialog", "validateOptions", "TemplatedPanel", "TemplatedWidget", "container", "options", "_a", "_b", "i", "e", "tabsDiv", "toolbarDiv", "opt", "Toolbar", "form", "valOptions", "validateOptions", "__decorateClass", "Decorators", "Exception", "validatorAbortHandler", "ValidationHelper", "asyncSubmit", "form", "validateBeforeSave", "submitHandler", "validator", "valSettings", "submit", "getValidator", "element", "VX", "addValidationRule", "eventClass", "rule", "removeValidationRule", "validateElement", "widget", "findElementWithRelativeId", "isEmptyOrNull", "notifyError", "CascadedWidgetLink", "parentType", "widget", "parentChange", "e", "isEmptyOrNull", "parent", "findElementWithRelativeId", "notifyError", "value", "__decorateClass", "Decorators", "TabsExtensions", "setDisabled", "tabs", "tabKey", "isDisabled", "_a", "_b", "ibk", "indexByKey", "index", "toggle", "visible", "activeTabKey", "href", "prefix", "lastIndex", "el", "selectTab", "getInstanceType", "getMembers", "isInstanceOfType", "MemberType", "ReflectionOptionsSetter", "set", "target", "options", "type", "getInstanceType", "propByName", "fieldByName", "props", "getMembers", "MemberType", "propList", "a", "isInstanceOfType", "OptionAttribute", "DisplayNameAttribute", "k", "ReflectionUtils", "fields", "fieldList", "x1", "$t2", "k1", "keys", "k2", "v", "cc", "p", "func", "f", "any", "Authorization", "Culture", "extend", "getAttributes", "getTypeShortName", "isBS3", "isBS5Plus", "isEmptyOrNull", "startsWith", "localText", "trimToEmpty", "trimToNull", "tryGetText", "cast", "isInstanceOfType", "isTrimmedEmpty", "parseDecimal", "safeCast", "localText", "tryGetText", "EditorUtils", "getDisplayText", "editor", "_a", "_b", "_c", "select2", "data", "value", "getValue", "tryGetText", "dummy", "target", "saveValue", "item", "getEditValue", "safeCast", "IGetEditValue", "stringValue", "IStringValue", "booleanValue", "IBooleanValue", "doubleValue", "IDoubleValue", "setValue", "source", "loadValue", "setEditValue", "ISetEditValue", "cast", "value1", "d", "isInstanceOfType", "isTrimmedEmpty", "parseDecimal", "v", "setReadonly", "elements", "isReadOnly", "index", "el", "elx", "type", "setReadOnly", "widget", "readOnly", "IReadOnly", "setRequired", "isRequired", "req", "IValidateRequired", "gridField", "hasSupItem", "localText", "setContainerReadOnly", "container", "i", "e", "w", "Widget", "PropertyGrid", "Widget", "div", "opt", "_a", "title", "animate", "intoView", "items", "useTabs", "any", "x", "isEmptyOrNull", "itemsWithoutTab", "f", "itemsWithTab", "ul", "tc", "tabIndex", "i", "tab", "trimToEmpty", "tabItems", "j", "li", "isBS3", "isBS5Plus", "tabID", "prefix", "pane", "container", "_b", "categoryIndexes", "categoriesDiv", "useCategories", "linkContainer", "fieldContainer", "priorCategory", "item", "category", "categoryDiv", "editor", "collapsed", "img", "e", "text", "getKey", "startsWith", "local", "tryGetText", "local1", "fieldDiv", "splitted", "editorId", "hint", "prefix1", "placeHolder", "prefix2", "label", "localText", "editorType", "EditorTypeRegistry", "element", "editorParams", "optionsType", "optionsAttr", "getAttributes", "OptionsTypeAttribute", "extend", "getTypeShortName", "ReflectionOptionsSetter", "order", "result", "categoryOrder", "trimToNull", "split", "s", "x1", "idx", "itemIndex", "itemCategory", "name1", "cat1", "self", "y", "c", "xcategory", "ycategory", "c1", "c2", "Culture", "index", "value", "source", "target", "EditorUtils", "widget", "isReadOnly", "elements", "isRequired", "maxLength", "val", "PropertyGridMode", "Authorization", "readOnly", "hidden", "callback", "__decorateClass", "Decorators", "endsWith", "getAttributes", "getForm", "getInstanceType", "getTypeFullName", "PropertyPanel", "TemplatedPanel", "container", "options", "pgDiv", "pgOptions", "PropertyGrid", "attributes", "getAttributes", "getInstanceType", "FormKeyAttribute", "name", "getTypeFullName", "px", "endsWith", "formKey", "getForm", "entity", "value", "__decorateClass", "Decorators", "SubDialogHelper", "bindToDataChange", "dialog", "owner", "dataChange", "useTimeout", "widgetName", "e", "dci", "triggerDataChange", "triggerDataChanged", "element", "bubbleDataChange", "cascade", "cascadedDialog", "ofElement", "cascadedDialogOffset", "endsWith", "getAttributes", "getFormData", "getFormDataAsync", "getInstanceType", "getTypeFullName", "isEmptyOrNull", "ScriptData", "localText", "PropertyDialog", "TemplatedDialog", "opt", "__async", "localText", "pgDiv", "pgOptions", "PropertyGrid", "attributes", "getAttributes", "getInstanceType", "FormKeyAttribute", "name", "getTypeFullName", "px", "endsWith", "_a", "formKey", "ScriptData", "isEmptyOrNull", "getFormData", "getFormDataAsync", "entity", "value", "__decorateClass", "Decorators", "StringEditor", "Widget", "input", "value", "__decorateClass", "Decorators", "IStringValue", "PasswordEditor", "StringEditor", "input", "__decorateClass", "Decorators", "TextAreaEditor", "Widget", "input", "opt", "_a", "_b", "value", "__decorateClass", "Decorators", "IStringValue", "BooleanEditor", "Widget", "value", "__decorateClass", "Decorators", "IBooleanValue", "Culture", "extend", "formatNumber", "parseDecimal", "DecimalEditor", "Widget", "input", "opt", "_a", "_b", "numericOptions", "extend", "val", "parseDecimal", "value", "formatNumber", "v", "Culture", "__decorateClass", "Decorators", "IDoubleValue", "extend", "formatNumber", "isTrimmedEmpty", "parseInteger", "trimToNull", "IntegerEditor", "Widget", "input", "opt", "_a", "_b", "numericOptions", "extend", "DecimalEditor", "val", "isTrimmedEmpty", "trimToNull", "parseInteger", "value", "formatNumber", "v", "__decorateClass", "Decorators", "IDoubleValue", "addValidationRule", "Culture", "format", "formatDate", "Invariant", "isEmptyOrNull", "parseDate", "parseISODateTime", "replaceAll", "localText", "today", "datePickerIconSvg", "DateEditor", "Widget", "input", "_a", "_b", "inp", "inst", "e", "today", "addValidationRule", "e1", "value", "isEmptyOrNull", "Invariant", "formatDate", "format", "localText", "Culture", "v", "parseISODateTime", "val", "replaceAll", "isNumeric", "c", "dialogIndex", "widget", "zIndex", "x", "d", "parseDate", "__decorateClass", "Decorators", "IStringValue", "IReadOnly", "jQueryDatepickerInitialization", "order", "s", "culture", "addOption", "addValidationRule", "Culture", "format", "formatDate", "formatISODateTimeUTC", "Invariant", "isEmptyOrNull", "parseDate", "parseISODateTime", "round", "localText", "today", "trunc", "tryGetText", "DateTimeEditor", "Widget", "input", "opt", "_a", "_b", "_c", "_d", "_e", "DateEditor", "e", "after", "e3", "timeOpt", "t", "addOption", "addValidationRule", "e1", "value", "isEmptyOrNull", "Invariant", "format", "localText", "formatDate", "before", "e2", "Culture", "result", "datePart", "timePart", "parseDate", "formatISODateTimeUTC", "parseISODateTime", "today", "val", "tryGetText", "v", "EditorUtils", "date", "minutesStep", "m", "trunc", "round", "fromHour", "fromMin", "toHour", "toMin", "stepMins", "list", "hour", "min", "__decorateClass", "Decorators", "IStringValue", "IReadOnly", "addOption", "toId", "TimeEditor", "Widget", "input", "opt", "addOption", "h", "m", "hour", "toId", "minute", "value", "EditorUtils", "__decorateClass", "Decorators", "IDoubleValue", "IReadOnly", "isEmptyOrNull", "trimToNull", "tryGetText", "EmailEditor", "Widget", "input", "opt", "spanAt", "domain", "validator", "isEmptyOrNull", "e", "e1", "e2", "_a", "value", "element", "tryGetText", "domainValue", "trimToNull", "parts", "v", "__decorateClass", "Decorators", "IStringValue", "IReadOnly", "EmailAddressEditor", "StringEditor", "input", "__decorateClass", "Decorators", "trimToNull", "URLEditor", "StringEditor", "input", "validator", "value", "trimToNull", "__decorateClass", "Decorators", "IStringValue", "Enum", "getAttributes", "getLookup", "isEmptyOrNull", "tryGetText", "RadioButtonEditor", "Widget", "input", "opt", "_a", "isEmptyOrNull", "enumType", "EnumTypeRegistry", "enumKey", "enumKeyAttr", "getAttributes", "EnumKeyAttribute", "values", "Enum", "x", "name", "tryGetText", "lookup", "getLookup", "item", "textValue", "text", "idValue", "id", "value", "label", "inputs", "checks", "v", "__decorateClass", "Decorators", "IStringValue", "IReadOnly", "_Select2", "select2_module_default", "Authorization", "any", "isEmptyOrNull", "isTrimmedEmpty", "localText", "startsWith", "trimToEmpty", "trimToNull", "Select2Editor", "Widget", "hidden", "opt", "emptyItemText", "select2Options", "e", "valueSet", "localText", "_a", "_b", "_c", "_d", "query", "results", "item", "value", "items", "isEmptyOrNull", "pageSize", "searchQuery", "trimToNull", "select2", "_e", "result", "element", "callback", "val", "isMultiple", "idList", "x", "v", "any", "z", "isAutoComplete", "list", "item2", "it", "key", "text", "source", "disabled", "addTitle", "editTitle", "self", "inplaceButton", "isNew", "values", "e3", "q", "index", "values1", "Authorization", "getName", "s", "select2_module_default", "isTrimmedEmpty", "isAsyncSource", "x1", "property", "target", "getText", "term", "contains", "filter", "startsWith", "el", "selectedValue", "selectedValues", "str", "readOnly", "parent", "EditorUtils", "CascadedWidgetLink", "p", "fld", "itemKey", "ReflectionUtils", "dialogTypeKey", "dialogType", "DialogTypeRegistry", "entity", "dialog", "SubDialogHelper", "dci", "id", "id1", "idx1", "editItem", "trimToEmpty", "__decorateClass", "Decorators", "ISetEditValue", "IGetEditValue", "IStringValue", "IReadOnly", "isEmptyOrNull", "SelectEditor", "Select2Editor", "hidden", "opt", "isEmptyOrNull", "_a", "items", "isStrings", "item", "key", "text", "__decorateClass", "Decorators", "startsWith", "DateYearEditor", "SelectEditor", "hidden", "opt", "_a", "_b", "years", "minYear", "maxYear", "startsWith", "i", "i1", "__decorateClass", "Decorators", "Enum", "getAttributes", "tryGetText", "EnumEditor", "Select2Editor", "hidden", "opt", "_a", "enumType", "EnumTypeRegistry", "enumKey", "enumKeyAttr", "getAttributes", "EnumKeyAttribute", "values", "Enum", "x", "name", "tryGetText", "__decorateClass", "Decorators", "endsWith", "getInstanceType", "getLookup", "getLookupAsync", "getTypeFullName", "reloadLookup", "ScriptData", "LookupEditorBase", "Select2Editor", "input", "opt", "self", "ScriptData", "key", "getTypeFullName", "getInstanceType", "idx", "endsWith", "getLookupAsync", "getLookup", "lookup", "item", "textValue", "items", "query", "results", "x", "getText", "dialogTypeKey", "entity", "term", "reloadLookup", "__decorateClass", "Decorators", "LookupEditor", "hidden", "ColumnSelection", "Criteria", "isEmptyOrNull", "resolveUrl", "serviceCall", "startsWith", "ServiceLookupEditorBase", "Select2Editor", "input", "opt", "dialogTypeKey", "service", "startsWith", "url", "resolveUrl", "include", "idField", "textField", "val", "isEmptyOrNull", "fld", "Criteria", "idList", "query", "request", "ColumnSelection", "results", "response", "items", "serviceCall", "__decorateClass", "Decorators", "ServiceLookupEditor", "hidden", "endsWith", "isEmptyOrNull", "isTrimmedEmpty", "resolveUrl", "localText", "trimToNull", "HtmlContentEditor", "Widget", "textArea", "opt", "id", "isTrimmedEmpty", "e", "value", "trimToNull", "localText", "LazyLoadHelper", "config", "x", "_a", "CKEDITOR", "lang", "x1", "resolveUrl", "instance", "v", "isEmptyOrNull", "path", "endsWith", "script", "__decorateClass", "Decorators", "IStringValue", "IReadOnly", "HtmlNoteContentEditor", "HtmlReportContentEditor", "MaskedEditor", "Widget", "input", "opt", "_a", "value", "__decorateClass", "Decorators", "IStringValue", "addValidationRule", "isEmptyOrNull", "localText", "Recaptcha", "Widget", "div", "opt", "_a", "src", "lng", "valInput", "gro", "input", "self", "addValidationRule", "e", "isEmptyOrNull", "localText", "value", "__decorateClass", "Decorators", "IStringValue", "alertDialog", "htmlEncode", "blockUI", "blockUndo", "endsWith", "format", "iframeDialog", "isEmptyOrNull", "notifyError", "replaceAll", "resolveUrl", "round", "startsWith", "localText", "UploadHelper", "addUploadInput", "options", "uploadUrl", "uploadInput", "e", "data", "response", "opt", "_a", "xhr", "json", "html", "e1", "data1", "percent", "checkImageConstraints", "file", "fileSizeDisplay", "fileNameSizeDisplay", "name", "bytes", "byteSize", "suffix", "sizeParts", "value", "hasImageExtension", "filename", "thumbFileName", "idx", "dbFileUrl", "colorBox", "link", "populateFileSymbols", "container", "items", "displayOriginalName", "urlPrefix", "index", "item", "li", "isImage", "editLink", "thumb", "originalName", "fileName", "endsWith", "extend", "isEmptyOrNull", "isInstanceOfType", "isTrimmedEmpty", "replaceAll", "startsWith", "localText", "trimToNull", "FileUploadEditor", "Widget", "div", "opt", "isEmptyOrNull", "Toolbar", "uio", "UploadHelper", "response", "name", "data", "newEntity", "validator", "localText", "displayOriginalName", "isTrimmedEmpty", "trimToNull", "addButton", "delButton", "value", "e", "copy", "extend", "stringValue", "idx", "v", "property", "target", "source", "_a", "s", "replaceAll", "__decorateClass", "Decorators", "IReadOnly", "IGetEditValue", "ISetEditValue", "IValidateRequired", "ImageUploadEditor", "MultipleFileUploadEditor", "self", "addFileButton", "i", "x", "ev", "val", "isInstanceOfType", "json", "startsWith", "endsWith", "MultipleImageUploadEditor", "ArgumentNullException", "Criteria", "delegateCombine", "delegateRemove", "formatDate", "isEmptyOrNull", "localText", "notifyWarning", "parseDate", "toId", "tryGetText", "QuickFilterBar", "Widget", "container", "options", "_a", "filters", "f", "filter", "opt", "ArgumentNullException", "item", "title", "tryGetText", "quickFilter", "isEmptyOrNull", "widget", "e", "submitHandler", "request", "value", "EditorUtils", "active", "args", "e1", "x", "field", "end", "DateEditor", "e2", "date1", "parseDate", "notifyWarning", "localText", "Criteria", "date2", "next", "formatDate", "w", "l", "v1", "v2", "text1", "text2", "w1", "w2", "state", "useUtc", "DateTimeEditor", "i", "x1", "yes", "no", "items", "trueText", "falseText", "SelectEditor", "toId", "action", "delegateCombine", "delegateRemove", "type", "el", "__decorateClass", "Decorators", "isEmptyOrNull", "isValue", "localText", "trim", "QuickSearchInput", "Widget", "input", "opt", "_a", "_b", "localText", "trim", "self", "isValue", "a", "menu", "item", "field", "e", "PopupMenuButton", "e1", "value", "isEmptyOrNull", "qsf", "_c", "done", "results", "el", "__decorateClass", "Decorators", "FilterOperators", "ArgumentNullException", "Criteria", "Culture", "delegateCombine", "delegateRemove", "localText", "tryGetText", "FilterStore", "fields", "ArgumentNullException", "x", "y", "titleX", "tryGetText", "titleY", "Culture", "field", "items", "inParens", "currentBlock", "isBlockOr", "criteria", "i", "line", "Criteria", "displayText", "localText", "value", "delegateCombine", "delegateRemove", "__decorateClass", "Decorators", "ArgumentNullException", "Config", "Criteria", "deepClone", "endsWith", "Exception", "extend", "format", "formatDate", "getInstanceType", "getTypeFullName", "getTypes", "isAssignableFrom", "isEmptyOrNull", "parseISODateTime", "startsWith", "localText", "tryGetText", "IFiltering", "__decorateClass", "Decorators", "IQuickFiltering", "BaseFiltering", "value", "list", "FilterOperators", "Exception", "format", "getTypeFullName", "getInstanceType", "op", "_a", "_b", "tryGetText", "field", "values", "result", "text", "Criteria", "state", "input", "ArgumentNullException", "localText", "filter", "StringEditor", "deepClone", "Filtering", "name", "BaseEditorFiltering", "editorType", "Widget", "isEmptyOrNull", "opt", "extend", "EditorUtils", "DateFiltering", "DateEditor", "BooleanFiltering", "DateTimeFiltering", "DateTimeEditor", "date", "parseISODateTime", "next", "criteria", "dateValue", "formatDate", "nextValue", "DecimalFiltering", "DecimalEditor", "EditorFiltering", "EditorTypeRegistry", "e", "EnumFiltering", "EnumEditor", "IntegerFiltering", "IntegerEditor", "LookupFiltering", "LookupEditor", "ops", "ServiceLookupFiltering", "ServiceLookupEditor", "StringFiltering", "FilteringTypeRegistry", "knownTypes", "initialize", "type", "getTypes", "isAssignableFrom", "fullName", "k", "Config", "startsWith", "kx", "setTypeKeysWithoutFilterHandlerSuffix", "suffix", "endsWith", "p", "reset", "get", "key", "formatterType", "FilterWidgetBase", "TemplatedWidget", "div", "opt", "FilterStore", "value", "__decorateClass", "Decorators", "cast", "isEmptyOrNull", "localText", "tryGetText", "FilterFieldSelect", "Select2Editor", "hidden", "fields", "_a", "_b", "field", "tryGetText", "isEmptyOrNull", "localText", "opt", "__decorateClass", "Decorators", "FilterOperatorSelect", "source", "op", "title", "FilterPanel", "FilterWidgetBase", "div", "value", "items", "item", "row", "divl", "fieldSelect", "operatorSelect", "filtering", "filterLines", "errorText", "i", "line", "criteria", "result", "index", "fieldInput", "val", "popupField", "emptyRow", "isLastRowOr", "parenDiv", "e", "andor", "fieldSel", "opSelect", "select", "fieldName", "isEmpty", "operators", "cast", "IFiltering", "filteringType", "FilteringTypeRegistry", "editorDiv", "ReflectionOptionsSetter", "firstInput", "$t1", "ops", "x", "rows", "inParen", "i1", "row1", "divParen", "lp", "rp", "notifyError", "localText", "FilterDialog", "TemplatedDialog", "FilterPanel", "localText", "notifyError", "__decorateClass", "Decorators", "localText", "trimToNull", "FilterDisplayBar", "FilterWidgetBase", "div", "localText", "openFilterDialog", "e", "dialog", "FilterDialog", "e1", "displayText", "trimToNull", "__decorateClass", "Decorators", "htmlEncode", "extend", "localText", "SlickPager", "Widget", "div", "o", "extend", "v", "htmlEncode", "localText", "self", "e", "opt", "sel", "nx", "ctype", "view", "info", "pages", "newp", "nv", "r1", "r2", "stat", "__decorateClass", "Decorators", "Authorization", "clearKeys", "Culture", "htmlEncode", "isEmptyOrNull", "replaceAll", "safeCast", "serviceCall", "startsWith", "localText", "tryGetText", "Culture", "Enum", "format", "formatDate", "formatNumber", "getAttributes", "getTypeFullName", "htmlEncode", "isEmptyOrNull", "ISlickFormatter", "parseDecimal", "parseISODateTime", "replaceAll", "resolveUrl", "safeCast", "startsWith", "tryGetText", "IInitializeColumn", "__decorateClass", "Decorators", "BooleanFormatter", "ctx", "_a", "_b", "text", "tryGetText", "htmlEncode", "CheckboxFormatter", "DateFormatter", "Culture", "value", "format", "date", "parseISODateTime", "formatDate", "DateTimeFormatter", "EnumFormatter", "EnumTypeRegistry", "enumType", "name", "Enum", "enumKeyAttr", "getAttributes", "EnumKeyAttribute", "enumKey", "getTypeFullName", "isEmptyOrNull", "FileDownloadFormatter", "dbFile", "safeCast", "downloadUrl", "originalName", "iconClass", "filename", "replaceAll", "resolveUrl", "column", "ISlickFormatter", "MinuteFormatter", "hour", "minute", "hourStr", "minuteStr", "NumberFormatter", "formatNumber", "dbl", "parseDecimal", "UrlFormatter", "_c", "_d", "url", "startsWith", "display", "s", "ArgumentNullException", "Exception", "htmlEncode", "isAssignableFrom", "isEmptyOrNull", "ISlickFormatter", "notifyError", "FormatterTypeRegistry", "registry", "commonTypeRegistry", "type", "isAssignableFrom", "ISlickFormatter", "get", "key", "isEmptyOrNull", "ArgumentNullException", "message", "htmlEncode", "notifyError", "Exception", "reset", "tryGet", "GridRowSelectionMixin", "grid", "options", "e", "p", "item", "id", "i", "e1", "u", "clearKeys", "items", "x", "id1", "selectAllButton", "keys", "k", "getMixin", "ctx", "mixin", "isChecked", "__decorateClass", "Decorators", "GridRadioSelectionMixin", "key", "row", "cell", "value", "column", "GridSelectAllButtonHelper", "update", "getSelected", "toolbar", "btn", "Toolbar", "define", "getGrid", "getId", "setSelected", "text", "onClick", "_a", "tryGetText", "view", "makeSelected", "GridUtils", "addToggleButton", "toolDiv", "cssClass", "callback", "hint", "initial", "div", "pressed", "addIncludeDeletedToggle", "includeDeleted", "oldSubmit", "v", "localText", "addQuickSearchInput", "fields", "onChange", "input", "searchText", "searchField", "lastDoneEvent", "addQuickSearchInputCustom", "field", "query", "done", "ui", "container", "onSearch", "QuickSearchInput", "makeOrderable", "handleMove", "moveRowsPlugin", "data", "data1", "$t1", "makeOrderableWithUpdateRequest", "getDisplayOrder", "service", "getUpdateRequest", "rows", "insertBefore", "_b", "order", "index", "next", "serviceCall", "response", "PropertyItemSlickConverter", "toSlickColumns", "result", "toSlickColumn", "Authorization", "name", "isEmptyOrNull", "formatterType", "FormatterTypeRegistry", "formatter", "ReflectionOptionsSetter", "initializer", "safeCast", "IInitializeColumn", "SlickFormatting", "getEnumText", "enumKey", "EnumFormatter", "treeToggle", "getView", "indent", "spacer", "idx", "nextIndent", "date", "format", "Culture", "htmlEncode", "DateFormatter", "dateTime", "checkBox", "number", "NumberFormatter", "getItemType", "link", "getItemId", "itemLinkText", "itemType", "extraClass", "encode", "replaceAll", "itemLink", "idField", "getText", "SlickHelper", "setDefaults", "columns", "localTextPrefix", "col", "startsWith", "SlickTreeHelper", "filterCustom", "getParent", "parent", "loop", "filterById", "getParentId", "parentId", "setCollapsed", "collapsed", "setCollapsedFlag", "setIndents", "depth", "depths", "line", "toggleClick", "target", "Authorization", "Criteria", "debounce", "deepClone", "endsWith", "extend", "getAttributes", "getColumnsData", "getColumnsDataAsync", "getInstanceType", "getTypeFullName", "htmlEncode", "indexOf", "isEmptyOrNull", "isInstanceOfType", "layoutFillHeight", "LayoutTimer", "ScriptData", "setEquality", "startsWith", "trimEnd", "trimToNull", "tryGetText", "RemoteView", "AutoTooltips", "Grid", "DataGrid", "Widget", "container", "options", "self", "layout", "LayoutTimer", "debounce", "buttons", "_a", "__async", "attrType", "getAttributes", "getInstanceType", "responsiveHeight", "madeAutoHeight", "shouldAutoHeight", "i", "e", "layoutFillHeight", "filters", "QuickFilterBar", "filter", "pre", "x", "Authorization", "item", "_b", "quick", "name", "title", "tryGetText", "filteringType", "FilteringTypeRegistry", "DateFiltering", "DateTimeFiltering", "BooleanFiltering", "q", "f", "trueText", "falseText", "filtering", "isInstanceOfType", "IQuickFiltering", "ReflectionOptionsSetter", "FilterOperators", "extend", "deepClone", "type", "field", "el", "isEmptyOrNull", "GridUtils", "index", "activeFieldName", "deletedFieldName", "value", "itemClass", "columns", "SlickHelper", "delta", "scale", "col", "LazyLoadHelper", "column", "FilterStore", "c", "s", "visibleColumns", "slickOptions", "grid", "Grid", "AutoTooltips", "sortBy", "mapped", "endsWith", "trimEnd", "row", "p", "e1", "p1", "e2", "p2", "e3", "p3", "entityOrId", "itemType", "cell", "target", "SlickFormatting", "rows", "d", "view", "view1", "response", "view2", "include", "criteria", "Criteria", "setEquality", "array", "key", "opt", "RemoteView", "x1", "y", "list", "attr", "FilterableAttribute", "filterBarDiv", "FilterDisplayBar", "pagerDiv", "SlickPager", "toolbarDiv", "Toolbar", "idField", "text", "cssClass", "encode", "ColumnsKeyAttribute", "columnsKey", "ScriptData", "getColumnsData", "getColumnsDataAsync", "propertyItems", "PropertyItemSlickConverter", "oldFormat", "css", "ctx", "htmlEncode", "ctx1", "rowDefinition", "LocalTextPrefixAttribute", "IdPropertyAttribute", "IsActivePropertyAttribute", "getKey", "localTextPrefix", "local", "yes", "no", "path", "getTypeFullName", "storage", "json", "trimToNull", "startsWith", "settings", "flags", "colById", "updateColById", "cl", "$t1", "visible", "newColumns", "$t2", "$t3", "c1", "$t4", "x2", "column1", "sortColumns", "x3", "a", "b", "$t5", "x4", "column2", "x5", "items", "includeDeletedToggle", "widget", "state", "loadState", "EditorUtils", "qsInput", "qsWidget", "QuickSearchInput", "sort", "indexOf", "saveState", "getDisplayText", "filterLabel", "displayText", "__decorateClass", "Decorators", "IReadOnly", "Authorization", "centerDialog", "Culture", "htmlEncode", "Router", "localText", "trimToNull", "ColumnPickerDialog", "TemplatedDialog", "QuickSearchInput", "fld", "txt", "done", "trimToNull", "x", "e", "localText", "grid", "onClick", "picker", "initialSettings", "visible", "Router", "arg", "liByKey", "el", "last", "id", "li", "key", "newColumns", "col", "opt", "allowHide", "htmlEncode", "c", "hidden", "Authorization", "hiddenColumns", "b", "Culture", "evt", "centerDialog", "__decorateClass", "Decorators", "htmlEncode", "toGrouping", "tryFirst", "TreeGridMixin", "options", "dg", "idProperty", "getId", "item", "e", "src", "SlickTreeHelper", "oldViewFilter", "oldProcessData", "response", "col", "tryFirst", "x", "SlickFormatting", "ctx", "htmlEncode", "items", "getParentId", "result", "byId", "toGrouping", "byParentId", "visited", "takeChildren", "theParentId", "child", "parentId", "Culture", "getLookup", "htmlEncode", "isEmptyOrNull", "ScriptData", "trimToNull", "tryGetText", "CheckTreeEditor", "DataGrid", "div", "opt", "items", "itemById", "item", "isEmptyOrNull", "parent", "property", "target", "source", "value", "selectAllText", "self", "buttons", "GridSelectAllButtonHelper", "x", "x1", "x2", "v", "_a", "tryGetText", "result", "SlickTreeHelper", "i", "response", "row", "cell", "checkedOrPartial", "anyChanged", "view", "threeState", "allsel", "allSelected", "selected", "selectedChange", "sub", "columns", "SlickFormatting", "ctx", "cls", "htmlEncode", "oldIndexes", "list", "$t1", "y", "c", "Culture", "trimToNull", "i1", "select", "__decorateClass", "Decorators", "IGetEditValue", "ISetEditValue", "IReadOnly", "CheckLookupEditor", "options", "ScriptData", "GridUtils", "field", "text", "val", "key", "fld", "itemKey", "ReflectionUtils", "lookup", "getLookup", "_b", "EditorUtils", "CascadedWidgetLink", "Widget", "p", "Authorization", "endsWith", "format", "getInstanceType", "getTypeFullName", "LT", "replaceAll", "resolveUrl", "Router", "safeCast", "localText", "tryGetText", "EntityGrid", "DataGrid", "container", "options", "_", "args", "_a", "_b", "oldRequests", "jquery_module_default", "parts", "Router", "result", "attr", "EntityTypeAttribute", "name", "getTypeFullName", "getInstanceType", "px", "endsWith", "DisplayNameAttribute", "LT", "tryGetText", "ItemNameAttribute", "format", "localText", "buttons", "ColumnPickerDialog", "noText", "entityOrId", "dlg", "dialog", "safeCast", "IEditDialog", "itemType", "ServiceAttribute", "replaceAll", "opt", "resolveUrl", "hash", "insertPermission", "Authorization", "EditorUtils", "SubDialogHelper", "e", "dci", "callback", "dialogClass", "Widget", "d", "DialogTypeRegistry", "DialogTypeAttribute", "__decorateClass", "Decorators", "any", "Authorization", "confirmDialog", "endsWith", "Exception", "extend", "format", "getAttributes", "getFormData", "getFormDataAsync", "getInstanceType", "getTypeFullName", "isEmptyOrNull", "localText", "LT", "notifySuccess", "replaceAll", "safeCast", "ScriptData", "serviceCall", "startsWith", "tryGetText", "validatorAbortHandler", "EntityDialog", "TemplatedDialog", "opt", "__async", "entity", "value", "_a", "titleFormat", "localText", "title", "format", "isEmptyOrNull", "isDeletedProperty", "callback", "options", "serviceCall", "self", "request", "baseOptions", "response", "thisOptions", "finalOptions", "extend", "attrType", "getAttributes", "getInstanceType", "typeAttributes", "EntityTypeAttribute", "name", "getTypeFullName", "px", "endsWith", "attributes", "FormKeyAttribute", "rowDefinition", "attr", "LocalTextPrefixAttribute", "ItemNameAttribute", "LT", "es", "tryGetText", "_b", "NamePropertyAttribute", "IdPropertyAttribute", "IsActivePropertyAttribute", "ServiceAttribute", "replaceAll", "entityOrId", "done", "fail", "action", "scriptType", "entityId", "ex1", "ex", "Exception", "asPanel", "data", "idField", "id", "validatorAbortHandler", "pgDiv", "pgOptions", "any", "x", "localGridDiv", "items", "item1", "langs", "copy", "lang", "PropertyGrid", "newValue", "langsTuple", "safeCast", "language", "key", "valueByName", "item", "widget", "widget1", "idx", "hint", "k", "result", "pair", "prefix", "startsWith", "formKey", "ScriptData", "getFormData", "getFormDataAsync", "typ", "ent", "eid", "dci", "req", "ValidationHelper", "notifySuccess", "list", "response1", "id1", "confirmDialog", "cloneEntity", "Widget", "w", "SubDialogHelper", "clone", "isActiveField", "isDeletedField", "EditorUtils", "isLocalizationMode", "hasSavePermission", "viewMode", "readOnly", "TabsExtensions", "deletePermission", "Authorization", "insertPermission", "updatePermission", "__decorateClass", "Decorators", "IEditDialog", "IReadOnly", "_widgetFactory", "props", "widget", "Widget", "el$", "el", "EditorUtils", "ReflectionOptionsSetter", "jsxDomWidget", "type", "postToService", "serviceCall", "trimToNull", "Reporting", "ReportDialog", "TemplatedDialog", "opt", "PropertyGrid", "reportKey", "serviceCall", "response", "_a", "set", "targetFrame", "exportType", "parameters", "postToService", "buttons", "__decorateClass", "Decorators", "ReportPage", "Widget", "div", "e", "self", "QuickSearchInput", "field", "text", "done", "liList", "trimToNull", "parts", "i", "reportItems", "i1", "x", "title", "$t1", "p", "matchingItems", "visibles", "nonVisibles", "li", "dialog", "ScriptContext", "__decorateClass", "Decorators", "IAsyncInit", "__decorateClass", "Decorators", "WX", "getWidget", "element", "type", "Widget", "hasOriginalEvent", "e", "change", "widget", "handler", "changeSelect2", "getGridField", "GoogleMap", "Widget", "container", "opt", "_a", "_b", "_c", "_d", "_e", "_f", "_g", "center", "mapOpt", "markerOpt", "lat", "lon", "LazyLoadHelper", "__decorateClass", "Decorators", "isEmptyOrNull", "isValue", "safeCast", "serviceCall", "localText", "trimToNull", "Select2AjaxEditor", "Widget", "hidden", "opt", "emptyItemText", "e", "x", "WX", "ValidationHelper", "txt", "localText", "request", "callback", "options", "response", "serviceCall", "key", "item", "queryTimeout", "isEmptyOrNull", "isValue", "query", "trimToNull", "select2", "element", "val", "result", "title", "self", "safeCast", "value", "el", "v", "__decorateClass", "Decorators", "IStringValue"]
}
