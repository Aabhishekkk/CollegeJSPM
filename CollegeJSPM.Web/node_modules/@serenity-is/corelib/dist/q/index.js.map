{
  "version": 3,
  "sources": ["../../src/q/arrays.ts", "../../src/q/system.ts", "../../src/q/strings.ts", "../../src/q/localtext.ts", "../../src/globals/jquery-module.ts", "../../src/q/html.ts", "../../src/q/toastr2.ts", "../../src/q/notify.ts", "../../src/q/config.ts", "../../src/globals/bootstrap-module.ts", "../../src/q/dialogs.ts", "../../src/q/errorhandling.ts", "../../src/q/blockui.ts", "../../src/q/services.ts", "../../src/q/formatting.ts", "../../src/q/scriptdata.ts", "../../src/q/authorization.ts", "../../src/q/debounce.ts", "../../src/q/layouttimer.ts", "../../src/q/router.ts", "../../src/q/layout.ts", "../../src/q/lookup.ts", "../../src/q/propertyitem.ts", "../../src/q/servicetypes.ts", "../../src/globals/jquery.validation-module.ts", "../../src/q/validation.ts", "../../src/q/validateoptions.ts", "../../src/q/criteria.ts"],
  "sourcesContent": ["\uFEFF/**\n * Tests if any of array elements matches given predicate. Prefer Array.some() over this function (e.g. `[1, 2, 3].some(predicate)`).\n * @param array Array to test.\n * @param predicate Predicate to test elements.\n * @returns True if any element matches.\n */\nexport function any<TItem>(array: TItem[], predicate: (x: TItem) => boolean): boolean {\n    return array.some(predicate);\n}\n\n/**\n * Counts number of array elements that matches a given predicate.\n * @param array Array to test.\n * @param predicate Predicate to test elements.\n */\nexport function count<TItem>(array: TItem[], predicate: (x: TItem) => boolean): number {\n    let count = 0;\n    for (let x of array)\n        if (predicate(x))\n            count++;\n\n    return count;\n}\n\n/**\n * Gets first element in an array that matches given predicate similar to LINQ's First.\n * Throws an error if no match is found.\n * @param array Array to test.\n * @param predicate Predicate to test elements.\n * @returns First element that matches.\n */\nexport function first<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\n    for (let x of array)\n        if (predicate(x))\n            return x;\n\n    throw new Error(\"first:No element satisfies the condition.!\");\n}\n\n/**\n * A group item returned by `groupBy()`.\n */\nexport type GroupByElement<TItem> = {\n    /** index of the item in `inOrder` array */\n    order: number;\n    /** key of the group */\n    key: string;\n    /** the items in the group */\n    items: TItem[];\n    /** index of the first item of this group in the original array */\n    start: number;\n}\n\n/**\n * Return type of the `groupBy` function.\n */\nexport type GroupByResult<TItem> = {\n    byKey: { [key: string]: GroupByElement<TItem> };\n    inOrder: GroupByElement<TItem>[];\n};\n\n/**\n * Groups an array with keys determined by specified getKey() callback.\n * Resulting object contains group objects in order and a dictionary to access by key.\n * This is similar to LINQ's ToLookup function with some additional details like start index.\n * @param items Array to group.\n * @param getKey Function that returns key for each item.\n * @returns GroupByResult object.\n */\nexport function groupBy<TItem>(items: TItem[], getKey: (x: TItem) => any): GroupByResult<TItem> {\n    let result: GroupByResult<TItem> = {\n        byKey: Object.create(null),\n        inOrder: []\n    };\n\n    for (var index = 0; index < items.length; index++) {\n        var item = items[index];\n        let key = getKey(item) ?? \"\";\n        var group = result.byKey[key];\n        if (group === undefined) {\n            group = {\n                order: result.inOrder.length,\n                key: key,\n                items: [item],\n                start: index\n            }\n            result.byKey[key] = group;\n            result.inOrder.push(group);\n        }\n        else {\n            group.items.push(item);\n        }\n    }\n\n    return result;\n}\n\n/**\n * Gets index of first element in an array that matches given predicate.\n * @param array Array to test.\n * @param predicate Predicate to test elements.\n */\nexport function indexOf<TItem>(array: TItem[], predicate: (x: TItem) => boolean): number {\n    for (var i = 0; i < array.length; i++)\n        if (predicate(array[i]))\n            return i;\n\n    return -1;\n}\n\n/**\n * Inserts an item to the array at specified index. Prefer Array.splice unless\n * you need to support IE.\n * @param obj Array or array like object to insert to.\n * @param index Index to insert at.\n * @param item Item to insert.\n * @throws Error if object does not support insert.\n * @example\n * insert([1, 2, 3], 1, 4); // [1, 4, 2, 3]\n * insert({ insert: (index, item) => { this.splice(index, 0, item); } }\n */\nexport function insert(obj: any, index: number, item: any): void {\n    if (obj.insert)\n        obj.insert(index, item);\n    else if (Array.isArray(obj))\n        obj.splice(index, 0, item);\n    else\n        throw new Error(\"Object does not support insert!\");\n}\n\n/**\n * Determines if the object is an array. Prefer Array.isArray over this function (e.g. `Array.isArray(obj)`).\n * @param obj Object to test.\n * @returns True if the object is an array.\n * @example\n * isArray([1, 2, 3]); // true\n * isArray({}); // false\n */\nexport const isArray = Array.isArray;\n\n/**\n* Gets first element in an array that matches given predicate.\n* Throws an error if no matches is found, or there are multiple matches.\n* @param array Array to test.\n* @param predicate Predicate to test elements.\n* @returns First element that matches.\n* @example\n* first([1, 2, 3], x => x == 2); // 2\n* first([1, 2, 3], x => x == 4); // throws error.\n*/\nexport function single<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\n    let match: any;\n    let found = false;\n    for (let x of array)\n        if (predicate(x)) {\n            if (found)\n                throw new Error(\"single:sequence contains more than one element.\");\n\n            found = true;\n            match = x;\n        }\n\n    if (!found)\n        throw new Error(\"single:No element satisfies the condition.\");\n\n    return match;\n}\n\nexport type Grouping<TItem> = { [key: string]: TItem[] };\n\n/**\n * Maps an array into a dictionary with keys determined by specified getKey() callback,\n * and values that are arrays containing elements for a particular key.\n * @param items Array to map.\n * @param getKey Function that returns key for each item.\n * @returns Grouping object.\n * @example\n * toGrouping([1, 2, 3], x => x % 2 == 0 ? \"even\" : \"odd\"); // { odd: [1, 3], even: [2] }\n */\nexport function toGrouping<TItem>(items: TItem[], getKey: (x: TItem) => any): Grouping<TItem> {\n    let lookup: Grouping<TItem> = {};\n    for (let x of items) {\n        let key = getKey(x) ?? \"\";\n        let d = lookup[key];\n        if (!d) {\n            d = lookup[key] = [];\n        }\n\n        d.push(x);\n    }\n    return lookup;\n}\n\n/**\n * Gets first element in an array that matches given predicate (similar to LINQ's FirstOrDefault).\n * Returns null if no match is found.\n * @param array Array to test.\n * @param predicate Predicate to test elements.\n * @returns First element that matches.\n * @example\n * tryFirst([1, 2, 3], x => x == 2); // 2\n * tryFirst([1, 2, 3], x => x == 4); // null\n */\nexport function tryFirst<TItem>(array: TItem[], predicate: (x: TItem) => boolean): TItem {\n    for (let x of array)\n        if (predicate(x))\n            return x;\n}", "\uFEFFexport type Dictionary<TItem> = { [key: string]: TItem };\n\nexport function coalesce(a: any, b: any): any {\n    return a != null ? a : b;\n}\n\nexport function isValue(a: any): boolean {\n    return a != null;\n}\n\nexport let today = (): Date => {\n    var d = new Date();\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n}\n\nexport function extend<T = any>(a: T, b: T): T {\n    for (var key in b)\n        if (Object.prototype.hasOwnProperty.call(b, key))\n            a[key] = b[key];\n    return a;\n}\n\nexport function deepClone<T = any>(a: T, a2?: any, a3?: any): T {\n    // for backward compatibility\n    if (a2 != null || a3 != null) {\n        return extend(extend(deepClone(a || {}), deepClone(a2 || {})), deepClone(a3 || {}));\n    }\n\n    // https://github.com/angus-c/just/blob/master/packages/collection-clone/index.js\n    var result = a;\n    var type = {}.toString.call(a).slice(8, -1);\n    if (type == 'Set') {\n        return new Set([...(a as any)].map(value => deepClone(value))) as any;\n    }\n    if (type == 'Map') {\n        return new Map([...(a as any)].map(kv => [deepClone(kv[0]), deepClone(kv[1])])) as any;\n    }\n    if (type == 'Date') {\n        return new Date((a as any).getTime()) as any;\n    }\n    if (type == 'RegExp') {\n        return RegExp((a as any).source, getRegExpFlags(a as any)) as any;\n    }\n    if (type == 'Array' || type == 'Object') {\n        result = (Array.isArray(a) ? [] : {}) as any;\n        for (var key in a) {\n            // include prototype properties\n            result[key] = deepClone(a[key]);\n        }\n    }\n    // primitives and non-supported objects (e.g. functions) land here\n    return result;\n}\n\nfunction getRegExpFlags(regExp: RegExp) {\n    if (typeof (regExp.source as any).flags == 'string') {\n        return (regExp.source as any).flags;\n    } else {\n        var flags = [];\n        regExp.global && flags.push('g');\n        regExp.ignoreCase && flags.push('i');\n        regExp.multiline && flags.push('m');\n        regExp.sticky && flags.push('y');\n        regExp.unicode && flags.push('u');\n        return flags.join('');\n    }\n}\n\ninterface TypeExt {\n    __interface?: boolean;\n    __interfaces?: any[];\n    __isAssignableFrom?: (from: any) => boolean;\n    __isInstanceOfType?: (instance: any) => boolean;\n    __metadata?: TypeMetadata;\n    __typeName?: string;\n}\n\ninterface TypeMetadata {\n    enumFlags?: boolean;\n    attr?: any[];\n    members?: TypeMember[];\n}\n\nexport type Type = Function | Object;\n\nexport interface TypeMember {\n    name: string;\n    type: MemberType;\n    attr?: any[];\n    getter?: string;\n    setter?: string;\n}\n\nfunction getTypeStore() {\n    return getStateStore(\"__types\");\n}\n\nexport function getNested(from: any, name: string) {\n    var a = name.split('.');\n    for (var i = 0; i < a.length; i++) {\n        from = from[a[i]];\n        if (from == null)\n            return null;\n    }\n    return from;\n}\n\nconst globalObj: any = \n    (typeof globalThis !== \"undefined\" && globalThis) || \n    (typeof window !== \"undefined\" && window) || \n    (typeof self !== \"undefined\" && self) ||\n    // @ts-ignore check for global\n    (typeof global !== \"undefined\" && global) ||\n    (function () { return this; })() || Function('return this')();\n\nexport function getGlobalThis(): any {\n    return globalObj;\n}\n\nexport function getType(name: string, target?: any): Type  {\n    var type: any;\n    const types = getTypeStore();\n    if (target == null) {\n        type = types[name];\n        if (type != null || globalObj == void 0 || name === \"Object\")\n            return type;\n\n        target = globalObj;\n    }\n\n    type = getNested(target, name)\n    if (typeof type !== 'function')\n        return null;\n\n    return type;\n}\n\nexport function getTypeNameProp(type: Type): string {\n    return (Object.prototype.hasOwnProperty.call(type, \"__typeName\") && (type as TypeExt).__typeName) || void 0;\n}\n\nexport function setTypeNameProp(type: Type, value: string) {\n    Object.defineProperty(type, \"__typeName\", { value, configurable: true });\n}\n\nexport function getTypeFullName(type: Type): string {\n    return getTypeNameProp(type) || (type as any).name ||\n        (type.toString().match(/^\\s*function\\s*([^\\s(]+)/) || [])[1] || 'Object';\n};\n\nexport function getTypeShortName(type: Type): string {\n    var fullName = getTypeFullName(type);\n    var bIndex = fullName.indexOf('[');\n    var nsIndex = fullName.lastIndexOf('.', bIndex >= 0 ? bIndex : fullName.length);\n    return nsIndex > 0 ? fullName.substr(nsIndex + 1) : fullName;\n};\n\nexport function getInstanceType(instance: any): any {\n    if (instance == null)\n        throw new ArgumentNullException(\"instance\", \"Can't get instance type of null or undefined!\");\n\n    // Have to catch as constructor cannot be looked up on native COM objects\n    try {\n        return instance.constructor;\n    }\n    catch (ex) {\n        return Object;\n    }\n};\n\nexport function isAssignableFrom(target: any, type: Type) {\n    if (target === type || (type as any).prototype instanceof target)\n        return true;\n\n    if (typeof (target as TypeExt).__isAssignableFrom === 'function')\n        return (target as TypeExt).__isAssignableFrom(type);\n\n    return false;\n};\n\nexport function isInstanceOfType(instance: any, type: Type) {\n    if (instance == null)\n        return false;\n\n    if (typeof (type as TypeExt).__isInstanceOfType === 'function')\n        return (type as TypeExt).__isInstanceOfType(instance);\n\n    return isAssignableFrom(type, getInstanceType(instance));\n};\n\nexport function safeCast(instance: any, type: Type) {\n    return isInstanceOfType(instance, type) ? instance : null;\n};\n\nexport function cast(instance: any, type: Type) {\n    if (instance == null)\n        return instance;\n    else if (isInstanceOfType(instance, type))\n        return instance;\n    throw new InvalidCastException('Cannot cast object to type ' + getTypeFullName(type));\n}\n\nexport function getBaseType(type: any) {\n    if (type === Object ||\n        !type.prototype ||\n        (type as TypeExt).__interface === true) {\n        return null;\n    }\n    else if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(type.prototype).constructor;\n    }\n    else {\n        var p = type.prototype;\n        if (Object.prototype.hasOwnProperty.call(p, 'constructor')) {\n            try {\n                var ownValue = p.constructor;\n                delete p.constructor;\n                return p.constructor;\n            }\n            finally {\n                p.constructor = ownValue;\n            }\n        }\n        return p.constructor;\n    }\n};\n\nexport function getAttributes(type: any, attrType: any, inherit?: boolean) {\n    var result = [];\n    if (inherit) {\n        var b = getBaseType(type);\n        if (b) {\n            var a: any = getAttributes(b, attrType, true);\n            for (var i = 0; i < a.length; i++) {\n                var t = getInstanceType(a[i]);\n                result.push(a[i]);\n            }\n        }\n    }\n    var attr = (type as TypeExt).__metadata?.attr;\n    if (attr != null) {\n        for (var i = 0; i < attr.length; i++) {\n            var a: any = attr[i];\n            if (attrType == null || isInstanceOfType(a, attrType)) {\n                var t = getInstanceType(a);\n                for (var j = result.length - 1; j >= 0; j--) {\n                    if (isInstanceOfType(result[j], t))\n                        result.splice(j, 1);\n                }\n                result.push(a);\n            }\n        }\n    }\n    return result;\n};\n\nexport enum MemberType {\n    field = 4,\n    property = 16\n}\n\nexport function getMembers(type: any, memberTypes: MemberType): TypeMember[] {\n    var result: TypeMember[] = [];\n    var b = getBaseType(type);\n    if (b)\n        result = getMembers(b, memberTypes & ~1);\n\n    var members = (type as TypeExt).__metadata?.members;\n    if (members != null) {\n        for (var m of members) {\n            if (memberTypes & m.type)\n                result.push(m);\n        }\n    }\n\n    return result;\n};\n\nexport function addTypeMember(type: any, member: TypeMember): TypeMember {\n\n    var name = member.name;\n    var md = ensureMetadata(type);\n    md.members = md.members || [];\n\n    let existing: TypeMember;\n    for (var m of md.members) {\n        if (m.name == name) {\n            existing = m;\n            break;\n        }\n    }\n\n    if (existing) {\n        if (member.type != null)\n            existing.type = member.type;\n        if (member.attr != null)\n            existing.attr = merge(existing.attr, member.attr);\n        if (member.getter != null)\n            existing.getter = member.getter;\n        if (member.setter != null)\n            existing.setter = member.setter;\n        return existing;\n    }\n    else {\n        md.members.push(member);\n        return member;\n    }\n}\n\nexport function getTypes(from?: any): any[] {\n    const types = getTypeStore();\n    var result = [];\n    if (!from) {\n        for (var t in types) {\n            if (Object.prototype.hasOwnProperty.call(types, t))\n                result.push(types[t]);\n        }\n    }\n    else {\n        var traverse = function (s: any, n: string) {\n            for (var c in s) {\n                if (Object.prototype.hasOwnProperty.call(s, c))\n                    traverse(s[c], c);\n            }\n            if (typeof (s) === 'function' &&\n                n.charAt(0).toUpperCase() === n.charAt(0) &&\n                n.charAt(0).toLowerCase() !== n.charAt(0))\n                result.push(s);\n        };\n        traverse(from, '');\n    }\n    return result;\n};\n\nexport function clearKeys(d: any) {\n    for (var n in d) {\n        if (Object.prototype.hasOwnProperty.call(d, n))\n            delete d[n];\n    }\n}\n\nexport function delegateCombine(delegate1: any, delegate2: any) {\n    if (!delegate1) {\n        if (!delegate2._targets) {\n            return delegate2;\n        }\n        return delegate2;\n    }\n    if (!delegate2) {\n        if (!delegate1._targets) {\n            return delegate1;\n        }\n        return delegate1;\n    }\n\n    var targets1 = delegate1._targets ? delegate1._targets : [null, delegate1];\n    var targets2 = delegate2._targets ? delegate2._targets : [null, delegate2];\n\n    return _mkdel(targets1.concat(targets2));\n};\n\nconst fallbackStore: any = {};\n\n\nexport function getStateStore(key?: string): any {\n\n    let store: any;\n    if (globalObj) {\n        if (!globalObj.Q)\n            globalObj.Q = {};\n\n        store = globalObj.Q.__stateStore;\n        if (!store)\n            globalObj.Q.__stateStore = store = Object.create(null);\n    }\n    else\n        store = fallbackStore;\n\n    if (key == null)\n        return store;\n\n    var s = store[key];\n    if (s == null)\n        store[key] = s = Object.create(null);\n    return s;\n}\n\nexport namespace Enum {\n    export let toString = (enumType: any, value: number): string => {\n        var values = enumType;\n        if (value === 0 || !((enumType as TypeExt).__metadata?.enumFlags)) {\n            for (var i in values) {\n                if (values[i] === value) {\n                    return i;\n                }\n            }\n            return value == null ? \"\" : value.toString();\n        }\n        else {\n            var parts: string[] = [];\n            for (var i in values) {\n                if (values[i] & value) {\n                    parts.push(i);\n                }\n                else\n                    parts.push(value == null ? \"\" : value.toString());\n            }\n            return parts.join(' | ');\n        }\n    };\n\n    export let getValues = (enumType: any) => {\n        var parts = [];\n        var values = enumType;\n        for (var i in values) {\n            if (Object.prototype.hasOwnProperty.call(values, i) &&\n                typeof values[i] === \"number\")\n                parts.push(values[i]);\n        }\n        return parts;\n    };\n}\n\nfunction delegateContains(targets: any[], object: any, method: any) {\n    for (var i = 0; i < targets.length; i += 2) {\n        if (targets[i] === object && targets[i + 1] === method) {\n            return true;\n        }\n    }\n    return false;\n};\n\n\nlet _mkdel = (targets: any[]): any => {\n    var delegate: any = function () {\n        if (targets.length === 2) {\n            return targets[1].apply(targets[0], arguments);\n        }\n        else {\n            var clone = targets.slice();\n            for (var i = 0; i < clone.length; i += 2) {\n                if (delegateContains(targets, clone[i], clone[i + 1])) {\n                    clone[i + 1].apply(clone[i], arguments);\n                }\n            }\n            return null;\n        }\n    };\n    delegate._targets = targets;\n\n    return delegate;\n};\n\nexport let delegateRemove = (delegate1: any, delegate2: any) => {\n    if (!delegate1 || (delegate1 === delegate2)) {\n        return null;\n    }\n    if (!delegate2) {\n        return delegate1;\n    }\n\n    var targets = delegate1._targets;\n    var object = null;\n    var method;\n    if (delegate2._targets) {\n        object = delegate2._targets[0];\n        method = delegate2._targets[1];\n    }\n    else {\n        method = delegate2;\n    }\n\n    for (var i = 0; i < targets.length; i += 2) {\n        if ((targets[i] === object) && (targets[i + 1] === method)) {\n            if (targets.length === 2) {\n                return null;\n            }\n            var t = targets.slice();\n            t.splice(i, 2);\n            return _mkdel(t);\n        }\n    }\n\n    return delegate1;\n};\n\nexport let isEnum = (type: any) => {\n    return typeof type !== \"function\" &&\n        (type as TypeExt).__interface === null;\n};\n\nexport function initFormType(typ: Function, nameWidgetPairs: any[]) {\n    for (var i = 0; i < nameWidgetPairs.length - 1; i += 2) {\n        (function (name: string, widget: any) {\n            Object.defineProperty(typ.prototype, name, {\n                get: function () {\n                    return this.w(name, widget);\n                },\n                enumerable: true,\n                configurable: true\n            });\n        })(nameWidgetPairs[i], nameWidgetPairs[i + 1]);\n    }\n}\n\nexport function prop(type: any, name: string, getter?: string, setter?: string) {\n    getter = getter || \"get_\" + name;\n    setter = setter || \"set_\" + name;\n\n    Object.defineProperty(type.prototype, name, {\n        get: function () {\n            return this[getter]();\n        },\n        set: function (value) {\n            return this[setter](value);\n        },\n        configurable: true,\n        enumerable: true\n    });\n}\n\nfunction ensureMetadata(target: Type): TypeMetadata {\n\n    if (!Object.prototype.hasOwnProperty.call(target, '__metadata') ||\n        !(target as TypeExt).__metadata) {\n        (target as TypeExt).__metadata = Object.create(null);\n    }\n\n    return (target as TypeExt).__metadata;\n}\n\nfunction distinct(arr: any[]) {\n    return arr.filter((item, pos) => arr.indexOf(item) === pos);\n}\n\nconst _fieldsProxy = new Proxy({}, { get: (_, p) => p }) as any;\n\nexport function fieldsProxy<TRow>(): Readonly<Record<keyof TRow, string>> {\n    return _fieldsProxy\n}\n\nexport function keyOf<T>(prop: keyof T) {\n    return prop;\n}\n\nfunction merge(arr1: any[], arr2: any[]) {\n    if (!arr1 || !arr2)\n        return (arr1 || arr2 || []).slice();\n\n    return distinct(arr1.concat(arr2));\n}\n\nfunction interfaceIsAssignableFrom(from: any) {\n    return from != null && \n        Array.isArray((from as TypeExt).__interfaces) && \n        (from as TypeExt).__interfaces.some(x => \n            x === this ||\n            (getTypeNameProp(this)?.length && \n                x.__interface &&\n                getTypeNameProp(x) === this.__typeName));\n}\n\nfunction registerType(type: any, name: string, intf: any[]) {\n    const types = getTypeStore();\n    if (name && name.length) {\n        setTypeNameProp(type, name);\n        types[name] = type;\n    }\n    else if (getTypeNameProp(type as TypeExt)?.length)\n        types[(type as TypeExt).__typeName] = type;\n\n    if (intf != null && intf.length)\n        Object.defineProperty(type, \"__interfaces\", {\n            value: merge((type as TypeExt).__interfaces, intf),\n            configurable: true\n        });\n}\n\nexport function registerClass(type: any, name: string, intf?: any[]) {\n    registerType(type, name, intf);\n    Object.defineProperty(type, \"__interface\", { value: false, configurable: true });\n}\n\nexport function registerEditor(type: any, name: string, intf?: any[]) {\n    registerClass(type, name, intf);\n    addAttribute(type, new EditorAttribute());\n}\n\nexport function registerEnum(type: any, name: string, enumKey?: string) {\n    registerType(type, name, undefined);\n    if (enumKey && enumKey != name) {\n        const types = getTypeStore();\n        if (!types[enumKey])\n            types[enumKey] = type;\n    }\n    Object.defineProperty(type, \"__interface\", { value: null, configurable: true });\n}\n\nexport function registerInterface(type: any, name: string, intf?: any[]) {\n    registerType(type, name, intf);\n    Object.defineProperty(type, \"__interface\", { value: true, configurable: true });\n    Object.defineProperty(type, \"__isAssignableFrom\", { value: interfaceIsAssignableFrom, configurable: true });\n}\n\nexport function addAttribute(type: any, attr: any) {\n    var md = ensureMetadata(type);\n    md.attr = md.attr || [];\n    md.attr.push(attr);\n}\n\nexport class ISlickFormatter {\n}\n\nregisterInterface(ISlickFormatter, 'Serenity.ISlickFormatter');\n\nexport class EditorAttribute {\n}\n\nregisterClass(EditorAttribute, 'Serenity.EditorAttribute');\n\nexport function initializeTypes(root: any, pre: string, limit: number) {\n\n    if (!root)\n        return;\n\n    const types = getTypeStore();\n\n    for (var k of Object.keys(root)) {\n        if (k.charAt(0) < 'A' || \n            k.charAt(0) > 'Z' || \n            k.indexOf('$') >= 0 || \n            !Object.prototype.hasOwnProperty.call(root, k))\n            continue;\n\n        var obj = root[k];\n\n        if (obj == void 0 ||\n            Array.isArray(obj) ||\n            obj instanceof Date ||\n            (typeof obj != \"function\" &&\n             typeof obj != \"object\"))\n            continue;\n\n        // no explict __typeName, e.g. not registered with a name,\n        // a function but not an html element, or registered without name\n        if (!getTypeNameProp(obj) && \n            ((typeof obj === \"function\" && typeof obj.nodeType !== \"number\") || \n             (Object.prototype.hasOwnProperty.call(obj, \"__interface\") &&\n              (obj as TypeExt).__interface !== undefined))) {\n   \n            // legacy formatter with registerClass\n            if (typeof obj == \"function\" && \n                !obj.__interfaces && \n                obj.prototype?.format &&\n                k.substr(-9) === \"Formatter\") {\n                if ((obj as TypeExt).__interface === undefined)\n                    Object.defineProperty(obj, \"__interface\", { value: false, configurable: true });\n                (obj as TypeExt).__interfaces = [ISlickFormatter]\n            }\n\n            // only register types that should\n            if ((obj as TypeExt).__interface !== undefined) {\n                setTypeNameProp(obj, pre + k);\n                types[pre + k] = obj;\n            }\n        }\n        \n        if (limit > 0) \n            initializeTypes(obj, pre + k + \".\", limit - 1);\n    }\n}\n\nexport class Exception extends Error {\n    constructor(message: string) {\n        super(message);\n        this.name = \"Exception\";\n    }\n}\n\nexport class ArgumentNullException extends Exception {\n    constructor(paramName: string, message?: string) {\n        super((message || 'Value cannot be null.') + '\\nParameter name: ' + paramName);\n        this.name = \"ArgumentNullException\";\n    }\n}\n\nexport class InvalidCastException extends Exception {\n    constructor(message: string) {\n        super(message);\n        this.name = \"InvalidCastException\";\n    }\n}\n\nexport {}", "\uFEFF/**\n * Checks if the string ends with the specified substring.\n * @param s String to check.\n * @param suffix Suffix to check.\n * @returns True if the string ends with the specified substring.\n */\nexport function endsWith(s: string, suffix: string): boolean {\n    return s.endsWith(suffix);\n}\n\n/**\n * Checks if the string is empty or null.\n * @param s String to check.\n * @returns True if the string is empty or null.\n */\nexport function isEmptyOrNull(s: string) {\n    return s == null || s.length === 0;\n}\n\n/**\n * Checks if the string is empty or null or whitespace.\n * @param s String to check.\n * @returns True if the string is empty or null or whitespace.\n */\nexport function isTrimmedEmpty(s: string) {\n    return trimToNull(s) == null;\n}\n\n/**\n * Pads the string to the left with the specified character.\n * @param s String to pad.\n * @param len Target length of the string.\n * @param ch Character to pad with.\n * @returns Padded string.\n */\nexport function padLeft(s: string | number, len: number, ch: string = ' ') {\n    s = s == null ? '' : s.toString();\n    if ((s as any).padStart)\n        return (s as any).padStart(len, ch);\n    while (s.length < len)\n        s = ch + s;\n    return s;\n}\n\n/**\n * Checks if the string starts with the prefix\n * @param s String to check.\n * @param prefix Prefix to check.\n * @returns True if the string starts with the prefix.\n */\nexport function startsWith(s: string, prefix: string): boolean {\n    return s.startsWith(prefix);\n}\n\n/**\n * Converts the string to single line by removing line end characters\n * @param str String to convert.\n */\nexport function toSingleLine(str: string) {\n    return replaceAll(replaceAll(trimToEmpty(str), '\\r\\n', ' '), '\\n', ' ').trim();\n}\n\n/**\n * Trims the whitespace characters from the end of the string\n */\nexport var trimEnd = function(s: string) {\n    return (s ?? \"\" as any).trimEnd?.() ?? s.replace(/\\s*$/, '');\n};\n\n/**\n * Trims the whitespace characters from the start of the string\n */\nexport var trimStart = function(s: string) {\n    return (s ?? \"\" as any).trimStart?.() ?? s.replace(/^\\s*/, '');\n};\n\n/**\n * Trims the whitespace characters from the start and end of the string\n * This returns empty string even when the string is null or undefined.\n */\nexport function trim(s: string) {\n    return s?.trim() ?? '';\n}\n\n/**\n * Trims the whitespace characters from the start and end of the string\n * Returns empty string if the string is null or undefined.\n */\nexport function trimToEmpty(s: string) {\n    return (s ?? \"\").trim();\n}\n\n/**\n * Trims the whitespace characters from the start and end of the string\n * Returns null if the string is null, undefined or whitespace.\n */\nexport function trimToNull(s: string) {\n    if (s == null)\n        return null;\n    s = trim(s);\n    return s.length === 0 ? null : s;\n}\n\n/**\n * Replaces all occurrences of the search string with the replacement string.\n * @param str String to replace.\n * @param find String to find.\n * @param replace String to replace with.\n * @returns Replaced string.\n */\nexport function replaceAll(str: string, find: string, replace: string): string {\n    str = str || '';\n    return (str as any).replaceAll?.(find, replace) ?? str.split(find).join(replace);\n}\n\n/**\n * Pads the start of string to make it the specified length.\n * @param s String to pad.\n * @param len Target length of the string.\n */\nexport function zeroPad(n: number, len: number): string {\n    if (n == null)\n        return \"\";\n    let s = n.toString();\n    while (s.length < len)\n        s = \"0\" + s;\n    return s;\n}", "\uFEFFimport { getStateStore } from \"./system\";\nimport { isEmptyOrNull, startsWith } from \"./strings\";\n\nexport function localText(key: string): string {\n    let t: string = getTable()[key];\n    if (t == null) {\n        t = key ?? '';\n    }\n    return t;\n}\n\n/** @obsolete prefer localText for better discoverability */\nexport const text = localText;\n\nexport function dbText(prefix: string): ((key: string) => string) {\n    return function (key: string) {\n        return localText(\"Db.\" + prefix + \".\" + key);\n    }\n}\n\nfunction getTable(): { [key: string]: string } {\n    return getStateStore(\"__localText\");\n}\n\nexport function prefixedText(prefix: string) {\n\n    return function (text: string, key: string | ((p?: string) => string)) {\n\n        if (text != null && !startsWith(text, '`')) {\n            var local = tryGetText(text);\n            if (local != null) {\n                return local;\n            }\n        }\n\n        if (text != null && startsWith(text, '`')) {\n            text = text.substr(1);\n        }\n\n        if (!isEmptyOrNull(prefix)) {\n            var textKey = typeof (key) == \"function\" ? key(prefix) : (prefix + key);\n            var localText = tryGetText(textKey);\n            if (localText != null) {\n                return localText;\n            }\n        }\n\n        return text;\n    }\n}\n\nexport function tryGetText(key: string): string {\n    var value = getTable()[key];\n    return value;\n}\n\nexport function dbTryText(prefix: string): ((key: string) => string) {\n    return function (key: string) {\n        return localText(\"Db.\" + prefix + \".\" + key);\n    }\n}\n\nexport function proxyTexts(o: Record<string, any>, p: string, t: Record<string, any>): Object {\n    if (typeof window != 'undefined' && window['Proxy']) {\n        return new window['Proxy'](o, {\n            get: (x: Object, y: string) => {\n                var tv = t[y];\n                if (tv == null)\n                    return;\n                if (typeof tv == 'number')\n                    return localText(p + y);\n                else {\n                    var z = o[y];\n                    if (z != null)\n                        return z;\n                    o[y] = z = proxyTexts({}, p + y + '.', tv);\n                    return z;\n                }\n            },\n            ownKeys: (x: Object) => Object.keys(t)\n        });\n    }\n    else {\n        for (var k of Object.keys(t)) {\n            if (typeof t[k] == 'number')\n                Object.defineProperty(o, k, {\n                    get: () => localText(p + k)\n                });\n            else\n                o[k] = proxyTexts({}, p + k + '.', t[k]);\n        }\n        return o;\n    }\n}\n\nexport class LT {\n    static empty: LT = new LT('');\n\n    constructor(private key: string) {\n    }\n\n    static add(key: string, value: string): void;\n    static add(obj: any, pre?: string) {\n        if (!obj) {\n            return;\n        }\n        \n        let table = getTable();\n\n        if (typeof obj === \"string\") {\n            table[obj] = pre;\n            return;\n        }\n\n        pre = pre || '';\n        for (let k of Object.keys(obj)) {\n            let actual = pre + k;\n            let o = obj[k];\n            if (typeof (o) === 'object') {\n                LT.add(o, actual + '.');\n            }\n            else {\n                table[actual] = o;\n            }\n        }\n    }\n\n    get() {\n        var t = getTable()[this.key];\n        if (t == null) {\n            t = this.key || '';\n        }\n        return t;\n    }\n\n    toString() {\n        var t = getTable()[this.key];\n        if (t == null) {\n            t = this.key || '';\n        }\n        return t;\n    }\n\n    static initializeTextClass = function (type: any, prefix: string) {\n        var $t1 = Object.keys(type).slice();\n        var table = getTable();\n        for (var $t2 = 0; $t2 < $t1.length; $t2++) {\n            var member = $t1[$t2];\n            var value = type[member];\n            if (value instanceof LT) {\n                var lt = value;\n                var key = prefix + member;\n                table[key] = lt.key;\n                type[member] = new LT(key);\n            }\n        }\n    }\n\n    static getDefault = function (key: string, defaultText: string) {\n        var t = getTable()[key];\n        if (t == null) {\n            t = defaultText;\n            if (t == null) {\n                t = key || '';\n            }\n        }\n        return t;\n    }\n}\n\nif (typeof globalThis !== \"undefined\") {\n    const Q = (globalThis as any).Q || ((globalThis as any).Q = {});\n    if (Q.LT == null)\n        Q.LT = LT;\n}", "\uFEFF/// <reference types=\"jquery\" />\nconst $: JQueryStatic = typeof jQuery === \"function\" ? jQuery : typeof globalThis.$ === \"function\" ? globalThis.$ :\n    typeof window !== \"undefined\" ? (window.jQuery ?? window.$) : undefined;\n\nexport default $;", "\uFEFFimport { localText } from \"./localtext\";\nimport $ from \"@optionaldeps/jquery\";\n\n/**\n * Adds an empty option to the select.\n * @param select the select element\n */\nexport function addEmptyOption(select: JQuery | HTMLSelectElement) {\n    addOption(select, '', localText(\"Controls.SelectEditor.EmptyItemText\"));\n}\n\n/**\n * Adds an option to the select.\n */\nexport function addOption(select: JQuery | HTMLSelectElement, key: string, text: string) {\n    $('<option/>').attr(\"value\", key ?? \"\").text(text ?? \"\").appendTo(select);\n}\n\n/** @obsolete use htmlEncode as it also encodes quotes */\nexport const attrEncode = htmlEncode;\n\n/** Clears the options in the select element */\nexport function clearOptions(select: JQuery) {\n    select.html('');\n}\n\n/**\n * Finds the first element with the given relative id to the source element.\n * It can handle underscores in the source element id.\n * @param element the source element\n * @param relativeId the relative id to the source element\n * @param context the context element (optional)\n * @returns the element with the given relative id to the source element.\n */\nexport function findElementWithRelativeId(element: JQuery, relativeId: string, context?: HTMLElement): JQuery;\n/**\n * Finds the first element with the given relative id to the source element.\n * It can handle underscores in the source element id.\n * @param element the source element\n * @param relativeId the relative id to the source element\n * @param context the context element (optional)\n * @returns the element with the given relative id to the source element.\n */\nexport function findElementWithRelativeId(element: HTMLElement, relativeId: string, context?: HTMLElement): HTMLElement;\nexport function findElementWithRelativeId(element: JQuery | HTMLElement, relativeId: string, context?: HTMLElement): JQuery | Element {\n\n    const isJQuery = element instanceof $ && element != null;\n    const from: HTMLElement = isJQuery ? (element as JQuery).get(0) : element as HTMLElement;\n    const doc = typeof document === \"undefined\" ? null : document;\n\n    if (from == null)\n        return null;\n\n    var noContext = false;\n    if (context === undefined) {\n        context = from.getRootNode() as HTMLElement;\n        noContext = true;\n    }\n\n    let fromId = from.id ?? \"\";\n    while (true) {\n        var res = context?.querySelector(\"#\" + fromId + relativeId);\n        \n        if (!res && noContext)\n            res = doc?.getElementById(fromId + relativeId);\n\n        if (!res && fromId.length) {\n            res = context?.querySelector(\"#\" + fromId + \"_\" + relativeId);\n            if (!res && noContext)\n                res = doc?.getElementById(fromId + \"_\" + relativeId);\n        }\n\n        if (res || !fromId.length)\n            return isJQuery ? $(res ?? null) : (res ?? null);\n\n        let idx = fromId.lastIndexOf('_');\n        if (idx <= 0)\n            fromId = \"\";\n        else\n            fromId = fromId.substring(0, idx);\n    }\n}\n\nconst esc: Record<string, string> = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": \"&#39;\",\n    '&': '&amp;',\n}\n\nfunction escFunc(a: string): string {\n    return esc[a];\n}\n\n/**\n * Html encodes a string (encodes single and double quotes, & (ampersand), > and < characters)\n * @param s String (or number etc.) to be HTML encoded\n */\nexport function htmlEncode(s: any): string {\n    if (s == null)\n        return '';\n\n    if (typeof s !== \"string\")\n        s = \"\" + s;\n\n    return s.replace(/[<>\"'&]/g, escFunc)\n}\n\n/**\n * Creates a new DIV and appends it to the body.\n * @returns the new DIV element.\n */\nexport function newBodyDiv(): JQuery {\n    return $('<div/>').appendTo(document.body);\n}\n\n/**\n * Returns the outer HTML of the element.\n */\nexport function outerHtml(element: JQuery) {\n    return $('<i/>').append(element.eq(0).clone()).html();\n}\n\n\n/** \n * Toggles the class on the element handling spaces like jQuery addClass does.\n * @param el the element\n * @param cls the class to toggle\n * @param remove if true, the class will be added, if false the class will be removed, otherwise it will be toggled.\n */\nexport function toggleClass(el: Element, cls: string, remove?: boolean) {\n    if (cls == null || !cls.length)\n        return;\n\n    if (cls.indexOf(' ') < 0) {\n        el.classList.toggle(cls, remove);\n        return;\n    }\n\n    var k = cls.split(' ').map(x => x.trim()).filter(x => x.length);\n    for (var a of k)\n        el.classList.toggle(a, remove);\n}\n", "\uFEFF// adapted from https://github.com/JPeer264/toastr2\n\nimport { htmlEncode, toggleClass } from \"./html\";\n\nexport type ToastContainerOptions = {\n    containerId?: string;\n    positionClass?: string;\n    target?: string;\n}\n\nexport type ToastrOptions = ToastContainerOptions & {\n    tapToDismiss?: boolean;\n    toastClass?: string;\n    showDuration?: number;\n    onShown?: () => void;\n    hideDuration?: number;\n    onHidden?: () => void;\n    closeMethod?: boolean;\n    closeDuration?: number | false;\n    closeEasing?: boolean;\n    closeOnHover?: boolean;\n    extendedTimeOut?: number;\n    iconClass?: string;\n    positionClass?: string;\n    timeOut?: number; // Set timeOut and extendedTimeOut to 0 to make it sticky\n    titleClass?: string;\n    messageClass?: string;\n    escapeHtml?: boolean;\n    target?: string;\n    closeHtml?: string;\n    closeClass?: string;\n    newestOnTop?: boolean;\n    preventDuplicates?: boolean;\n    onclick?: (event: MouseEvent) => void;\n    onCloseClick?: (event: Event) => void;\n    closeButton?: boolean;\n    rtl?: boolean;\n}\n\nexport type NotifyMap = {\n    type: string;\n    iconClass: string;\n    title?: string;\n    message?: string;\n}\n\nconst initialOptions: ToastrOptions = {\n    tapToDismiss: true,\n    toastClass: 'toast',\n    containerId: 'toast-container',\n    showDuration: 300,\n    onShown: () => { },\n    hideDuration: 1000,\n    onHidden: () => { },\n    closeMethod: false,\n    closeDuration: false,\n    closeEasing: false,\n    closeOnHover: true,\n    extendedTimeOut: 1000,\n    iconClass: 'toast-info',\n    positionClass: 'toast-top-right',\n    timeOut: 5000, // Set timeOut and extendedTimeOut to 0 to make it sticky\n    titleClass: 'toast-title',\n    messageClass: 'toast-message',\n    escapeHtml: true,\n    target: 'body',\n    closeHtml: '<button type=\"button\">&times;</button>',\n    closeClass: 'toast-close-button',\n    newestOnTop: true,\n    preventDuplicates: false,\n    rtl: false,\n    onCloseClick: () => { },\n    closeButton: false,\n    onclick: () => { },\n}\n\nvar initialInstance: Toastr = null;\n\nexport class Toastr {\n    private listener: any;\n\n    private toastId = 0;\n\n    private previousToast: string | null = null;\n\n    public options: ToastrOptions;\n\n    public constructor(options?: ToastrOptions) {\n        this.options = Object.assign(Object.assign({}, initialInstance?.options ?? initialOptions), options);\n        this.createContainer(options);\n    }\n\n    private createContainer(options: ToastContainerOptions = this.options): HTMLElement {\n        var container = document.createElement('div');\n\n        container.setAttribute('id', options.containerId);\n        if (options.positionClass)\n            toggleClass(container, options.positionClass, true);\n\n        const target = document.getElementsByTagName(options.target);\n\n        if (target && target[0]) {\n            target[0].appendChild(container);\n        }\n\n        return container;\n    }\n\n    public getContainer(options?: ToastContainerOptions, create = false): HTMLElement {\n        const container = document.getElementById(options?.containerId ?? this.options.containerId);\n\n        if (container)\n            return container;\n\n        if (create)\n            return this.createContainer(options ?? this.options);\n\n        return null;\n    }\n\n    public error(\n        message?: string,\n        title?: string,\n        opt?: ToastrOptions,\n    ): HTMLElement | null {\n        return this.notify({\n            type: 'error',\n            iconClass: 'toast-error',\n            message,\n            title,\n        }, opt);\n    }\n\n    public warning(\n        message?: string,\n        title?: string,\n        opt?: ToastrOptions,\n    ): HTMLElement | null {\n        return this.notify({\n            type: 'warning',\n            iconClass: 'toast-warning',\n            message,\n            title,\n        }, opt);\n    }\n\n    public success(\n        message?: string,\n        title?: string,\n        opt?: ToastrOptions,\n    ): HTMLElement | null {\n        return this.notify({\n            type: 'success',\n            iconClass: 'toast-success',\n            message,\n            title,\n        }, opt);\n    }\n\n    public info(\n        message?: string,\n        title?: string,\n        opt?: ToastrOptions,\n    ): HTMLElement | null {\n        return this.notify({\n            type: 'info',\n            iconClass: 'toast-info',\n            message,\n            title,\n        }, opt);\n    }\n\n    public subscribe(callback: (response: Toastr) => void): void {\n        this.listener = callback;\n    }\n\n    public publish(args: Toastr): void {\n        if (!this.listener) {\n            return;\n        }\n\n        this.listener(args);\n    }\n\n    public clear(toastElement?: HTMLElement | null, clearOptions: { force?: boolean } = {}) {\n        if (!this.clearToast(toastElement, this.options, clearOptions)) {\n            this.clearContainer(this.options);\n        }\n    }\n\n    public remove(toastElement?: HTMLElement | null) {\n        var container = this.getContainer(this.options);\n        if (!container)\n            return;\n\n        if (toastElement && toastElement !== document.activeElement) {\n            this.removeToast(toastElement);\n\n            return;\n        }\n\n        if (!container.hasChildNodes()) {\n            const parentNode = container.parentElement;\n\n            if (parentNode) {\n                parentNode.removeChild(container);\n            }\n        }\n    }\n\n    public removeToast(toastElement: HTMLElement, options = this.options) {\n        var container = this.getContainer(options);\n\n        if (!container || !toastElement.parentNode) {\n            return;\n        }\n\n        // todo set after visible state\n        // as this will be a transition of css\n        toastElement.parentNode.removeChild(toastElement);\n        // check if visible\n        if (toastElement.offsetWidth > 0 && toastElement.offsetHeight > 0) {\n            return;\n        }\n\n        if (!container.hasChildNodes()) {\n            if (container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n\n            this.previousToast = null;\n        }\n    }\n\n    private clearContainer(options: Partial<ToastrOptions> = this.options) {\n        var container = this.getContainer(options);\n        if (!container)\n            return;\n\n        const toastsToClear = Array.from(container.childNodes) as HTMLElement[];\n\n        for (let i = toastsToClear.length - 1; i >= 0; i -= 1) {\n            this.clearToast(toastsToClear[i]);\n        }\n    }\n\n    private clearToast(\n        toastElement?: HTMLElement | null,\n        options?: ToastContainerOptions,\n        clearOptions: { force?: boolean } = {},\n    ): boolean {\n        if (!toastElement) {\n            return false;\n        }\n\n        const force = clearOptions.force || false;\n\n        if (toastElement && (force || toastElement !== document.activeElement)) {\n            this.removeToast(toastElement, options);\n            return true;\n        }\n\n        return false;\n    }\n\n    private notify(map: NotifyMap, opt: ToastrOptions): HTMLElement | null {\n        opt = Object.assign(Object.assign(Object.assign({}, this.options), map), opt);\n\n        const shouldExit = (opts: ToastrOptions, exitMap: NotifyMap): boolean => {\n            if (opts.preventDuplicates) {\n                if (exitMap.message === this.previousToast) {\n                    return true;\n                }\n\n                this.previousToast = exitMap.message || '';\n            }\n            return false;\n        };\n\n\n        if (shouldExit(opt, map)) {\n            return null;\n        }\n\n        this.toastId += 1;\n\n        var container = this.getContainer(opt, true);\n\n        let intervalId: number = null;\n        const toastElement = document.createElement('div');\n        const $titleElement = document.createElement('div');\n        const $messageElement = document.createElement('div');\n        const createdElement = document.createElement('div');\n        createdElement.innerHTML = opt.closeHtml.trim();\n        const closeElement = createdElement.firstChild as HTMLElement | null;\n\n        const response: any = {\n            toastId: this.toastId,\n            state: 'visible',\n            startTime: new Date(),\n            endTime: undefined,\n            opt,\n            map,\n        };\n\n        const hideToast = (override: any = null): void => {\n            if (toastElement === document.activeElement && !override) {\n                return;\n            }\n\n            this.removeToast(toastElement);\n\n            if (intervalId) {\n                clearTimeout(intervalId);\n            }\n\n            if (opt.onHidden && response.state !== 'hidden') {\n                opt.onHidden();\n            }\n\n            response.state = 'hidden';\n            response.endTime = new Date();\n            this.publish(response);\n        };\n\n        const setAria = (): void => {\n            let ariaValue = '';\n\n            switch (opt.iconClass) {\n                case 'toast-success':\n                case 'toast-info':\n                    ariaValue = 'polite';\n\n                    break;\n\n                default:\n                    ariaValue = 'assertive';\n            }\n\n            toastElement.setAttribute('aria-live', ariaValue);\n        };\n\n        const delayedHideToast = (): void => {\n            if (opt.timeOut > 0 || opt.extendedTimeOut > 0) {\n                intervalId = setTimeout(hideToast, opt.extendedTimeOut);\n            }\n        };\n\n        const stickAround = (): void => {\n            if (intervalId) {\n                clearTimeout(intervalId);\n            }\n        };\n\n        const handleEvents = (): void => {\n            if (opt.closeOnHover) {\n                toastElement.addEventListener('mouseover', () => stickAround());\n                toastElement.addEventListener('mouseout', () => delayedHideToast());\n            }\n\n            if (!opt.onclick && opt.tapToDismiss) {\n                toastElement.addEventListener('click', hideToast);\n            }\n\n            if (opt.closeButton && closeElement) {\n                closeElement.addEventListener('click', (event) => {\n                    event.stopPropagation();\n\n                    if (opt.onCloseClick) {\n                        opt.onCloseClick(event);\n                    }\n\n                    hideToast(true);\n                });\n            }\n\n            if (opt.onclick) {\n                toastElement.addEventListener('click', (event) => {\n                    // ts needs another check here\n                    if (opt.onclick) {\n                        opt.onclick(event);\n                    }\n\n                    hideToast();\n                });\n            }\n        };\n\n        const setTitle = (): void => {\n            if (map.title) {\n                let suffix = map.title;\n                if (opt.escapeHtml) {\n                    suffix = htmlEncode(map.title);\n                }\n                $titleElement.innerHTML = suffix;\n                toggleClass($titleElement, opt.titleClass, true);\n                toastElement.appendChild($titleElement);\n            }\n        };\n\n        const setMessage = (): void => {\n            if (map.message) {\n                let suffix = map.message;\n\n                if (opt.escapeHtml) {\n                    suffix = htmlEncode(map.message);\n                }\n\n                $messageElement.innerHTML = suffix;\n                toggleClass($messageElement, opt.messageClass, true);\n                toastElement.appendChild($messageElement);\n            }\n        };\n\n        const setCloseButton = (): void => {\n            if (opt.closeButton && closeElement) {\n                toggleClass(closeElement, opt.closeClass, true);\n                closeElement.setAttribute('role', 'button');\n                toastElement.insertBefore(closeElement, toastElement.firstChild);\n            }\n        };\n\n        const setSequence = (): void => {\n            if (opt.newestOnTop) {\n                container.insertBefore(toastElement, container.firstChild);\n            } else {\n                container.appendChild(toastElement);\n            }\n        };\n\n        const displayToast = (): void => {\n            if (opt.onShown) {\n                opt.onShown();\n            }\n\n            if (opt.timeOut > 0) {\n                intervalId = setTimeout(hideToast, opt.timeOut);\n\n            }\n        };\n\n        const personalizeToast = (): void => {\n            toastElement.classList.add('show');\n            opt.rtl && toastElement.classList.add('rtl');\n            opt.toastClass && toggleClass(toastElement, opt.toastClass, true);\n            opt.iconClass && toggleClass(toastElement, opt.iconClass, true);\n            setTitle();\n            setMessage();\n            setCloseButton();\n            setSequence();\n            setAria();\n        };\n\n        personalizeToast();\n        displayToast();\n        handleEvents();\n        this.publish(response);\n        return toastElement;\n    }\n}\n\ninitialInstance = new Toastr();\n\nexport default initialInstance;\n", "\uFEFFimport { htmlEncode } from \"./html\";\nimport { localText } from \"./localtext\";\nimport { extend } from \"./system\";\nimport initialInstance, { ToastrOptions } from \"./toastr2\";\n\n// set default for toastr itself, possible security issue\nif (typeof initialInstance !== \"undefined\" && initialInstance.options)\n    initialInstance.options.escapeHtml = true;\n\nexport let defaultNotifyOptions: ToastrOptions = {\n    timeOut: 3000,\n    showDuration: 250,\n    hideDuration: 500,\n    escapeHtml: true,\n    extendedTimeOut: 500,\n    positionClass: 'position-toast toast-top-full-width'\n}\n\nfunction getToastrOptions(options: ToastrOptions) {\n    options = extend(extend({}, defaultNotifyOptions), options);\n    positionToastContainer(true, options);\n    return options;\n}\n\nfunction showToast(type: string, message: string, title?: string, options?: ToastrOptions) {\n    if (typeof initialInstance !== \"undefined\" && (typeof (initialInstance as any)[type]) === 'function') {\n        (initialInstance as any)[type](message, title, getToastrOptions(options));\n        return;\n    }\n\n    if (typeof document === \"undefined\" || !document.body) {\n        console.error(`no document found! can't show toast: ${type} - ${title}: ${message}`);\n        return;\n    }\n\n    var container = document.getElementById('toast-container') as HTMLDivElement;\n    if (!container) {\n        container = document.createElement('div');\n        container.id = \"toast-container\"\n        container.className = \"toast-container top-0 end-0 p-3\";\n        document.body.append(container);\n\n        var toast = document.createElement('div');\n        toast.className = \"toast\";\n        toast.role = \"alert\";\n        toast.ariaLive = \"assertive\";\n        toast.ariaAtomic = \"true\";\n        toast.innerHTML = `<div class=\"toast-header bg-${htmlEncode(type)} text-${htmlEncode(type)}\">\n          <strong class=\"me-auto\">${htmlEncode(title)}</strong>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"${htmlEncode(localText(\"Dialogs.CloseButton\"))}\"></button>\n        </div>\n        <div class=\"toast-body\">\n        ${htmlEncode(message)}\n        </div>\n      </div>`;\n        container.appendChild(toast);\n\n        // @ts-ignore\n        if (typeof bootstrap === \"undefined\") {\n            toast.querySelector('.btn-close').addEventListener('click', function(this: HTMLButtonElement) { this.remove(); });\n            setTimeout(function() { this.remove(); }, 10000);\n        }\n    }\n}\n\nexport function notifyWarning(message: string, title?: string, options?: ToastrOptions): void {\n    showToast('warning', message, title, getToastrOptions(options));\n}\n\nexport function notifySuccess(message: string, title?: string, options?: ToastrOptions): void {\n    showToast('success', message, title, getToastrOptions(options));\n}\n\nexport function notifyInfo(message: string, title?: string, options?: ToastrOptions): void {\n    showToast('info', message, title, getToastrOptions(options));\n}\n\nexport function notifyError(message: string, title?: string, options?: ToastrOptions): void {\n    showToast('error', message, title, getToastrOptions(options));\n}\n\nexport function positionToastContainer(create: boolean, options?: ToastrOptions) {\n    if (typeof initialInstance === 'undefined') {\n        return;\n    }\n\n    var container = initialInstance.getContainer(options, create);\n    if (!container || !container.classList.contains('position-toast'))\n        return;\n\n    var dialog = typeof $ !== \"undefined\" ? $(window.document.body).children('.ui-dialog:visible, .modal.in, .modal.show').last() : [] as any;\n    if (dialog.length > 0) {\n        var position = dialog.position();\n        container.classList.add('positioned-toast');\n        container.style.position = 'absolute';\n        container.style.top = position.top + 28 + 'px';\n        container.style.left = position.left + 6 + 'px';\n        container.style.width = dialog.width() - 12 + 'px';\n    }\n    else if (container.classList.contains('positioned-toast')) {\n        container.classList.remove('positioned-toast');\n        container.style.position = '';\n        container.style.top = '';\n        container.style.left = '';\n        container.style.width = '';\n    }\n}", "\uFEFFvar Config = {\n    /**\n     * This is the root path of your application. If your application resides under http://localhost/mysite/,\n     * your root path is \"mysite/\". This variable is automatically initialized by reading from a <link> element\n     * with ID \"ApplicationPath\" from current page, which is usually located in your _LayoutHead.cshtml file\n     */\n    applicationPath: '/',\n\n    /**\n     * Email validation by default only allows ASCII characters. Set this to true if you want to allow unicode.\n     */\n    emailAllowOnlyAscii: true,\n\n    /**\n     * @Obsolete defaulted to false before for backward compatibility, now its true by default\n     */\n    responsiveDialogs: true,\n\n    /**\n     * Set this to true, to prefer bootstrap dialogs over jQuery UI dialogs by default for message dialogs\n     */\n    bootstrapMessages: false,\n\n    /**\n     * This is the list of root namespaces that may be searched for types. For example, if you specify an editor type\n     * of \"MyEditor\", first a class with name \"MyEditor\" will be searched, if not found, search will be followed by\n     * \"Serenity.MyEditor\" and \"MyApp.MyEditor\" if you added \"MyApp\" to the list of root namespaces.\n     *\n     * You should usually add your application root namespace to this list in ScriptInitialization.ts file.\n     */\n    rootNamespaces: ['Serenity'],\n\n    /**\n     * This is an optional method for handling when user is not logged in. If a users session is expired \n     * and when a NotAuthorized response is received from a service call, Serenity will call this handler, so\n     * you may intercept it and notify user about this situation and ask if she wants to login again...\n     */\n    notLoggedInHandler: <Function>null\n}\n\nif (typeof document !== 'undefined') {\n    var pathLink = document.querySelector('link#ApplicationPath') as HTMLLinkElement;\n    if (pathLink != null) {\n        Config.applicationPath = pathLink.getAttribute('href');\n    }\n}\n\nexport { Config };", "\uFEFFconst _bootstrap: {\n    Modal?: {\n        new (div: HTMLElement, opt?: { backdrop?: boolean }): { show: () => void, hide: () => void };\n        VERSION?: string;\n        getInstance(el: HTMLElement): { hide: () => void, show: () => void };\n    }\n// @ts-ignore\n} = typeof bootstrap !== \"undefined\" ? bootstrap : undefined;\n\nexport default _bootstrap;", "\uFEFFimport { Config } from \"./config\";\nimport { extend } from \"./system\";\nimport { htmlEncode, toggleClass } from \"./html\";\nimport { startsWith } from \"./strings\";\nimport { tryGetText } from \"./localtext\";\nimport $ from \"@optionaldeps/jquery\";\nimport bootstrap from \"@optionaldeps/bootstrap\";\n\n/**\n * Options for a message dialog button\n */\nexport interface DialogButton {\n    /** Button text */\n    text?: string;\n    /** Button hint */\n    hint?: string;\n    /** Button icon */\n    icon?: string;\n    /** Click handler */\n    click?: (e: MouseEvent) => void;\n    /** CSS class for button */\n    cssClass?: string;\n    /** HTML encode button text. Default is true. */\n    htmlEncode?: boolean;\n    /** The code that is returned from message dialog function when this button is clicked */\n    result?: string;\n}\n\n/**\n * Options that apply to all message dialog types\n */\nexport interface CommonDialogOptions {\n    /** Event handler that is called when dialog is opened */\n    onOpen?: () => void;\n    /** Event handler that is called when dialog is closed */\n    onClose?: (result: string) => void;\n    /** Dialog title */\n    title?: string;\n    /** HTML encode the message, default is true */\n    htmlEncode?: boolean;\n    /** Wrap the message in a `<pre>` element, so that line endings are preserved, default is true */\n    preWrap?: boolean;\n    /** Dialog css class. Default is based on the message dialog type */\n    dialogClass?: string;\n    /** List of buttons to show on the dialog */\n    buttons?: DialogButton[];\n    /** Class to use for the modal element for Bootstrap dialogs */\n    modalClass?: string;\n    /** True to use Bootstrap dialogs even when jQuery UI  present, default is based on `Q.Config.bootstrapMessages */\n    bootstrap?: boolean;\n    /** The result code of the button used to close the dialog is returned via this variable in the options object */\n    result?: string;\n}\n\n// if both jQuery UI and bootstrap button exists, prefer jQuery UI button as UI dialog needs them\nif (typeof $ !== \"undefined\" && ($.fn as any)?.button?.noConflict && ($ as any).ui?.button) {\n    ($.fn as any).btn = ($ as any).fn.button.noConflict();\n}\n\nfunction toIconClass(icon: string): string {\n    if (!icon)\n        return null;\n    if (startsWith(icon, 'fa-'))\n        return 'fa ' + icon;\n    if (startsWith(icon, 'glyphicon-'))\n        return 'glyphicon ' + icon;\n    return icon;\n}\n\nfunction internalUIDialog(options: CommonDialogOptions, bodyHtml: string, dialogClass: string) {\n    var opt = extend(<any>{\n        modal: true,\n        width: '40%',\n        maxWidth: 450,\n        minWidth: 180,\n        resizable: false,\n        open: function () {\n            if (options.onOpen)\n                options.onOpen.call(this);\n        },\n        close: function () {\n            ($(this) as any).dialog?.('destroy');\n            if (options.onClose)\n                options.onClose.call(this, options.result);\n        }\n    }, options);\n\n    opt.dialogClass = 's-MessageDialog' + (dialogClass ? (' ' + dialogClass) : '');\n\n    if (options.buttons) {\n        opt.buttons = options.buttons.map(x => {\n            var btn = dialogButtonToUI(x);\n            btn.click = function (e: any) {\n                options.result = x.result;\n                ($(this) as any).dialog('close');\n                x.click && x.click.call(this, e);\n            }\n            return btn;\n        });\n    }\n\n    return ($('<div>' + bodyHtml + '</div>') as any).dialog(opt);\n}\n\nlet _isBS3: boolean;\nlet _isBS5Plus: boolean;\n\n/** Returns true if Bootstrap 3 is loaded */\nexport function isBS3(): boolean {\n    if (_isBS3 != null)\n        return _isBS3;\n    // @ts-ignore\n    return (_isBS3 = !!(typeof $ !== \"undefined\" && $?.fn?.modal?.Constructor?.VERSION && ($.fn.modal.Constructor.VERSION + \"\").charAt(0) == '3'));\n}\n\n/** Returns true if Bootstrap 5+ is loaded */\nexport function isBS5Plus(): boolean {\n    if (_isBS5Plus != null)\n        return _isBS5Plus;\n    return (_isBS5Plus = typeof bootstrap !== \"undefined\" && (!bootstrap.Modal || !bootstrap.Modal.VERSION || (!bootstrap.Modal.VERSION + \"\").charAt(0) != '4'));\n}\n\nconst defaultTxt: Record<string, string> = {\n    AlertTitle: 'Alert',\n    InformationTitle: 'Information',\n    WarningTitle: 'Warning',\n    ConfirmationTitle: 'Confirm',\n    OkButton: 'OK',\n    YesButton: 'Yes',\n    NoButton: 'No',\n    CancelButton: 'Cancel',\n    CloseButton: 'Close'\n};\n\nfunction txt(k: string) {\n    return htmlEncode(tryGetText(\"Dialogs.\" + k) ?? defaultTxt[k]);\n}\n\n/** \n * Builds HTML DIV element for a Bootstrap modal dialog\n * @param title Modal title\n * @param body Modal body, it will not be HTML encoded, so make sure it is encoded \n * @param modalClass Optional class to add to the modal element\n * @param escapeHtml True to html encode body, default is true\n * @returns \n */\nexport function bsModalMarkup(title: string, body: string, modalClass?: string, escapeHtml: boolean = true): HTMLDivElement {\n    var closeButton = `<button type=\"button\" class=\"${isBS5Plus() ? \"btn-\" : \"\"}close\" data-${isBS5Plus() ? \"bs-\" : \"\"}dismiss=\"modal\" aria-label=\"${txt('CloseButton')}\">` +\n        `${isBS5Plus() ? \"\" : '<span aria-hidden=\"true\">&times;</span>'}</button>`;\n    var div = document.createElement(\"div\");\n    div.classList.add(\"modal\");\n    if (modalClass?.length)\n        toggleClass(div, modalClass, true);\n    div.setAttribute(\"tabindex\", \"-1\");\n    div.setAttribute(\"role\", \"dialog\");\n    div.innerHTML = `<div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            ${(isBS3() ? closeButton : \"\")}<h5 class=\"modal-title\">${htmlEncode(title)}</h5>${(isBS3() ? \"\" : closeButton)}\n        </div>\n        <div class=\"modal-body\">${escapeHtml ? htmlEncode(body) : body}</div>\n        <div class=\"modal-footer\"></div>\n    </div>\n</div>`;\n    return div;\n}\n\nexport function dialogButtonToBS(x: DialogButton): HTMLButtonElement {\n    var html = x.htmlEncode == null || x.htmlEncode ? htmlEncode(x.text) : x.text;\n    var iconClass = toIconClass(x.icon);\n    if (iconClass?.length)\n        html = '<i class=\"' + htmlEncode(iconClass) + '\"><i>' + (html ? (\" \" + html) : \"\");\n    var button = document.createElement(\"button\");\n    button.classList.add(\"btn\");\n    if (x.cssClass?.length)\n        toggleClass(button, x.cssClass, true);\n    if (x.hint?.length)\n        button.setAttribute(\"title\", x.hint);\n    button.innerHTML = html;\n    return button;\n}\n\nexport function dialogButtonToUI(x: DialogButton): any {\n    var html = x.htmlEncode == null || x.htmlEncode ? htmlEncode(x.text) : x.text;\n    var iconClass = toIconClass(x.icon);\n    if (iconClass?.length)\n        html = '<i class=\"' + htmlEncode(iconClass) + '\"></i>' + (html ? (\" \" + html) : \"\");\n    var button = {\n        text: html,\n        click: x.click\n    } as any;\n    if (x.cssClass?.length)\n        button.cssClass = x.cssClass;\n    return button;\n}\n\nfunction internalBSModal(options: CommonDialogOptions, bodyHtml: string, modalClass: string) {\n    var modalDiv = bsModalMarkup(options.title, bodyHtml, \"s-MessageModal\" + (modalClass ? (\" \" + modalClass) : \"\"), false);\n    var footer = modalDiv.querySelector('.modal-footer') as HTMLElement;\n    var rawBS5 = typeof $ === \"undefined\" && isBS5Plus();\n\n    function createButton(x: DialogButton) {\n\n        if (!footer) {\n            return;\n        }\n\n        var button = dialogButtonToBS(x);\n        footer.append(button);\n        button.addEventListener(\"click\", e => {\n            options.result = x.result;\n            if (rawBS5) {\n                bootstrap.Modal.getInstance(modalDiv)?.hide();\n            }\n            else\n                ($(modalDiv) as any).modal('hide');\n            x.click && x.click.call(this, e);\n        });\n    }\n\n    if (options.buttons) {\n        for (var button of options.buttons) {\n            createButton(button);\n        }\n    }\n\n    if (rawBS5) {\n        document.body.appendChild(modalDiv);\n        if (options.onOpen)\n            modalDiv.addEventListener(\"shown.bs.modal\", options.onOpen);\n\n        modalDiv.addEventListener('hidden.bs.modal', e => {\n            try {\n                options.onClose && options.onClose(options.result);\n            }\n            finally {\n                modalDiv.remove();\n            }\n        });\n\n        document.body.appendChild(modalDiv);\n        new bootstrap.Modal(modalDiv, {\n            backdrop: false\n        }).show();\n    }\n    else {\n        var div = $(modalDiv).appendTo(document.body);\n\n        if (options.onOpen)\n            div.one('shown.bs.modal', options.onOpen);\n\n        div.one('hidden.bs.modal', e => {\n            try {\n                options.onClose && options.onClose(options.result);\n            }\n            finally {\n                div.remove();\n            }\n        });\n\n        if (isBS5Plus()) {\n\n            // @ts-ignore\n            (div as any).modal({\n                backdrop: false,\n            });\n            (div as any).modal('show');\n        }\n        else {\n            (div as any).modal({\n                backdrop: false,\n                show: true\n            } as any);\n        }\n\n        if (isBS5Plus())\n            (div as any).modal('show');\n    }\n}\n\nlet _useBrowserDialogs: boolean;\nfunction useBrowserDialogs() {\n    if (_useBrowserDialogs == null) {\n        _useBrowserDialogs = !isBS5Plus() && (typeof $ === 'undefined' || ((!($ as any).ui || !($ as any).ui?.dialog) && (!$.fn || !(($.fn as any).modal))));\n    }\n    return _useBrowserDialogs;\n}\n\nfunction useBSModal(options: CommonDialogOptions): boolean {\n    return Config.bootstrapMessages || options.bootstrap || !($ as any)?.ui?.dialog;\n}\n\nfunction getMessageBodyHtml(message: string, options?: CommonDialogOptions): string {\n    var encode = options == null || options.htmlEncode == null || options.htmlEncode;\n    if (encode)\n        message = htmlEncode(message);\n\n    var preWrap = options == null || (options.preWrap == null && encode) || options.preWrap;\n    return '<div class=\"message\"' + (preWrap ? ' style=\"white-space: pre-wrap\">' : '>') + message + '</div>';\n}\n\n/**\n * Additional options for Alert dialogs\n */\nexport interface AlertOptions extends CommonDialogOptions {\n    /** The title of OK button, or false to hide the OK button */\n    okButton?: string | boolean;\n    /** CSS class for OK button */\n    okButtonClass?: string;\n}\n\n/** \n * Displays an alert dialog \n * @param message The message to display\n * @param options Additional options. \n * @see AlertOptions \n * @example \n * alertDialog(\"An error occured!\"); }\n */\nexport function alertDialog(message: string, options?: AlertOptions) {\n\n    if (useBrowserDialogs()) {\n        window.alert(message);\n        return;\n    }\n\n    options ??= {};\n    let useBS = useBSModal(options);\n\n    if (options.htmlEncode == null)\n        options.htmlEncode = true;\n\n    if (options.okButton == null)\n        options.okButton = txt('OkButton');\n\n    if (options.title == null)\n        options.title = txt('AlertTitle')\n\n    if (options.buttons == null) {\n        options.buttons = [];\n        if (options.okButton == null || options.okButton) {\n            options.buttons.push({\n                text: typeof options.okButton == \"boolean\" ? txt('OkButton') : options.okButton,\n                cssClass: options.okButtonClass ?? (useBS ? 'btn-danger' : undefined),\n                result: 'ok'\n            });\n        }\n    }\n\n    var bodyHtml = getMessageBodyHtml(message, options);\n\n    if (useBS)\n        internalBSModal(options, bodyHtml, options.modalClass ?? \"s-AlertModal\");\n    else\n        internalUIDialog(options, bodyHtml, options.dialogClass ?? \"s-AlertDialog\");\n}\n\n/** @obsolete use alertDialog */\nexport const alert = alertDialog;\n\n/** Additional options for confirm dialog */\nexport interface ConfirmOptions extends CommonDialogOptions {\n    /** Title of the Yes button, or false to hide the Yes button. Default is value of local text: \"Dialogs.YesButton\" */\n    yesButton?: string | boolean;\n    /** CSS class for the Yes button. */\n    yesButtonClass?: string;\n    /** Title of the NO button, or false to hide the No button. Default is value of local text: \"Dialogs.NoButton\" */\n    noButton?: string | boolean;\n    /** Title of the CANCEL button, or false to hide the Cancel button. Default is value of local text: \"Dialogs.NoButton\" */\n    cancelButton?: string | boolean;\n    /** Event handler for cancel button click */\n    onCancel?: () => void;\n    /** Event handler for no button click */\n    onNo?: () => void;\n}\n\n/** \n * Display a confirmation dialog \n * @param message The message to display\n * @param onYes Callback for Yes button click \n * @param options Additional options. \n * @see ConfirmOptions \n * @example \n * confirmDialog(\"Are you sure you want to delete?\", () => { \n *     // do something when yes is clicked\n * }\n */\nexport function confirmDialog(message: string, onYes: () => void, options?: ConfirmOptions): void {\n    if (useBrowserDialogs()) {\n        if (window.confirm(message))\n            onYes && onYes();\n        return;\n    }\n\n    options ??= {};\n    let useBS = useBSModal(options);\n\n    if (options.htmlEncode == null)\n        options.htmlEncode = true;\n\n    if (options.yesButton == null)\n        options.yesButton = txt('YesButton');\n\n    if (options.noButton == null)\n        options.noButton = txt('NoButton');\n\n    if (typeof options.title === \"undefined\")\n        options.title = txt('ConfirmationTitle');\n\n    if (options.buttons == null) {\n        options.buttons = [];\n        if (options.yesButton == null || options.yesButton) {\n            options.buttons.push({\n                text: typeof options.yesButton == \"boolean\" ? txt('YesButton') : options.yesButton,\n                cssClass: options.yesButtonClass ?? (useBS ? 'btn-primary' : undefined),\n                result: 'yes',\n                click: onYes\n            });\n        }\n        if (options.noButton == null || options.noButton) {\n            options.buttons.push({\n                text: typeof options.noButton == \"boolean\" ? txt('NoButton') : options.noButton,\n                cssClass: useBS ? (isBS5Plus() ? 'btn-danger' : 'btn-default') : undefined,\n                result: 'no',\n                click: options.onNo\n            });\n        }\n        if (options.cancelButton) {\n            options.buttons.push({\n                text: typeof options.cancelButton == \"boolean\" ? txt('CancelButton') : options.cancelButton,\n                cssClass: useBS ? (isBS5Plus() ? 'btn-secondary' : 'btn-default') : undefined,\n                result: 'cancel',\n                click: options.onCancel\n            });\n        }\n    }\n\n    message = getMessageBodyHtml(message, options);\n    if (useBS)\n        internalBSModal(options, message, options.modalClass ?? \"s-ConfirmModal\");\n    else\n        internalUIDialog(options, message, options.dialogClass ?? \"s-ConfirmDialog\");\n}\n\n/** @obsolete use confirmDialog */\nexport const confirm = confirmDialog;\n\n/** Options for `iframeDialog` **/\nexport interface IFrameDialogOptions {\n    html?: string;\n}\n\n/** \n * Display a dialog that shows an HTML block in an IFRAME, which is usually returned from server callbacks\n * @param options The options\n */\nexport function iframeDialog(options: IFrameDialogOptions) {\n\n    if (useBrowserDialogs()) {\n        window.alert(options.html);\n        return;\n    }\n\n    var doc: Document;\n    function onOpen(div: HTMLElement) {\n        if (div) {\n            var iframe = div.appendChild(document.createElement('iframe'));\n            iframe.setAttribute(\"style\", \"border: none; width: 100%; height: 100%;\");\n            doc = iframe.contentDocument;\n            if (doc) {\n                doc.open();\n                doc.write(options.html);\n                doc.close();\n            }\n        }\n    }\n\n    if (useBSModal(options as any)) {\n        internalBSModal({\n            title: txt('AlertTitle'),\n            modalClass: 'modal-lg',\n            onOpen: function () { onOpen(this.querySelector(\".modal-body>div\")) }\n        }, '<div style=\"overflow: hidden\"></div>', 's-IFrameModal');\n        return;\n    }\n\n    var div = document.createElement('div');\n    div.style.overflow = \"hidden\";\n    document.body.appendChild(div);\n    let settings: IFrameDialogOptions = extend<any>({\n        autoOpen: true,\n        modal: true,\n        width: '60%',\n        height: '400',\n        title: txt('AlertTitle'),\n        open: function () {\n            onOpen(div);\n        },\n        close: function () {\n            ($(div) as any).dialog?.('destroy').html('')?.remove?.();\n        }\n    }, options);\n    ($(div) as any).dialog?.(settings);\n}\n\n/** \n * Display an information dialog \n * @param message The message to display\n * @param onOk Callback for OK button click \n * @param options Additional options. \n * @see ConfirmOptions \n * @example \n * informationDialog(\"Operation complete\", () => { \n *     // do something when OK is clicked\n * }\n */\nexport function informationDialog(message: string, onOk?: () => void, options?: ConfirmOptions) {\n    if (useBrowserDialogs()) {\n        window.alert(message);\n        onOk && onOk();\n        return;\n    }\n\n    confirmDialog(message, onOk, extend<ConfirmOptions>({\n        title: txt(\"InformationTitle\"),\n        dialogClass: \"s-InformationDialog\",\n        modalClass: \"s-InformationModal\",\n        yesButton: txt(\"OkButton\"),\n        yesButtonClass: 'btn-info',\n        noButton: false,\n    }, options));\n}\n\n/** @obsolete use informationDialog */\nexport const information = informationDialog;\n\n/** \n * Display a success dialog \n * @param message The message to display\n * @param onOk Callback for OK button click \n * @param options Additional options. \n * @see ConfirmOptions \n * @example \n * successDialog(\"Operation complete\", () => { \n *     // do something when OK is clicked\n * }\n */\nexport function successDialog(message: string, onOk?: () => void, options?: ConfirmOptions) {\n    if (useBrowserDialogs()) {\n        window.alert(message);\n        onOk && onOk();\n        return;\n    }\n\n    confirmDialog(message, onOk, extend<ConfirmOptions>({\n        title: txt(\"SuccessTitle\"),\n        dialogClass: \"s-SuccessDialog\",\n        modalClass: \"s-SuccessModal\",\n        yesButton: txt(\"OkButton\"),\n        yesButtonClass: 'btn-success',\n        noButton: false,\n    }, options));\n}\n\n/** @obsolete use successDialog */\nexport const success = successDialog;\n\n/** \n * Display a warning dialog \n * @param message The message to display\n * @param options Additional options. \n * @see AlertOptions \n * @example \n * warningDialog(\"Something is odd!\");\n */\nexport function warningDialog(message: string, options?: AlertOptions) {\n    alertDialog(message, extend<AlertOptions>({\n        title: txt(\"WarningTitle\"),\n        dialogClass: \"s-WarningDialog\",\n        modalClass: \"s-WarningModal\",\n        okButtonClass: 'btn-warning'\n    }, options));\n}\n\n/** @obsolete use warningDialog */\nexport const warning = warningDialog;\n\n/** \n * Closes a panel, triggering panelbeforeclose and panelclose events.\n * If the panelbeforeclose prevents the default, the operation is cancelled.\n * @param element The panel element\n * @param e  The event triggering the close\n */\nexport function closePanel(element: JQuery | HTMLElement, e?: Event) {\n\n    var el = ($ && element instanceof $) ? (element as JQuery).get(0) : element as HTMLElement;\n    if (!el || !el.classList.contains(\"s-Panel\") || el.classList.contains(\"hidden\"))\n        return;\n\n    var event: any;\n    if ($) {\n        event = $.Event(e as any);\n        event.type = 'panelbeforeclose';\n        event.target = el\n        $(element).trigger(event);\n        if (event.isDefaultPrevented())\n            return;\n        event = $.Event(\"panelclosing\", { panel: el });\n        $(window).trigger(event);\n    }\n    else {\n        event = new Event(\"panelbeforeclose\", { cancelable: true });\n        el.dispatchEvent(event);\n        if (event.defaultPrevented) {\n            return;\n        }\n        event = new Event(\"panelclosing\");\n        event.panel = el;\n        window.dispatchEvent(event);\n    }\n\n    el.classList.add(\"hidden\");\n\n    var uniqueName = el.dataset.paneluniquename;\n    if (uniqueName?.length) {\n        document.querySelectorAll(`[data-panelhiddenby=\"${uniqueName}\"]`).forEach(e => {\n            e.classList.remove(\"panel-hidden\")\n            e.removeAttribute(\"data-panelhiddenby\");\n        });\n    }\n\n    if ($) {\n        $(window).triggerHandler('resize');\n        $('.require-layout:visible').triggerHandler('layout');\n        event = $.Event(e as any);\n        event.type = 'panelclose';\n        event.target = el;\n        $(el).trigger(event);\n        event = $.Event(\"panelclosed\", { panel: el });\n        $(window).trigger(event);\n    }\n    else {\n        window.dispatchEvent(new Event(\"resize\"));\n\n        var layoutEvent = new Event(\"layout\");\n        document.querySelectorAll(\".require-layout\").forEach((rl: HTMLElement) => {\n            if (rl.offsetWidth > 0 || rl.offsetHeight > 0)\n                rl.dispatchEvent(layoutEvent);\n        });\n\n        el.dispatchEvent(new Event(\"panelclose\"));\n        event = new Event(\"panelclosed\");\n        event.panel = el;\n        window.dispatchEvent(event);\n    }\n}\n\nexport function openPanel(element: JQuery | HTMLElement, uniqueName?: string) {\n\n    var el = ($ && element instanceof $) ? (element as JQuery).get(0) : element as HTMLElement\n    if (!el)\n        return;\n    var event: any;\n\n    if ($) {\n        event = $.Event('panelopening', { panel: el });\n        $(window).trigger(event);\n    }\n    else {\n        event = new Event(\"panelopening\") as any;\n        event.panel = el;\n        window.dispatchEvent(event);\n    }\n\n    var container = document.querySelector('.panels-container') ?? document.querySelector('section.content') as HTMLElement;\n\n    el.dataset.paneluniquename = uniqueName ?? el.id ?? new Date().getTime().toString();\n    function hide(e: HTMLElement) {\n        if (e === el ||\n            e.tagName === \"LINK\" ||\n            e.tagName === \"SCRIPT\" ||\n            e.classList.contains('panel-hidden') ||\n            ((e.classList.contains(\"ui-dialog\") || e.classList.contains(\"ui-widget-overlay\")) && e.offsetWidth <= 0 && e.offsetHeight <= 0))\n            return;\n\n        e.classList.add(\"panel-hidden\");\n        e.setAttribute('data-panelhiddenby', el.dataset.paneluniquename);\n    }\n\n    if (container) {\n        var c = container.children;\n        const cl = c.length;\n        for (var i = 0; i < cl; i++) {\n            hide(c[i] as HTMLElement);\n        }\n\n        if (el.parentElement !== container)\n            container.appendChild(el);\n    }\n\n    document.querySelectorAll('.ui-dialog, .ui-widget-overlay, .modal.show, .modal.in').forEach(hide);\n\n    el.classList.remove(\"hidden\");\n    el.classList.remove(\"panel-hidden\");\n    el.classList.add(\"s-Panel\");\n\n    if ($) {\n        $(el).trigger('panelopen');\n        event = $.Event('panelopened', { panel: el });\n        $(window).trigger(event);\n    }\n    else {\n        el.dispatchEvent(new Event(\"panelopen\"));\n        event = new Event(\"panelopened\") as any;\n        event.panel = el;\n        window.dispatchEvent(event);\n    }\n}", "\uFEFFimport { alertDialog } from \"./dialogs\";\nimport { htmlEncode } from \"./html\";\nimport { notifyError } from \"./notify\";\nimport { ServiceError } from \"./servicetypes\";\n\nexport namespace ErrorHandling {\n\n    export function showServiceError(error: ServiceError) {\n        let msg: any;\n        if (error == null) {\n            msg = '??ERROR??';\n        }\n        else {\n            msg = error.Message;\n            if (msg == null) {\n                msg = error.Code;\n            }\n        }\n\n        alertDialog(msg);\n    }\n\n    export function runtimeErrorHandler(message: string, filename?: string,\n        lineno?: number, colno?: number, error?: Error) {\n        try {\n            var host = (window.location.host || \"\").toLowerCase();\n            if (host.indexOf(\"localhost\") < 0 &&\n                host.indexOf(\"127.0.0.1\") < 0)\n                return;\n\n            var errorInfo = JSON.stringify(error || {});\n\n            message =\n                '<p></p><p>Message: ' + htmlEncode(message) +\n                '</p><p>File: ' + htmlEncode(filename) +\n                ', Line: ' + lineno + ', Column: ' + colno +\n                (errorInfo != \"{}\" ? '</p><p>Error: ' : \"\") + '</p>';\n\n            window.setTimeout(function () {\n                try {\n                    notifyError(message, \"SCRIPT ERROR! See browser console (F12) for details.\", {\n                        escapeHtml: false,\n                        timeOut: 15000\n                    });\n                }\n                catch {\n                }\n            });\n        }\n        catch {\n        }\n    }\n}", "\uFEFFimport $ from \"@optionaldeps/jquery\";\n\n/** Options for the BlockUI plugin. */\nexport interface JQBlockUIOptions {\n    useTimeout?: boolean;\n}\n\nlet blockUICount: number = 0;\n\nfunction blockUIWithCheck(opt: JQBlockUIOptions) {\n    if (blockUICount > 0) {\n        blockUICount++;\n        return;\n    }\n\n    if (($ as any)?.blockUI) {\n        ($ as any).blockUI(opt);\n    }\n    else if (typeof document !== \"undefined\") {\n        var div = document.createElement(\"div\");\n        div.className = \"blockUI blockOverlay\";\n        div.setAttribute(\"style\", \"z-index: 2000; border: none; margin: 0px; padding: 0px; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 0; cursor: wait; position: fixed;\");\n        document.body.appendChild(div);\n    }\n    blockUICount++;\n}\n\n/**\n * Uses jQuery BlockUI plugin to block access to whole page (default) or \n * a part of it, by using a transparent overlay covering the whole area.\n * @param options Parameters for the BlockUI plugin\n * @remarks If options are not specified, this function blocks \n * whole page with a transparent overlay. Default z-order of the overlay\n * div is 2000, so a higher z-order shouldn't be used in page.\n */\nexport function blockUI(options: JQBlockUIOptions) {\n    options = Object.assign(<any>{\n        baseZ: 2000,\n        message: '',\n        overlayCSS: {\n            opacity: '0.0',\n            zIndex: 2000,\n            cursor: 'wait'\n        }, fadeOut: 0\n    }, options);\n\n    if (options.useTimeout) {\n        window.setTimeout(function () {\n            blockUIWithCheck(options);\n        }, 0);\n    }\n    else {\n        blockUIWithCheck(options);\n    }\n}\n\n/**\n * Unblocks the page. \n */\nexport function blockUndo() {\n    if (blockUICount > 1) {\n        blockUICount--;\n        return;\n    }\n\n    blockUICount--;\n    if (($ as any)?.unblockUI)\n        ($ as any).unblockUI({ fadeOut: 0 });\n    else if (typeof document !== \"undefined\")\n        document.body.querySelector(':scope > .blockUI.blockOverlay')?.remove();\n}", "\uFEFFimport { extend } from \"./system\";\nimport { Config } from \"./config\"\nimport { ErrorHandling } from \"./errorhandling\";\nimport { alertDialog, iframeDialog } from \"./dialogs\";\nimport { blockUI, blockUndo } from \"./blockui\";\nimport { ListRequest, ServiceOptions, ServiceResponse } from \"./servicetypes\";\n\nexport function getCookie(name: string) {\n    if (($ as any).cookie)\n        return ($ as any).cookie(name);\n\n    name += '=';\n    for (var ca = document.cookie.split(/;\\s*/), i = ca.length - 1; i >= 0; i--)\n        if (!ca[i].indexOf(name))\n            return ca[i].replace(name, '');\n}\n\ntypeof $ != 'undefined' && $.ajaxSetup && $.ajaxSetup({\n    beforeSend: function (xhr, opt) {\n        if (!opt || !opt.crossDomain) {\n            var token = getCookie('CSRF-TOKEN');\n            if (token)\n                xhr.setRequestHeader('X-CSRF-TOKEN', token);\n        }\n    }\n});\n\nexport function serviceCall<TResponse extends ServiceResponse>(options: ServiceOptions<TResponse>) {\n    let handleError = function (response: any) {\n        if (Config.notLoggedInHandler != null &&\n            response &&\n            response.Error &&\n            response.Error.Code == 'NotLoggedIn' &&\n            Config.notLoggedInHandler(options, response)) {\n            return;\n        }\n\n        if (options.onError != null) {\n            options.onError(response);\n            return;\n        }\n\n        ErrorHandling.showServiceError(response.Error);\n    };\n\n    var url = options.service;\n    if (url && url.length && url.charAt(0) != '~' && url.charAt(0) != '/' && url.indexOf('://') < 0)\n        url = resolveUrl(\"~/Services/\") + url;\n\n    options = extend<ServiceOptions<TResponse>>({\n        dataType: 'json',\n        contentType: 'application/json',\n        type: 'POST',\n        cache: false,\n        blockUI: true,\n        url: url,\n        data: JSON.stringify(options.request),\n        success: function (data: any, textStatus: string, request: any) {\n            try {\n                if (!data.Error && options.onSuccess) {\n                    options.onSuccess(data);\n                }\n            }\n            finally {\n                if (options.blockUI) {\n                    blockUndo();\n                }\n                options.onCleanup && options.onCleanup();\n            }\n        },\n        error: function (xhr: any, status: any, ev: any) {\n            try {\n                if (xhr.status === 403) {\n                    var l: any = null;\n                    try {\n                        l = xhr.getResponseHeader('Location');\n                    }\n                    catch ($t1) {\n                        l = null;\n                    }\n                    if (l) {\n                        window.top.location.href = l;\n                        return;\n                    }\n                }\n                if ((xhr.getResponseHeader('content-type') || '')\n                    .toLowerCase().indexOf('application/json') >= 0) {\n                    var json = $.parseJSON(xhr.responseText);\n                    if (json && json.Error) {\n                        handleError(json);\n                        return;\n                    }\n                }\n                var html = xhr.responseText;\n                if (!html) {\n                    if (!xhr.status) {\n                        if (xhr.statusText != \"abort\")\n                            alertDialog(\"An unknown AJAX connection error occurred! Check browser console for details.\");\n                    }\n                    else if (xhr.status == 500)\n                        alertDialog(\"HTTP 500: Connection refused! Check browser console for details.\");\n                    else\n                        alertDialog(\"HTTP \" + xhr.status + ' error! Check browser console for details.');\n                }\n                else\n                    iframeDialog({ html: html });\n            }\n            finally {\n                if (options.blockUI) {\n                    blockUndo();\n                }\n                options.onCleanup && options.onCleanup();\n            }\n        }\n    }, options);\n\n    if (options.blockUI) {\n        blockUI(null);\n    }\n\n    return $.ajax(options);\n}\n\nexport function serviceRequest<TResponse extends ServiceResponse>(service: string, request?: any,\n    onSuccess?: (response: TResponse) => void, options?: ServiceOptions<TResponse>) {\n    return serviceCall(extend<ServiceOptions<TResponse>>({\n        service: service,\n        request: request,\n        onSuccess: onSuccess\n    }, options));\n}\n\nexport function setEquality(request: ListRequest, field: string, value: any) {\n    if (request.EqualityFilter == null) {\n        request.EqualityFilter = {};\n    }\n    request.EqualityFilter[field] = value;\n}\n\nexport interface PostToServiceOptions {\n    url?: string;\n    service?: string;\n    target?: string;\n    request: any;\n}\n\nexport interface PostToUrlOptions {\n    url?: string;\n    target?: string;\n    params: any;\n}\n\nexport function parseQueryString(s?: string): {} {\n    let qs: string;\n    if (s === undefined)\n        qs = location.search.substring(1, location.search.length);\n    else\n        qs = s || '';\n    let result: Record<string, string> = {};\n    let parts = qs.split('&');\n    for (let i = 0; i < parts.length; i++) {\n        let pair = parts[i].split('=');\n        let name = decodeURIComponent(pair[0]);\n        result[name] = (pair.length >= 2 ? decodeURIComponent(pair[1]) : name);\n    }\n    return result;\n}\n\nexport function postToService(options: PostToServiceOptions) {\n    let form = $('<form/>')\n        .attr('method', 'POST')\n        .attr('action', options.url ? (resolveUrl(options.url)) : resolveUrl('~/Services/' + options.service))\n        .appendTo(document.body);\n    if (options.target)\n        form.attr('target', options.target);\n    let div = $('<div/>').appendTo(form);\n    $('<input/>').attr('type', 'hidden').attr('name', 'request')\n        .val($['toJSON'](options.request))\n        .appendTo(div);\n    var csrfToken = getCookie('CSRF-TOKEN');\n    if (csrfToken) {\n        $('<input/>').attr('type', 'hidden').attr('name', '__RequestVerificationToken')\n            .appendTo(div).val(csrfToken);\n    }\n    $('<input/>').attr('type', 'submit')\n        .appendTo(div);\n    form.submit();\n    window.setTimeout(function () { form.remove(); }, 0);\n}\n\nexport function postToUrl(options: PostToUrlOptions) {\n    let form = $('<form/>')\n        .attr('method', 'POST')\n        .attr('action', resolveUrl(options.url))\n        .appendTo(document.body);\n    if (options.target)\n        form.attr('target', options.target);\n    let div = $('<div/>').appendTo(form);\n    if (options.params != null) {\n        for (let k in options.params) {\n            $('<input/>').attr('type', 'hidden').attr('name', k)\n                .val(options.params[k])\n                .appendTo(div);\n        }\n    }\n    var csrfToken = getCookie('CSRF-TOKEN');\n    if (csrfToken) {\n        $('<input/>').attr('type', 'hidden').attr('name', '__RequestVerificationToken')\n            .appendTo(div).val(csrfToken);\n    }\n    $('<input/>').attr('type', 'submit')\n        .appendTo(div);\n    form.submit();\n    window.setTimeout(function () { form.remove(); }, 0);\n}\n\nexport function resolveUrl(url: string) {\n    if (url && url.substr(0, 2) === '~/') {\n        return Config.applicationPath + url.substr(2);\n    }\n\n    return url;\n}", "\uFEFFimport { padLeft, startsWith, trim, trimToNull, zeroPad } from \"./strings\";\nimport { getInstanceType } from \"./system\";\n\nexport interface NumberFormat {\n    decimalSeparator: string;\n    groupSeparator?: string;\n    decimalDigits?: number;\n    positiveSign?: string;\n    negativeSign?: string;\n    nanSymbol?: string;\n    percentSymbol?: string;\n    currencySymbol?: string;\n}\n\nexport interface DateFormat {\n    dateSeparator?: string;\n    dateFormat?: string;\n    dateOrder?: string;\n    dateTimeFormat?: string;\n    amDesignator?: string;\n    pmDesignator?: string;\n    timeSeparator?: string;\n    firstDayOfWeek?: number;\n    dayNames?: string[];\n    shortDayNames?: string[];\n    minimizedDayNames?: string[];\n    monthNames?: string[];\n    shortMonthNames?: string[];\n}\n\nexport interface Locale extends NumberFormat, DateFormat {\n    stringCompare?: (a: string, b: string) => number;\n    toUpper?: (a: string) => string;\n}\n\nexport let Invariant: Locale = {\n    decimalSeparator: '.',\n    groupSeparator: ',',\n    decimalDigits: 2,\n    negativeSign: '-',\n    positiveSign: '+',\n    percentSymbol: '%',\n    currencySymbol: '$',\n    dateSeparator: '/',\n    dateOrder: 'mdy',\n    dateFormat: 'MM/dd/yyyy',\n    dateTimeFormat: 'MM/dd/yyyy HH:mm:ss',\n    amDesignator: 'AM',\n    pmDesignator: 'PM',\n    timeSeparator: ':',\n    firstDayOfWeek: 0,\n    dayNames: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n    shortDayNames: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\n    minimizedDayNames: ['Su','Mo','Tu','We','Th','Fr','Sa'],\n    monthNames: ['January','February','March','April','May','June','July','August','September','October','November','December',''],\n    shortMonthNames: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec',''],\n    stringCompare: (a, b) => a < b ? -1 : (a > b ? 1 : 0)\n}\n\nexport function compareStringFactory(order: string): ((a: string, b: string) => number) {\n\n    var o: { [key: string]: number } = {};\n    for (let z = 0; z < order.length; z++) {\n        o[order.charAt(z)] = z + 1;\n    }\n\n    return function(a: string, b: string) {\n        a = a || \"\";\n        b = b || \"\";\n        if (a == b)\n            return 0;\n        \n        let c: number;\n        for (let i = 0, _len = Math.min(a.length, b.length); i < _len; i++) {\n            let x = a.charAt(i), y = b.charAt(i);\n            if (x === y) {\n                continue;\n            }\n            let ix = o[x], iy = o[y];\n            if (ix != null && iy != null)\n                return ix < iy ? -1 : 1;\n            c = x.localeCompare(y);\n            if (c == 0)\n                continue;\n            return c;\n        }\n        if (c != null)\n            return c;\n        return a.localeCompare(b);\n    }\n}       \n\nexport let Culture: Locale = {\n    decimalSeparator: '.',\n    groupSeparator: ',',\n    dateSeparator: '/',\n    dateOrder: 'dmy',\n    dateFormat: 'dd/MM/yyyy',\n    dateTimeFormat: 'dd/MM/yyyy HH:mm:ss',\n    stringCompare: compareStringFactory(\"AaBbCc\u00C7\u00E7FfGg\u011E\u011FHhI\u0131\u0130iJjKkLlMmNnOo\u00D6\u00F6PpRrSs\u015E\u015FTtUu\u00DC\u00FCVvYyZz\")\n};\n\n(function() {\n    let k: string;\n    for (k in Invariant)\n        if ((Culture as any)[k] === undefined && Object.prototype.hasOwnProperty.call(Invariant, k))\n            (Culture as any)[k] = (Invariant as any)[k];\n\n    if (typeof document !== \"undefined\" && (k = trimToNull(document.querySelector('script#ScriptCulture')?.textContent)) != null) {\n        var sc = JSON.parse(k);\n        if (sc.DecimalSeparator != null)\n            Culture.decimalSeparator = sc.DecimalSeparator;\n        if (sc.GroupSeparator != null && sc.GroupSeparator != Culture.decimalSeparator)\n            Culture.groupSeparator = sc.GroupSeparator;\n        else if (Culture.groupSeparator == Culture.decimalSeparator)\n            Culture.groupSeparator = Culture.decimalSeparator == '.' ? ',' : '.';\n\n        delete sc.GroupSeparator;\n        delete sc.DecimalSeparator;\n        for (k in sc) {\n            if ((Culture as any)[k] === undefined && Object.prototype.hasOwnProperty.call(sc, k))\n                (Culture as any)[k.charAt(0).toLowerCase() + k.substr(1)] = sc[k];\n        }\n    }\n})();\n\n// for backwards compatibility\nexport function turkishLocaleToUpper(a: string): string {\n    if (!a)\n        return a;\n    return a.replace(/i/g, '\u0130').replace(/\u0131/g, 'I').toUpperCase();\n}\n\n// for backwards compatibility\nexport let turkishLocaleCompare = Culture.stringCompare;\n\nfunction insertGroupSeperator(num: string, dec: string, grp: string, neg: string) {\n    var decPart = null;\n    var decIndex = num.indexOf(dec);\n    if (decIndex > 0) {\n        decPart = num.substr(decIndex);\n        num = num.substr(0, decIndex);\n    }\n\n    var negative = startsWith(num, neg);\n    if (negative) {\n        num = num.substr(1);\n    }\n\n    var groupSize = 3;\n    if (num.length < groupSize) {\n        return (negative ? neg : '') + (decPart ? num + decPart : num);\n    }\n\n    var index = num.length;\n    var s = '';\n    var done = false;\n    while (!done) {\n        var length = groupSize;\n        var startIndex = index - length;\n        if (startIndex < 0) {\n            groupSize += startIndex;\n            length += startIndex;\n            startIndex = 0;\n            done = true;\n        }\n\n        if (!length)\n            break;\n\n        var part = num.substr(startIndex, length);\n        if (s.length)\n            s = part + grp + s;\n        else \n            s = part;\n        index -= length;\n    }\n\n    if (negative) \n        s = '-' + s;\n    return decPart ? s + decPart : s;\n}\n\nvar _formatRE = /\\{\\{|\\}\\}|\\{[^\\}\\{]+\\}/g;\n\nfunction _formatString(format: string, l: Locale, values: IArguments, from: number) {\n\n    return format.replace(_formatRE,\n        function (m) {\n            if (m === '{{' || m === '}}')\n                return m.charAt(0);\n            var index = parseInt(m.substr(1), 10);\n            var value = values[index + from];\n            if (value == null) {\n                return '';\n            }\n            var type = getInstanceType(value);\n            if (type == Number || type == Date) {\n                var formatSpec = null;\n                var formatIndex = m.indexOf(':');\n                if (formatIndex > 0) {\n                    formatSpec = m.substring(formatIndex + 1, m.length - 1);\n                }\n                return _formatObject(value, formatSpec, l);\n            }\n            else {\n                return value.toString();\n            }\n        });\n};\n\n\nexport function format(format: string, ...prm: any[]): string {\n    return _formatString(format, Culture, arguments, 1);\n}\n\nexport function localeFormat(format: string, l: Locale, ...prm: any[]): string {\n    return _formatString(format, l, arguments, 2);\n}\n\nfunction _formatObject(obj: any, format: string, fmt?: Locale): string {\n    if (typeof (obj) === 'number')\n        return formatNumber(obj, format, fmt);\n    else if (Object.prototype.toString.call(obj) === '[object Date]')\n        return formatDate(obj, format, fmt);\n    else\n        return obj.format(format);\n};\n\nexport let round = (n: number, d?: number, rounding?: boolean) => {\n    var m = Math.pow(10, d || 0);\n    n *= m;\n    var sign = ((n > 0) as any) | -(n < 0);\n    if (n % 1 === 0.5 * sign) {\n        var f = Math.floor(n);\n        return (f + (rounding ? (sign > 0) as any : (f % 2 * sign))) / m;\n    }\n\n    return Math.round(n) / m;\n};\n\nexport let trunc = (n: number): number => n != null ? (n > 0 ? Math.floor(n) : Math.ceil(n)) : null;\n\nexport function formatNumber(num: number, format?: string, decOrLoc?: string | NumberFormat, grp?: string): string {\n    \n    if (num == null)\n        return \"\";\n    \n    var fmt: NumberFormat = typeof decOrLoc !== \"string\" ? (decOrLoc ?? Culture) : {\n        decimalSeparator: decOrLoc,\n        groupSeparator: grp ?? (decOrLoc == \",\" ? \".\" : \",\")\n    }\n    \n    if (isNaN(num)) {\n        return fmt.nanSymbol ?? Culture.nanSymbol;\n    }\n    \n    if (format == null || (format.length == 0) || (format == 'i')) {\n        return num.toString();\n    }\n\n    var dec = fmt.decimalSeparator ?? Culture.decimalSeparator;\n    grp = grp ?? fmt.groupSeparator ?? Culture.groupSeparator;\n    var neg = fmt.negativeSign ?? Culture.negativeSign;\n\n    var s = '';\n    var precision = -1;\n\n    if (format.length > 1) {\n        precision = parseInt(format.substr(1), 10);\n    }\n    \n    var fs = format.charAt(0);\n    switch (fs) {\n        case 'd': \n        case 'D':\n            s = parseInt(Math.abs(num) as any).toString();\n            if (precision != -1)\n                s = padLeft(s, precision, '0');\n            if (num < 0)\n                s = neg + s;\n            break;\n        case 'x': case 'X':\n            s = parseInt(Math.abs(num) as any).toString(16);\n            if (fs == 'X')\n                s = s.toUpperCase();\n            if (precision != -1)\n                s = padLeft(s, precision, '0');\n            break;\n        case 'e': \n        case 'E':\n            if (precision == -1)\n                s = num.toExponential(6);\n            else\n                s = num.toExponential(precision);\n            if (fs == 'E')\n                s = s.toUpperCase();\n            break;\n        case 'f': \n        case 'F':\n        case 'n':\n        case 'N':\n            if (precision == -1) {\n                precision = fmt.decimalDigits ?? Culture.decimalDigits;\n            }\n            s = num.toFixed(precision).toString();\n            if (precision && (dec != '.')) {\n                var index = s.indexOf('.');\n                s = s.substr(0, index) + dec + s.substr(index + 1);\n            }\n            if ((fs == 'n') || (fs == 'N')) {\n                s = insertGroupSeperator(s, dec, grp, neg);\n            }\n            break;\n        case 'c': case 'C':\n        case 'p': case 'P':\n            if (precision == -1) {\n                precision = fmt.decimalDigits ?? Culture.decimalDigits;\n            }\n            if (fs === 'p' || fs == 'P')\n                num *= 100;\n            s = Math.abs(num).toFixed(precision).toString();\n            if (precision && (dec != '.')) {\n                var index = s.indexOf('.');\n                s = s.substr(0, index) + dec + s.substr(index + 1);\n            }\n            s = insertGroupSeperator(s, dec, grp, neg);\n            s = localeFormat(\"0\", fmt, s);\n            break;\n            \n        default:\n            var prefix = '';\n            var mid = '';\n            var suffix = '';\n            var endPrefix = false;\n            var inQuote = false;\n            for (var i = 0; i < format.length; i++) {\n                var c = format.charAt(i);\n                if (c == \"'\") {\n                    inQuote = !inQuote;\n                    continue;\n                }\n                else if (!inQuote) {\n                    if (c == '\\\\') {\n                        var c = (format.charAt(i + 1) || '');\n                        i++;\n                    }\n                    else if (c == '#' || c == ',' || c == '.' || c == '0') {\n                        endPrefix = true;\n                        mid += c;\n                        continue;\n                    }\n                }\n                endPrefix ? (suffix += c) : (prefix += c);\n            }\n\n            format = mid;\n\n            let r = \"\";\n            if (format.indexOf(\".\") > -1) {\n                let dp = dec;\n                let df = format.substring(format.lastIndexOf(\".\") + 1);\n                num = roundNumber(num, df.length);\n                let dv = num % 1;\n                let ds = new String(dv.toFixed(df.length));\n                ds = ds.substring(ds.lastIndexOf(\".\") + 1);\n                for (let i = 0; i < df.length; i++) {\n                    if (df.charAt(i) == '#' && ds.charAt(i) != '0') {\n                        dp += ds.charAt(i);\n                        continue;\n                    }\n                    else if (df.charAt(i) == '#' && ds.charAt(i) == '0') {\n                        let notParsed = ds.substring(i);\n                        if (notParsed.match('[1-9]')) {\n                            dp += ds.charAt(i);\n                            continue;\n                        }\n                        else\n                            break;\n                    }\n                    else if (df.charAt(i) == \"0\")\n                        dp += ds.charAt(i);\n                    else\n                        dp += df.charAt(i);\n                }\n                r += dp;\n            }\n            else\n                num = Math.round(num);\n    \n            let ones = Math.floor(num);\n            if (num < 0)\n                ones = Math.ceil(num);\n            let of = \"\";\n            if (format.indexOf(\".\") == -1)\n                of = format;\n            else\n                of = format.substring(0, format.indexOf(\".\"));\n    \n            let op = \"\";\n            if (!(ones == 0 && of.substr(of.length - 1) == '#')) {\n                // find how many digits are in the group\n                let oneText = new String(Math.abs(ones));\n                let gl = 9999;\n                if (of.lastIndexOf(\",\") != -1)\n                    gl = of.length - of.lastIndexOf(\",\") - 1;\n                let gc = 0;\n                for (let i = oneText.length - 1; i > -1; i--) {\n                    op = oneText.charAt(i) + op;\n                    gc++;\n                    if (gc == gl && i != 0) {\n                        op = grp + op;\n                        gc = 0;\n                    }\n                }\n    \n                // account for any pre-data padding\n                if (of.length > op.length) {\n                    let padStart = of.indexOf('0');\n                    if (padStart != -1) {\n                        let padLen = of.length - padStart;\n                        // pad to left with 0's or group char\n                        let pos = of.length - op.length - 1;\n                        while (op.length < padLen) {\n                            let pc = of.charAt(pos);\n                            // replace with real group char if needed\n                            if (pc == ',')\n                                pc = grp;\n                            op = pc + op;\n                            pos--;\n                        }\n                    }\n                }\n            }\n    \n            if (!op && of.indexOf('0', of.length - 1) !== -1)\n                op = '0';\n    \n            r = op + r;\n            if (num < 0)\n                r = neg + r;\n    \n            if (r.lastIndexOf(dec) == r.length - 1) {\n                r = r.substring(0, r.length - 1);\n            }\n    \n            return prefix + r + suffix;\n    }\n\n    return s;\n}\n\nexport function parseInteger(s: string): number {\n    if (s == null)\n        return null;\n    s = trim(s.toString());\n    if (!s.length)\n        return null;\n    let ts = Culture.groupSeparator;\n    if (s && s.length && s.indexOf(ts) > 0) {\n        s = s.replace(new RegExp(\"(\\\\b\\\\d{1,3})\\\\\" + ts + \"(?=\\\\d{3}(\\\\D|$))\", \"g\"), '$1');\n    }\n    if (!(/^[-\\+]?\\d+$/.test(s)))\n        return NaN;\n    return parseInt(s, 10);\n}\n\nexport function parseDecimal(s: string): number {\n    if (s == null)\n        return null;\n\n    s = trim(s.toString());\n    if (s.length == 0)\n        return null;\n\n    let ts = Culture.groupSeparator;\n\n    if (s && s.length && s.indexOf(ts) > 0) {\n        s = s.replace(new RegExp(\"(\\\\b\\\\d{1,3})\\\\\" + ts + \"(?=\\\\d{3}(\\\\D|$))\", \"g\"), '$1');\n    }\n\n    if (!(new RegExp(\"^\\\\s*([-\\\\+])?(\\\\d*)\\\\\" + Culture.decimalSeparator + \"?(\\\\d*)\\\\s*$\").test(s)))\n        return NaN;\n\n    return parseFloat(s.toString().replace(Culture.decimalSeparator, '.'));\n}\n\nfunction roundNumber(n: number, dec?: number): number {\n    let power = Math.pow(10, dec || 0);\n    let value = (Math.round(n * power) / power).toString();\n    // ensure the decimal places are there\n    if (dec > 0) {\n        let dp = value.indexOf(\".\");\n        if (dp == -1) {\n            value += '.';\n            dp = 0;\n        }\n        else {\n            dp = value.length - (dp + 1);\n        }\n        while (dp < dec) {\n            value += '0';\n            dp++;\n        }\n    }\n    return parseFloat(value);\n}\n\nexport function toId(id: any): any {\n    if (id == null)\n        return null;\n    if (typeof id == \"number\")\n        return id;\n    if (typeof id == \"string\")\n        id = trim(id);\n    if (!id.length)\n        return null;\n    if (id.length >= 15 || !(/^-?\\d+$/.test(id)))\n        return id;\n    return parseInt(id, 10);\n}\n\nvar _dateFormatRE = /'.*?[^\\\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|\\//g;\n\nexport function formatDate(d: Date | string, format?: string, locale?: Locale) {\n    if (!d)\n        return '';\n\n    let date: Date;\n    if (typeof d == \"string\") {\n        date = parseDate(d, locale?.dateOrder);\n        if (!date)\n            return '';\n\n        if (isNaN(date.valueOf()))\n            return d;\n    }\n    else\n        date = d;\n\n    if (format == 'i') \n        return date.toString();\n    if (format == 'id')\n        return date.toDateString();\n    if (format == 'it')\n        return date.toTimeString();\n    \n    if (locale == null)\n        locale = Culture;\n\n    if (format == null || format == \"d\")\n        format = locale.dateFormat ?? Culture.dateFormat;\n    else if (format.length == 1) {\n        switch (format) {\n            case \"g\": format = (locale.dateTimeFormat ?? Culture.dateTimeFormat).replace(\":ss\", \"\"); break;\n            case \"G\": format = (locale.dateTimeFormat ?? Culture.dateTimeFormat); break;\n            case \"s\": format = \"yyyy-MM-ddTHH:mm:ss\"; break;\n            case 't': format = (locale.dateTimeFormat && locale.dateFormat) ? locale.dateTimeFormat.replace(locale.dateFormat + \" \", \"\") : \"HH:mm\"; break;\n            case 'u':\n            case 'U':\n                format = format == 'u' ? 'yyyy-MM-ddTHH:mm:ss.fffZ' : locale.dateTimeFormat ?? Culture.dateTimeFormat;\n                date = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(),\n                    date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());\n                break;\n        }\n    }\n\n    if (format.charAt(0) == '%') {\n        format = format.substr(1);\n    }\n\n    var re = _dateFormatRE;\n    var sb = [];\n\n    re.lastIndex = 0;\n    while (true) {\n        var index = re.lastIndex;\n        var match = re.exec(format);\n\n        sb.push(format.slice(index, match ? match.index : format.length));\n        if (!match) {\n            break;\n        }\n\n        var fs = match[0];\n        var part: any = fs;\n        switch (fs) {\n            case '/': \n                part = locale.dateSeparator ?? Culture.dateSeparator;\n                break;\n            case 'dddd':\n                part = (locale.dayNames ?? Culture.dayNames)[date.getDay()];\n                break;\n            case 'ddd':\n                part = (locale.shortDayNames ?? Culture.shortDayNames)[date.getDay()];\n                break;\n            case 'dd':\n                part = padLeft(date.getDate().toString(), 2, '0');\n                break;\n            case 'd':\n                part = date.getDate();\n                break;\n            case 'MMMM':\n                part = (locale.monthNames ?? Culture.monthNames)[date.getMonth()];\n                break;\n            case 'MMM':\n                part = (locale.shortMonthNames ?? Culture.shortMonthNames)[date.getMonth()];\n                break;\n            case 'MM':\n                part = padLeft(date.getMonth() + 1, 2, '0');\n                break;\n            case 'M':\n                part = (date.getMonth() + 1);\n                break;\n            case 'yyyy':\n                part = padLeft(date.getFullYear(), 4, '0');\n                break;\n            case 'yy':\n                part = padLeft(date.getFullYear() % 100, 2, '0');\n                break;\n            case 'y':\n                part = date.getFullYear() % 100;\n                break;\n            case 'h': case 'hh':\n                part = date.getHours() % 12;\n                if (!part) {\n                    part = '12';\n                }\n                else if (fs == 'hh') {\n                    part = padLeft(part, 2, '0');\n                }\n                break;\n            case 'HH':\n                part = padLeft(date.getHours(), 2, '0');\n                break;\n            case 'H':\n                part = date.getHours();\n                break;\n            case 'mm':\n                part = padLeft(date.getMinutes(), 2, '0');\n                break;\n            case 'm':\n                part = date.getMinutes();\n                break;\n            case 'ss':\n                part = padLeft(date.getSeconds().toString(), 2, '0');\n                break;\n            case 's':\n                part = date.getSeconds();\n                break;\n            case 't': case 'tt':\n                part = (date.getHours() < 12) ? (locale.amDesignator ?? Culture.amDesignator) : (locale.pmDesignator ?? Culture.pmDesignator);\n                if (fs == 't') {\n                    part = part.charAt(0);\n                }\n                break;\n            case 'fff':\n                part = padLeft(date.getMilliseconds(), 3, '0');\n                break;\n            case 'ff':\n                part = padLeft(date.getMilliseconds(), 3, '0').substr(0, 2);\n                break;\n            case 'f':\n                part = padLeft(date.getMilliseconds(), 3, '0').charAt(0);\n                break;\n            case 'z':\n                part = date.getTimezoneOffset() / 60;\n                part = ((part >= 0) ? '-' : '+') + Math.floor(Math.abs(part));\n                break;\n            case 'zz': \n            case 'zzz':\n                part = date.getTimezoneOffset() / 60;\n                part = ((part >= 0) ? '-' : '+') +\n                    padLeft(Math.floor(Math.abs(part)), 2, '0');\n                if (fs == 'zzz') {\n                    part += (locale.timeSeparator ?? Culture.timeSeparator) +\n                        padLeft(Math.abs(date.getTimezoneOffset() % 60), 2, '0');\n                }\n                break;\n            default:\n                if (part.charAt(0) == '\\'') {\n                    part = part.substr(1, part.length - 2).replace(/\\\\'/g, '\\'');\n                }\n                break;\n        }\n        sb.push(part);\n    }\n\n    return sb.join('');\n}\n\nexport function formatDayHourAndMin(n: number): string {\n    if (n == null)\n        return \"\";\n    if (n === 0)\n        return '0';\n    let days = Math.floor(n / 24 / 60);\n    let txt = \"\";\n    if (days > 0) {\n        txt += days.toString();\n    }\n    let mins = zeroPad(Math.floor((n % (24 * 60)) / (60)), 2) + ':' + zeroPad(n % 60, 2);\n    if (mins != '00:00') {\n        if (days > 0)\n            txt += \".\";\n        txt += mins;\n    }\n    return txt;\n}\n\nexport function formatISODateTimeUTC(d: Date): string {\n    if (d == null)\n        return \"\";\n    let zeropad = function (num: number) { return ((num < 10) ? '0' : '') + num; };\n    let str = d.getUTCFullYear() + \"-\" +\n        zeropad(d.getUTCMonth() + 1) + \"-\" +\n        zeropad(d.getUTCDate()) + \"T\" +\n        zeropad(d.getUTCHours()) + \":\" +\n        zeropad(d.getUTCMinutes());\n    let secs = Number(d.getUTCSeconds() + \".\" +\n        ((d.getUTCMilliseconds() < 100) ? '0' : '') +\n        zeropad(d.getUTCMilliseconds()));\n    str += \":\" + zeropad(secs) + \"Z\";\n    return str;\n}\n\nlet isoRegexp = /(\\d{4,})(?:-(\\d{1,2})(?:-(\\d{1,2})(?:[T ](\\d{1,2}):(\\d{1,2})(?::(\\d{1,2})(?:\\.(\\d+))?)?(?:(Z)|([+-])(\\d{1,2})(?::(\\d{1,2}))?)?)?)?)?/;\n\nexport function parseISODateTime(s: string): Date {\n    if (s == null)\n        return null;\n\n    if (typeof s !== \"string\")\n         s = s + \"\";\n\n    if (!s.length)\n        return null;\n\n    if (!isoRegexp.test(s))\n        return new Date(NaN);\n\n    return new Date(s + (s.length == 10 ? \"T00:00:00\" : \"\"));\n}\n\nexport function parseHourAndMin(value: string) {\n    let v = trim(value);\n    if (!v.length)\n        return null;\n    if (v.length < 4 || v.length > 5)\n        return NaN;\n    let h: number, m: number;\n    if (v.charAt(1) == ':') {\n        h = parseInteger(v.substr(0, 1));\n        m = parseInteger(v.substr(2, 2));\n    }\n    else {\n        if (v.charAt(2) != ':')\n            return NaN;\n        h = parseInteger(v.substr(0, 2));\n        m = parseInteger(v.substr(3, 2));\n    }\n    if (isNaN(h) || isNaN(m) || h < 0 || h > 23 || m < 0 || m > 59)\n        return NaN;\n    return h * 60 + m;\n}\n\nexport function parseDayHourAndMin(s: string): number {\n    let days: number;\n    let v = trim(s);\n    if (!v.length)\n        return null;\n    let p = v.split('.');\n    if (p.length == 1) {\n        days = parseInteger(p[0]);\n        if (!isNaN(days))\n            return days * 24 * 60;\n        return parseHourAndMin(p[0]);\n    }\n    else if (p.length == 2) {\n        days = parseInteger(p[0]);\n        let hm = parseHourAndMin(p[1]);\n        if (isNaN(days) || !hm || isNaN(hm))\n            return NaN;\n        return days * 24 * 60 + hm;\n    }\n    else\n        return NaN;\n}\n\nexport function parseDate(s: string, dateOrder?: string): Date {\n    if (!s || !s.length)\n        return null;\n\n    s = trim(s);\n    if (!s.length)\n        return null;\n\n    if (s.length >= 10 && s.charAt(4) === '-' && s.charAt(7) === '-' &&\n        (s.length === 10 || (s.length > 10 && s.charAt(10) === 'T'))) {\n        return parseISODateTime(s);\n    }\n\n    if (s.indexOf(' ') > 0 && s.indexOf(':') > s.indexOf(' ') + 1) {\n        var datePart = parseDate(s.substring(0, s.indexOf(' ')));\n        if (!datePart || isNaN(datePart.valueOf()))\n            return new Date(NaN);\n        return parseISODateTime(formatDate(datePart, 'yyyy-MM-dd') + 'T' + trim(s.substring(s.indexOf(' ') + 1)));\n    }\n\n    let d: number, m: number, y: number;\n    let dArray = splitDateString(s);\n    if (dArray.length == 3) {\n        if (dArray.some(x => !/^[0-9]+$/.test(x)))\n            return new Date(NaN);\n\n        dateOrder = dateOrder || Culture.dateOrder;\n        switch (dateOrder) {\n            case \"dmy\":\n                d = parseInt(dArray[0], 10);\n                m = parseInt(dArray[1], 10) - 1;\n                y = parseInt(dArray[2], 10);\n                break;\n            case \"ymd\":\n                d = parseInt(dArray[2], 10);\n                m = parseInt(dArray[1], 10) - 1;\n                y = parseInt(dArray[0], 10);\n                break;\n            case \"mdy\":\n            default:\n                d = parseInt(dArray[1], 10);\n                m = parseInt(dArray[0], 10) - 1;\n                y = parseInt(dArray[2], 10);\n                break;\n        }\n\n        if (isNaN(d) || isNaN(m) || isNaN(y) || d < 1 || d > 31 || m < 0 || m > 11 || y > 9999 || y < 0)\n            return new Date(NaN);\n\n        if (y < 100) {\n            let fullYear = new Date().getFullYear();\n            let shortYearCutoff = (fullYear % 100) + 10;\n            y += fullYear - fullYear % 100 + (y <= shortYearCutoff ? 0 : -100);\n        }\n\n        return new Date(y, m, d);\n    }\n    else if (dArray.length == 1) {\n        try {\n            return new Date(dArray[0]);\n        }\n        catch (e) {\n            return new Date(NaN);\n        }\n    }\n\n    return new Date(NaN);\n}\n\nexport function splitDateString(s: string): string[] {\n    s = trim(s);\n    if (!s.length)\n        return null;\n    if (s.indexOf(\"/\") >= 0)\n        return s.split(\"/\");\n    else if (s.indexOf(\".\") >= 0)\n        return s.split(\".\");\n    else if (s.indexOf(\"-\") >= 0)\n        return s.split(\"-\");\n    else if (s.indexOf(\"\\\\\") >= 0)\n        return s.split(\"\\\\\");\n    else\n        return [s];\n}", "\uFEFFimport { resolveUrl } from \"./services\";\nimport { startsWith, trimToNull } from \"./strings\";\nimport { blockUI, blockUndo } from \"./blockui\";\nimport { alertDialog, iframeDialog } from \"./dialogs\";\nimport { notifyError } from \"./notify\";\nimport { format } from \"./formatting\";\nimport { PropertyItem, PropertyItemsData } from \"./propertyitem\";\nimport { getStateStore } from \"./system\";\nimport { Lookup } from \"./lookup\";\n\nfunction getHash(key: string, reload?: boolean): string {\n    let k: string;\n\n    const stateStore = getStateStore();\n    if (stateStore.__scriptHash == null &&\n        typeof document !== \"undefined\" && \n        (k = trimToNull((document.querySelector('script#RegisteredScripts') || {}).innerHTML)) != null &&\n        k.charAt(0) == '{') {\n        var regs = JSON.parse(k);\n        ScriptData.setRegisteredScripts(regs);\n    }\n\n    if (stateStore.__scriptHash == null) {\n        if (reload)\n            stateStore.__scriptHash = {};\n        else\n            return null;\n    }\n\n    if (reload)\n        return (stateStore.__scriptHash[key] = new Date().getTime().toString());\n\n    return stateStore.__scriptHash[key];\n}\n\nfunction setHash(key: string, value: string): void {\n    getStateStore(\"__scriptHash\")[key] = value;\n}\n\nfunction getLoadedData(name: string): any {\n    return getStateStore(\"__scriptData\")[name];\n}\n\nfunction setLoadedData(name: string, value: any): void {\n    getStateStore(\"__scriptData\")[name] = value;\n}\n\nexport namespace ScriptData {\n    \n    export function bindToChange(name: string, regClass: string, onChange: () => void) {\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && ($(document.body) as any).bind('scriptdatachange.' + regClass, function (e: any, s: string) {\n            if (s == name) {\n                onChange();\n            }\n        });\n    }\n\n    export function triggerChange(name: string) {\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && $(document.body).triggerHandler('scriptdatachange', [name]);\n    }\n\n    export function unbindFromChange(regClass: string) {\n        typeof $ !== \"undefined\" && typeof document !== \"undefined\" && $(document.body).unbind('scriptdatachange.' + regClass);\n    }\n\n    function loadOptions(name: string, async: boolean): JQueryAjaxSettings {\n        return {\n            async: async,\n            cache: true,\n            type: 'GET',\n            url: resolveUrl('~/DynJS.axd/') + name + '.js?v=' + (getHash(name) ?? new Date().getTime()),\n            data: null,\n            dataType: 'text',\n            converters: {\n                \"text script\": function (text: string) {\n                    return text;\n                }\n            },\n            success: function (data, textStatus, jqXHR) {\n                $.globalEval(data);\n            },\n            error: function (xhr, textStatus, errorThrown) {\n                var isLookup = startsWith(name, \"Lookup.\");\n                if (xhr.status == 403 && isLookup) {\n                    notifyError('<p>Access denied while trying to load the lookup: \"<b>' +\n                        name.substr(7) + '</b>\". Please check if current user has required permissions for this lookup.</p> ' +\n                        '<p><em>Lookups use the ReadPermission of their row by default. You may override that for the lookup ' +\n                        'like [LookupScript(\"Some.Lookup\", Permission = \"?\")] to grant all ' +\n                        'authenticated users to read it (or use \"*\" for public).</em></p>' + \n                        '<p><em>Note that this might be a security risk if the lookup contains sensitive data, ' +\n                        'so it could be better to set a separate permission for lookups, like \"MyModule:Lookups\".</em></p>', null, {\n                            timeOut: 10000,\n                            escapeHtml: false\n                        });\n                    return;\n                }\n\n                notifyError(\"An error occurred while trying to load \" +\n                    (isLookup ? ' the lookup: \"' + name.substr(7) :\n                        ' dynamic script: \"' + name) +\n                    '\"!. Please check the error message displayed in the dialog below for more info.');\n\n                var html = xhr.responseText;\n                if (!html) {\n                    if (!xhr.status)\n                        alertDialog(\"An unknown connection error occurred! Check browser console for details.\");\n                    else if (xhr.status == 500)\n                        alertDialog(\"HTTP 500: Connection refused! Check browser console for details.\");\n                    else\n                        alertDialog(\"HTTP \" + xhr.status + ' error! Check browser console for details.');\n                }\n                else\n                    iframeDialog({ html: html });\n            }\n        }\n    }\n\n    async function loadScriptAsync(name: string): Promise<any> {\n        blockUI(null);\n        return await Promise.resolve(\n            $.ajax(loadOptions(name, true))\n                .always(function () {\n                    blockUndo();\n                }));\n    }\n\n    function loadScriptData(name: string) {\n        $.ajax(loadOptions(name, false));\n    }\n\n    async function loadScriptDataAsync(name: string): Promise<any> {\n        return await loadScriptAsync(name);\n    }\n\n    function loadError(name: string) {\n        var message;\n\n        if (name != null &&\n            name.startsWith('Lookup.')) {\n            message = 'No lookup with key \"' + name.substring(7) + '\" is registered. Please make sure you have a' +\n                ' [LookupScript(\"' + name.substring(7) + '\")] attribute in server side code on top of a row / custom lookup and ' +\n                ' its key is exactly the same.';\n        } else {\n            message = format(\"Can't load script data: {0}!\", name);\n        }\n\n        notifyError(message);\n        throw new Error(message);\n    }\n\n    export function ensure<TData = any>(name: string): TData {\n        var data = getLoadedData(name);\n        if (data == null) {\n            loadScriptData(name);\n        }\n\n        data = getLoadedData(name);\n\n        if (data == null) \n            loadError(name);\n\n        return data;\n    }\n\n    export async function ensureAsync<TData = any>(name: string): Promise<TData> {\n        var data = getLoadedData(name);\n        if (data != null)\n            return data;\n        await loadScriptDataAsync(name);\n        data = getLoadedData(name);\n        if (data == null)\n            loadError(name);\n        return data;\n    }\n\n    export function reload<TData = any>(name: string): TData {\n        getHash(name, true);\n        loadScriptData(name);\n        var data = getLoadedData(name);\n        return data;\n    }\n\n    export async function reloadAsync<TData = any>(name: string): Promise<TData> {\n        getHash(name, true);\n        await loadScriptDataAsync(name);\n        return getLoadedData(name);\n    }\n\n    export function canLoad(name: string) {\n        return getLoadedData(name) != null || getHash(name) != null;\n    }\n\n    export function setRegisteredScripts(scripts: any[]) {\n        var t = new Date().getTime().toString();\n        for (var k in scripts) {\n            setHash(k, scripts[k] || t);\n        }\n    }\n\n    export function set(name: string, value: any) {\n        setLoadedData(name, value);\n        triggerChange(name);\n    }\n}\n\nexport function getRemoteData<TData = any>(key: string): TData {\n    return ScriptData.ensure('RemoteData.' + key);\n}\n\nexport async function getRemoteDataAsync<TData = any>(key: string): Promise<TData> {\n    return await ScriptData.ensureAsync('RemoteData.' + key);\n}\n\nexport function getLookup<TItem>(key: string): Lookup<TItem> {\n    return ScriptData.ensure('Lookup.' + key);\n}\n\nexport async function getLookupAsync<TItem>(key: string): Promise<Lookup<TItem>> {\n    return await ScriptData.ensureAsync('Lookup.' + key);\n}\n\nexport function reloadLookup<TItem = any>(key: string): Lookup<TItem> {\n    return ScriptData.reload('Lookup.' + key);\n}\n\nexport async function reloadLookupAsync<TItem = any>(key: string): Promise<Lookup<TItem>> {\n    return await ScriptData.reloadAsync('Lookup.' + key);\n}\n\nexport function getColumns(key: string): PropertyItem[] {\n    return getColumnsData(key).items;\n}\n\nexport function getColumnsData(key: string): PropertyItemsData {\n    return ScriptData.ensure('Columns.' + key);\n}\n\nexport async function getColumnsAsync(key: string): Promise<PropertyItem[]> {\n    return (await getColumnsDataAsync(key)).items;\n}\n\nexport async function getColumnsDataAsync(key: string): Promise<PropertyItemsData> {\n    return ScriptData.ensureAsync('Columns.' + key);\n}\n\nexport function getForm(key: string): PropertyItem[] {\n    return getFormData(key).items;\n}\n\nexport function getFormData(key: string): PropertyItemsData {\n    return ScriptData.ensure('Form.' + key);\n}\n\nexport async function getFormAsync(key: string): Promise<PropertyItem[]> {\n    return (await getFormDataAsync(key)).items;\n}\n\nexport async function getFormDataAsync(key: string): Promise<PropertyItemsData> {\n    return await ScriptData.ensureAsync('Form.' + key);\n}\n\nexport function getTemplate(key: string): string {\n    return ScriptData.ensure('Template.' + key);\n}\n\nexport async function getTemplateAsync(key: string): Promise<string> {\n    return await ScriptData.ensureAsync('Template.' + key);\n}\n\nexport function canLoadScriptData(name: string): boolean {\n    return ScriptData.canLoad(name);\n}\n\nvar exported = {\n    canLoadScriptData,\n    getColumns,\n    getColumnsAsync,\n    getForm,\n    getFormAsync,\n    getLookup,\n    getLookupAsync,\n    getRemoteData, \n    getRemoteDataAsync,\n    getTemplate,\n    getTemplateAsync,\n    reloadLookup,\n    reloadLookupAsync,\n    ScriptData\n}\n\nif (typeof globalThis !== \"undefined\") {\n    const Q = (globalThis as any).Q || ((globalThis as any).Q = {});\n    for (var i in exported)\n        if (Q[i] == null)\n            Q[i] = (exported as any)[i];\n}", "\uFEFFimport { localText } from \"./localtext\";\nimport { notifyError } from \"./notify\";\nimport { getRemoteData, getRemoteDataAsync } from \"./scriptdata\";\nimport { UserDefinition } from \"./userdefinition\";\n\nconst andOrRegex = /[|&]/;\n\n/**\n * Contains permission related functions.\n * \n * ## Note\n * We use a namespace here both for compatibility and for allowing users to override\n * these functions easily in ES modules environment, which is normally hard to do.\n */\nexport namespace Authorization {\n\n    /** \n     * Checks if the current user has the permission specified.\n     * This should only be used for UI purposes and it is strongly recommended to check permissions server side.\n     * \n     * > Please prefer the `hasPermissionAsync` variant as this may block the UI thread if the `UserData` script is not already loaded.\n     * @param permission Permission key. It may contain logical operators like A&B|C.\n     * @returns `false` for \"null or undefined\", true for \"*\", `IsLoggedIn` for \"?\". For other permissions, \n     * if the user has the permission or if the user has the `IsAdmin` flag (super admin) `true`, otherwise `false`.\n     */\n    export function hasPermission(permission: string) {\n        if (permission == null)\n            return false;\n\n        if (permission == \"*\")\n            return true;\n\n        // normally in server side empty permission would return false\n        // here we are more tolerant for compatibility reasons and\n        // as it is less risky\n        if (permission == \"\" || permission == \"?\")\n            return !!Authorization.isLoggedIn;\n\n        var ud = Authorization.userDefinition;\n        if (!ud)\n            return false;\n\n        if (ud.IsAdmin)\n            return true;\n\n        return isPermissionInSet(ud.Permissions, permission);\n    }\n\n    /** \n     * Checks if the current user has the permission specified.\n     * This should only be used for UI purposes and it is strongly recommended to check permissions server side.\n     * \n     * @param permission Permission key. It may contain logical operators like A&B|C.\n     * @returns `false` for \"null or undefined\", true for \"*\", `IsLoggedIn` for \"?\". For other permissions, \n     * if the user has the permission or if the user has the `IsAdmin` flag (super admin) `true`, otherwise `false`.\n     */\n    export async function hasPermissionAsync(permission: string): Promise<boolean> {\n        if (permission == null)\n            return false;\n\n        if (permission == \"*\")\n            return true;\n\n        if (permission == \"\" || permission == \"?\")\n            return await Authorization.isLoggedInAsync;\n\n        var ud = await Authorization.userDefinitionAsync;\n        if (!ud)\n            return false;\n\n        if (ud.IsAdmin)\n            return true;\n\n        return isPermissionInSet(ud.Permissions, permission);\n    }\n\n    /**\n     * Checks if the hashset contains the specified permission, also handling logical \"|\" and \"&\" operators\n     * @param permissionSet Set of permissions\n     * @param permission Permission key or a permission expression containing & | operators\n     * @returns true if set contains permission\n     */\n    export function isPermissionInSet(permissionSet: { [key: string]: boolean }, permission: string) {\n        if (!permissionSet || permission == null)\n            return false;\n\n        if (permissionSet[permission])\n            return true;\n\n        if (!andOrRegex.test(permission))\n            return false;\n\n        var orParts = permission.split('|');\n        for (var r of orParts) {\n            if (!r.length)\n                continue;\n\n            var andParts = r.split('&');\n\n            let anyFalse = false;\n            for (var n of andParts) {\n                if (!n || !permissionSet[n]) {\n                    anyFalse = true;\n                    break;\n                }\n            }\n\n            if (!anyFalse)\n                return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Throws an error if the current user does not have the specified permission. \n     * Prefer `await validatePermissionAsync()` as this one might block the UI if the `UserData`\n     * is not already loaded.\n     * @param permission Permission key. It may contain logical operators like A&B|C.\n     */\n    export function validatePermission(permission: string) {\n        if (!hasPermission(permission)) {\n            notifyError(localText(\"Authorization.AccessDenied\"));\n            throw new Error(localText(\"Authorization.AccessDenied\"));\n        }\n    }\n\n    /**\n    * Throws an error if the current user does not have the specified permission.\n    * @param permission Permission key. It may contain logical operators like A&B|C.\n    * @example \n    * await Authorization.validatePermissionAsync(\"A&B|C\");\n    */\n    export async function validatePermissionAsync(permission: string): Promise<void> {\n        if (!(await hasPermissionAsync(permission))) {\n            notifyError(localText(\"Authorization.AccessDenied\"));\n            throw new Error(localText(\"Authorization.AccessDenied\"));\n        }\n    }\n}\n\nexport declare namespace Authorization {\n    /** \n     * Checks if the current user is logged in. Prefer `isLoggedInAsync` as this one might block the UI if the `UserData`\n     * is not already loaded.\n     * @returns `true` if the user is logged in, `false` otherwise. \n     * @example \n     * if (Authorization.isLoggedIn) {\n     *     // do something\n     * }\n     */\n    export let isLoggedIn: boolean;\n\n    /** \n     * Checks if the current user is logged in.\n     * @returns `true` if the user is logged in, `false` otherwise. \n     * @example \n     * if (await Authorization.isLoggedInAsync) {\n     *     // do something\n     * }\n     */\n    export let isLoggedInAsync: Promise<boolean>;\n\n    /** Returns the username for currently logged user. Prefer `usernameAsync` as this one might block the UI if the `UserData`\n     * is not already loaded.\n     * @returns Username for currently logged user.\n     * @example \n     * if (Authorization.username) {\n     *     // do something\n     * } \n     */\n    export let username: string;\n\n    /** Returns the username for currently logged user.\n     * @returns Username for currently logged user.\n     * @example \n     * if (await Authorization.usernameAsync) {\n     *     // do something\n     * }\n     */\n    export let usernameAsync: Promise<string>;\n\n    /** Returns the user data for currently logged user. Prefer `userDefinitionAsync` as this one might block the UI if the `UserData`\n     * is not already loaded.\n     * @returns User data for currently logged user.\n     * @example \n     * if (Authorization.userDefinition.IsAdmin) {\n     *     // do something\n     * }\n     */\n    export let userDefinition: UserDefinition;\n\n    /** Returns the user data for currently logged user.\n     * @returns User data for currently logged user.\n     * @example \n     * if ((await Authorization.userDefinitionAsync).IsAdmin) {\n     *     // do something\n     * }\n     */\n    export let userDefinitionAsync: Promise<UserDefinition>;\n}\n\nObject.defineProperty(Authorization, \"isLoggedIn\", {\n    get: function () {\n        return !!(Authorization.userDefinition?.Username?.length);\n    },\n    configurable: true\n});\n\nObject.defineProperty(Authorization, \"isLoggedInAsync\", {\n    get: async function () {\n        return !!((await Authorization.userDefinitionAsync)?.Username?.length);\n    },\n    configurable: true\n});\n\nObject.defineProperty(Authorization, \"userDefinition\", {\n    get: function () {\n        return getRemoteData<UserDefinition>(\"UserData\");\n    },\n    configurable: true\n});\n\nObject.defineProperty(Authorization, \"userDefinitionAsync\", {\n    get: async function () {\n        return await getRemoteDataAsync<UserDefinition>(\"UserData\");\n    },\n    configurable: true\n});\n\nObject.defineProperty(Authorization, \"username\", {\n    get: function () {\n        return Authorization.userDefinition?.Username;\n    },\n    configurable: true\n});\n\nObject.defineProperty(Authorization, \"usernameAsync\", {\n    get: async function () {\n        return (await Authorization.userDefinitionAsync)?.Username;\n    },\n    configurable: true\n});", "\uFEFFexport interface DebouncedFunction<T extends (...args: any[]) => any> {\n    /**\n     * Call the original function, but applying the debounce rules.\n     *\n     * If the debounced function can be run immediately, this calls it and returns its return\n     * value.\n     *\n     * Otherwise, it returns the return value of the last invocation, or undefined if the debounced\n     * function was not invoked yet.\n     */\n    (...args: Parameters<T>): ReturnType<T> | undefined;\n\n    /**\n     * Throw away any pending invocation of the debounced function.\n     */\n    clear(): void;\n\n    /**\n     * If there is a pending invocation of the debounced function, invoke it immediately and return\n     * its return value.\n     *\n     * Otherwise, return the value from the last invocation, or undefined if the debounced function\n     * was never invoked.\n     */\n    flush(): ReturnType<T> | undefined;\n}\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function also has a property 'clear' that can be used \n * to clear the timer to prevent previously scheduled executions, and flush method\n * to invoke scheduled executions now if any.\n * @param wait The function will be called after it stops being called for\n * N milliseconds. \n * @param immediate If passed, trigger the function on the leading edge, instead of the trailing. \n *\n * @source underscore.js\n */\nexport function debounce<T extends (...args: any) => any>(func: T, wait?: number, immediate?: boolean): DebouncedFunction<T> {\n    var timeout: any, args: any, context: any, timestamp: number, result: any;\n    if (null == wait) wait = 100;\n\n    var later = function () {\n        var last = Date.now() - timestamp;\n\n        if (last < wait && last >= 0) {\n            timeout = setTimeout(later, wait - last);\n        } else {\n            timeout = null;\n            if (!immediate)\n                result = func.apply(context, args);\n            if (!timeout)\n                context = args = null;\n        }\n    };\n\n    var debounced = function () {\n        context = this;\n        args = arguments;\n        timestamp = Date.now();\n        if (!timeout) {\n            timeout = setTimeout(later, wait);\n            if (immediate)\n                result = func.apply(context, args);\n        }\n        return result;\n    };\n\n    (debounced as any).clear = function () {\n        if (timeout) {\n            clearTimeout(timeout);\n            timeout = null;\n        }\n    };\n\n    (debounced as any).flush = function () {\n        if (timeout) {\n            result = func.apply(context, args);\n            context = args = null;\n\n            clearTimeout(timeout);\n            timeout = null;\n        }\n    };\n\n    return debounced as DebouncedFunction<T>;\n};", "\uFEFFexport {}\n\ninterface LayoutTimerReg {\n    handler: () => void;\n    element: () => HTMLElement;\n    width: boolean;\n    height: boolean;\n    storedWidth?: number;\n    storedHeight?: number;\n}\n\nexport namespace LayoutTimer {\n\n    var timeout: number;\n    var nextKey: number = 0;\n    var regCount: number = 0;\n    var regs: { [key: number]: LayoutTimerReg; } = {};\n\n    function startTimer() {\n        if (timeout == null && regCount > 0) {\n            timeout = window.setTimeout(onTimeout, 100);\n        }\n    }\n\n    function clearTimer() {\n        if (timeout != null) {\n            window.clearTimeout(timeout);\n            timeout = null;\n        }\n    }\n\n    function onTimeout() {\n        for (var key in regs) {\n            var reg = regs[key];\n            try {\n                var el = reg.element();\n                if (!el)\n                    continue;\n\n                var w = el.offsetWidth;\n                var h = el.offsetHeight;\n                try {\n\n                    if ((reg.width && reg.storedWidth !== w) ||\n                        (reg.height && reg.storedHeight !== h) ||\n                        (!reg.width && !reg.height && (!w !== !reg.storedWidth || !h !== !reg.storedHeight))) {\n                            if (w > 0 && h > 0) {\n                                try {\n                                    reg.handler();\n                                }\n                                finally {\n                                    w = el.offsetWidth;\n                                    h = el.offsetHeight;\n                                }\n                            }\n                    }\n                }\n                finally {\n                    reg.storedWidth = w;\n                    reg.storedHeight = h;\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }\n        }\n        clearTimer();\n        startTimer();\n    }\n\n    export function store(key: number) {\n        var reg = regs[key];\n        if (!reg)\n            return;\n\n        var el = reg.element();\n        if (!el)\n            return;\n\n        reg.storedWidth = el.offsetWidth;\n        reg.storedHeight = el.offsetHeight;\n    }\n\n    export function trigger(key: number) {\n        var reg = regs[key];\n        if (!reg)\n            return;\n        store(key);\n        if (reg.storedWidth >= 0 &&\n            reg.storedHeight >= 0) {\n            reg.handler();\n        }\n        store(key);\n    }\n\n    export function onSizeChange(element: () => HTMLElement, handler: () => void, width?: boolean, height?: boolean): number {\n        if (handler == null)\n            throw \"Layout handler can't be null!\";\n\n        regs[++nextKey] = {\n            element: element,\n            handler: handler,\n            width: width !== false,\n            height: height !== false\n        }\n        regCount++;\n        store(nextKey)\n        startTimer();\n        return nextKey;\n    }\n\n    export function onWidthChange(element: () => HTMLElement, handler: () => void) {\n        return onSizeChange(element, handler, true, false);\n    }\n\n    export function onHeightChange(element: () => HTMLElement, handler: () => void) {\n        return onSizeChange(element, handler, false, true);\n    }\n\n    export function onShown(element: () => HTMLElement, handler: () => void) {\n        return onSizeChange(element, handler, false, false);\n    }\n\n    export function off(key: number): number {\n        var reg = regs[key];\n        if (!reg) \n            return 0;\n            \n        delete regs[key];\n        regCount--;\n        if (regCount <= 0)\n            clearTimer();\n\n        return 0;\n    }\n}\n\nexport function executeOnceWhenVisible(element: JQuery, callback: Function): void {\n    var el = element && element[0];\n    if (!el)\n        return;\n    \n    if (el.offsetWidth > 0 && el.offsetHeight > 0) {\n        callback();\n        return;\n    }\n\n    var timer = LayoutTimer.onShown(() => el, () => {\n        LayoutTimer.off(timer);\n        callback();\n    });\n}\n\nexport function executeEverytimeWhenVisible(element: JQuery, callback: Function, callNowIfVisible: boolean): void {\n    var el = element && element[0];\n    if (!el)\n        return;\n    \n    if (callNowIfVisible && el.offsetWidth > 0 && el.offsetHeight > 0) {\n        callback();\n    }\n\n    LayoutTimer.onShown(() => el, () => {\n        callback();\n    });\n}\n", "\uFEFFimport { startsWith } from \"./strings\";\nimport { closePanel } from \"./dialogs\";\nimport $ from \"@optionaldeps/jquery\";\n\nexport interface HandleRouteEventArgs {\n    handled: boolean,\n    route: string,\n    parts: string[],\n    index: number\n}\n\nexport namespace Router {\n    let oldURL: string;\n    let resolving: number = 0;\n    let autoinc: number = 0;\n    let ignoreHash: number = 0;\n    let ignoreTime: number = 0;\n\n    export let enabled: boolean = true;\n\n    function isEqual(url1: string, url2: string) {\n        return url1 == url2 || url1 == url2 + '#' || url2 == url1 + '#';\n    }\n\n    export function navigate(hash: string, tryBack?: boolean, silent?: boolean) {\n        if (!enabled || resolving > 0)\n            return;\n\n        hash = hash || '';\n        hash = hash.replace(/^#/, '');\n        hash = (!hash ? \"\" : '#' + hash);\n        var newURL = window.location.href.replace(/#$/, '')\n            .replace(/#.*$/, '') + hash;\n        if (newURL != window.location.href) {\n            if (tryBack && oldURL != null && isEqual(oldURL, newURL)) {\n                if (silent)\n                    ignoreChange();\n\n                var prior = window.location.href;\n                oldURL = null;\n                window.history.back();\n                return;\n            }\n\n            if (silent)\n                ignoreChange();\n\n            oldURL = window.location.href;\n            window.location.hash = hash;\n        }\n    }\n\n    export function replace(hash: string, tryBack?: boolean) {\n        navigate(hash, tryBack, true);\n    }\n\n    export function replaceLast(hash: string, tryBack?: boolean) {\n        if (!enabled)\n            return;\n\n        var current = window.location.hash || '';\n        if (current.charAt(0) == '#')\n            current = current.substr(1, current.length - 1);\n\n        var parts = current.split('/+/');\n\n        if (parts.length > 1) {\n            if (hash && hash.length) {\n                parts[parts.length - 1] = hash;\n                hash = parts.join(\"/+/\");\n            }\n            else {\n                parts.splice(parts.length - 1, 1);\n                hash = parts.join(\"/+/\");\n            }\n        }\n        replace(hash, tryBack);\n    }\n\n    function visibleDialogs() {\n        return $('.ui-dialog-content:visible, .ui-dialog.panel-hidden>.ui-dialog-content, .s-Panel').toArray().sort((a, b) => {\n            return ($(a).data('qrouterorder') || 0) - ($(b).data('qrouterorder') || 0);\n        });\n    }\n\n    function dialogOpen(owner: JQuery, element: JQuery, hash: () => string) {\n        var route = [];\n        var isDialog = owner.hasClass(\".ui-dialog-content\") || owner.hasClass('.s-Panel');\n        var dialog = isDialog ? owner :\n            owner.closest('.ui-dialog-content, .s-Panel');\n        var value = hash();\n\n        var idPrefix: string;\n        if (dialog.length) {\n            var dialogs = visibleDialogs();\n            var index = dialogs.indexOf(dialog[0]);\n\n            for (var i = 0; i <= index; i++) {\n                var q = $(dialogs[i]).data(\"qroute\") as string;\n                if (q && q.length)\n                    route.push(q);\n            }\n\n            if (!isDialog) {\n                idPrefix = dialog.attr(\"id\");\n                if (idPrefix) {\n                    idPrefix += \"_\";\n                    var id = owner.attr(\"id\");\n                    if (id && startsWith(id, idPrefix))\n                        value = id.substr(idPrefix.length) + '@' + value;\n                }\n            }\n        }\n        else {\n            var id = owner.attr(\"id\");\n            if (id && (!owner.hasClass(\"route-handler\") ||\n                $('.route-handler').first().attr(\"id\") != id))\n                value = id + \"@\" + value;\n        }\n\n        route.push(value);\n        element.data(\"qroute\", value);\n        replace(route.join(\"/+/\"));\n\n        element.bind(\"dialogclose.qrouter panelclose.qrouter\", e => {\n            element.data(\"qroute\", null);\n            element.unbind(\".qrouter\");\n            var prhash = element.data(\"qprhash\");\n            var tryBack = $(e.target).closest('.s-MessageDialog').length > 0 || (e && e.originalEvent &&\n                ((e.originalEvent.type == \"keydown\" && (e.originalEvent as any).keyCode == 27) ||\n                $(e.originalEvent.target).hasClass(\"ui-dialog-titlebar-close\") ||\n                $(e.originalEvent.target).hasClass(\"panel-titlebar-close\")));\n            if (prhash != null)\n                replace(prhash, tryBack);\n            else\n                replaceLast('', tryBack);\n        });\n    }\n\n    export function dialog(owner: JQuery, element: JQuery, hash: () => string) {\n        if (!enabled)\n            return;\n        \n        element.on(\"dialogopen.qrouter panelopen.qrouter\", e => {\n            dialogOpen(owner, element, hash);\n        });\n    }\n\n    export function resolve(hash?: string) {\n        if (!enabled)\n            return;\n\n        resolving++;\n        try {\n            hash = hash ?? window.location.hash ?? '';\n            if (hash.charAt(0) == '#')\n                hash = hash.substr(1, hash.length - 1);\n\n            var dialogs = visibleDialogs();\n            var newParts = hash.split(\"/+/\");\n            var oldParts = dialogs.map(el => $(el).data('qroute') as string);\n\n            var same = 0;\n            while (same < dialogs.length &&\n                same < newParts.length &&\n                oldParts[same] == newParts[same]) {\n                same++;\n            }\n\n            for (var i = same; i < dialogs.length; i++) {\n                var d = $(dialogs[i]);\n                if (d.hasClass('ui-dialog-content'))\n                    (d as any).dialog?.('close');\n                else if (d.hasClass('s-Panel'))\n                    closePanel(d);\n            }\n\n            for (var i = same; i < newParts.length; i++) {\n                var route = newParts[i];\n                var routeParts = route.split('@');\n                var handler: JQuery;\n                if (routeParts.length == 2) {\n                    var dialog = i > 0 ? $(dialogs[i - 1]) : $([]);\n                    if (dialog.length) {\n                        var idPrefix = dialog.attr(\"id\");\n                        if (idPrefix) {\n                            handler = $('#' + idPrefix + \"_\" + routeParts[0]);\n                            if (handler.length) {\n                                route = routeParts[1];\n                            }\n                        }\n                    }\n\n                    if (!handler || !handler.length) {\n                        handler = $('#' + routeParts[0]);\n                        if (handler.length) {\n                            route = routeParts[1];\n                        }\n                    }\n                }\n\n                if (!handler || !handler.length) {\n                    handler = i > 0 ? $(dialogs[i - 1]) :\n                        $('.route-handler').first();\n                }\n\n                handler.triggerHandler(\"handleroute\", <HandleRouteEventArgs>{\n                    handled: false,\n                    route: route,\n                    parts: newParts,\n                    index: i\n                });\n            }\n        }\n        finally {\n            resolving--;\n        }\n    }\n\n    function hashChange(e: any, o: string) {\n        if (ignoreHash > 0) {\n            if (new Date().getTime() - ignoreTime > 1000) {\n                ignoreHash = 0;\n            }\n            else {\n                ignoreHash--;\n                return;\n            }\n        }\n        resolve();\n    }\n\n    function ignoreChange() {\n        ignoreHash++;\n        ignoreTime = new Date().getTime();\n    }\n\n    window.addEventListener(\"hashchange\", hashChange as any, false);\n\n    let routerOrder = 1;\n\n    typeof document !== \"undefined\" && typeof $ !== \"undefined\" &&\n        $.fn && $(document).on(\"dialogopen panelopen\", \".ui-dialog-content, .s-Panel\", function (event, ui) {\n        if (!enabled)\n            return;\n\n        var dlg = $(event.target);\n        dlg.data(\"qrouterorder\", routerOrder++);\n\n        if (dlg.data(\"qroute\"))\n            return;\n\n        dlg.data(\"qprhash\", window.location.hash);\n        var owner = $(visibleDialogs).not(dlg).last();\n        if (!owner.length)\n            owner = $('html');\n\n        dialogOpen(owner, dlg, () => {\n            return \"!\" + (++autoinc).toString(36);\n        });\n    });\n}", "\uFEFFimport { Config } from \"./config\";\nimport { executeEverytimeWhenVisible } from \"./layouttimer\";\nimport { Router } from \"./router\";\nimport { getNested, getGlobalThis, initializeTypes } from \"./system\";\nimport $ from \"@optionaldeps/jquery\";\n\nexport function autoFullHeight(element: JQuery) {\n    element.css('height', '100%');\n    triggerLayoutOnShow(element);\n}\n\nexport function initFullHeightGridPage(gridDiv: JQuery, opt?: { noRoute?: boolean }) {\n    $('body').addClass('full-height-page');\n    gridDiv.addClass('responsive-height');\n\n    let layout = function () {\n        let inPageContent = gridDiv.parent().hasClass('page-content') ||\n            gridDiv.parent().is('section.content');\n\n        if (inPageContent) {\n            gridDiv.css('height', '1px').css('overflow', 'hidden');\n        }\n\n        layoutFillHeight(gridDiv);\n\n        if (inPageContent) {\n            gridDiv.css('overflow', '');\n        }\n\n        gridDiv.triggerHandler('layout');\n    };\n\n    if ($('body').hasClass('has-layout-event')) {\n        $('body').bind('layout', layout);\n    }\n    else if ((window as any).Metronic) {\n        (window as any).Metronic.addResizeHandler(layout);\n    }\n    else {\n        $(window).resize(layout);\n    }\n\n    layout();\n\n    gridDiv.one('remove', () => {\n        $(window).off('layout', layout);\n        $('body').off('layout', layout);\n    });\n\n    if (!opt?.noRoute && \n        typeof document !== \"undefined\" &&\n        !$(document.body).attr('data-fhrouteinit')) {\n            $(document.body).attr('data-fhrouteinit', 'true');\n            // ugly, but to it is to make old pages work without having to add this\n            typeof Router !== \"undefined\" && Router.resolve?.();\n    }\n}\n\nexport function layoutFillHeightValue(element: JQuery) {\n    let h = 0;\n    element.parent().children().not(element).each(function (i, e) {\n        let q = $(e);\n        if (q.is(':visible')) {\n            h += q.outerHeight(true);\n        }\n    });\n    h = element.parent().height() - h;\n    if (element.css('box-sizing') !== 'border-box') {\n        h = h - (element.outerHeight(true) - element.height());\n    }\n    return h;\n}\n\nexport function layoutFillHeight(element: JQuery) {\n    let h = layoutFillHeightValue(element);\n    let n = Math.round(h) + 'px';\n    if (element.css('height') != n) {\n        element.css('height', n);\n    }\n}\n\nexport function setMobileDeviceMode() {\n    let isMobile = typeof window !== 'undefined' &&\n        (window.matchMedia?.('(max-width: 767px)')?.matches ||\n         window.innerWidth < 768);\n\n    if (typeof document === \"undefined\" || !document.documentElement)\n        return;\n\n    if (document.documentElement.classList.contains('mobile-device')) {\n        if (!isMobile) {\n            document.documentElement.classList.remove('mobile-device');\n        }\n    }\n    else if (isMobile) {\n        document.documentElement.classList.add('mobile-device');\n    }\n}\n\nsetMobileDeviceMode();\n\nfunction initOnLoad() {\n    var globalObj = getGlobalThis();\n    if (globalObj && Config.rootNamespaces) {\n        for (var ns of Config.rootNamespaces) {\n            var obj = getNested(globalObj, ns);\n            if (obj != null)\n                initializeTypes(obj, ns + \".\", 3);\n        }\n    }\n\n    if (typeof window !== \"undefined\") {\n        if (typeof $ !== \"undefined\")\n            $(window).bind('resize', setMobileDeviceMode);\n        else\n            window.addEventListener('resize', setMobileDeviceMode);\n    }\n}\n\nif (typeof $ !== \"undefined\")\n    $(initOnLoad);\nelse if (typeof document !== \"undefined\" && document.readyState === 'loading')\n    document.addEventListener('DOMContentLoaded', initOnLoad);\nelse\n    initOnLoad();\n\nexport function triggerLayoutOnShow(element: JQuery) {\n    executeEverytimeWhenVisible(element, function () {\n        element.triggerHandler('layout');\n    }, true);\n}\n\nexport function centerDialog(el: JQuery) {\n    if (!el.hasClass(\"ui-dialog\"))\n        el = el.closest(\".ui-dialog\");\n\n    (el as any).position?.({ at: 'center center', of: window });\n    let pos = el.position();\n    if (pos.left < 0)\n        el.css(\"left\", \"0px\");\n    if (pos.top < 0)\n        el.css(\"top\", \"0px\");\n}", "\uFEFFexport interface LookupOptions<TItem> {\n    idField?: string;\n    parentIdField?: string;\n    textField?: string;\n    textFormatter?(item: TItem): string;\n}\n\nexport interface Lookup<TItem> {\n    items: TItem[];\n    itemById: { [key: string]: TItem };\n    idField: string;\n    parentIdField: string;\n    textField: string;\n    textFormatter: (item: TItem) => string;\n}\n\nexport class Lookup<TItem> {\n    public items: TItem[] = [];\n    public itemById: { [key: string]: TItem } = {};\n    public idField: string;\n    public parentIdField: string;\n    public textField: string;\n    public textFormatter: (item: TItem) => string;\n\n    constructor(options: LookupOptions<TItem>, items?: TItem[]) {\n        options = options || {};\n        this.textFormatter = options.textFormatter;\n        this.idField = options.idField;\n        this.parentIdField = options.parentIdField;\n        this.textField = options.textField;\n        this.textFormatter = options.textFormatter;\n\n        if (items != null)\n            this.update(items);\n    }\n\n    update?(value: TItem[]) {\n        this.items = [];\n        this.itemById = {};\n        if (value) {\n            for (var k of value)\n                this.items.push(k);\n        }\n        var idField = this.idField;\n        if (idField) {\n            for (var r of this.items) {\n                var v = (r as any)[idField];\n                if (v != null) {\n                    this.itemById[v] = r;\n                }\n            }\n        }\n    }\n}", "\uFEFFimport { registerEnum } from \"./system\";\n\nexport interface PropertyItem {\n    name?: string;\n    title?: string;\n    hint?: string;\n    placeholder?: string;\n    editorType?: string;\n    editorParams?: any;\n    category?: string;\n    collapsible?: boolean;\n    collapsed?: boolean;\n    tab?: string;\n    cssClass?: string;\n    headerCssClass?: string;\n    formCssClass?: string;\n    maxLength?: number;\n    required?: boolean;\n    insertable?: boolean;\n    insertPermission?: string;\n    hideOnInsert?: boolean;\n    updatable?: boolean;\n    updatePermission?: string;\n    hideOnUpdate?: boolean;\n    readOnly?: boolean;\n    readPermission?: string;\n    oneWay?: boolean;\n    defaultValue?: any;\n    localizable?: boolean;\n    visible?: boolean;\n    allowHide?: boolean;\n    formatterType?: string;\n    formatterParams?: any;\n    displayFormat?: string;\n    alignment?: string;\n    width?: number;\n    widthSet?: boolean;\n    minWidth?: number;\n    maxWidth?: number;\n    labelWidth?: string;\n    resizable?: boolean;\n    sortable?: boolean;\n    sortOrder?: number;\n    groupOrder?: number;\n    summaryType?: SummaryType;\n    editLink?: boolean;\n    editLinkItemType?: string;\n    editLinkIdField?: string;\n    editLinkCssClass?: string;\n    filteringType?: string;\n    filteringParams?: any;\n    filteringIdField?: string;\n    notFilterable?: boolean;\n    filterOnly?: boolean;\n    quickFilter?: boolean;\n    quickFilterParams?: any;\n    quickFilterSeparator?: boolean;\n    quickFilterCssClass?: string;\n}\n\nexport interface PropertyItemsData {\n    items: PropertyItem[];\n    additionalItems: PropertyItem[];\n}\n   \nexport enum SummaryType {\n    Disabled = -1,\n    None = 0,\n    Sum = 1,\n    Avg = 2,\n    Min = 3,\n    Max = 4\n}\n\nregisterEnum(SummaryType, 'Serenity.SummaryType');", "\uFEFFexport interface ServiceError {\n    Code?: string;\n    Arguments?: string;\n    Message?: string;\n    Details?: string;\n    ErrorId?: string;\n}               \n      \nexport interface ServiceResponse {\n    Error?: ServiceError;\n}\n    \nexport interface ServiceRequest {\n}\n    \nexport interface ServiceOptions<TResponse extends ServiceResponse> extends JQueryAjaxSettings {\n    request?: any;\n    service?: string;\n    blockUI?: boolean;\n    onError?(response: TResponse): void;\n    onSuccess?(response: TResponse): void;\n    onCleanup?(): void;\n}\n\nexport interface SaveRequest<TEntity> extends ServiceRequest {\n    EntityId?: any;\n    Entity?: TEntity;\n    Localizations?: any;\n}\n    \nexport interface SaveRequestWithAttachment<TEntity> extends SaveRequest<TEntity> {\n    Attachments?: any[];\n}\n    \nexport interface SaveResponse extends ServiceResponse {\n    EntityId?: any;\n}\n    \nexport interface SaveWithLocalizationRequest<TEntity> extends SaveRequest<TEntity> {\n    Localizations?: { [key: string]: TEntity };\n}\n    \nexport interface DeleteRequest extends ServiceRequest {\n    EntityId?: any;\n}\n    \nexport interface DeleteResponse extends ServiceResponse {\n}\n    \nexport interface UndeleteRequest extends ServiceRequest {\n    EntityId?: any;\n}\n    \nexport interface UndeleteResponse extends ServiceResponse {\n}\n    \nexport enum ColumnSelection {\n    List = 0,\n    KeyOnly = 1,\n    Details = 2,\n    None = 3,\n    IdOnly = 4,\n    Lookup = 5\n}\n    \nexport enum RetrieveColumnSelection {\n    details = 0,\n    keyOnly = 1,\n    list = 2,\n    none = 3,\n    idOnly = 4,\n    lookup = 5\n}\n    \nexport interface ListRequest extends ServiceRequest {\n    Skip?: number;\n    Take?: number;\n    Sort?: string[];\n    ContainsText?: string;\n    ContainsField?: string;\n    Criteria?: any[];\n    EqualityFilter?: any;\n    IncludeDeleted?: boolean;\n    ExcludeTotalCount?: boolean;\n    ColumnSelection?: ColumnSelection;\n    IncludeColumns?: string[];\n    ExcludeColumns?: string[];\n    ExportColumns?: string[];\n    DistinctFields?: string[];\n}\n    \nexport interface ListResponse<TEntity> extends ServiceResponse {\n    Entities?: TEntity[];\n    Values?: any[];\n    TotalCount?: number;\n    Skip?: number;\n    Take?: number;\n}\n    \nexport interface RetrieveRequest extends ServiceRequest {\n    EntityId?: any;\n    ColumnSelection?: RetrieveColumnSelection;\n    IncludeColumns?: string[];\n    ExcludeColumns?: string[];\n}\n    \nexport interface RetrieveResponse<TEntity> extends ServiceResponse {\n    Entity?: TEntity;\n}\n    \nexport interface RetrieveLocalizationRequest extends RetrieveRequest {\n}\n    \nexport interface RetrieveLocalizationResponse<TEntity> extends ServiceResponse {\n    Entities?: { [key: string]: TEntity };\n}\n", "\uFEFF/// <reference types=\"jquery.validation\" />\nimport $ from \"@optionaldeps/jquery\"\n\nexport default $?.validator;", "\uFEFFimport { extend } from \"./system\";\nimport { Config } from \"./config\";\nimport { Exception } from \"./system\";\nimport { tryGetText } from \"./localtext\";\nimport { parseDate, parseHourAndMin, parseDayHourAndMin, parseDecimal, parseInteger } from \"./formatting\";\nimport { isBS3 } from \"./dialogs\";\nimport { htmlEncode } from \"./html\";\nimport validator from \"@optionaldeps/jquery.validation\";\n\nif (validator && validator.methods && validator.addMethod) {\n\n    if ((validator as any).prototype.showLabel) {\n        var orgShowLabel = (validator as any).prototype.showLabel;\n        (validator as any).prototype.showLabel = function(element: any, message: any) {\n            if (message != null)\n                message = htmlEncode(message);\n            orgShowLabel.call(this, element, message);\n        }\n    }\n\n    validator.addMethod('customValidate', function (value: any, element: any) {\n        var result = this.optional(element) as any;\n        if (element == null || !!result) {\n            return result;\n        }\n        var events = ($ as any)._data(element, 'events');\n        if (!events) {\n            return true;\n        }\n        var handlers = events.customValidate;\n        if (handlers == null || handlers.length === 0) {\n            return true;\n        }\n\n        var el = $(element);\n        for (var i = 0; !!(i < handlers.length); i++) {\n            if ($.isFunction(handlers[i].handler)) {\n                var message = handlers[i].handler(el);\n                if (message != null) {\n                    el.data('customValidationMessage', message);\n                    return false;\n                }\n            }\n        }\n        return true;\n    }, function (o: any, e: any) {\n        return $(e).data('customValidationMessage');\n    });\n\n    validator.addMethod(\"dateQ\", function (value, element) {\n        var o = this.optional(element);\n        if (o)\n            return o;\n\n        var d = parseDate(value);\n        if (!d || isNaN(d.valueOf()))\n            return false;\n\n        var z = new Date(d);\n        z.setHours(0, 0, 0, 0);\n        return z.getTime() === d.getTime();\n    });\n\n    validator.addMethod(\"dateTimeQ\", function (value, element) {\n        var o = this.optional(element);\n        if (o)\n            return o;\n\n        var d = parseDate(value);\n        if (!d || isNaN(d.valueOf()))\n            return false;\n\n        return true;\n    });        \n\n    validator.addMethod(\"hourAndMin\", function (value, element) {\n        return this.optional(element) || !isNaN(parseHourAndMin(value));\n    });\n\n    validator.addMethod(\"dayHourAndMin\", function (value, element) {\n        return this.optional(element) || !isNaN(parseDayHourAndMin(value));\n    });\n\n    validator.addMethod(\"decimalQ\", function (value, element) {\n        return this.optional(element) || !isNaN(parseDecimal(value));\n    });\n\n    validator.addMethod(\"integerQ\", function (value, element) {\n        return this.optional(element) || !isNaN(parseInteger(value));\n    });\n\n    let oldEmail = validator.methods['email'];\n    let emailRegex: RegExp = null;\n    validator.addMethod(\"email\", function (value, element) {\n        if (Config.emailAllowOnlyAscii)\n            return oldEmail.call(this, value, element);\n\n        if (emailRegex == null) \n            emailRegex = new RegExp(\"^((([a-z]|\\\\d|[!#\\\\$%&'\\\\*\\\\+\\\\-\\\\/=\\\\?\\\\^_`{\\\\|}~]|\" +\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])+(\\\\.([a-z]|\\\\d|\" +\n                \"[!#\\\\$%&'\\\\*\\\\+\\\\-\\\\/=\\\\?\\\\^_`{\\\\|}~]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])+)*)|\" +\n                \"((\\\\x22)((((\\\\x20|\\\\x09)*(\\\\x0d\\\\x0a))?(\\\\x20|\\\\x09)+)?(([\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x7f]|\" +\n                \"\\\\x21|[\\\\x23-\\\\x5b]|[\\\\x5d-\\\\x7e]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(\\\\\\\\([\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0d-\\\\x7f]|\" +\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]))))*(((\\\\x20|\\\\x09)*(\\\\x0d\\\\x0a))?(\\\\x20|\\\\x09)+)?(\\\\x22)))@((([a-z]|\\\\d|\" +\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(([a-z]|\\\\d|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])\" +\n                \"([a-z]|\\\\d|-|\\\\.|_|~|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])*([a-z]|\\\\d|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])))\\\\.)\" +\n                \"+(([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])|(([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])([a-z]|\\\\d|-|\\\\.|_|~|\" +\n                \"[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])*([a-z]|[\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF])))$\", \"i\");\n                \n        return emailRegex.test(value);\n    });\n\n    $(loadValidationErrorMessages);\n}\n\nexport function loadValidationErrorMessages() {\n\n    const addMsg = (m: string, k: string) => {\n        var txt = tryGetText(\"Validation.\" + k);\n        if (txt)\n            validator.messages[m] = txt;\n        else if (!validator.messages[m])\n            validator.messages[m] = k + \"?\";\n    }\n\n    addMsg(\"required\", \"Required\");\n    addMsg(\"email\", \"Email\");\n    addMsg(\"minlength\", \"MinLength\");\n    addMsg(\"maxlength\", \"MaxLength\");\n    addMsg(\"digits\", \"Digits\");\n    addMsg(\"range\", \"Range\");\n    addMsg(\"xss\", \"Xss\");\n    addMsg(\"dateQ\", \"DateInvalid\");\n    addMsg(\"decimalQ\", \"Decimal\");\n    addMsg(\"integerQ\", \"Integer\");\n    addMsg(\"url\", \"Url\");\n}\n\nfunction setTooltip(el: JQuery, val: string, show: boolean): JQuery {\n    if (isBS3())\n        (el.attr('data-original-title', val || '') as any)?.tooltip?.('fixTitle');\n    else\n        (el.attr('title', val || '') as any)?.tooltip?.('_fixTitle');\n    if (show != null)\n        (el as any).tooltip?.(show ? 'show' : 'hide');\n    return el;\n}\n\nexport function getHighlightTarget(el: HTMLElement) {\n    var hl = el.dataset.vxHighlight;\n    if (hl)\n        return document.getElementById(hl);\n    else if (el.classList.contains(\"select2-offscreen\") && el.id)\n        return document.getElementById('s2id_' + el.id);\n}\n\nexport function baseValidateOptions(): JQueryValidation.ValidationOptions {\n    return <any>{\n        errorClass: 'error',\n        ignore: ':hidden, .no-validate',\n        ignoreTitle: true,\n        normalizer: function (value: any) {\n            return $.trim(value);\n        },\n        highlight: function (element: HTMLElement, errorClass: string, validClass: string) {\n            if ((element as any).type === \"radio\") {\n                this.findByName((element as any).name).addClass(errorClass).removeClass(validClass);\n            } else {\n                if (errorClass != null && errorClass.length)\n                    element.classList.add(errorClass);\n                if (validClass != null && validClass.length)\n                    element.classList.remove(validClass);\n                var hl = getHighlightTarget(element);\n                if (hl && hl.classList) {\n                    if (errorClass != null && errorClass.length)\n                        hl.classList.add(errorClass);\n                    if (validClass != null && validClass.length)\n                        hl.classList.remove(validClass);\n                }\n            }\n        },\n        unhighlight: function (element: HTMLElement, errorClass: string, validClass: string) {\n            if ((element as any).type === \"radio\") {\n                this.findByName((element as any).name).removeClass(errorClass).addClass(validClass);\n            } else {\n                if (errorClass != null && errorClass.length)\n                    element.classList.remove(errorClass);\n                if (validClass != null && validClass.length)\n                    element.classList.add(validClass);\n                var hl = getHighlightTarget(element);\n                if (hl && hl.classList) {\n                    if (errorClass != null && errorClass.length)\n                        hl.classList.remove(errorClass);\n                    if (validClass != null && validClass.length)\n                        hl.classList.add(validClass);\n                }\n            }\n        },\n        showErrors: function () {\n            if (($?.fn as any)?.tooltip) {\n                var i: number, elements: any, error: any, $el: any, hl: any;\n                for (i = 0; this.errorList[i]; i++) {\n                    error = this.errorList[i];\n                    hl = getHighlightTarget(error.element);\n                    if (hl != null)\n                        $el = $(hl);\n                    else\n                        $el = $(error.element);\n                    if (i != 0)\n                        setTooltip($el, '', false);\n                    else\n                        setTooltip($el, error.message, true);\n                }\n\n                for (i = 0, elements = this.validElements(); elements[i]; i++) {\n                    hl = getHighlightTarget(error.element);\n                    if (hl != null)\n                        $el = $(hl);\n                    else\n                        $el = $(error.element);\n                    setTooltip($el, '', false);\n                }\n            }\n\n            (validator as any)[\"prototype\"].defaultShowErrors.call(this);\n        }\n    }\n}\n\nexport function validateForm(form: JQuery, opt: JQueryValidation.ValidationOptions): JQueryValidation.Validator {\n    return form.validate(extend(baseValidateOptions(), opt));\n}\n\nexport function addValidationRule(element: JQuery, eventClass: string, rule: (p1: JQuery) => string): JQuery {\n    if (!element.length)\n        return element;\n    if (rule == null)\n        throw new Exception('rule is null!');\n    element.addClass('customValidate').bind('customValidate.' + eventClass, rule as any);\n    return element;\n}\n\nexport function removeValidationRule(element: JQuery, eventClass: string): JQuery {\n    element.unbind('customValidate.' + eventClass);\n    return element;\n}", "\uFEFFimport { extend } from \"./system\";\nimport { notifyError } from \"./notify\";\nimport { localText } from \"./localtext\";\nimport { baseValidateOptions, getHighlightTarget } from \"./validation\";\nimport { isBS3 } from \"./dialogs\";\n\nlet oldShowLabel: (e: HTMLElement, message: string) => void;\n\nfunction validateShowLabel(element: HTMLElement, message: string) {\n    oldShowLabel.call(this, element, message);\n    this.errorsFor(element).each(function (i: number, e: any) {\n        var $e = $(e);\n        if ($e.parent('.vx').length) {\n            $e.attr('title', $e.text());\n            if (message && $e.hasClass('error'))\n                $e.removeClass('checked');\n        }\n    });\n};\n\nfunction jQueryValidationInitialization() {\n\n    if (typeof $ === \"undefined\" ||\n        !$.validator)\n        return;\n\n    let p: any = $.validator;\n    p = p.prototype;\n    oldShowLabel = p.showLabel;\n    p.showLabel = validateShowLabel;\n\n    p.oldfocusInvalid = p.focusInvalid;\n    p.focusInvalid = function () {\n        if (this.settings.abortHandler)\n            this.settings.abortHandler(this);\n        this.oldfocusInvalid.call(this);\n    };\n    p.oldstopRequest = p.focusInvalid;\n    p.stopRequest = function (element: any, valid: boolean) {\n        let formSubmitted = this.formSubmitted;\n        this.oldfocusInvalid.call(this, [element, valid]);\n        if (!valid && this.pendingRequest == 0 && formSubmitted && this.settings.abortHandler) {\n            this.settings.abortHandler(this);\n        }\n    };\n    p.resetAll = function () {\n        this.submitted = {};\n        this.prepareForm();\n        this.hideErrors();\n        this.elements().removeClass(this.settings.errorClass);\n    };\n};\n\nexport function validatorAbortHandler(validator: any) {\n    validator.settings.abortHandler = null;\n    validator.settings.submitHandler = function () {\n        return false;\n    };\n};\n\nexport function validateOptions(options?: JQueryValidation.ValidationOptions) {\n    var opt = baseValidateOptions();\n    delete opt.showErrors;\n    return extend(extend(opt, {\n        meta: 'v',\n        errorPlacement: function (error: any, element: any) {\n            let field: any = null;\n            let vx = element.attr('data-vx-id');\n            if (vx) {\n                field = $('#' + vx);\n                if (!field.length)\n                    field = null;\n                else\n                    field = field[0];\n            }\n            if (field == null) {\n                field = element.parents('div.field');\n                if (field.length) {\n                    let inner = $('div.vx', field[0]);\n                    if (inner.length)\n                        field = inner[0];\n                }\n                else\n                    field = element.parent();\n            }\n            error.appendTo(field);\n        },\n        submitHandler: function () {\n            return false;\n        },\n        invalidHandler: function (event: any, validator: JQueryValidation.Validator) {\n            notifyError(localText(\"Validation.InvalidFormMessage\"));\n\n            $(validator.errorList.map(x => x.element))\n                .closest('.category.collapsed')\n                .children('.category-title')\n                .each((i, x) => {\n                    $(x).click();\n                    return true;\n                });\n\n            if (validator.errorList.length)\n            {\n                var el = validator.errorList[0].element;\n                if (el) {\n                    var bsPane = $(el).closest('.tab-pane');\n                    if (!bsPane.hasClass(\"active\") &&\n                        bsPane.parent().hasClass('tab-content')) {\n                        var bsPaneId = bsPane.attr('id');\n                        if (bsPaneId) {\n                            $('a[href=\"#' + bsPaneId + '\"]').click();\n                        }\n                    }\n\n                    if (($.fn as any).tooltip) {\n                        var $el: any;\n                        var hl = getHighlightTarget(el);\n                        if (hl)\n                            $el = $(hl);\n                        else\n                            $el = $(el);\n\n                        ($.fn as any).tooltip && $el.tooltip({\n                            title: validator.errorList[0].message,\n                            trigger: 'manual'\n                        }).tooltip('show');\n\n                        window.setTimeout(function () {\n                            $el.tooltip(isBS3() ? 'destroy' : 'dispose');\n                        }, 1500);\n                    }\n                }\n            }\n        },\n        success: function (label: JQuery) {\n            label.addClass('checked');\n        }\n    }), options);\n};\n\nif (typeof $ !== \"undefined\") {\n    if ($.validator)\n        jQueryValidationInitialization();\n    else\n        $(jQueryValidationInitialization);\n}\nelse if (typeof document !== \"undefined\") {\n    if (document.readyState === 'loading')\n        document.addEventListener('DOMContentLoaded', jQueryValidationInitialization);\n    else\n        setTimeout(jQueryValidationInitialization, 100);\n}", "\uFEFF/**\n * CriteriaBuilder is a class that allows to build unary or binary criteria with completion support.\n */\nexport class CriteriaBuilder extends Array {\n    /**\n     * Creates a between criteria.\n     * @param fromInclusive from value\n     * @param toInclusive to value\n     */\n    bw(fromInclusive: any, toInclusive: any): Array<any> {\n        return [[this, '>=', fromInclusive], 'and', [this, '<=', toInclusive]];\n    }\n\n    /**\n     * Creates a contains criteria\n     * @param value contains value\n     */\n    contains(value: string): Array<any> {\n        return [this, 'like', '%' + value + '%'];\n    }\n\n    /**\n     * Creates a endsWith criteria\n     * @param value endsWith value\n     */\n    endsWith(value: string): Array<any> {\n        return [this, 'like', '%' + value];\n    }\n\n    /**\n     * Creates an equal (=) criteria\n     * @param value equal value\n     */\n    eq(value: any): Array<any> {\n        return [this, '=', value];\n    }\n\n    /**\n     * Creates a greater than criteria\n     * @param value greater than value\n     */\n    gt(value: any): Array<any> {\n        return [this, '>', value];\n    }\n\n    /**\n     * Creates a greater than or equal criteria\n     * @param value greater than or equal value\n     */\n    ge(value: any): Array<any> {\n        return [this, '>=', value];\n    }\n\n    /**\n     * Creates a in criteria\n     * @param values in values\n     */\n    in(values: any[]): Array<any> {\n        return [this, 'in', [values]];\n    }\n\n    /**\n     * Creates a IS NULL criteria\n     */\n    isNull(): Array<any> {\n        return ['is null', this];\n    }\n\n    /**\n     * Creates a IS NOT NULL criteria\n     */\n    isNotNull(): Array<any> {\n        return ['is not null', this];\n    }\n\n    /**\n     * Creates a less than or equal to criteria\n     * @param value less than or equal to value\n     */\n    le(value: any): Array<any> {\n        return [this, '<=', value];\n    }\n\n    /**\n     * Creates a less than criteria\n     * @param value less than value\n     */\n    lt(value: any): Array<any> {\n        return [this, '<', value];\n    }\n\n    /**\n     * Creates a not equal criteria\n     * @param value not equal value\n     */\n    ne(value: any): Array<any> {\n        return [this, '!=', value];\n    }\n\n    /**\n     * Creates a LIKE criteria\n     * @param value like value\n     */\n    like(value: any): Array<any> {\n        return [this, 'like', value];\n    }\n\n    /**\n     * Creates a STARTS WITH criteria\n     * @param value startsWith value\n     */\n    startsWith(value: string): Array<any> {\n        return [this, 'like', value + '%'];\n    }\n\n    /**\n     * Creates a NOT IN criteria\n     * @param values array of NOT IN values\n     */\n    notIn(values: any[]): Array<any> {\n        return [this, 'not in', [values]];\n    }\n\n    /**\n     * Creates a NOT LIKE criteria\n     * @param value not like value\n     */\n    notLike(value: any): Array<any> {\n        return [this, 'not like', value];\n    }\n}\n\nconst TOKEN_IDENTIFIER = 1;\nconst TOKEN_OPERATOR = 2;\nconst TOKEN_VALUE = 3;\nconst TOKEN_PARAM = 4;\n\ninterface Token {\n    t: number;\n    v: any;\n}\n\ninterface ParseError {\n    error: string;\n    pos: number;\n}\n\nconst ParseError: any = function (expression: string, error: string, position: number) {\n    this.expression = expression;\n    this.error = error;\n    this.position = position;\n    this.toString = function () {\n        return 'Error parsing expression: \"' + expression + '\", \"' +\n            error + ', position: ' + position;\n    };\n}\n\nfunction tokenize(expression: string): Token[] {\n    var end: number, v: any;\n    var tokens: Token[] = [];\n    var l = expression.length;\n    var l1 = expression.length - 1;\n    var openParens = 0;\n    var index: number;\n    var ch: string;\n\n    function skipWhiteSpace() {\n        while (index < l) {\n            ch = expression.charAt(index);\n\n            if (ch === ' ' || ch === '\\t') {\n                index++;\n                continue;\n            }\n\n            break;\n        }\n    }\n\n    function readString() {\n        end = index;\n        var foundDoubles = false;\n        while (end++ < l1) {\n            ch = expression.charAt(end);\n            if (ch === \"'\") {\n                if (end < l1 && expression.charAt(end + 1) === \"'\") {\n                    end++;\n                    foundDoubles = true;\n                    continue;\n                }\n                else\n                    break;\n            }\n        }\n\n        if (end === index ||\n            expression.charAt(end) !== \"'\")\n            throw new ParseError(expression, 'unterminated string', index);\n\n        v = expression.substr(index + 1, end - index - 1);\n        if (foundDoubles)\n            v = v.replace(/''/g, \"'\");\n    }\n\n    function readNumber() {\n        end = index;\n        var foundDot = false;\n        while (end < l1) {\n            ch = expression.charAt(end + 1);\n            if ((ch >= '0' && ch <= '9') ||\n                (!foundDot && (ch === '.'))) {\n                if (ch === '.')\n                    foundDot = true;\n                end++;\n            }\n            else\n                break;\n        }\n\n        v = parseFloat(expression.substring(index, end + 1));\n    }\n\n    function readIdentifier() {\n        end = index;\n        while (end < l1) {\n            ch = expression.charAt(end + 1);\n            if (ch == '_' ||\n                (ch >= 'A' && ch <= 'Z') ||\n                (ch >= 'a' && ch <= 'z') ||\n                (ch >= '0' && ch <= '9')) {\n                end++;\n            }\n            else\n                break;\n        }\n\n        v = expression.substr(index, end - index + 1);\n    }\n\n    function readParam() {\n        index++;\n        readIdentifier();\n        if (!v.length)\n            throw new ParseError(expression, 'expected parameter name', index);\n    }\n\n    function readArrayList() {\n        skipWhiteSpace();\n\n        if (index >= l || expression.charAt(index) != '(') {\n            if (index < l && expression.charAt(index) == '@') {\n                readParam();\n                index = end;\n                return;\n            }\n            throw new ParseError(expression, 'expected parenthesis', index);\n        }\n\n        index++;\n\n        let values = [];\n\n        while (true) {\n            skipWhiteSpace();\n\n            if (index >= l)\n                throw new ParseError(expression, 'expected parenthesis', index);\n\n            ch = expression.charAt(index);\n\n            if (ch == ',') {\n                if (values.length == 0)\n                    throw new ParseError(expression, 'unexpected comma', index);\n                index++;\n                skipWhiteSpace();\n                ch = expression.charAt(index);\n            }\n            else if (ch == ')') {\n                break;\n            }\n            else if (values.length > 0)\n                throw new ParseError(expression, 'expected comma', index);\n\n\n            if (ch === \"'\") {\n                readString();\n\n                values.push(v);\n                index = end + 1;\n                continue;\n            }\n\n            if (ch >= '0' && ch <= '9') {\n                readNumber();\n\n                values.push(v);\n                index = end + 1;\n                continue;\n            }\n\n            if (ch == 'n') {\n                readIdentifier();\n\n                if (v === 'null') {\n                    values.push(null)\n                    index = end + 1;\n                    continue;\n                }\n            }\n\n            throw new ParseError(expression, 'unexpected token', index);\n        }\n\n        v = values;\n    }\n\n    for (index = 0; index < l; index++) {\n        ch = expression.charAt(index);\n        if (ch === ' ' || ch === '\\t')\n            continue;\n\n        if (ch == '_' ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= 'a' && ch <= 'z')) {\n            readIdentifier();\n            var w = v.toLowerCase();\n            if (w == 'is') {\n                index = end + 1;\n                skipWhiteSpace();\n\n                readIdentifier();\n                w = v.toLowerCase();\n                if (w === 'not') {\n                    index = end + 1;\n                    skipWhiteSpace();\n                    readIdentifier();\n                    if (v.toLowerCase() === 'null') {\n                        tokens.push({\n                            t: TOKEN_OPERATOR,\n                            v: 'is not null'\n                        });\n                    }\n                    else\n                        throw new ParseError(expression, 'expected \"null\"', index);\n                }\n                else if (w === 'null') {\n                    tokens.push({\n                        t: TOKEN_OPERATOR,\n                        v: 'is null'\n                    });\n                }\n                else\n                    throw new ParseError(expression, 'expected \"null\" or \"not\" keyword', index);\n            }\n            else if (w === 'and' || w === 'or' || w === 'xor') {\n                tokens.push({\n                    t: TOKEN_OPERATOR,\n                    v: w\n                });\n            }\n            else if (w === 'not') {\n                const currentEnd = end;\n\n                index = end + 1;\n                skipWhiteSpace();\n\n                readIdentifier();\n                w = v.toLowerCase();\n\n                if (w === 'in') {\n                    index = end + 1;\n\n                    tokens.push({\n                        t: TOKEN_OPERATOR,\n                        v: 'not in'\n                    });\n\n                    readArrayList();\n\n                    if (typeof v === \"string\") {\n                        tokens.push({\n                            t: TOKEN_PARAM,\n                            v: v\n                        })\n                    }\n                    else {\n                        tokens.push({\n                            t: TOKEN_VALUE,\n                            v: v\n                        });\n                    }\n                }\n                else if (w === \"like\") {\n                    tokens.push({\n                        t: TOKEN_OPERATOR,\n                        v: 'not like'\n                    });\n\n                    index = end;\n                } else {\n                    tokens.push({\n                        t: TOKEN_OPERATOR,\n                        v: 'not'\n                    });\n\n                    index = currentEnd;\n                }\n\n                continue;\n            }\n            else if (w === 'in') {\n                tokens.push({\n                    t: TOKEN_OPERATOR,\n                    v: 'in'\n                });\n\n                index = end + 1;\n\n                readArrayList();\n\n                if (typeof v === \"string\") {\n                    tokens.push({\n                        t: TOKEN_PARAM,\n                        v: v\n                    })\n                }\n                else {\n                    tokens.push({\n                        t: TOKEN_VALUE,\n                        v: v\n                    });\n                }\n\n                continue;\n            }\n            else if (w === \"like\") {\n                tokens.push({\n                    t: TOKEN_OPERATOR,\n                    v: 'like'\n                });\n            }\n            else {\n                tokens.push({\n                    t: TOKEN_IDENTIFIER,\n                    v: v\n                });\n            }\n\n            index = end;\n            continue;\n        }\n\n        if (ch === '@') {\n            readParam();\n            tokens.push({\n                t: TOKEN_PARAM,\n                v: v\n            });\n            index = end;\n            continue;\n        }\n\n        if ((((ch === '-') || (ch === '+')) &&\n            index < l1 &&\n            expression.charAt(index + 1) >= '0' &&\n            expression.charAt(index + 1) <= '9') ||\n            (ch >= '0' && ch <= '9')) {\n            end = index;\n            readNumber();\n\n            tokens.push({\n                t: TOKEN_VALUE,\n                v: v\n            });\n\n            index = end;\n            continue;\n        }\n\n        if (ch === \"'\") {\n            end = index;\n            readString();\n\n            tokens.push({\n                t: TOKEN_VALUE,\n                v: v\n            });\n            index = end;\n            continue;\n        }\n\n        if (ch === '=') {\n            tokens.push({\n                t: TOKEN_OPERATOR,\n                v: ch\n            });\n            continue;\n        }\n\n        if (ch === '(') {\n            openParens++;\n            tokens.push({\n                t: TOKEN_OPERATOR,\n                v: ch\n            });\n            continue;\n        }\n\n        if (ch == ')') {\n            if (openParens <= 0)\n                throw new ParseError(expression, 'unexpected parenthesis', index);\n\n            openParens--;\n            tokens.push({\n                t: TOKEN_OPERATOR,\n                v: ch\n            });\n            continue;\n        }\n\n        if (ch === '>' || ch === '<') {\n            if (index < l1 &&\n                expression.charAt(index + 1) === '=') {\n                tokens.push({\n                    t: TOKEN_OPERATOR,\n                    v: ch + '='\n                });\n                index++;\n            }\n            else {\n                tokens.push({\n                    t: TOKEN_OPERATOR,\n                    v: ch\n                });\n            }\n            continue;\n        }\n\n        throw new ParseError(expression, 'unknown token', index);\n    }\n\n    if (openParens > 0)\n        throw new ParseError(expression, 'missing parenthesis', index);\n\n    return tokens;\n}\n\nconst operatorPrecedence: Record<string, number> = {\n    '=': 4,\n    '>': 4,\n    '<': 4,\n    '>=': 4,\n    '<=': 4,\n    '<>': 4,\n    '!=': 4,\n    'like': 5,\n    'not like': 5,\n    'in': 5,\n    'not in': 5,\n    'is null': 5,\n    'is not null': 5,\n    'not': 6,\n    'and': 7,\n    'xor': 8,\n    'or': 9\n}\n\nfunction shuntingYard(tokens: Token[]): Token[] {\n    var result: Token[] = [];\n    var stack: Token[] = [];\n    for (var token of tokens) {\n        if (token.t === TOKEN_OPERATOR) {\n            var precedence = operatorPrecedence[token.v];\n\n            if (precedence != null) {\n                while (stack.length) {\n                    var prev = stack[stack.length - 1];\n                    if (prev.t !== TOKEN_OPERATOR || prev.v == '(')\n                        break;\n                    var prevPrecedence = operatorPrecedence[prev.v];\n                    if (prevPrecedence == null || prevPrecedence > precedence)\n                        break;\n\n                    result.push(stack.pop());\n                }\n\n                stack.push(token);\n            }\n            else if (token.v === '(') {\n                stack.push(token);\n            }\n            else if (token.v === ')') {\n                while (stack.length &&\n                    (stack[stack.length - 1].t !== TOKEN_OPERATOR ||\n                        stack[stack.length - 1].v !== '(')) {\n                    result.push(stack.pop());\n                }\n\n                stack.pop();\n            }\n            else\n                result.push(token);\n        }\n        else\n            result.push(token);\n    }\n\n    while (stack.length) {\n        var tok = stack.pop();\n\n        if (tok.t == TOKEN_OPERATOR &&\n            (tok.v === '(' || tok.v === ')'))\n            throw \"Mismatched parentheses in criteria expression!\";\n\n        result.push(tok);\n    }\n\n    return result;\n}\n\nfunction rpnTokensToCriteria(rpnTokens: Token[], getParam?: (name: string) => any): any[] {\n    var stack: any[] = [];\n\n    for (var token of rpnTokens) {\n        switch (token.t) {\n            case TOKEN_IDENTIFIER:\n                {\n                    stack.push([token.v]);\n                    break;\n                }\n\n            case TOKEN_VALUE:\n                {\n                    stack.push(Array.isArray(token.v) ? [token.v] : token.v);\n                    break;\n                }\n\n            case TOKEN_PARAM:\n                {\n                    if (!getParam)\n                        throw new Error(\"getParam must be passed for parameterized expressions!\");\n                    var prm = getParam(token.v)\n                    stack.push(Array.isArray(prm) ? [prm] : prm);\n                    break;\n                }\n\n            case TOKEN_OPERATOR:\n                {\n                    switch (token.v as string) {\n                        case 'not':\n                        case 'is null':\n                        case 'is not null':\n                            if (!stack.length)\n                                throw new Error(\"Unary operator \" + token.v + \" requires a value!\");\n\n                            stack.push([token.v, stack.pop()]);\n                            break;\n                        default:\n                            if (stack.length < 2)\n                                throw new Error(\"Binary operator \" + token.v + \" requires two values!\");\n\n                            var r = stack.pop();\n                            var l = stack.pop();\n                            stack.push([l, token.v, r]);\n                            break;\n                    }\n                    break;\n                }\n            default:\n                throw new Error(\"Invalid operator type: \" + token.t + \"!\");\n        }\n    }\n\n    if (stack.length != 1)\n        throw new Error(\"Error evaluating expression!\");\n\n    return stack.pop();\n}\n\nfunction internalParse(expression: string, getParam?: (name: string) => any) {\n    var tokens = tokenize(expression);\n    var rpnTokens = shuntingYard(tokens);\n    return rpnTokensToCriteria(rpnTokens, getParam);\n}\n\n/** \n * Parses a criteria expression to Serenity Criteria array format.\n * The string may optionally contain parameters like `A >= @p1 and B < @p2`.\n * @param expression The criteria expression.\n * @param params The dictionary containing parameter values like { p1: 10, p2: 20 }.\n * @example\n * parseCriteria('A >= @p1 and B < @p2', { p1: 5, p2: 4 }) // [[[a], '>=' 5], 'and', [[b], '<', 4]]\n */\nexport function parseCriteria(expression: string, params?: any): any[];\n/** \n * Parses a criteria expression to Serenity Criteria array format.\n * The expression may contain parameter placeholders like `A >= ${p1}`\n * where p1 is a variable in the scope.\n * @param strings The string fragments.\n * @param values The tagged template arguments.\n * @example \n * var a = 5, b = 4;\n * parseCriteria`A >= ${a} and B < ${b}` // [[[a], '>=' 5], 'and', [[b], '<', 4]]\n */\nexport function parseCriteria(strings: TemplateStringsArray, ...values: any[]): any[];\nexport function parseCriteria(exprOrStrings: TemplateStringsArray | string, ...values: any[]): any[] {\n    if (!exprOrStrings?.length)\n        return [];\n\n    if (typeof exprOrStrings === \"string\") {\n        return internalParse(exprOrStrings,\n            values == null || values[0] == null ? null : name => values[0][name]);\n    }\n    else if (!values.length)\n        return internalParse(exprOrStrings.join(''));\n\n    var expression = String.raw({ raw: exprOrStrings }, ...values.map((x, i) => '@__' + i));\n    return internalParse(expression, name => name.startsWith('__') ?\n        values[parseInt(name.substring(2), 10)] : void 0);\n}\n\nexport enum CriteriaOperator {\n    paren = \"()\",\n    not = \"not\",\n    isNull = \"is null\",\n    isNotNull = \"is not null\",\n    exists = \"exists\",\n    and = \"and\",\n    or = \"or\",\n    xor = \"xor\",\n    eq = \"=\",\n    ne = \"!=\",\n    gt = \">\",\n    ge = \">=\",\n    lt = \"<\",\n    le = \"<=\",\n    in = \"in\",\n    notIn = \"not in\",\n    like = \"like\",\n    notLike = \"not like\"\n}\n\n/**\n * Creates a new criteria builder containg the passed field name.\n * @param field The field name.\n */\nexport function Criteria(field: string) {\n    var builder = CriteriaBuilder.of(field);\n    // workaround for subclassing array until corelib switched to ES6\n    !(builder as any).eq && ((builder as any).__proto__ = CriteriaBuilder.prototype);\n    return builder as CriteriaBuilder\n}\n\n/**\n * Ands two or more criteria together.\n * @param c1 First criteria.\n * @param c2 Second criteria.\n * @param rest Other criteria.\n */\nCriteria.and = function and(c1: any[], c2: any[], ...rest: any[][]) {\n    var result = Criteria.join(c1, 'and', c2);\n    if (rest) {\n        for (let k of rest)\n            result = Criteria.join(result, 'and', k);\n    }\n\n    return result;\n};\n\n/** Provides access to the `CriteriaOperator` enum */\nCriteria.Operator = CriteriaOperator;\n\n/** \n * Determines if a criteria is empty.\n */\nCriteria.isEmpty = function isEmpty(c: any[]): boolean {\n    return c == null ||\n        c.length === 0 ||\n        (c.length === 1 && typeof c[0] === \"string\" && c[0].length === 0);\n};\n\n/**\n * Joins two criteria together.\n * @param c1 First criteria.\n * @param op Operator to insert between, e.g. 'or', 'and'.\n * @param c2 Second criteria\n */\nCriteria.join = function join(c1: any[], op: string, c2: any[]): any[] {\n    if (Criteria.isEmpty(c1))\n        return c2;\n\n    if (Criteria.isEmpty(c2))\n        return c1;\n\n    return [c1, op, c2];\n};\n\n/**\n * Negates a criteria.\n * @param c Criteria to negate.\n */\nCriteria.not = function not(c: any[]) {\n    return ['not', c]\n}\n\n/**\n * Ors two or more criteria together.\n * @param c1 First criteria.\n * @param c2 Second criteria.\n * @param rest Other criteria.\n */\nCriteria.or = function or(c1: any[], c2: any[], ...rest: any[][]) {\n    var result = Criteria.join(c1, 'or', c2);\n\n    if (rest) {\n        for (let k of rest)\n            result = Criteria.join(result, 'or', k);\n    }\n\n    return result;\n}\n\n/**\n * Puts a criteria in parens. Exists only for compatibility reasons.\n */\nCriteria.paren = function parent(c: any[]): any[] {\n    return Criteria.isEmpty(c) ? c : ['()', c];\n}\n\n/** \n * Parses a criteria expression to Serenity Criteria array format.\n * The expression string may be a string literal, optionally containining \n * parameters like `A >= @p1 and B < @p2`.\n * \n * Or, the expression might be a tagged string literal that \n * contain parameter placeholders like `A >= ${p1}`\n * where p1 is a variable in the scope.\n *\n * @example\n * Criteria.parse(\"A >= @p1 and B < @p2\", { p1: 5, p2: 4 }) // [[[a], '>=' 5], 'and', [[b], '<', 4]]\n * \n * @example\n * var a = 5; b = 4;\n * Criteria.parse`A >= ${a} and B < ${b}` // [[[a], '>=' 5], 'and', [[b], '<', 4]]\n*/\nCriteria.parse = parseCriteria;"],
  "mappings": "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",
  "names": ["any", "array", "predicate", "count", "x", "first", "groupBy", "items", "getKey", "_a", "result", "index", "item", "key", "group", "indexOf", "i", "insert", "obj", "isArray", "single", "match", "found", "toGrouping", "lookup", "d", "tryFirst", "coalesce", "a", "b", "isValue", "today", "d", "extend", "key", "deepClone", "a2", "a3", "result", "type", "value", "kv", "getRegExpFlags", "regExp", "flags", "getTypeStore", "getStateStore", "getNested", "from", "name", "i", "globalObj", "getGlobalThis", "getType", "target", "types", "getTypeNameProp", "setTypeNameProp", "getTypeFullName", "getTypeShortName", "fullName", "bIndex", "nsIndex", "getInstanceType", "instance", "ArgumentNullException", "ex", "isAssignableFrom", "isInstanceOfType", "safeCast", "cast", "InvalidCastException", "getBaseType", "p", "ownValue", "getAttributes", "attrType", "inherit", "_a", "t", "attr", "j", "MemberType", "getMembers", "memberTypes", "members", "m", "addTypeMember", "member", "md", "ensureMetadata", "existing", "merge", "getTypes", "traverse", "s", "n", "c", "clearKeys", "delegateCombine", "delegate1", "delegate2", "targets1", "targets2", "_mkdel", "fallbackStore", "store", "Enum", "enumType", "values", "parts", "delegateContains", "targets", "object", "method", "delegate", "clone", "delegateRemove", "isEnum", "initFormType", "typ", "nameWidgetPairs", "widget", "prop", "getter", "setter", "distinct", "arr", "item", "pos", "_fieldsProxy", "_", "fieldsProxy", "keyOf", "arr1", "arr2", "interfaceIsAssignableFrom", "x", "registerType", "intf", "registerClass", "registerEditor", "addAttribute", "EditorAttribute", "registerEnum", "enumKey", "registerInterface", "ISlickFormatter", "initializeTypes", "root", "pre", "limit", "k", "obj", "Exception", "message", "paramName", "endsWith", "s", "suffix", "isEmptyOrNull", "isTrimmedEmpty", "trimToNull", "padLeft", "len", "ch", "startsWith", "prefix", "toSingleLine", "str", "replaceAll", "trimToEmpty", "trimEnd", "_a", "_b", "_c", "trimStart", "trim", "find", "replace", "zeroPad", "n", "localText", "key", "getTable", "text", "dbText", "prefix", "getStateStore", "prefixedText", "startsWith", "local", "tryGetText", "isEmptyOrNull", "textKey", "value", "dbTryText", "proxyTexts", "o", "p", "t", "x", "y", "tv", "z", "k", "_LT", "obj", "pre", "table", "actual", "LT", "type", "$t1", "$t2", "member", "lt", "defaultText", "Q", "_a", "$", "jquery_module_default", "addEmptyOption", "select", "addOption", "localText", "key", "text", "jquery_module_default", "attrEncode", "htmlEncode", "clearOptions", "findElementWithRelativeId", "element", "relativeId", "context", "_a", "isJQuery", "from", "doc", "noContext", "fromId", "res", "idx", "esc", "escFunc", "a", "s", "newBodyDiv", "outerHtml", "toggleClass", "el", "cls", "remove", "k", "x", "initialOptions", "initialInstance", "Toastr", "options", "_a", "container", "toggleClass", "target", "create", "message", "title", "opt", "callback", "args", "toastElement", "clearOptions", "parentNode", "toastsToClear", "force", "map", "opts", "exitMap", "intervalId", "$titleElement", "$messageElement", "createdElement", "closeElement", "response", "hideToast", "override", "setAria", "ariaValue", "delayedHideToast", "stickAround", "handleEvents", "event", "setTitle", "suffix", "htmlEncode", "setMessage", "setCloseButton", "setSequence", "displayToast", "toastr2_default", "toastr2_default", "defaultNotifyOptions", "getToastrOptions", "options", "extend", "positionToastContainer", "showToast", "type", "message", "title", "container", "toast", "htmlEncode", "localText", "notifyWarning", "notifySuccess", "notifyInfo", "notifyError", "create", "dialog", "position", "Config", "pathLink", "_bootstrap", "bootstrap_module_default", "_a", "_b", "_c", "jquery_module_default", "toIconClass", "icon", "startsWith", "internalUIDialog", "options", "bodyHtml", "dialogClass", "opt", "extend", "x", "btn", "dialogButtonToUI", "e", "_isBS3", "_isBS5Plus", "isBS3", "_d", "isBS5Plus", "bootstrap_module_default", "defaultTxt", "txt", "k", "htmlEncode", "tryGetText", "bsModalMarkup", "title", "body", "modalClass", "escapeHtml", "closeButton", "div", "toggleClass", "dialogButtonToBS", "html", "iconClass", "button", "internalBSModal", "modalDiv", "footer", "rawBS5", "createButton", "_useBrowserDialogs", "useBrowserDialogs", "useBSModal", "Config", "getMessageBodyHtml", "message", "encode", "preWrap", "alertDialog", "useBS", "alert", "confirmDialog", "onYes", "confirm", "iframeDialog", "doc", "onOpen", "iframe", "settings", "informationDialog", "onOk", "information", "successDialog", "success", "warningDialog", "warning", "closePanel", "element", "el", "event", "uniqueName", "layoutEvent", "rl", "openPanel", "container", "hide", "c", "cl", "i", "ErrorHandling", "showServiceError", "error", "msg", "alertDialog", "runtimeErrorHandler", "message", "filename", "lineno", "colno", "host", "errorInfo", "htmlEncode", "notifyError", "e", "blockUICount", "blockUIWithCheck", "opt", "_a", "jquery_module_default", "div", "blockUI", "options", "blockUndo", "_b", "getCookie", "name", "ca", "i", "xhr", "opt", "token", "serviceCall", "options", "handleError", "response", "Config", "ErrorHandling", "url", "resolveUrl", "extend", "data", "textStatus", "request", "blockUndo", "status", "ev", "l", "$t1", "json", "html", "iframeDialog", "alertDialog", "blockUI", "serviceRequest", "service", "onSuccess", "setEquality", "field", "value", "parseQueryString", "s", "qs", "result", "parts", "pair", "postToService", "form", "div", "csrfToken", "postToUrl", "k", "Invariant", "a", "b", "compareStringFactory", "order", "o", "z", "c", "i", "_len", "x", "y", "ix", "iy", "Culture", "_a", "k", "trimToNull", "sc", "turkishLocaleToUpper", "turkishLocaleCompare", "insertGroupSeperator", "num", "dec", "grp", "neg", "decPart", "decIndex", "negative", "startsWith", "groupSize", "index", "s", "done", "length", "startIndex", "part", "_formatRE", "_formatString", "format", "l", "values", "from", "m", "value", "type", "getInstanceType", "formatSpec", "formatIndex", "_formatObject", "prm", "localeFormat", "obj", "fmt", "formatNumber", "formatDate", "round", "n", "d", "rounding", "sign", "f", "trunc", "decOrLoc", "_b", "_c", "_d", "_e", "_f", "precision", "fs", "padLeft", "prefix", "mid", "suffix", "endPrefix", "inQuote", "r", "dp", "df", "roundNumber", "dv", "ds", "ones", "of", "op", "oneText", "gl", "gc", "padStart", "padLen", "pos", "pc", "parseInteger", "trim", "ts", "parseDecimal", "power", "toId", "id", "_dateFormatRE", "locale", "_g", "_h", "_i", "_j", "_k", "_l", "date", "parseDate", "re", "sb", "match", "formatDayHourAndMin", "days", "txt", "mins", "zeroPad", "formatISODateTimeUTC", "zeropad", "str", "secs", "isoRegexp", "parseISODateTime", "parseHourAndMin", "v", "h", "parseDayHourAndMin", "p", "hm", "dateOrder", "datePart", "dArray", "splitDateString", "fullYear", "shortYearCutoff", "e", "getHash", "key", "reload", "k", "stateStore", "getStateStore", "trimToNull", "regs", "ScriptData", "setHash", "value", "getLoadedData", "name", "setLoadedData", "bindToChange", "regClass", "onChange", "e", "s", "triggerChange", "unbindFromChange", "loadOptions", "async", "_a", "resolveUrl", "text", "data", "textStatus", "jqXHR", "xhr", "errorThrown", "isLookup", "startsWith", "notifyError", "html", "iframeDialog", "alertDialog", "loadScriptAsync", "__async", "blockUI", "blockUndo", "loadScriptData", "loadScriptDataAsync", "loadError", "message", "format", "ensure", "ensureAsync", "reloadAsync", "canLoad", "setRegisteredScripts", "scripts", "t", "set", "getRemoteData", "getRemoteDataAsync", "getLookup", "getLookupAsync", "reloadLookup", "reloadLookupAsync", "getColumns", "getColumnsData", "getColumnsAsync", "getColumnsDataAsync", "getForm", "getFormData", "getFormAsync", "getFormDataAsync", "getTemplate", "getTemplateAsync", "canLoadScriptData", "exported", "Q", "i", "andOrRegex", "Authorization", "hasPermission", "permission", "ud", "isPermissionInSet", "hasPermissionAsync", "__async", "permissionSet", "orParts", "r", "andParts", "anyFalse", "n", "validatePermission", "notifyError", "localText", "validatePermissionAsync", "_a", "_b", "getRemoteData", "getRemoteDataAsync", "debounce", "func", "wait", "immediate", "timeout", "args", "context", "timestamp", "result", "later", "last", "debounced", "LayoutTimer", "timeout", "nextKey", "regCount", "regs", "startTimer", "onTimeout", "clearTimer", "key", "reg", "el", "w", "h", "e", "store", "trigger", "onSizeChange", "element", "handler", "width", "height", "onWidthChange", "onHeightChange", "onShown", "off", "executeOnceWhenVisible", "callback", "timer", "executeEverytimeWhenVisible", "callNowIfVisible", "Router", "oldURL", "resolving", "autoinc", "ignoreHash", "ignoreTime", "isEqual", "url1", "url2", "navigate", "hash", "tryBack", "silent", "newURL", "ignoreChange", "prior", "replace", "replaceLast", "current", "parts", "visibleDialogs", "jquery_module_default", "a", "b", "dialogOpen", "owner", "element", "route", "isDialog", "dialog", "value", "idPrefix", "dialogs", "index", "i", "q", "id", "startsWith", "e", "prhash", "resolve", "_a", "_b", "newParts", "oldParts", "el", "same", "d", "closePanel", "routeParts", "handler", "hashChange", "o", "routerOrder", "event", "ui", "dlg", "autoFullHeight", "element", "triggerLayoutOnShow", "initFullHeightGridPage", "gridDiv", "opt", "_a", "_b", "jquery_module_default", "layout", "inPageContent", "layoutFillHeight", "Router", "layoutFillHeightValue", "h", "i", "e", "q", "setMobileDeviceMode", "isMobile", "initOnLoad", "globalObj", "getGlobalThis", "Config", "ns", "obj", "getNested", "initializeTypes", "executeEverytimeWhenVisible", "centerDialog", "el", "pos", "Lookup", "options", "items", "value", "k", "idField", "r", "v", "SummaryType", "registerEnum", "ColumnSelection", "RetrieveColumnSelection", "_a", "jquery_validation_module_default", "jquery_module_default", "jquery_validation_module_default", "orgShowLabel", "element", "message", "htmlEncode", "value", "result", "events", "handlers", "el", "i", "o", "e", "d", "parseDate", "z", "parseHourAndMin", "parseDayHourAndMin", "parseDecimal", "parseInteger", "oldEmail", "emailRegex", "Config", "loadValidationErrorMessages", "addMsg", "m", "k", "txt", "tryGetText", "setTooltip", "val", "show", "_a", "_b", "_c", "_d", "_e", "isBS3", "getHighlightTarget", "hl", "baseValidateOptions", "errorClass", "validClass", "elements", "error", "$el", "validateForm", "form", "opt", "extend", "addValidationRule", "eventClass", "rule", "Exception", "removeValidationRule", "oldShowLabel", "validateShowLabel", "element", "message", "i", "e", "$e", "jQueryValidationInitialization", "p", "valid", "formSubmitted", "validatorAbortHandler", "validator", "validateOptions", "options", "opt", "baseValidateOptions", "extend", "error", "field", "vx", "inner", "event", "notifyError", "localText", "x", "el", "bsPane", "bsPaneId", "$el", "hl", "getHighlightTarget", "isBS3", "label", "CriteriaBuilder", "fromInclusive", "toInclusive", "value", "values", "TOKEN_IDENTIFIER", "TOKEN_OPERATOR", "TOKEN_VALUE", "TOKEN_PARAM", "ParseError", "expression", "error", "position", "tokenize", "end", "v", "tokens", "l", "l1", "openParens", "index", "ch", "skipWhiteSpace", "readString", "foundDoubles", "readNumber", "foundDot", "readIdentifier", "readParam", "readArrayList", "w", "currentEnd", "operatorPrecedence", "shuntingYard", "result", "stack", "token", "precedence", "prev", "prevPrecedence", "tok", "rpnTokensToCriteria", "rpnTokens", "getParam", "prm", "r", "internalParse", "parseCriteria", "exprOrStrings", "name", "x", "CriteriaOperator", "Criteria", "field", "builder", "c1", "c2", "rest", "k", "c", "op"]
}
